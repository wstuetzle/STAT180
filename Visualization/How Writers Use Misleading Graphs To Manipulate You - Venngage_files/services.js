!function(t,e){sumo.define("plugins/css",[],function(){if("undefined"==typeof window)return{load:function(t,e,i){i()}};var t=document.getElementsByTagName("head")[0],e=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,i=!1,s=!0;e[1]||e[7]?i=parseInt(e[1])<6||parseInt(e[7])<=9:e[2]?s=!1:e[4]&&(i=parseInt(e[4])<18);var n={};n.pluginBuilder="./css-builder";var o,r=function(){o=document.createElement("style"),t.appendChild(o)},a=function(t,e){r();var i=o.styleSheet||o.sheet;if(i&&i.addImport)i.addImport(t),o.onload=e;else{o.textContent='@import "'+t+'";';var s=setInterval(function(){try{o.sheet.cssRules,clearInterval(s),e()}catch(t){}},10)}},l=function(e,i){var n=document.createElement("link");if(n.type="text/css",n.rel="stylesheet",s)n.onload=function(){n.onload=function(){},setTimeout(i,7)};else var o=setInterval(function(){for(var t=0;t<document.styleSheets.length;t++){if(document.styleSheets[t].href==n.href)return clearInterval(o),i()}},10);n.href=e,t.appendChild(n)};return n.normalize=function(t,e){return".css"==t.substr(t.length-4,4)&&(t=t.substr(0,t.length-4)),e(t)},n.load=function(t,e,s,n){(i?a:l)(e.toUrl(t+".css"),s)},n}),sumo.define("babel",{}),sumo.define("es6",["babel","module"],function(t,e){"use strict";var i,s={};return"undefined"!=typeof window&&window.navigator&&window.document?i=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(t){4===i.readyState&&e(i.responseText)},i.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node&&(fs=require.nodeRequire("fs"),i=function(t,e){e(fs.readFileSync(t,"utf8"))}),{version:"0.1.6",load:function(e,n,o,r){var a=r.babel||{},l=r.es6||{},c=l.fileExtension||".es6",u=n.toUrl(e+c),h={sourceMaps:!r.isBuild&&"inline",sourceFileName:e};for(var d in h)a[d]=h[d];i(u,function(i){try{var n=t.transform(i,a).code}catch(t){o.error(t)}r.isBuild&&(s[e]=n),o.fromText(n)})},write:function(t,e,i){e in s&&i.asModule(t+"!"+e,s[e])}}}),sumo.define("es6!launcher/util/constants",[],function(){var t={service:{title:"Service",feature:"services"}},e=[{name:"Analytics",subItems:[{name:"Dashboard",appId:"dashboard",isCore:"true"},{name:"Google Analytics",appId:"googleanalytics"},{name:"Heat Maps",appId:"heatmaps"},{name:"Content Analytics",appId:"content-analytics"}]},{name:"Forms",subItems:[{name:"List Builder",appId:"156085c5-0017-4150-b225-a731ad248f38"},{name:"List Builder",appId:"8dc42610-ae42-4164-90b1-573478b46574"},{name:"Welcome Mat",appId:"4802de2d-b003-4fc4-8d07-901abb51e683"},{name:"Smart Bar",appId:"408190b5-e369-48af-8e31-afb7380ecd66"},{name:"Scroll Box",appId:"scrollbox"},{name:"Contact Form",appId:"contact-form"}]},{name:"Messages",appId:"messages",subItems:[{name:"Emails",appId:"messagecenter",isCore:!0},{name:"Chat",appId:"chat",isCore:!0}]},{name:"Subscribers",appId:"subscribers"},{name:"Social",subItems:[{name:"Share",appId:"share"},{name:"Image Sharer",appId:"image-sharer"},{name:"Highlighter",appId:"highlighter"}]}],i="notifications",s="messagecenter",n="[24hrCountdown]",o=60,r=[{label:"Email",value:"email"},{label:"Push Notification",value:"push"}],a="subscribers";return{APP_ID:"launcher",SLUG_TO_FEATURE:t,GOOGLE_ANALYTICS_APP_ID:"674d3d92-3a9f-4620-99f6-ff856d18423d",SUMO_STORE_ID:"c9a64ad6-0863-4b66-bc0c-ef0fb5ef15d0",SUMO_HELP_ID:"94c05087-064a-411d-97a8-e3c8c8fdb70e",SETTINGS_ID:"5d26e2da-aef5-41c1-947a-624497281723",HIGHLIGHTER_APP_UUID:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",CONTENT_ANALYTICS_APP_UUID:"a25489e9-848c-4356-97ff-161b0852c509",CONTACT_FORM_APP_UUID:"822aaf16-c4d6-4241-911a-41567c68b443",SHARE_APP_UUID:"9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1",DASHBOARD_APP_UUID:"8a92832c-ad3b-4d7a-9154-22856aa1d9e9",HEAT_MAPS_APP_UUID:"2c40add5-3570-45d7-8212-8fc2942f7f74",IMAGE_SHARER_APP_UUID:"55c989d5-855d-4538-b67b-3cdb46acd968",LIST_BUILDER_3_APP_UUID:"156085c5-0017-4150-b225-a731ad248f38",SCROLL_BOX_APP_UUID:"13359558-e447-43f3-a3cd-aa61c0b91c02",SIDEBAR_ITEMS:e,CHAT_APP_UUID:"def79cfc-384b-45dd-b6b0-71ee6639860d",CHAT_OBJECT_ID:"f5104759-c678-40f2-8809-add44b178274",NOTIFICATIONS_APP_ID:"notifications",NOTIFICATIONS_APP_UUID:"ee27a0af-9947-40c9-8eab-0ab6a4f7a9c1",APP_STORE_ID:"c9a64ad6-0863-4b66-bc0c-ef0fb5ef15d0",COUNTDOWN_PLACEHOLDER:"[24hrCountdown]",NOTIFICATION_HEIGHT:60,MESSAGECENTER_APP_ID:"messagecenter",MessageTypes:r,MessageFilters:{messageTypes:r,statuses:["queued","sending","sent","active","inactive","deleted","paused"]},SUBSCRIBERS_APP_ID:"subscribers",SUBSCRIBERS_APP_UUID:"c0b81e54-d408-4ee2-911b-46108f8b6e66",SearchFilters:[{key:"name",label:"Name",filters:[{key:"contains",label:"contains"}]},{key:"email",label:"Email Address",filters:[{key:"contains",label:"contains"}]},{key:"created",label:"Signed Up",filters:[{key:"is",label:"on",type:"date"},{key:"before",label:"before",type:"date"},{key:"after",label:"after",type:"date"}]},{key:"country",label:"Country",filters:[{key:"is",label:"is"}]},{key:"source",label:"Source",filters:[{key:"is",label:"is"}]},{key:"type",label:"Type",filters:[{key:"exists",label:"exists"}]}]}});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(e){"function"==typeof sumo.define&&sumo.define.amd?sumo.define("jquery.cookie",["jquery"],e):e("object"===(void 0===t?"undefined":i(t))?require("jquery"):jQuery)}(function(t){function e(t){return a.raw?t:encodeURIComponent(t)}function i(t){return a.raw?t:decodeURIComponent(t)}function s(t){return e(a.json?JSON.stringify(t):String(t))}function n(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(r," ")),a.json?JSON.parse(t):t}catch(t){}}function o(e,i){var s=a.raw?e:n(e);return t.isFunction(i)?i(s):s}var r=/\+/g,a=t.cookie=function(n,r,l){if(void 0!==r&&!t.isFunction(r)){if(l=t.extend({},a.defaults,l),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setTime(+u+864e5*c)}return document.cookie=[e(n),"=",s(r),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var h=n?void 0:{},d=document.cookie?document.cookie.split("; "):[],m=0,p=d.length;m<p;m++){var f=d[m].split("="),g=i(f.shift()),v=f.join("=");if(n&&n===g){h=o(v,r);break}n||void 0===(v=o(v))||(h[g]=v)}return h};a.defaults={},t.removeCookie=function(e,i){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},i,{expires:-1})),!t.cookie(e))}}),function(){var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],e=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,s="undefined"!=typeof location&&location.href,n=s&&location.protocol&&location.protocol.replace(/\:/,""),o=s&&location.hostname,r=s&&(location.port||void 0),a=[];sumo.define("plugins/text",[],function(){var l,c,u;return"undefined"!=typeof window&&window.navigator&&window.document?c=function(t,e){var i=l.createXhr();i.open("GET",t,!0),i.onreadystatechange=function(){4===i.readyState&&e(i.responseText)},i.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node?(u=require.nodeRequire("fs"),c=function(t,e){e(u.readFileSync(t,"utf8"))}):"undefined"!=typeof Packages&&(c=function(t,e){var i=new java.io.File(t),s=java.lang.System.getProperty("line.separator"),i=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),"utf-8")),n,o,r="";try{for(n=new java.lang.StringBuffer,(o=i.readLine())&&o.length()&&65279===o.charAt(0)&&(o=o.substring(1)),n.append(o);null!==(o=i.readLine());)n.append(s),n.append(o);r=String(n.toString())}finally{i.close()}e(r)}),l={version:"1.0.2",strip:function(t){if(t){var t=t.replace(e,""),s=t.match(i);s&&(t=s[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var e,i,s;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(i=0;i<3;i++){s=t[i];try{e=new ActiveXObject(s)}catch(t){}if(e){t=[s];break}}if(!e)throw Error("createXhr(): XMLHttpRequest not available");return e},get:c,parseName:function(t){var e=!1,i=t.indexOf("."),s=t.substring(0,i),t=t.substring(i+1,t.length),i=t.indexOf("!");return-1!==i&&(e=t.substring(i+1,t.length),e="strip"===e,t=t.substring(0,i)),{moduleName:s,ext:t,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,i,s){var n=l.xdRegExp.exec(t),o;return!n||(t=n[2],n=n[3],n=n.split(":"),o=n[1],n=n[0],!(t&&t!==e||n&&n!==i||(o||n)&&o!==s))},finishLoad:function(t,e,i,s,n){i=e?l.strip(i):i,n.isBuild&&(a[t]=i),s(i)},load:function(t,e,i,a){if(a.isBuild&&!a.inlineText)i();else{var c=l.parseName(t),u=c.moduleName+"."+c.ext,h=e.toUrl(u),d=a&&a.text&&a.text.useXhr||l.useXhr;!s||d(h,n,o,r)?l.get(h,function(e){l.finishLoad(t,c.strip,e,i,a)}):e([u],function(t){l.finishLoad(c.moduleName+"."+c.ext,c.strip,t,i,a)})}},write:function(t,e,i){if(e in a){var s=l.jsEscape(a[e]);i.asModule(t+"!"+e,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,e,i,s,n){var e=l.parseName(e),o=e.moduleName+"."+e.ext,r=i.toUrl(e.moduleName+"."+e.ext)+".js";l.load(o,i,function(){var e=function(t){return s(r,t)};e.asModule=function(t,e){return s.asModule(t,r,e)},l.write(t,o,e,n)},n)}}})}(),sumo.define("plugins/text!highlighter/templates/highlighter.html",[],function(){return'<div id="sumo_twilighter_div" class="sumo_highlighter_desktop" style="display:none">\n  <textarea id="sumo_twilighter_input" class="sumo_twilighter_textarea"></textarea>\n  <div class="sumo_twilighter_admin_highlight" style="display:none;">\n    <a href="javascript:void(0);">Save Highlight</a>\n  </div>\n  <div class="sumo_twilighter_admin" style="display:none;">\n    <a href="javascript:void(0);">Delete Highlight</a>\n  </div>\n  <br>\n  <div class="sumo_twilighter_tweet">\n    <a id="sumo_twilighter_btn" href="javascript:void(0);" alt ="Tweet this">\n      <img class="btn-icon">\n      <span class="btn-text">Tweet</span>\n    </a>\n  </div>\n  <div class="sumo_twilighter_fb">\n    <a id="sumo_twilighter_btn_fb" href="javascript:void(0);" alt="Facebook Share This">\n      <img class="btn-icon">\n      <span class="btn-text">Share</span>\n    </a>\n  </div>\n  <div class="sumo_twilighter_remaining"></div>\n</div>\n'}),sumo.define("plugins/text!highlighter/templates/highlighter_mobile.html",[],function(){return'<div id="sumo_twilighter_div" class="sumo_highlighter_mobile" style="display:none">\n  <div class="sumo_highlighter_m_right">\n    <div class="sumo_twilighter_m_tweet">\n      <a id="sumo_twilighter_btn" href="javascript:void(0);" alt="Tweet this">\n        <i class="btn-icon"></i>\n      </a>\n    </div>\n    <div class="sumo_twilighter_m_fb">\n      <a id="sumo_twilighter_btn_fb" href="javascript:void(0);" alt="Facebook Share This">\n        <i class="btn-icon"></i>\n      </a>\n    </div>\n  </div>\n  <div class="sumo_twilighter_m_input_div">\n    <input id="sumo_twilighter_input" type="text" class="sumo_twilighter_m_input" />\n  </div>\n</div>\n'}),sumo.define("twitter-text",[],function(){function t(t,e){return e=e||"","string"!=typeof t&&(t.global&&e.indexOf("g")<0&&(e+="g"),t.ignoreCase&&e.indexOf("i")<0&&(e+="i"),t.multiline&&e.indexOf("m")<0&&(e+="m"),t=t.source),new RegExp(t.replace(/#\{(\w+)\}/g,function(t,e){var s=i.txt.regexen[e]||"";return"string"!=typeof s&&(s=s.source),s}),e)}function e(t,e){return t.replace(/#\{(\w+)\}/g,function(t,i){return e[i]||""})}var i={};return i.txt={},i.txt.regexen={},i.txt.regexSupplant=t,i.txt.stringSupplant=e,i.txt.regexen.spaces_group=/\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000/,i.txt.regexen.invalid_chars_group=/\uFFFE\uFEFF\uFFFF\u202A-\u202E/,i.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,i.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm,i.txt.regexen.latinAccentChars=/\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0100-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u1E00-\u1EFF/,i.txt.regexen.validUrlPrecedingChars=t(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),i.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,i.txt.regexen.invalidDomainChars=e("#{punct}#{spaces_group}#{invalid_chars_group}",i.txt.regexen),i.txt.regexen.validDomainChars=t(/[^#{invalidDomainChars}]/),i.txt.regexen.validSubdomain=t(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),i.txt.regexen.validDomainName=t(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),i.txt.regexen.validGTLD=t(RegExp("(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|شبكة|بيتك|بازار|العليان|ارامكو|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@]|$))")),i.txt.regexen.validCCTLD=t(RegExp("(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@]|$))")),i.txt.regexen.validPunycode=/(?:xn--[0-9a-z]+)/,i.txt.regexen.validSpecialCCTLD=/(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))/,i.txt.regexen.validDomain=t(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),i.txt.regexen.validAsciiDomain=t(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),i.txt.regexen.invalidShortDomain=t(/^#{validDomainName}#{validCCTLD}$/i),i.txt.regexen.validSpecialShortDomain=t(/^#{validDomainName}#{validSpecialCCTLD}$/i),i.txt.regexen.validPortNumber=/[0-9]+/,i.txt.regexen.cyrillicLettersAndMarks=/\u0400-\u04FF/,i.txt.regexen.validGeneralUrlPathChars=t(/[a-z#{cyrillicLettersAndMarks}0-9!\*';:=\+,\.\$\/%#\[\]\-_~@\|&#{latinAccentChars}]/i),i.txt.regexen.validUrlBalancedParens=t("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),i.txt.regexen.validUrlPathEndingChars=t(/[\+\-a-z#{cyrillicLettersAndMarks}0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),i.txt.regexen.validUrlPath=t("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),i.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,i.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,i.txt.regexen.extractUrl=t("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),i.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,i.txt.regexen.urlHasHttps=/^https:\/\//i,i.txt.extractUrlsWithIndices=function(t,e){if(e||(e={extractUrlsWithoutProtocol:!0}),!t||(e.extractUrlsWithoutProtocol?!t.match(/\./):!t.match(/:/)))return[];for(var s=[];i.txt.regexen.extractUrl.exec(t);){var n=RegExp.$2,o=RegExp.$3,r=RegExp.$4,a=RegExp.$5,l=RegExp.$7,c=i.txt.regexen.extractUrl.lastIndex,u=c-o.length;if(r)o.match(i.txt.regexen.validTcoUrl)&&(o=RegExp.lastMatch,c=u+o.length),s.push({url:o,indices:[u,c]});else{if(!e.extractUrlsWithoutProtocol||n.match(i.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var h=null,d=0;if(a.replace(i.txt.regexen.validAsciiDomain,function(t){var e=a.indexOf(t,d);d=e+t.length,h={url:t,indices:[u+e,u+d]},(l||t.match(i.txt.regexen.validSpecialShortDomain)||!t.match(i.txt.regexen.invalidShortDomain))&&s.push(h)}),null==h)continue;l&&(h.url=o.replace(a,h.url),h.indices[1]=c)}}return s},i.txt.modifyIndicesFromUTF16ToUnicode=function(t,e){i.txt.convertUnicodeIndices(t,e,!0)},i.txt.getUnicodeTextLength=function(t){return t.replace(i.txt.regexen.non_bmp_code_pairs," ").length},i.txt.convertUnicodeIndices=function(t,e,i){if(0!=e.length){var s=0,n=0;e.sort(function(t,e){return t.indices[0]-e.indices[0]});for(var o=0,r=e[0];s<t.length;){if(r.indices[0]==(i?s:n)){var a=r.indices[1]-r.indices[0];if(r.indices[0]=i?n:s,r.indices[1]=r.indices[0]+a,++o==e.length)break;r=e[o]}var l=t.charCodeAt(s);55296<=l&&l<=56319&&s<t.length-1&&56320<=(l=t.charCodeAt(s+1))&&l<=57343&&s++,n++,s++}}},i.txt.getTweetLength=function(t,e){e||(e={short_url_length:23,short_url_length_https:23});var s=i.txt.getUnicodeTextLength(t),n=i.txt.extractUrlsWithIndices(t);i.txt.modifyIndicesFromUTF16ToUnicode(t,n);for(var o=0;o<n.length;o++)s+=n[o].indices[0]-n[o].indices[1],n[o].url.toLowerCase().match(i.txt.regexen.urlHasHttps)?s+=e.short_url_length_https:s+=e.short_url_length;return s},i}),sumo.define("jquery.style",["jquery"],function(t){if(!t.fn.style){var e=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};!!CSSStyleDeclaration.prototype.getPropertyValue||(CSSStyleDeclaration.prototype.getPropertyValue=function(t){return this.getAttribute(t)},CSSStyleDeclaration.prototype.setProperty=function(t,i,s){this.setAttribute(t,i);var s=void 0!==s?s:"";if(""!=s){var n=new RegExp(e(t)+"\\s*:\\s*"+e(i)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(n,t+": "+i+" !"+s+";")}},CSSStyleDeclaration.prototype.removeProperty=function(t){return this.removeAttribute(t)},CSSStyleDeclaration.prototype.getPropertyPriority=function(t){return new RegExp(e(t)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi").test(this.cssText)?"important":""}),t.fn.style=function(t,e,i){if(void 0===this.get(0))return this;var s=this.get(0).style;return void 0!==t?void 0!==e?(i="important"==i?i:"","important"!=i&&"important"==s.getPropertyPriority(t)&&s.removeProperty(t),s.setProperty(t,e,i),this):s.getPropertyValue(t):s}}}),sumo.define("punycode",function(){}),sumo.define("IPv6",function(){}),sumo.define("SecondLevelDomains",function(){}),function(i,s){"object"==typeof t?e.exports=s(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof sumo.define&&sumo.define.amd?sumo.define("URI",["./punycode","./IPv6","./SecondLevelDomains"],s):i.URI=s(i.punycode,i.IPv6,i.SecondLevelDomains,i)}(this,function(t,e,i,s){"use strict";function n(t,e){return this instanceof n?(void 0===t&&(t="undefined"!=typeof location?location.href+"":""),this.href(t),void 0!==e?this.absoluteTo(e):this):new n(t,e)}function o(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function r(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===r(t)}function l(t,e){var i={},s,n;if(a(e))for(s=0,n=e.length;s<n;s++)i[e[s]]=!0;else i[e]=!0;for(s=0,n=t.length;s<n;s++)void 0!==i[t[s]]&&(t.splice(s,1),n--,s--);return t}function c(t,e){var i,s;if(a(e)){for(i=0,s=e.length;i<s;i++)if(!c(t,e[i]))return!1;return!0}var n=r(e);for(i=0,s=t.length;i<s;i++)if("RegExp"===n){if("string"==typeof t[i]&&t[i].match(e))return!0}else if(t[i]===e)return!0;return!1}function u(t,e){if(!a(t)||!a(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var i=0,s=t.length;i<s;i++)if(t[i]!==e[i])return!1;return!0}function h(t){return escape(t)}function d(t){return encodeURIComponent(t).replace(/[!'()*]/g,h).replace(/\*/g,"%2A")}var m=s&&s.URI;n.version="1.12.0";var p=n.prototype,f=Object.prototype.hasOwnProperty;n._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:n.duplicateQueryParameters,escapeQuerySpace:n.escapeQuerySpace}},n.duplicateQueryParameters=!1,n.escapeQuerySpace=!0,n.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,n.idn_expression=/[^a-z0-9\.-]/i,n.punycode_expression=/(xn--)/i,n.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,n.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},n.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},n.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,n.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},n.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return n.domAttributes[e]}},n.encode=d,n.decode=decodeURIComponent,n.iso8859=function(){n.encode=escape,n.decode=unescape},n.unicode=function(){n.encode=d,n.decode=decodeURIComponent},n.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},n.encodeQuery=function(t,e){var i=n.encode(t+"");return e?i.replace(/%20/g,"+"):i},n.decodeQuery=function(t,e){t+="";try{return n.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}},n.recodePath=function(t){for(var e=(t+"").split("/"),i=0,s=e.length;i<s;i++)e[i]=n.encodePathSegment(n.decode(e[i]));return e.join("/")},n.decodePath=function(t){for(var e=(t+"").split("/"),i=0,s=e.length;i<s;i++)e[i]=n.decodePathSegment(e[i]);return e.join("/")};var g={encode:"encode",decode:"decode"},v,b=function(t,e){return function(i){return n[e](i+"").replace(n.characters[t][e].expression,function(i){return n.characters[t][e].map[i]})}};for(v in g)n[v+"PathSegment"]=b("pathname",g[v]);n.encodeReserved=b("reserved","encode"),n.parse=function(t,e){var i;return e||(e={}),i=t.indexOf("#"),
i>-1&&(e.fragment=t.substring(i+1)||null,t=t.substring(0,i)),i=t.indexOf("?"),i>-1&&(e.query=t.substring(i+1)||null,t=t.substring(0,i)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=n.parseAuthority(t,e)):(i=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,i)||null,e.protocol&&!e.protocol.match(n.protocol_expression)?e.protocol=void 0:"file"===e.protocol?t=t.substring(i+3):"//"===t.substring(i+1,i+3)?(t=t.substring(i+3),t=n.parseAuthority(t,e)):(t=t.substring(i+1),e.urn=!0)),e.path=t,e},n.parseHost=function(t,e){var i=t.indexOf("/"),s,n;return-1===i&&(i=t.length),"["===t.charAt(0)?(s=t.indexOf("]"),e.hostname=t.substring(1,s)||null,e.port=t.substring(s+2,i)||null):t.indexOf(":")!==t.lastIndexOf(":")?(e.hostname=t.substring(0,i)||null,e.port=null):(n=t.substring(0,i).split(":"),e.hostname=n[0]||null,e.port=n[1]||null),e.hostname&&"/"!==t.substring(i).charAt(0)&&(i++,t="/"+t),t.substring(i)||"/"},n.parseAuthority=function(t,e){return t=n.parseUserinfo(t,e),n.parseHost(t,e)},n.parseUserinfo=function(t,e){var i=t.indexOf("/"),s=i>-1?t.lastIndexOf("@",i):t.indexOf("@"),o;return s>-1&&(-1===i||s<i)?(o=t.substring(0,s).split(":"),e.username=o[0]?n.decode(o[0]):null,o.shift(),e.password=o[0]?n.decode(o.join(":")):null,t=t.substring(s+1)):(e.username=null,e.password=null),t},n.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var i={},s=t.split("&"),o=s.length,r,a,l,c=0;c<o;c++)r=s[c].split("="),a=n.decodeQuery(r.shift(),e),l=r.length?n.decodeQuery(r.join("="),e):null,i[a]?("string"==typeof i[a]&&(i[a]=[i[a]]),i[a].push(l)):i[a]=l;return i},n.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=n.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},n.buildHost=function(t){var e="";return t.hostname?(n.ip6_expression.test(t.hostname)?t.port?e+="["+t.hostname+"]:"+t.port:e+=t.hostname:(e+=t.hostname,t.port&&(e+=":"+t.port)),e):""},n.buildAuthority=function(t){return n.buildUserinfo(t)+n.buildHost(t)},n.buildUserinfo=function(t){var e="";return t.username&&(e+=n.encode(t.username),t.password&&(e+=":"+n.encode(t.password)),e+="@"),e},n.buildQuery=function(t,e,i){var s="",o,r,l,c;for(r in t)if(f.call(t,r)&&r)if(a(t[r]))for(o={},l=0,c=t[r].length;l<c;l++)void 0!==t[r][l]&&void 0===o[t[r][l]+""]&&(s+="&"+n.buildQueryParameter(r,t[r][l],i),!0!==e&&(o[t[r][l]+""]=!0));else void 0!==t[r]&&(s+="&"+n.buildQueryParameter(r,t[r],i));return s.substring(1)},n.buildQueryParameter=function(t,e,i){return n.encodeQuery(t,i)+(null!==e?"="+n.encodeQuery(e,i):"")},n.addQuery=function(t,e,i){if("object"==typeof e)for(var s in e)f.call(e,s)&&n.addQuery(t,s,e[s]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=i);"string"==typeof t[e]&&(t[e]=[t[e]]),a(i)||(i=[i]),t[e]=t[e].concat(i)}},n.removeQuery=function(t,e,i){var s,o,r;if(a(e))for(s=0,o=e.length;s<o;s++)t[e[s]]=void 0;else if("object"==typeof e)for(r in e)f.call(e,r)&&n.removeQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==i?t[e]===i?t[e]=void 0:a(t[e])&&(t[e]=l(t[e],i)):t[e]=void 0}},n.hasQuery=function(t,e,i,s){if("object"==typeof e){for(var o in e)if(f.call(e,o)&&!n.hasQuery(t,o,e[o]))return!1;return!0}if("string"!=typeof e)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(r(i)){case"Undefined":return e in t;case"Boolean":return i===Boolean(a(t[e])?t[e].length:t[e]);case"Function":return!!i(t[e],e,t);case"Array":if(!a(t[e]))return!1;return(s?c:u)(t[e],i);case"RegExp":return a(t[e])?!!s&&c(t[e],i):Boolean(t[e]&&t[e].match(i));case"Number":i=String(i);case"String":return a(t[e])?!!s&&c(t[e],i):t[e]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},n.commonPath=function(t,e){var i=Math.min(t.length,e.length),s;for(s=0;s<i;s++)if(t.charAt(s)!==e.charAt(s)){s--;break}return s<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(s)&&"/"===e.charAt(s)||(s=t.substring(0,s).lastIndexOf("/")),t.substring(0,s+1))},n.withinString=function(t,e,i){i||(i={});var s=i.start||n.findUri.start,o=i.end||n.findUri.end,r=i.trim||n.findUri.trim,a=/[a-z0-9-]=["']?$/i;for(s.lastIndex=0;;){var l=s.exec(t);if(!l)break;var c=l.index;if(i.ignoreHtml){var u=t.slice(Math.max(c-3,0),c);if(u&&a.test(u))continue}var h=c+t.slice(c).search(o),d=t.slice(c,h).replace(r,"");if(!i.ignore||!i.ignore.test(d)){h=c+d.length;var m=e(d,c,h,t);t=t.slice(0,c)+m+t.slice(h),s.lastIndex=c+m.length}}return s.lastIndex=0,t},n.ensureValidHostname=function(e){if(e.match(n.invalid_hostname_characters)){if(!t)throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(t.toASCII(e).match(n.invalid_hostname_characters))throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-]")}},n.noConflict=function(t){if(t){var i={URI:this.noConflict()};return URITemplate&&"function"==typeof URITemplate.noConflict&&(i.URITemplate=URITemplate.noConflict()),e&&"function"==typeof e.noConflict&&(i.IPv6=e.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(i.SecondLevelDomains=SecondLevelDomains.noConflict()),i}return s.URI===this&&(s.URI=m),this},p.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=n.build(this._parts),this._deferred_build=!1),this},p.clone=function(){return new n(this)},p.valueOf=p.toString=function(){return this.build(!1)._string},g={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},b=function(t){return function(e,i){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!i),this)}};for(v in g)p[v]=b(g[v]);g={query:"?",fragment:"#"},b=function(t,e){return function(i,s){return void 0===i?this._parts[t]||"":(null!==i&&(i+="",i.charAt(0)===e&&(i=i.substring(1))),this._parts[t]=i,this.build(!s),this)}};for(v in g)p[v]=b(v,g[v]);g={search:["?","query"],hash:["#","fragment"]},b=function(t,e){return function(i,s){var n=this[t](i,s);return"string"==typeof n&&n.length?e+n:n}};for(v in g)p[v]=b(g[v][1],g[v][0]);p.pathname=function(t,e){if(void 0===t||!0===t){var i=this._parts.path||(this._parts.hostname?"/":"");return t?n.decodePath(i):i}return this._parts.path=t?n.recodePath(t):"/",this.build(!e),this},p.path=p.pathname,p.href=function(t,e){var i;if(void 0===t)return this.toString();this._string="",this._parts=n._parts();var s=t instanceof n,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){t=t[n.getDomAttribute(t)]||"",o=!1}if(!s&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t)this._parts=n.parse(t,this._parts);else{if(!s&&!o)throw new TypeError("invalid input");var r=s?t._parts:t;for(i in r)f.call(this._parts,i)&&(this._parts[i]=r[i])}return this.build(!e),this},p.is=function(t){var e=!1,s=!1,o=!1,r=!1,a=!1,l=!1,c=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,s=n.ip4_expression.test(this._parts.hostname),o=n.ip6_expression.test(this._parts.hostname),e=s||o,r=!e,a=r&&i&&i.has(this._parts.hostname),l=r&&n.idn_expression.test(this._parts.hostname),c=r&&n.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return r;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return s;case"ip6":case"ipv6":case"inet6":return o;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var y=p.protocol,w=p.port,x=p.hostname;p.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),!t.match(n.protocol_expression)))throw new TypeError("Protocol '"+t+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return y.call(this,t,e)},p.scheme=p.protocol,p.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError("Port '"+t+"' contains characters other than [0-9]");return w.call(this,t,e)},p.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var i={};n.parseHost(t,i),t=i.hostname}return x.call(this,t,e)},p.host=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?n.buildHost(this._parts):"":(n.parseHost(t,this._parts),this.build(!e),this)},p.authority=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?n.buildAuthority(this._parts):"":(n.parseAuthority(t,this._parts),this.build(!e),this)},p.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var i=n.buildUserinfo(this._parts);return i.substring(0,i.length-1)}return"@"!==t[t.length-1]&&(t+="@"),n.parseUserinfo(t,this._parts),this.build(!e),this},p.resource=function(t,e){var i;return void 0===t?this.path()+this.search()+this.hash():(i=n.parse(t),this._parts.path=i.path,this._parts.query=i.query,this._parts.fragment=i.fragment,this.build(!e),this)},p.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,i)||""}var s=this._parts.hostname.length-this.domain().length,r=this._parts.hostname.substring(0,s),a=new RegExp("^"+o(r));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&n.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},p.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.match(/\./g);if(i&&i.length<2)return this._parts.hostname;var s=this._parts.hostname.length-this.tld(e).length-1;return s=this._parts.hostname.lastIndexOf(".",s-1)+1,this._parts.hostname.substring(s)||""}if(!t)throw new TypeError("cannot set domain empty");if(n.ensureValidHostname(t),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var r=new RegExp(o(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(r,t)}return this.build(!e),this},p.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var s=this._parts.hostname.lastIndexOf("."),n=this._parts.hostname.substring(s+1);return!0!==e&&i&&i.list[n.toLowerCase()]?i.get(this._parts.hostname)||n:n}var r;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!i||!i.is(t))throw new TypeError("TLD '"+t+"' contains characters other than [A-Z0-9]");r=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");r=new RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,t)}return this.build(!e),this},p.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var i=this._parts.path.length-this.filename().length-1,s=this._parts.path.substring(0,i)||(this._parts.hostname?"/":"");return t?n.decodePath(s):s}var r=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,r),l=new RegExp("^"+o(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=n.recodePath(t),this._parts.path=this._parts.path.replace(l,t),this.build(!e),this},p.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var i=this._parts.path.lastIndexOf("/"),s=this._parts.path.substring(i+1);return t?n.decodePathSegment(s):s}var r=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(r=!0);var a=new RegExp(o(this.filename())+"$");return t=n.recodePath(t),this._parts.path=this._parts.path.replace(a,t),r?this.normalizePath(e):this.build(!e),this},p.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var i=this.filename(),s=i.lastIndexOf("."),r,a;return-1===s?"":(r=i.substring(s+1),a=/^[a-z0-9%]+$/i.test(r)?r:"",t?n.decodePathSegment(a):a)}"."===t.charAt(0)&&(t=t.substring(1));var l=this.suffix(),c;if(l)c=t?new RegExp(o(l)+"$"):new RegExp(o("."+l)+"$");else{if(!t)return this;this._parts.path+="."+n.recodePath(t)}return c&&(t=n.recodePath(t),this._parts.path=this._parts.path.replace(c,t)),this.build(!e),this},p.segment=function(t,e,i){var s=this._parts.urn?":":"/",n=this.path(),o="/"===n.substring(0,1),r=n.split(s);if(void 0!==t&&"number"!=typeof t&&(i=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error("Bad segment '"+t+"', must be 0-based integer");if(o&&r.shift(),t<0&&(t=Math.max(r.length+t,0)),void 0===e)return void 0===t?r:r[t];if(null===t||void 0===r[t])if(a(e)){r=[];for(var l=0,c=e.length;l<c;l++)(e[l].length||r.length&&r[r.length-1].length)&&(r.length&&!r[r.length-1].length&&r.pop(),r.push(e[l]))}else(e||"string"==typeof e)&&(""===r[r.length-1]?r[r.length-1]=e:r.push(e));else e||"string"==typeof e&&e.length?r[t]=e:r.splice(t,1);return o&&r.unshift(""),this.path(r.join(s),i)},p.segmentCoded=function(t,e,i){var s,o,r;if("number"!=typeof t&&(i=e,e=t,t=void 0),void 0===e){if(s=this.segment(t,e,i),a(s))for(o=0,r=s.length;o<r;o++)s[o]=n.decode(s[o]);else s=void 0!==s?n.decode(s):void 0;return s}if(a(e))for(o=0,r=e.length;o<r;o++)e[o]=n.decode(e[o]);else e="string"==typeof e?n.encode(e):e;return this.segment(t,e,i)};var _=p.query;return p.query=function(t,e){if(!0===t)return n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace),s=t.call(this,i);return this._parts.query=n.buildQuery(s||i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=n.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):_.call(this,t,e)},p.setQuery=function(t,e,i){var s=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof t)for(var o in t)f.call(t,o)&&(s[o]=t[o]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");s[t]=void 0!==e?e:null}return this._parts.query=n.buildQuery(s,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(i=e),this.build(!i),this},p.addQuery=function(t,e,i){var s=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.addQuery(s,t,void 0===e?null:e),this._parts.query=n.buildQuery(s,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(i=e),this.build(!i),this},p.removeQuery=function(t,e,i){var s=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.removeQuery(s,t,e),this._parts.query=n.buildQuery(s,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(i=e),this.build(!i),this},p.hasQuery=function(t,e,i){var s=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.hasQuery(s,t,e,i)},p.setSearch=p.setQuery,p.addSearch=p.addQuery,p.removeSearch=p.removeQuery,p.hasSearch=p.hasQuery,p.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},p.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},p.normalizeHostname=function(i){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!i)),this},p.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===n.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},p.normalizePath=function(t){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var e,i=this._parts.path,s="",o,r;for("/"!==i.charAt(0)&&(e=!0,i="/"+i),i=i.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(s=i.substring(1).match(/^(\.\.\/)+/)||"")&&(s=s[0]);;){if(-1===(o=i.indexOf("/..")))break;0!==o?(r=i.substring(0,o).lastIndexOf("/"),-1===r&&(r=o),i=i.substring(0,r)+i.substring(o+3)):i=i.substring(3)}return e&&this.is("relative")&&(i=s+i.substring(1)),i=n.recodePath(i),this._parts.path=i,this.build(!t),this},p.normalizePathname=p.normalizePath,p.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(n.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},p.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},p.normalizeSearch=p.normalizeQuery,p.normalizeHash=p.normalizeFragment,p.iso8859=function(){var t=n.encode,e=n.decode;return n.encode=escape,n.decode=decodeURIComponent,this.normalize(),n.encode=t,n.decode=e,this},p.unicode=function(){var t=n.encode,e=n.decode;return n.encode=d,n.decode=unescape,this.normalize(),n.encode=t,n.decode=e,this},p.readable=function(){var e=this.clone();e.username("").password("").normalize();var i="";if(e._parts.protocol&&(i+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(i+=t.toUnicode(e._parts.hostname),e._parts.port&&(i+=":"+e._parts.port)):i+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(i+="/"),i+=e.path(!0),e._parts.query){for(var s="",o=0,r=e._parts.query.split("&"),a=r.length;o<a;o++){var l=(r[o]||"").split("=");s+="&"+n.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(s+="="+n.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}i+="?"+s.substring(1)}return i+=n.decodeQuery(e.hash(),!0)},p.absoluteTo=function(t){var e=this.clone(),i=["protocol","username","password","hostname","port"],s,o,r;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof n||(t=new n(t)),e._parts.protocol||(e._parts.protocol=t._parts.protocol),this._parts.hostname)return e;for(o=0;r=i[o];o++)e._parts[r]=t._parts[r];return e._parts.path?".."===e._parts.path.substring(-2)&&(e._parts.path+="/"):(e._parts.path=t._parts.path,e._parts.query||(e._parts.query=t._parts.query)),"/"!==e.path().charAt(0)&&(s=t.directory(),e._parts.path=(s?s+"/":"")+e._parts.path,e.normalizePath()),e.build(),e},p.relativeTo=function(t){var e=this.clone().normalize(),i,s,o,r,a;if(e._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new n(t).normalize(),i=e._parts,s=t._parts,r=e.path(),a=t.path(),"/"!==r.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(i.protocol===s.protocol&&(i.protocol=null),i.username!==s.username||i.password!==s.password)return e.build();if(null!==i.protocol||null!==i.username||null!==i.password)return e.build();if(i.hostname!==s.hostname||i.port!==s.port)return e.build();if(i.hostname=null,i.port=null,r===a)return i.path="",e.build();if(!(o=n.commonPath(e.path(),t.path())))return e.build();var l=s.path.substring(o.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return i.path=l+i.path.substring(o.length),e.build()},p.equals=function(t){var e=this.clone(),i=new n(t),s={},o={},r={},l,c,h;if(e.normalize(),i.normalize(),e.toString()===i.toString())return!0;if(l=e.query(),c=i.query(),e.query(""),i.query(""),e.toString()!==i.toString())return!1;if(l.length!==c.length)return!1;s=n.parseQuery(l,this._parts.escapeQuerySpace),o=n.parseQuery(c,this._parts.escapeQuerySpace);for(h in s)if(f.call(s,h)){if(a(s[h])){if(!u(s[h],o[h]))return!1}else if(s[h]!==o[h])return!1;r[h]=!0}for(h in o)if(f.call(o,h)&&!r[h])return!1;return!0},p.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},p.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},n}),sumo.define("jquery.article",["jquery"],function(t){t.expr[":"].emptytext=t.expr.createPseudo(function(e){return function(e){return""===t.trim(t(e).text())}}),t.fn.findIncludeSelf=function(e,i){var s;return s=":has(> p + p + p)"==e?this.find("p + p + p").parent():this.find(e),t(this).is(i)?s:s.addBack(e)},t.fn.exists=function(){return 0!==this.length},t.fn.findLeaves=function(i,s){var n=t(this),o=n.findIncludeSelf(i,"body").filter(s);return o=o.filter(e),o.filter(function(){return!t(this).find(o).exists()})},t.fn.findTrunks=function(i,s){var n=t(this),o=n.findIncludeSelf(i,"body").filter(s);return o=o.filter(e),o.filter(function(){return!t(this).parents().filter(o).exists()})};var e=function(){if(this._header||(this._header=s(t(this))),this._titleText||(this._titleText=r(this)),this._header){var e=.666*t(this).outerHeight();if(e&&this._header.outerHeight()>=e)return!1}return!0},i=function(e){var i=e||t("body").find("main, [role=main]").eq(0).get(0)||"body",s=t(),n=':not("[class^=comment],[id^=comment],[class*=footer],.sidebar:not(body) *,aside *,#sidebar *,footer *,[class*=footer]:not(body, [class*=not-footer]) *,#comments *,#livefyre-comments *,[class^=fyre] *,[class^=comment],[id^=comment] *,[class*=related-post]:not(body) *,.archive-page,.aside,.hentry-metro,.hrf-entry,:emptytext,.tve-leads-lightbox article")',o=[];o.push("article"),o.push(".post"),o.push(".entry-content"),o.push(".post-content"),o.push(".post_box"),o.push(".post-item"),o.push(".blog-post-wrapper"),o.push(".type-post"),o.push("#content"),o.push(".blog_content"),"body"!=i?(o.push(".hentry"),o.push(".content")):(o.push("main .hentry"),o.push("[role=main] .hentry"),o.push("main .content"),o.push("[role=main] .content")),o.push("#post-content"),o.push("#blog-content"),o.push(".blog-post");for(var r=[":has(> p + p + p)"],a=0;a<o.length;a++)if(s=t(i).findLeaves(o[a],n),s.length>0)return s;for(var a=0;a<r.length;a++)if(s=t(i).findTrunks(r[a],n),s.length>0)return s;var s,l,c,u;return s},s=function(e){var i=null,s=[".main-title","header",".post-header",".post-title","h1","h2","h3","h4","h5","h6",".title",".headline"],n={};try{s.forEach(function(s){if(i=t(e).find(s),i.length>0)throw n})}catch(t){if(t===n)return i.eq(0);throw t}return null},n=function(e){var i=null,s=[".fyre","footer",".post-footer",".footer",".entry-footer",'[class^="comment"]:not(.post-meta-info *, [class^=comment-count], [class^=comments-link], [class^=comments-number], li)',".fb-comments","iframe[title=Disqus]","#disqus_thread"],n={};try{s.forEach(function(s){if(i=t(e).find(s),i.length>0)throw n})}catch(t){if(t===n)return i.eq(0).hasClass("fb-comments")&&i.eq(0).prev("h3 + p").length>0?i.eq(0).prev("h3 + p").prev("h3"):i.eq(0);throw t}return null},o=function(t){return s(t)},r=function(t){var e=null;return!t._title&&t._header&&(t._title=t._header),t._title&&(e=t._title.text().trim()),e},a=function(e){var i=null,s=["a[rel=bookmark]","h1 > a","h2 > a","h3 > a","header > a"],n={};try{s.forEach(function(s){if(i=t(e).find(s).filter("[href]"),i.length>0)throw n})}catch(t){if(t===n)return i.eq(0);throw t}return null};t.articles=function(e){if("__smCache"in window&&"articles"in window.__smCache)return window.__smCache.articles;var l=i(e);return l.each(function(){this._header||(this._header=s(t(this))),this._footer=n(t(this)),this._title=this._header?o(this._header):null,this._titleText||(this._titleText=r(this));var e=this._header?a(this._header):null;this._anchor=e||a(t(this)),this._anchor?this._url=this._anchor.attr("href"):this._url=null,this._url||(this._url=window.location.href)}),"__smDebug"in window&&window.__smDebug&&l.each(function(){t(this).css("background","rgba(0,0,255,.5)"),this._header&&this._header.css("background","rgba(0,255,0,.5)"),this._title&&this._title.css("background","rgba(255,0,0,.5)"),this._footer&&this._footer.css("background","rgba(255,255,0,.5)")}),"__smCache"in window||(window.__smCache={}),window.__smCache.articles=l,setTimeout(function(){"__smCache"in window&&delete window.__smCache.articles},1e4),l},t.article=function(){return t.articles().eq(0)}}),sumo.define("jquery.displayrules",["jquery","URI","jquery.article"],function(t,e){t.isCurrentUrlAllowed=function(i,s,n,o){function r(t,e,i,s){var n=[];if(t&&t.length)for(var o=0;o<t.length;o++){var r=t[o];if("object"==typeof r&&r.hasOwnProperty(e)&&r[e]==i&&(n.push(r),s))return n[0]}return s?null:n}if(i&&i.length){var a=r(i,"filter_type","article",!0),l=[];a&&(l=t.articles()),n||(n=!1);var c=function(t){for(var e=Object.keys(t),i=e.length,s=Array(i),n=0;n<i;n++)s[n]=[e[n],t[e[n]]];return s},u=function(t){var e=c(t),i=e.length;return function(t){if(null==t)return!i;t=new Object(t);for(var s=0;s<i;s++){var n=e[s],o=n[0];if(n[1]!==t[o]||!(o in t))return!1}return!0}},h=function(t){var t=t.substr(1).split("&");if(""==t)return{};for(var e={},i=0;i<t.length;++i){var s=t[i].split("=",2);if(1==s.length)e[s[0]]="";else try{e[s[0]]=decodeURIComponent(s[1].replace(/\+/g," "))}catch(t){e[s[0]]=s[1].replace(/\+/g," ")}}return e},d=function(t,e,i){if(t.has_hash&&t.hash!=e)return!1;if(t.has_query_params){var s=h(t.search),n=h(i);if(u(s)(n))return!0;if(!(["containing","beginning"].indexOf(t.filter_type)>=0))return!1;for(var o=!0,r=Object.keys(s),a=0;a<r.length;a++){var l=r[a],c=s[r[a]];if(c&&c.length)if(l in n){if(0!=n[l].indexOf(c))return!1}else{if("containing"!=t.filter_type)return!1;var d=!1;if(Object.keys(n).forEach(function(t){t.lastIndexOf(l)>=0&&l==t.substring(t.lastIndexOf(l))&&0==n[t].indexOf(c)&&(d=!0)}),!d)return!1}else{if(l in n)continue;for(var m=Object.keys(n),d=!1,p=0;p<m.length;p++){if(0==m[p].indexOf(l)){d=!0;break}}if(!d)return!1}}}return!0},m=r(i,"parsedUserAgent",!0,!0),p=window.location.toString();p&&(p=p.toLowerCase());var f=window.location.pathname.toString();f&&(f=f.toLowerCase());var g=window.location.hostname+f;g&&(g=g.toLowerCase()),"/"==f[f.length-1]&&(f=f.substring(0,f.length-1),g=g.substring(0,g.length-1)),0==g.indexOf("www.")&&(g=g.substring(4));var v=window.location.search;v&&(v=v.toLowerCase());var b=window.location.hash;b&&(b=b.toLowerCase(),"#"!=b[0]&&(b="#"+b));for(var y=h(v),w=Math.min(window.screen.availWidth||t(window).width(),t(window).width()),x=document.cookie.split(";"),_={},k=[],C=0;C<x.length;C++){var S=x[C].substring(0,x[C].indexOf("=")).trim(),T=x[C].substring(x[C].indexOf("=")+1).trim();k.push(S),_[S]=T}var E=document.getElementsByTagName("meta"),$=document.referrer;if($&&$.length){$=$.toLowerCase();try{var I=e($);if(I.is("ip")){var P=I.hostname();P&&(P=P.toLowerCase())}else{var P=I.domain();P&&(P=P.toLowerCase())}var O=I.path();O&&(O=O.toLowerCase());var A=I.tld();A&&(A=A.toLowerCase());var L=I.hostname()?I.hostname().toLowerCase()+O:O;"/"==O[O.length-1]&&(O=O.substring(0,O.length-1),L=L.substring(0,L.length-1)),0==L.indexOf("www.")&&(L=L.substring(4));var B=I.search(),D=I.hash()}catch(t){$=!1}}else $=!1;var N=function(e){var i=!1;return t.each(e,function(t,e){var s=!1;if(e.forEach(function(t){var e=!1;if(!s)if("article"==t.filter_type)1==l.length&&(e=!0);else if("smaller"==t.filter_type)(isNaN(parseFloat(t.filter_value))||w<parseFloat(t.filter_value))&&(e=!0);else if("bigger"==t.filter_type)(isNaN(parseFloat(t.filter_value))||w>=parseFloat(t.filter_value))&&(e=!0);else if("views_lt"==t.filter_type)(isNaN(t.pageviews)||o<t.pageviews)&&(e=!0);else if("views_eq"==t.filter_type)(isNaN(t.pageviews)||o==t.pageviews)&&(e=!0);else if("views_gt"==t.filter_type)(isNaN(t.pageviews)||o>t.pageviews)&&(e=!0);else if("countryis"==t.filter_type)n==t.filter_value.toLowerCase()&&(e=!0);else if("countryisnot"==t.filter_type)n&&n==t.filter_value.toLowerCase()||(e=!0);else if("c_exists"==t.filter_type)k.indexOf(t.filter_value)>=0&&(e=!0);else if("c_dne"==t.filter_type)k.indexOf(t.filter_value)<0&&(e=!0);else if("c_equals"==t.filter_type)k.indexOf(t.filter_value)>=0&&_[t.filter_value]==t.param_value&&(e=!0);else if("c_notequals"==t.filter_type)(k.indexOf(t.filter_value)<0||_[t.filter_value]!=t.param_value)&&(e=!0);else if("c_contains"==t.filter_type)k.indexOf(t.filter_value)>=0&&_[t.filter_value].indexOf(t.param_value)>=0&&(e=!0);else if("c_notcontains"==t.filter_type)(k.indexOf(t.filter_value)<0||_[t.filter_value].indexOf(t.param_value)<0)&&(e=!0);else if("mt_equals"===t.filter_type)for(var i=0;i<E.length;i++){var r=E[i].getAttribute(t.filter_value);r&&r.toLowerCase()===t.param_value.toLowerCase()&&(e=!0)}else if("mt_notequals"===t.filter_type){for(var a=!1,i=0;i<E.length;i++){var r=E[i].getAttribute(t.filter_value);r&&r.toLowerCase()===t.param_value.toLowerCase()&&(a=!0)}e=!a}else if("mt_contains"===t.filter_type)for(var i=0;i<E.length;i++){var r=E[i].getAttribute(t.filter_value);r&&-1!==r.toLowerCase().indexOf(t.param_value.toLowerCase())&&(e=!0)}else if("mt_notcontains"===t.filter_type){for(var a=!1,i=0;i<E.length;i++){var r=E[i].getAttribute(t.filter_value);r&&-1!==r.toLowerCase().indexOf(t.param_value.toLowerCase())&&(a=!0)}e=!a}else if("mt_beginning"===t.filter_type)for(var i=0;i<E.length;i++){var r=E[i].getAttribute(t.filter_value);r&&r.toLowerCase().substring(0,t.param_value.length)===t.param_value.toLowerCase()&&(e=!0)}else if("q_exists"==t.filter_type)y&&y.hasOwnProperty(t.filter_value.toLowerCase())&&(e=!0);else if("q_dne"==t.filter_type)y&&y.hasOwnProperty(t.filter_value)||(e=!0);else if("q_equals"==t.filter_type)y&&y[t.filter_value]&&y[t.filter_value]==t.param_value&&(e=!0);else if("q_notequals"==t.filter_type)y&&y[t.filter_value]&&y[t.filter_value]==t.param_value||(e=!0);else if("q_contains"==t.filter_type)y&&y[t.filter_value]&&y[t.filter_value].indexOf(t.param_value)>=0&&(e=!0);else if("q_notcontains"==t.filter_type)(!y||!y[t.filter_value]||y[t.filter_value].indexOf(t.param_value)<0)&&(e=!0);else if("exact"==t.filter_type){var c=d(t,b,v);c&&(t.full_url?g==t.match_url&&(e=!0):null==t.match_url&&c?e=!0:g!=t.match_url&&f!=t.match_url||(e=!0))}else if("beginning"==t.filter_type){var c=d(t,b,v);c&&(t.full_url?0==g.indexOf(t.match_url.toLowerCase())&&(e=!0):null==t.match_url&&c?e=!0:0!=g.indexOf(t.match_url.toLowerCase())&&0!=f.indexOf(t.match_url.toLowerCase())||(e=!0))}else if("containing"==t.filter_type){var c=d(t,b,v);c&&(t.full_url?g.indexOf(t.match_url.toLowerCase())>=0&&(e=!0):null==t.match_url&&c?e=!0:g.indexOf(t.match_url.toLowerCase())>=0&&(e=!0))}else if($&&["r_url_exact","r_domain_exact","r_url_beginning","r_domain_beginning","r_url_containing","r_domain_containing"].indexOf(t.filter_type)>=0)if("r_url_exact"==t.filter_type){var c=d(t,D,B);t.full_url?c&&L==t.match_url.toLowerCase()&&(e=!0):c&&L==t.match_url.toLowerCase()?e=!0:null==t.match_url&&c&&(e=!0)}else if("r_domain_exact"==t.filter_type)t.host?t.host==P&&(e=!0):t.filter_value==P&&(e=!0);else if("r_url_beginning"==t.filter_type){var c=d(t,D,B);t.full_url?c&&0==L.indexOf(t.match_url)&&(e=!0):c&&0==L.indexOf(t.match_url)?e=!0:null==t.match_url&&c&&(e=!0)
}else if("r_domain_beginning"==t.filter_type)t.host&&0==P.indexOf(t.host)?e=!0:0==P.indexOf(t.filter_value)&&(e=!0);else if("r_url_containing"==t.filter_type){var c=d(t,D,B);t.full_url?c&&L.indexOf(t.match_url)>=0&&(e=!0):c&&L.indexOf(t.match_url)>=0?e=!0:null==t.match_url&&c&&(e=!0)}else"r_domain_containing"==t.filter_type&&(t.host&&P.indexOf(t.host)>=0?e=!0:P.indexOf(t.filter_value)>=0&&(e=!0));else if("ua_os"==t.filter_type&&m&&m.compareOS){var u=[t.filter_value];"winmobile"==t.filter_value?u=["windows mobile","windows phone"]:"macos"==t.filter_value?u=["mac os"]:"windesktop"==t.filter_value&&(u=["windows"]),u.indexOf(m.compareOS)>=0&&(e=!0)}else if("ua_browser"==t.filter_type&&m&&m.compareBrowser){var u=[t.filter_value];"chrome"==t.filter_value?u=["chrome","chromium"]:"ie"==t.filter_value?u=["ie","ie mobile"]:"opera"==t.filter_value?u=["opera","opera mini","opera mobile","opera tablet"]:"safari"==t.filter_value&&(u=["safari","mobile safari"]),u.indexOf(m.compareBrowser)>=0&&(e=!0)}else if("ua_exact"==t.filter_type)t.filter_value.toLowerCase()==navigator.userAgent.toLowerCase()&&(e=!0);else if("ua_beginning"==t.filter_type)0==navigator.userAgent.toLowerCase().indexOf(t.filter_value.toLowerCase())&&(e=!0);else if("ua_containing"==t.filter_type)navigator.userAgent.toLowerCase().indexOf(t.filter_value.toLowerCase())>=0&&(e=!0);else if("hash_exact"==t.filter_type){var h="#"==t.filter_value[0]?t.filter_value:"#"+t.filter_value;h.toLowerCase()==b.toLowerCase()&&(e=!0)}else if("hash_beginning"==t.filter_type){var h="#"==t.filter_value[0]?t.filter_value:"#"+t.filter_value;0==b.toLowerCase().indexOf(h.toLowerCase())&&(e=!0)}else if("hash_containing"==t.filter_type){var h="#"==t.filter_value[0]?t.filter_value:"#"+t.filter_value;b.toLowerCase().indexOf(h.toLowerCase())>=0&&(e=!0)}else"all"==t.filter_type&&(e=!0);e||(s=!0)}),!s)return i=!0,!1}),i},M=r(i,"rule_type","include",!1);if(M&&M.length){var R={},z=0;M.forEach(function(t){t.group_id&&t.group_id.length?R.hasOwnProperty(t.group_id)?R[t.group_id].push(t):R[t.group_id]=[t]:(R[z]=[t],z+=1)}),currentUrlIncluded=N(R)}else currentUrlIncluded=!0;if(!currentUrlIncluded)return!1;var U=r(i,"rule_type","exclude",!1),j=!1;if(!U||!U.length)return!0;var F={},z=0;return U.forEach(function(t){t.group_id&&t.group_id.length?F.hasOwnProperty(t.group_id)?F[t.group_id].push(t):F[t.group_id]=[t]:(F[z]=[t],z+=1)}),!(j=N(F))}return!0}}),sumo.define("selectorator",["jquery"],function(t){var e,i,s,n,o,r,a,l;return a=t.map,o=t.extend,r=t.inArray,s=function(t,e){return-1!==r(t,e)},n=function(t){return t.replace(/([\!\"\#\$\%\&'\(\)\*\+\,\.\/\:\;<\=>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},i=function(t,e){return a(t,function(t){return t===e?null:t})},l=function(t){return a(t,function(e,i){return parseInt(i,10)===parseInt(t.indexOf(e),10)?e:null})},e=function(){function e(e,i){this.element=e,this.options=o(o({},t.selectorator.options),i),this.cachedResults={}}return e.prototype.query=function(e){var i;return(i=this.cachedResults)[e]||(i[e]=t(e.replace(/#([^\s]+)/g,"[id='$1']")))},e.prototype.getProperTagName=function(){return this.element[0]?"span"==this.element[0].tagName.toLowerCase()&&this.getIgnore("class")&&s(this.element.attr("class"),this.getIgnore("class"))?this.hasParent()?this.element.parent()[0].tagName.toLowerCase():null:this.element[0].tagName.toLowerCase():null},e.prototype.hasParent=function(){return this.element&&0<this.element.parent().size()},e.prototype.isElement=function(){var t;return(t=this.element[0])&&t.nodeType===t.ELEMENT_NODE},e.prototype.validate=function(t,e,i,n){var o,r;if(null==i&&(i=!0),null==n&&(n=!1),r=this.query(t),i&&1<r.size()||!i&&0===r.size()){if(!e||-1!==t.indexOf(":"))return null;if(o=n?" > ":" ",t=e+o+t,r=this.query(t),i&&1<r.size()||!i&&0===r.size())return null}return s(this.element[0],r.get())?t:null},e.prototype.generate=function(){var t,e,s,n,o;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];for(e=[],o=[this.generateSimple,this.generateAncestor,this.generateRecursive],s=0,n=o.length;s<n;s++)if(t=o[s],(e=l(i(t.call(this))))&&e.length>0)return e;return l(e)},e.prototype.generateText=function(){var t,e,s,n,o;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];for(e=[],o=[this.generateTextSelector],s=0,n=o.length;s<n;s++)if(t=o[s],(e=l(i(t.call(this))))&&e.length>0)return e;return l(e)},e.prototype.generateAncestor=function(){var i,s,n,o,r,a,l,c,u,h,d,m,p,f;for(r=[],f=this.element.parents(),c=0,d=f.length;c<d;c++){for(s=f[c],i=!0,l=this.generateSimple(null,!1),u=0,m=l.length;u<m;u++)for(a=l[u],o=new e(t(s),this.options).generateSimple(null,!1),h=0,p=o.length;h<p;h++)n=o[h],t.merge(r,this.generateSimple(n,!0,i));i=!1}return r},e.prototype.generateSimple=function(t,e,s){var n,o,r,l,c,u,h,d;for(r=this,l=r.getProperTagName(),c=function(i){return r.validate(i,t,e,s)},d=[[r.getIdSelector],[r.getClassSelector],[r.getIdSelector,!0],[r.getClassSelector,!0],[r.getNameSelector],[function(){return[r.getProperTagName()]}]],u=0,h=d.length;u<h;u++)if(n=d[u],o=n[0].call(r,n[1])||[],o=i(a(o,c)),o.length>0)return o;return[]},e.prototype.generateTextSelector=function(t,e,s){var n,o,r,a,l,c,u,h;for(r=this,a=r.getProperTagName(),l=function(i){return r.validate(i,t,e,s)},h=[[r.getIdSelector],[r.getTextSelector,!0],[function(){return[r.getProperTagName()]}]],c=0,u=h.length;c<u;c++)if(n=h[c],o=n[0].call(r,n[1])||[],o=i(o),o.length>0)return o;return[]},e.prototype.generateRecursive=function(){var t,i,s,n;return n=this.getProperTagName(),-1!==n.indexOf(":")&&(n="*"),i=this.element.parent(),s=new e(i).generate()[0],t=i.children(n).index(this.element),n=n+":eq("+t+")",""!==s&&(n=s+" > "+n),[n]},e.prototype.getIdSelector=function(t){var e;return null==t&&(t=!1),t=t?this.getProperTagName():"",e=this.element.attr("id"),"string"==typeof e&&e.trim().length&&!s(e,this.getIgnore("id"))&&0!=e.indexOf("yui")?[t+"#"+n(e)]:null},e.prototype.getTextSelector=function(i){var s="";if(this.hasParent()){var n=this.element.parent()[0];i=i?n.tagName.toLowerCase():"",n=t(n);var o=n.text();"string"==typeof o&&o.length>0&&(s=i+":similar("+o+")")}var r=this.element.prev();if(r.length){var a=new e(r).generateSimple(null,!1);a&&(s+=" > "+a)}return s?[s]:null},e.prototype.getClassSelector=function(t){var e,i,o;return null==t&&(t=!1),o=this.getProperTagName(),/^(body|html)$/.test(o)?null:(t=t?o:"",i=this.getIgnore("class"),e=(this.element.attr("class")||"").replace(/\{.*\}/,"").split(/\s/),a(e,function(e){return e&&!s(e,i)?t+"."+n(e):null}))},e.prototype.getNameSelector=function(){var t,e;return e=this.getProperTagName(),t=this.element.attr("name"),t&&!s(t,this.getIgnore("name"))?[e+"[name='"+t+"']"]:null},e.prototype.getIgnore=function(t){var e,i,s;return i=this.options.ignore||{},e="class"===t?"classes":t+"s",s=i[t]||i[e],"string"==typeof s?[s]:s},e}(),t.selectorator={options:{},unique:l,clean:i,escapeSelector:n},t.fn.selectorator=function(i){return new e(t(this),i)},t.fn.getSelector=function(t){return this.selectorator(t).generate()},t.fn.getTextSelector=function(t){return this.selectorator(t).generateText()},this}),sumo.define("range",["jquery"],function(t){var e=function(t){return t.fn.compare=function(t){try{t=t.jquery?t[0]:t}catch(t){return null}if(window.HTMLElement){var e=HTMLElement.prototype.toString.call(t);if("[xpconnect wrapped native prototype]"==e||"[object XULElement]"==e||"[object Window]"===e)return null}if(this[0].compareDocumentPosition)return this[0].compareDocumentPosition(t);if(this[0]==document&&t!=document)return 8;var i=(this[0]!==t&&this[0].contains(t)&&16)+(this[0]!=t&&t.contains(this[0])&&8),s=document.documentElement;return this[0].sourceIndex&&(i+=this[0].sourceIndex<t.sourceIndex&&4,i+=this[0].sourceIndex>t.sourceIndex&&2,i+=(this[0].ownerDocument!==t.ownerDocument||this[0]!=s&&this[0].sourceIndex<=0||t!=s&&t.sourceIndex<=0)&&1),i},t}(t),i=function(t){t.fn.range=function(){return t.Range(this[0])};var e=function(t){return t.replace(/([a-z])([a-z]+)/gi,function(t,e,i){return e+i.toLowerCase()}).replace(/_/g,"")},i=function(t){return t.replace(/^([a-z]+)_TO_([a-z]+)/i,function(t,e,i){return i+"_TO_"+e})},s=function(t){return t?t.ownerDocument.defaultView||t.ownerDocument.parentWindow:window},n=function(t,e,i){},o={};t.Range=function(e){if(this.constructor!==t.Range)return new t.Range(e);e&&e.jquery&&(e=e[0]),!e||e.nodeType?(this.win=s(e),this.win.document.createRange?this.range=this.win.document.createRange():this.win&&this.win.document.body&&this.win.document.body.createTextRange&&(this.range=this.win.document.body.createTextRange()),e&&this.select(e)):null!=e.clientX||null!=e.pageX||null!=e.left?this.moveToPoint(e):e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length?this.moveToPoint(e.originalEvent.touches[0]):e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length?this.moveToPoint(e.originalEvent.changedTouches[0]):this.range=e},t.Range.current=function(e){var i=s(e),n;return i.getSelection?(n=i.getSelection(),new t.Range(n.rangeCount?n.getRangeAt(0):i.document.createRange())):new t.Range(i.document.selection.createRange())},t.extend(t.Range.prototype,{moveToPoint:function(e){var i=e.clientX,s=e.clientY;if(!i){var n=v();i=(e.pageX||e.left||0)-n.left,s=(e.pageY||e.top||0)-n.top}if(o.moveToPoint)return this.range=t.Range().range,this.range.moveToPoint(i,s),this;for(var a=document.elementFromPoint(i,s),l=0;l<a.childNodes.length;l++){var c=a.childNodes[l];if(3===c.nodeType||4===c.nodeType)for(var u=t.Range(c),h=u.toString().length,d=1;d<h+1;d++){var m=u.end(d).rect();if(m.left<=i&&m.left+m.width>=i&&m.top<=s&&m.top+m.height>=s)return u.start(d-1),this.range=u.range,this}}var p;r(a.childNodes,function(i){var s=t.Range(i);if(s.rect().top>e.clientY)return!1;p=s}),p?(p.start(p.toString().length),this.range=p.range):this.range=t.Range(a).range},window:function(){return this.win||window},overlaps:function(e){e.nodeType&&(e=t.Range(e).select(e));var i=this.compare("START_TO_START",e),s=this.compare("END_TO_END",e);return i<=0&&s>=0||(i>=0&&this.compare("START_TO_END",e)<=0||this.compare("END_TO_START",e)>=0&&s<=0)},collapse:function(t){return this.range.collapse(void 0===t||t),this},toString:function(){return"string"==typeof this.range.text?this.range.text:this.range.toString()},start:function(e){if(void 0===e){if(this.range.startContainer)return{container:this.range.startContainer,offset:this.range.startOffset};var i=this.clone().collapse().parent(),s=t.Range(i).select(i).collapse();return s.move("END_TO_START",this),{container:i,offset:s.toString().length}}if(this.range.setStart)if("number"==typeof e)this.range.setStart(this.range.startContainer,e);else if("string"==typeof e){var n=h(this.range.startContainer,this.range.startOffset,parseInt(e,10));this.range.setStart(n.node,n.offset)}else this.range.setStart(e.container,e.offset);else if("string"==typeof e)this.range.moveStart("character",parseInt(e,10));else{var o=this.start().container,r;"number"==typeof e?r=e:(o=e.container,r=e.offset);var a=t.Range(o).collapse();a.range.move(r),this.move("START_TO_START",a)}return this},end:function(e){if(void 0===e){if(this.range.startContainer)return{container:this.range.endContainer,offset:this.range.endOffset};var i=this.clone().collapse(!1).parent(),s=t.Range(i).select(i).collapse();return s.move("END_TO_END",this),{container:i,offset:s.toString().length}}if(this.range.setEnd)if("number"==typeof e)this.range.setEnd(this.range.endContainer,e);else if("string"==typeof e){var n=h(this.range.endContainer,this.range.endOffset,parseInt(e,10));this.range.setEnd(n.node,n.offset)}else this.range.setEnd(e.container,e.offset);else if("string"==typeof e)this.range.moveEnd("character",parseInt(e,10));else{var o=this.end().container,r;"number"==typeof e?r=e:(o=e.container,r=e.offset);var a=t.Range(o).collapse();a.range.move(r),this.move("END_TO_START",a)}return this},parent:function(){if(this.range.commonAncestorContainer)return this.range.commonAncestorContainer;var e=this.range.parentElement(),i=this.range;return r(e.childNodes,function(s){if(t.Range(s).range.inRange(i))return e=s,!1}),e},rect:function(e){var i=this.range.getBoundingClientRect();if(i.height||i.width||(i=this.range.getClientRects()[0]),"page"===e){var s=v();i=t.extend({},i),i.top+=s.top,i.left+=s.left}return i},rects:function(e){for(var i=t.map(t.makeArray(this.range.getClientRects()).sort(function(t,e){return e.width*e.height-t.width*t.height}),function(e){return t.extend({},e)}),s=0,n,o=i.length;s<i.length;){var r=i[s],a=!1;for(n=s+1;n<i.length;)if(g(r,i[n])){if(i[n].width){a=i[n];break}i.splice(n,1)}else n++;a?i.splice(s,1):s++}if("page"==e){var l=v();return t.each(i,function(t,e){e.top+=l.top,e.left+=l.left})}return i}}),function(){var s=t.Range.prototype,n=t.Range().range;s.compare=n.compareBoundaryPoints?function(t,e){return this.range.compareBoundaryPoints(this.window().Range[i(t)],e.range)}:function(t,i){return this.range.compareEndPoints(e(t),i.range)},s.move=n.setStart?function(t,e){var i=e.range;switch(t){case"START_TO_END":this.range.setStart(i.endContainer,i.endOffset);break;case"START_TO_START":this.range.setStart(i.startContainer,i.startOffset);break;case"END_TO_END":this.range.setEnd(i.endContainer,i.endOffset);break;case"END_TO_START":this.range.setEnd(i.startContainer,i.startOffset)}return this}:function(t,i){return this.range.setEndPoint(e(t),i.range),this};var o=n.cloneRange?"cloneRange":"duplicate",a=n.selectNodeContents?"selectNodeContents":"moveToElementText";s.clone=function(){return t.Range(this.range[o]())},s.select=n.selectNodeContents?function(t){if(t)this.range.selectNodeContents(t);else{var e=this.window().getSelection();e.removeAllRanges(),e.addRange(this.range)}return this}:function(t){if(t)if(3===t.nodeType){var e=t.parentNode,i=0,s;r(e.childNodes,function(e){if(e===t)return s=i+e.nodeValue.length,!1;i+=e.nodeValue.length}),this.range.moveToElementText(e),this.range.moveEnd("character",s-this.range.text.length),this.range.moveStart("character",i)}else this.range.moveToElementText(t);else this.range.select();return this}}();var r=function(t,e){for(var i,s,n=0;t[n];n++)if(i=t[n],3===i.nodeType||4===i.nodeType){if(!1===e(i))return!1}else if(8!==i.nodeType&&!1===r(i.childNodes,e))return!1},a=function(t){return 3===t.nodeType||4===t.nodeType},l=function(t,e){return function(i,s){return i[t]&&!s?a(i[t])?i[t]:arguments.callee(i[t]):i[e]?a(i[e])?i[e]:arguments.callee(i[e]):i.parentNode?arguments.callee(i.parentNode,!0):void 0}},c=l("firstChild","nextSibling"),u=l("lastChild","previousSibling"),h=function(t,e,i){var s=i<0?u:c;return a(t)?e+i<0?d(s(t),e+i):d(t,e+i):(t=t.childNodes[e]?t.childNodes[e]:t.lastChild,a(t)||(t=s(t)),d(t,i))},d=function(t,e){var i=e<0?u:c;for(e=Math.abs(e);t&&e>=t.nodeValue.length;)e-=t.nodeValue.length,t=i(t);return{node:t,offset:i===c?e:t.nodeValue.length-e}},m,p=function(t){return null==m&&(m="isElementContentWhitespace"in t),m?t.isElementContentWhitespace:3===t.nodeType&&""==t.data.trim()},f=function(t,e){return t.left<=e.clientX&&t.left+t.width>=e.clientX&&t.top<=e.clientY&&t.top+t.height>=e.clientY},g=function(t,e){return f(t,{clientX:e.left,clientY:e.top})&&f(t,{clientX:e.left+e.width,clientY:e.top})&&f(t,{clientX:e.left,clientY:e.top+e.height})&&f(t,{clientX:e.left+e.width,clientY:e.top+e.height})},v=function(t){var t=t||window;return doc=t.document.documentElement,body=t.document.body,{left:(doc&&doc.scrollLeft||body&&body.scrollLeft||0)+(doc.clientLeft||0),top:(doc&&doc.scrollTop||body&&body.scrollTop||0)+(doc.clientTop||0)}};return o.moveToPoint=!!t.Range().range.moveToPoint,t}(t,e)}),Function.prototype.debounce=function(t){var e=this,i=null,s=t;return function(){function t(){e.apply(n,o),i=null}var n=this,o=arguments;i&&clearTimeout(i),i=setTimeout(t,s)}},Function.prototype.throttle=function(t){var e=this,i=null,s=t;return function(){var t=this,n=arguments,o=Date.now();(!i||o-i>=s)&&(i=o,e.apply(t,n))}},sumo.define("limit",function(){}),sumo.define("es6!services/highlighter/index",["jquery","jquery.cookie","plugins/text!highlighter/templates/highlighter.html","plugins/text!highlighter/templates/highlighter_mobile.html","twitter-text","jquery.style","jquery.displayrules","selectorator","range","limit"],function(t,e,i,s,n){function o(){return t.browser.mobile&&("ontouchstart"in window||!!navigator.msMaxTouchPoints)}function r(e,i){var s=t._data(e,"events");return!!(s&&s[i]||e.onclick)}function a(e,i){var s=t(e).html(),n=t(e).html(),o=[];t(e).find("iframe").each(function(e){o.push([t(this).attr("id"),document.getElementById(t(this).attr("id")).contentWindow.document])});var r=[],a=[],l=/<[^>]*>/,u=/<[^>]*>|&nbsp;/,h=/(<[^>]*>)/,d=/^<([-A-Za-z0-9_]+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,m=/^<\/([-A-Za-z0-9_]+)[^>]*>/,p=/([-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,f=["a","abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","del","dfn","em","font","i","iframe","img","input","ins","kbd","label","map","object","q","s","samp","script","select","small","span","strike","strong","sub","sup","textarea","tt","u"],g=/&nbsp;/,v=i.entry;v=v.replace(/\xA0/g," ");var b=/<[^>]*>|\&nbsp;/i,y;if(r=s.match(/<[^>]*>|&nbsp;/gi),a=[],r)for(var w=0;w<r.length;w++){if(0==w)var x=0;else var x=a[w-1];var _=s.substring(x).indexOf(r[w]),k=x+_;a.push(k),s="&nbsp;"==r[w].toLowerCase()?s.substring(0,k)+" "+s.substring(k+r[w].length):s.substring(0,k)+s.substring(k+r[w].length)}var v=t("<div/>").html(v).text().trim();v=v.replace(/\xA0/g," ");var C=s.indexOf(v);if(C>-1){var S,T,E,$,I,P,k,O,A,L,B,D,w,k,N,w,k,M,R;!function(){var u=function t(e,i){var n=s.substring(e,i).search(l);n>-1&&(anyHTMLmatch=s.substring(e+n,i).match(l)[0],s=s.substring(0,n+e)+E+anyHTMLmatch+S+s.substring(e+n+anyHTMLmatch.length),e+=n+S.length+anyHTMLmatch.length+E.length,i+=S.length+E.length,t(e,i))};for(S="<span class='sumo_twilighter_highlighted twilighter-"+i.hash+"'>",T="<span class='sumo_twilighter_shares'>"+(0===i.share_count?"":c(i.share_count))+"</span></span>",E="</span>",$=C+v.length,s=s.substring(0,C)+S+s.substring(C,$)+T+s.substring($),I=0,P=0,k=a[w],O=0,A=0,L=[],B=[],D=[],w=a.length-1;w>=0;w--)k=a[w],k<C&&(O+=r[w].length,"&nbsp;"==r[w].toLowerCase()&&(O-=1)),k<$&&(a[w]>=C&&(L.push(r[w]),B.push(k-C+S.length)),A+=r[w].length,"&nbsp;"==r[w].toLowerCase()&&(A-=1));for(N=s.substring(C,$+S.length+T.length),w=0;w<B.length;w++)N=N.substring(0,B[w])+L[w]+N.substring(B[w]+("&nbsp;"==L[w].toLowerCase()?1:0));s=n.substring(0,O+C)+N+n.substring(A+$),k=s.indexOf(S)+S.length,M=s.indexOf(T),R=[],k>-1&&M>-1&&(u(k,M),e.innerHTML=s,o.forEach(function(t,e){var i=t[0],s=t[1],n=document.getElementById(i).contentWindow.document;n.open(),n.write("<head>"+s.head.innerHTML+"</head><body>"+s.body.innerHTML+"</body>"),n.close()}),t(e).find(".sumo_twilighter_highlighted").invert())}()}}function l(){return window.getSelection?window.getSelection().toString():document.selection?document.selection.createRange().text:""}function c(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function u(){var e=window.location.href;if(!R||U)return U&&(e=U),e;t.ajax({type:"POST",dataType:"json",url:M.sumoUrl+"/apps/twilighter/shorten",data:{site_id:M.siteId,href:e},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(t){return t.success?(e=t.url,U=t.url,e):e})}function h(e){var i=window.location.href,s=(location.protocol,23),n=0,r=!0;if(z){e.split(" ").reverse().forEach(function(t){n||t.match(/^https?:\/\//i)&&(n=t.length)}),(e.match(/https?:\/\//i)||e.match(/ via @/i))&&(r=!1)}if(R&&!U)t.ajax({type:"POST",dataType:"json",url:M.sumoUrl+"/apps/twilighter/shorten",data:{site_id:M.siteId,href:i},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(a){a.success&&(i=a.url,U=a.url);var l=280-s+n;j&&(z&&e.match(/ via @/i)||(l-=("@"==j[0]?5:6)+j.length));var c=e.trim();c=c.replace(/\r\n|\n|\r/g," "),(z&&r||!z&&c.length+1>l)&&(c=c.substr(0,l-2)+"…");var u=j?" via "+("@"==j[0]?"":"@")+j:"";z&&(c.match(/https?:\/\//i)&&(i=""),c.match(/ via @/i)&&(u="")),(i||u)&&(c=c+(i?" "+i:"")+u),t("#sumo_twilighter_input").val(c).data({"sumome-twilighter-url":i,"sumome-twilighter-via":u,"sumome-twilighter-msg":c}),o()||C()});else{U&&(i=U);var a=280-s+n;j&&(z&&e.match(/ via @/i)||(a-=("@"==j[0]?5:6)+j.length));var l=e.trim();l=l.replace(/\r\n|\n|\r/g," "),(z&&r||!z&&l.length+1>a)&&(l=l.substr(0,a-2)+"…");var c=j?" via "+("@"==j[0]?"":"@")+j:"";z&&(l.match(/https?:\/\//i)&&(i=""),l.match(/ via @/i)&&(c="")),(i||c)&&(l=l+(i?" "+i:"")+c),t("#sumo_twilighter_input").val(l).data({"sumome-twilighter-url":i,"sumome-twilighter-via":c,"sumome-twilighter-msg":l}),o()||C()}}function d(t){return"https://twitter.com/intent/tweet?text="+encodeURIComponent(t)+"&related="+encodeURIComponent("thesumome For your own twitter highlighter plugin")}function m(e){var i="",s=document.title,n=u();if(t('meta[property="og:description"]').attr("content")&&(s=t('meta[property="og:description"]').attr("content")),t('meta[property="og:image"]').attr("content")&&(i=t('meta[property="og:image"]').attr("content")),z){var o=t("#sumo_twilighter_input").data("sumome-twilighter-msg");if(o.indexOf(n)<0&&o.match(/https?:\/\//i)){o.split(" ").reverse().forEach(function(t){t.match(/^https?:\/\//i)&&(n=t)})}}return"https://www.facebook.com/v2.8/dialog/feed?app_id=214248668771590&display=popup&link="+encodeURIComponent(n)+"&caption="+e+"&name="+encodeURIComponent(document.title)+"&description="+encodeURIComponent(s)+"&redirect_uri="+encodeURIComponent("http:"+M.sumoUrl)+"/apps/twilighter/fbshared&picture="+i}function p(e){if(e&&e.length){var i=e.shift(),s=!1,n=!1;t(".sumo_twilighter_highlighted").each(function(e){t(t(".sumo_twilighter_highlighted")[e]).text().indexOf(i.entry)>-1?s=!0:t(t(".sumo_twilighter_highlighted")[e]).closest("[rel~=noshare]").length&&(n=!0)});var o;if(t(i.selector)&&t(i.selector).length)var o=t(i.selector);else if(i.selector){var r=/\#[^\s]+\./g,l=/\#[^\s]+/g,c=i.selector,u=c.match(r);if(u)for(var h=0,d=u.length;h<d;h++)c=c.replace(/\#[^\s]+\./,"[id="+u[h].substring(1,u[h].length-1)+"].");var u=c.match(l);if(u)for(var h=0,d=u.length;h<d;h++)c=c.replace(/\#[^\s]+/,"[id="+u[h].substring(1)+"]");t(c).length&&(o=t(c))}if(o&&!s&&!n){var m=o.html();a(o[0],i),t(".twilighter-"+i.hash).hover(function(){t(".twilighter-"+i.hash).css({cursor:"pointer"}).invert("0.3")},function(){t(".twilighter-"+i.hash).css({cursor:"inherit"}).invert()})}window.setTimeout(function(){p(e)},0)}else t(".sumo_twilighter_shares").mousedown(function(){return!1})}function f(){t(".sumo_twilighter_highlighted").contents().unwrap()}function g(t){return 280-n.txt.getTweetLength(t)}function v(e){for(var i=t(e).attr("class").split(" "),s=0;s<i.length;s++)if("twilighter-"==i[s].substring(0,"twilighter-".length))return i[s].split("-")[1];return""}function b(e){if(z&&!M.user&&!(t(e.target).closest("#sumo_twilighter_div").length||(t(e.target).closest(".sumo_twilighter_highlighted").length||t(e.target).closest(".sumo_twilighter_shares").length)&&v(t(e.target).closest(".sumo_twilighter_highlighted"))))return void t("#sumo_twilighter_div").hide();if(t(".sumo_twilighter_shares").css("visibility","hidden"),t(e.target).closest("#sumo_twilighter_div").length||t(e.target).is("a")&&"sumo_twilighter_btn"!=t(e.target).attr("id")||t(e.target).parents("a").length||r(e.target,"click")||t(e.target).closest("[rel~=noshare]").length)return void t(".sumo_twilighter_shares").css("visibility","visible");if("selectionchange"==e.type){if(0==t.Range.current().toString().length)return void t(".sumo_twilighter_shares").css("visibility","visible");var i=t.Range.current(),s=i.parent();if(t(s).hasClass("sumo_twilighter_highlighted")&&(s=t(s).parent()[0]),s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.CDATA_SECTION_NODE||(s=s.parentNode),t(s).closest("#sumo_twilighter_div").length)return void t(".sumo_twilighter_shares").css("visibility","visible")}var n=!1;t("#sumo_twilighter_input").val(""),O="";var a={ignore:{classes:["sumo_twilighter_tweet","sumo_twilighter_highlighted"],ids:["sumo_twilighter_div"]}},l=!1;if((t(e.target).closest(".sumo_twilighter_highlighted").length||t(e.target).closest(".sumo_twilighter_shares").length)&&v(t(e.target).closest(".sumo_twilighter_highlighted"))){O=v(t(e.target).closest(".sumo_twilighter_highlighted"));var c=F[O].entry;l=!0}else var c=t.Range.current().toString();if(c=c.replace(/\xA0/g," "),O||c&&c.length>6&&c.length<250&&c.split(/[\u4e00-\u9fcc]|\s+/g).length>2)if(o()||!o()&&I!=c){if(I=c,P=c,O)A=F[O].selector;else{var i=t.Range.current();I=t.Range.current().toString().trim(),P=t.Range.current().toString().trim();var s=i.parent();t(s).hasClass("sumo_twilighter_highlighted")&&(s=t(s).parent()[0]),s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.CDATA_SECTION_NODE||(s=s.parentNode);var u=t(s).range(),d=u.toString().indexOf(I);d>0&&u.start("+"+d),u.toString().length-I.length>0&&u.end("-"+(u.toString().length-I.length));var m=u.parent();t(m).hasClass("sumo_twilighter_highlighted")&&(m=t(m).parent()[0]),m.nodeType!==Node.TEXT_NODE&&m.nodeType!==Node.CDATA_SECTION_NODE||(m=m.parentNode),A=t(m).getSelector()[0]}var p=-1;if(!O){var f=/<[^>]*>/g,g=/&nbsp;/gi;if(t(A).length)elementHtml=t(A)[0].innerHTML;else{var b=/\#[^\s]+\./g,y=/\#[^\s]+/g,w=A,x=w.match(b);if(x)for(var _=0,k=x.length;_<k;_++)w=w.replace(/\#[^\s]+\./,"[id="+x[_].substring(1,x[_].length-1)+"].");var x=w.match(y);if(x)for(var _=0,k=x.length;_<k;_++)w=w.replace(/\#[^\s]+/,"[id="+x[_].substring(1)+"]");t(w).length&&(elementHtml=t(w)[0].innerHTML)}if(!elementHtml)return I="",A="",O="",P="",t("#sumo_twilighter_div").hide(),void t(".sumo_twilighter_shares").css("visibility","visible");var C;elementHtml=elementHtml.replace(/\<span class=[\'|\"]sumo_twilighter_shares[\'|\"].*?\>[-,0-9 ]+\<\/span\>/,""),elementHtml=elementHtml.replace(f,""),elementHtml=elementHtml.replace(g," "),p=elementHtml.indexOf(c)}if(p<0&&!O)return I="",A="",O="",P="",t("#sumo_twilighter_div").hide(),void t(".sumo_twilighter_shares").css("visibility","visible");z&&void 0!==F[O]&&void 0!==F[O].admin_message&&(I=F[O].admin_message),h(I),t("#sumo_twilighter_div").is(":visible")||(l?N.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"click"}):N.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"highlight"}),N.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"popup"})),div_width=t("#sumo_twilighter_div").outerWidth(),div_height=t("#sumo_twilighter_div").outerHeight(),win_height=t(window).height()+t(window).scrollTop(),win_width=t(window).width()+t(window).scrollLeft(),o()?function(){var e=function e(i,s){var n="text-width-tester",o=t("#"+n);return o.length?o.css({font:s}).html(i):(o=t('<span id="'+n+'" style="display:none;font:'+s+';">'+i+"</span>"),t("body").append(o)),{width:o.width(),height:o.height()}},i=function i(s,n,o,r){var a=t(s),l="M",c=a.height()+5,u=o+" "+n+"px "+r,h=e("M",u).height;h>c?(n=n*c/h*.9,n<16&&(n=16),u=o+" "+n+"px "+r,a.css({font:u})):a.css({font:u})},s=function e(){var s=24,n=24<.05*window.innerHeight?.05*window.innerHeight:24,o=t("#sumo_twilighter_div").width(),r=t("#sumo_twilighter_div").innerHeight(),a=n,l=Math.floor(.075*window.innerHeight),c=a<l?a:l,u=Math.floor(.65*c),h=Math.floor(.65*c);t(".sumo_highlighter_mobile").css({"background-size":r<40?"0px":Math.round(Math.round(.03*window.innerHeight)/23*158)+"px "+Math.round(.03*window.innerHeight)+"px"}),t(".sumo_twilighter_m_fb .btn-icon").css({"background-size":h+"px "+u+"px",height:u+"px",width:h+"px",left:Math.floor((l-h)/2)-1+"px",top:Math.round((a-u)/2)-1+"px"}),t(".sumo_twilighter_m_tweet .btn-icon").css({"background-size":h+"px "+u+"px",height:u+"px",width:h+"px",left:Math.floor((l-h)/2)-1+"px",top:Math.round((a-u)/2)-1+"px"}),t(".sumo_twilighter_m_fb a").css({height:a+"px",width:l+"px"}),t(".sumo_twilighter_m_tweet a").css({height:a+"px",width:l+"px"}),t(".sumo_highlighter_m_right").css({width:2*l+8+"px"}),t(".sumo_twilighter_m_input_div").css({height:n+"px"}),i(document.getElementById("sumo_twilighter_input"),200,"normal","Georgia, serif")};t("#sumo_twilighter_div").css(D).show(),s(),t("#sumo_twilighter_input").focus(function(t){s()}),t(window).resize(function(e){t(":focus").hasClass("sumo_twilighter_m_input")||s()}.debounce(300))}():(D.top<0?t("#sumo_twilighter_div").css({top:0}):D.top+div_height>win_height?t("#sumo_twilighter_div").css({top:win_height-div_height}):t("#sumo_twilighter_div").css({top:D.top}),z&&M.user?t(".sumo_twilighter_admin_highlight").show():t(".sumo_twilighter_admin_highlight").hide(),M.user?t(".sumo_twilighter_admin").show():t(".sumo_twilighter_admin").hide(),D.left<0?t("#sumo_twilighter_div").css({left:0}).show():D.left+div_width>win_width?t("#sumo_twilighter_div").css({left:win_width-div_width}).show():t("#sumo_twilighter_div").css({left:D.left}).show())}else t(e.target).is("#sumo_twilighter_div")||t(e.target).parents("#sumo_twilighter_div").length||(I="",A="",O="",P="",t("#sumo_twilighter_div").css(D).hide(),t(".sumo_twilighter_shares").css("visibility","visible"));else I="",A="",O="",P="",t("#sumo_twilighter_div").hide(),t(".sumo_twilighter_shares").css("visibility","visible");t(".sumo_twilighter_shares").css("visibility","visible")}function y(){var e;if(t(A).length)var e=t(A);else{var i=/\#[^\s]+\./g,s=/\#[^\s]+/g,n=A,o=n.match(i);if(o)for(var r=0,a=o.length;r<a;r++)n=n.replace(/\#[^\s]+\./,"[id="+o[r].substring(1,o[r].length-1)+"].");var o=n.match(s);if(o)for(var r=0,a=o.length;r<a;r++)n=n.replace(/\#[^\s]+/,"[id="+o[r].substring(1)+"]");t(n).length&&(e=t(n))}e&&(e.find(".sumo_twilighter_highlighted").each(function(e,i){t(i).replaceWith(t(i).html())}),e.find(".sumo_twilighter_shares").each(function(e,i){t(i).remove()}))}function w(e){var i=t("#sumo_twilighter_input").data("sumome-twilighter-url"),s=t("#sumo_twilighter_input").data("sumome-twilighter-via"),n=t("#sumo_twilighter_input").val().replace(i,"").replace(s,"").trim();t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:M.sumoUrl+"/apps/twilighter/admin/save",data:{session_id:M.sessionId,site_id:M.siteId,entry:I,pathname:location.pathname,selector:A,hash:O,message:n},success:function e(i){if(i.entry){var s=i.entry;if(F[s.hash]=s,"[object Array]"===Object.prototype.toString.call(s.selector))var n=s.selector[0];else var n=s.selector;var o;if(t(n)&&t(n).length)var o=t(n);else if(n){var r=/\#[^\s]+\./g,l=/\#[^\s]+/g,c=n,u=c.match(r);if(u)for(var h=0,d=u.length;h<d;h++)c=c.replace(/\#[^\s]+\./,"[id="+u[h].substring(1,u[h].length-1)+"].");var u=c.match(l);if(u)for(var h=0,d=u.length;h<d;h++)c=c.replace(/\#[^\s]+/,"[id="+u[h].substring(1)+"]");t(c).length&&(o=t(c))}o&&(o.find(".sumo_twilighter_highlighted").each(function(e,i){t(i).replaceWith(t(i).html())}),o.find(".sumo_twilighter_shares").each(function(e,i){t(i).remove()}),o&&(a(o[0],s),t("#twilighter-"+s.hash).mousedown(b),t(".twilighter-"+s.hash).hover(function(){t(".twilighter-"+s.hash).css({cursor:"pointer"}).invert("0.3")},function(){t(".twilighter-"+s.hash).css({cursor:"inherit"}).invert()})))}I="",A="",O="",t("#sumo_twilighter_div").css(L).hide()}})}function x(e){t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:M.sumoUrl+"/apps/twilighter/delete",data:{site_id:M.siteId,entry:I,pathname:location.pathname,selector:A,hash:O},success:function e(i){i.success&&(y(),t("#sumo_twilighter_div").css(L).hide())}})}function _(e){function i(t,e,i,s){var n=void 0!=window.screenLeft?window.screenLeft:screen.left,o=void 0!=window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,
height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var r=width/2-i/2+n,a=height/2-s/2+o,l=window.open(t,e,"width="+i+", height="+s+", top="+a+", left="+r);window.focus&&l.focus()}t(e.target).is("a")&&0==t(e.target).closest("#sumo_twilighter_btn").length||(N.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"twitter"}),i(d(t("#sumo_twilighter_input").val()),"Tweet",575,350),t.ajax({type:"POST",dataType:"json",url:M.sumoUrl+"/apps/twilighter/share",data:{entry:I,siteId:M.siteId,pathname:location.pathname,selector:A,sessionId:M.sessionId,clickType:"tweet",hash:O},xhrFields:{withCredentials:!1},crossDomain:!0}).success(function(e){if(e.entry){var i=e.entry;if(F[i.hash]=i,"[object Array]"===Object.prototype.toString.call(i.selector))var s=i.selector[0];else var s=i.selector;var n;if(t(s)&&t(s).length)var n=t(s);else if(s){var o=/\#[^\s]+\./g,r=/\#[^\s]+/g,l=s,c=l.match(o);if(c)for(var u=0,h=c.length;u<h;u++)l=l.replace(/\#[^\s]+\./,"[id="+c[u].substring(1,c[u].length-1)+"].");var c=l.match(r);if(c)for(var u=0,h=c.length;u<h;u++)l=l.replace(/\#[^\s]+/,"[id="+c[u].substring(1)+"]");t(l).length&&(n=t(l))}n&&(n.find(".sumo_twilighter_highlighted").each(function(e,i){t(i).replaceWith(t(i).html())}),n.find(".sumo_twilighter_shares").each(function(e,i){t(i).remove()}),n&&(a(n[0],i),t("#twilighter-"+i.hash).mousedown(b),t(".twilighter-"+i.hash).hover(function(){t(".twilighter-"+i.hash).css({cursor:"pointer"}).invert("0.3")},function(){t(".twilighter-"+i.hash).css({cursor:"inherit"}).invert()})))}I="",A="",O="",t("#sumo_twilighter_div").css(L).hide()}))}function k(e){function i(t,e,i,s){var n=void 0!=window.screenLeft?window.screenLeft:screen.left,o=void 0!=window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var r=width/2-i/2+n,a=height/2-s/2+o,l=window.open(t,e,"width="+i+", height="+s+", top="+a+", left="+r);window.focus&&l.focus()}t(e.target).is("a")&&0==t(e.target).closest("#sumo_twilighter_btn_fb").length||(N.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"facebook"}),i(m(P),"Facebook Share",575,350),t.ajax({type:"POST",dataType:"json",url:M.sumoUrl+"/apps/twilighter/share",data:{entry:I,siteId:M.siteId,pathname:location.pathname,selector:A,sessionId:M.sessionId,clickType:"tweet",hash:O},xhrFields:{withCredentials:!1},crossDomain:!0}).success(function(e){if(e.entry){var i=e.entry;if(F[i.hash]=i,"[object Array]"===Object.prototype.toString.call(i.selector))var s=i.selector[0];else var s=i.selector;if(!t(s).length){var n=/\#[^\s]+\./g,o=/\#[^\s]+/g,r=s,l=r.match(n);if(l)for(var c=0,u=l.length;c<u;c++)r=r.replace(/\#[^\s]+\./,"[id="+l[c].substring(1,l[c].length-1)+"].");var l=r.match(o);if(l)for(var c=0,u=l.length;c<u;c++)r=r.replace(/\#[^\s]+/,"[id="+l[c].substring(1)+"]");t(r).length&&(s=r)}t(s).find(".sumo_twilighter_highlighted").each(function(e,i){t(i).replaceWith(t(i).html())}),t(s).find(".sumo_twilighter_shares").each(function(e,i){t(i).remove()}),t(s)&&t(s).length&&(a(t(s)[0],i),t("#twilighter-"+i.hash).mousedown(b),t(".twilighter-"+i.hash).hover(function(){t(".twilighter-"+i.hash).css({cursor:"pointer"}).invert("0.3")},function(){t(".twilighter-"+i.hash).css({cursor:"inherit"}).invert()}))}I="",A="",O="",t("#sumo_twilighter_div").hide()}))}function C(){var e=g(t("#sumo_twilighter_input").val());t(".sumo_twilighter_remaining").text(e),e<0?t(".sumo_twilighter_remaining").css("color","red"):t(".sumo_twilighter_remaining").css("color",G)}function S(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function t(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function t(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function t(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function t(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),255]}}],i=0;i<e.length;i++){var s=e[i].re,n=e[i].process,o=s.exec(t);o&&(channels=n(o),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.a=channels[3],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0||isNaN(this.a)?0:this.a>255?255:this.a,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i}}function T(t){var e,i,s,n;return t.toHex&&(t="#"+t.toHex()),t.match(/^rgb/)?(t=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),e=t[1],s=t[2],i=t[3]):(t=+("0x"+t.slice(1).replace(t.length<5&&/./g,"$&$&")),e=t>>16,s=t>>8&255,i=255&t),n=Math.sqrt(e*e*.299+s*s*.587+i*i*.114),n>127.5?"light":"dark"}function E(t){return"light"==T(t)?"black":"white"}function $(t,e){t=t.toString();var i=parseInt(t.slice(1),16),s=Math.round(2.55*e),n=(i>>16)+s,o=(i>>8&255)+s,r=(255&i)+s;return"#"+(16777216+65536*(n<255?n<1?0:n:255)+256*(o<255?o<1?0:o:255)+(r<255?r<1?0:r:255)).toString(16).slice(1)}var I,P,O,A,L,B,D,N,M,R=!1,z=!1,U,j="",F={},H="#f0f0f0",q="#4c66a4",W="#3484bf",V="white",X="white",G="#999",Q=!1,Y,K=!1;return function(e){(t.browser=t.browser||{}).mobile=/(android|bb\d+|meego).+mobile|android|ipad|playbook|silk|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),t.fn.invert=function(t){var t=t||"0.15",e="color";if(this.css(e)){var i=new S(this.css(e));i.ok&&this.css("background-color","rgba("+i.r+","+i.g+","+i.b+","+t+")")}},{settings:{},initialize:function e(){this.api.on("331c6750-848e-4469-b1bb-bfbb4fa4cd99/service/reload",t.proxy(function(){this.load(!0)},this)),this.load()},load:function e(n){void 0!==n&&n&&(t(".sumo_twilighter_shares").remove(),f());var r;N=this.api,M=this.sumoProperties,Y=M.baseUrl+"images/apps/331c6750-848e-4469-b1bb-bfbb4fa4cd99/",t.ajax({type:"POST",dataType:"json",url:M.sumoUrl+"/apps/twilighter/load",data:{site_id:M.siteId,pathname:location.pathname,geoLocation:M.geoLocation,pageViews:M.views,userAgent:navigator.userAgent},xhrFields:{withCredentials:!1},crossDomain:!0}).done(t.proxy(function(e){if(e&&"success"in e&&e.success&&(t.extend(this.settings,e),this.settings.ctry=!(!M.geoLocation||!M.geoLocation.ctry)&&M.geoLocation.ctry,this.settings.views=M.views?M.views:1,this.settings.reflink="https://sumo.com/?src=sm-hl-"+M.siteId+"&utm_source=sumo-powered-by&utm_medium=highlighter&utm_campaign="+M.siteId,t.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views))){if(e.entries&&e.entries.length&&(r=e.entries,r.forEach(function(t){F[t.hash]=t}),window.setTimeout(function(){p(r.slice())},0)),void 0!==e.useUrlShortener&&(R=e.useUrlShortener),void 0!==e.useAdminHighlights&&(z=e.useAdminHighlights),void 0!==e.viaTwitterHandle&&e.viaTwitterHandle&&e.viaTwitterHandle.trim()&&(j=e.viaTwitterHandle.trim()),e.modalColor&&(H=e.modalColor),e.fbButtonColor&&(q=e.fbButtonColor),e.twButtonColor&&(W=e.twButtonColor),"noSumoBranding"in e&&(K=e.noSumoBranding),V=E(q),X=E(W),o()?(t("body").append(s),t(".sumo_twilighter_m_fb").on("click",k),t(".sumo_twilighter_m_tweet").on("click",_),t(".sumo_highlighter_mobile").css("background-color",H,"important"),t(".sumo_twilighter_m_fb a").css("background-color",q,"important"),t(".sumo_twilighter_m_tweet a").css("background-color",W,"important"),t(".sumo_twilighter_m_fb .btn-text").css("color",V,"important"),t(".sumo_twilighter_m_tweet .btn-text").css("color",X,"important"),t(".sumo_twilighter_m_fb .btn-icon").css("background-image","url("+Y+"facebook-"+V+"-60.png)","important"),t(".sumo_twilighter_m_tweet .btn-icon").css("background-image","url("+Y+"twitter-"+X+"-60.png)","important")):(t("body").append(i),K?t(".sumo_highlighter_desktop").css("padding","15px"):t(".sumo_twilighter_remaining").before('<a target="_blank" class="sumo_twilighter_logo" href="'+this.settings.reflink+'">Powered by Sumo</a>'),t(".sumo_twilighter_fb").on("click",k),t(".sumo_twilighter_tweet").on("click",_),G=$(H,"light"==T(H)?-45:45),t(".sumo_highlighter_desktop").css("background-color",H,"important"),t(".sumo_twilighter_remaining").css("color",G,"important"),t(".sumo_twilighter_logo").css("color",G,"important"),t(".sumo_twilighter_admin_highlight").find("a").css("color",G,"important"),t(".sumo_twilighter_admin").find("a").css("color",G,"important"),t(".sumo_twilighter_fb a").css("background-color",q,"important"),t(".sumo_twilighter_tweet a").css("background-color",W,"important"),t(".sumo_twilighter_fb .btn-text").css("color",V,"important"),t(".sumo_twilighter_tweet .btn-text").css("color",X,"important"),t(".sumo_twilighter_fb .btn-icon").attr("src",Y+"facebook-"+V+"-60.png"),t(".sumo_twilighter_tweet .btn-icon").attr("src",Y+"twitter-"+X+"-60.png")),z&&M.user&&t(".sumo_twilighter_admin_highlight").find("a").on("click",w),M.user&&t(".sumo_twilighter_admin").find("a").on("click",x),o()||t("#sumo_twilighter_input").keyup(function(){C()}),Q)return;o()?(t(document).on("selectionchange",function(e){var i=0,s=0;if(window.getSelection&&document.createRange&&void 0!==document.createRange().getBoundingClientRect){var n=window.getSelection();if(n.rangeCount>0){var o=n.getRangeAt(0).getBoundingClientRect();i=o.left,s=o.top}}else if(document.selection&&"Control"!=document.selection.type){var r=document.selection.createRange();i=r.boundingLeft,s=r.boundingTop}B={top:s/t(window).height()>=.5?0:"auto",bottom:s/t(window).height()>=.5?"auto":0,left:(t(window).width()+t(window).scrollLeft())/2-t("#sumo_twilighter_div").outerWidth()/2},D=B,b(e.originalEvent)}),t(window).on("touchstart",function(e){t(e.target).on("touchend",function(e){var i=e.target;B={top:(i.getBoundingClientRect().top+i.getBoundingClientRect().height/2)/t(window).height()>=.5?0:"auto",bottom:(i.getBoundingClientRect().top+i.getBoundingClientRect().height/2)/t(window).height()>=.5?"auto":0,left:(t(window).width()+t(window).scrollLeft())/2-t("#sumo_twilighter_div").outerWidth()/2},D=B,b(e),t(e.target).off("touchend")}),t(e.target).on("touchmove",function(e){t(e.target).off("touchend")})}),t(window).on("touchmove",function(e){t("#sumo_twilighter_div").is(":visible")&&!t(e.target).closest("#sumo_twilighter_div").length&&(I="",A="",O="",t("#sumo_twilighter_div").hide())})):(t(window).mousemove(function(t){L={top:t.pageY,left:t.pageX},D=L}.throttle(150)),t(window).on("mouseup",function(t){1===t.which&&b(t)})),Q=!0}},this))}}}),function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this,s=i._,n=Array.prototype,o=Object.prototype,r="undefined"!=typeof Symbol?Symbol.prototype:null,a=n.push,l=n.slice,c=o.toString,u=o.hasOwnProperty,h=Array.isArray,d=Object.keys,m=Object.create,p=function(){},f=function(t){return t instanceof f?t:this instanceof f?void(this._wrapped=t):new f(t)};void 0===t||t.nodeType?window!=i&&(i._=f):(void 0!==e&&!e.nodeType&&e.exports&&(t=e.exports=f),t._=f),f.VERSION="1.8.3";var g=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,s,n){return t.call(e,i,s,n)};case 4:return function(i,s,n,o){return t.call(e,i,s,n,o)}}return function(){return t.apply(e,arguments)}},v,b=function(t,e,i){return f.iteratee!==v?f.iteratee(t,e):null==t?f.identity:f.isFunction(t)?g(t,e,i):f.isObject(t)?f.matcher(t):f.property(t)};f.iteratee=v=function(t,e){return b(t,e,1/0)};var y=function(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),s=Array(i),n=0;n<i;n++)s[n]=arguments[n+e];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,arguments[0],s);case 2:return t.call(this,arguments[0],arguments[1],s)}var o=Array(e+1);for(n=0;n<e;n++)o[n]=arguments[n];return o[e]=s,t.apply(this,o)}},w=function(t){if(!f.isObject(t))return{};if(m)return m(t);p.prototype=t;var e=new p;return p.prototype=null,e},x=function(t){return function(e){return null==e?void 0:e[t]}},_=Math.pow(2,53)-1,k=x("length"),C=function(t){var e=k(t);return"number"==typeof e&&e>=0&&e<=_};f.each=f.forEach=function(t,e,i){e=g(e,i);var s,n;if(C(t))for(s=0,n=t.length;s<n;s++)e(t[s],s,t);else{var o=f.keys(t);for(s=0,n=o.length;s<n;s++)e(t[o[s]],o[s],t)}return t},f.map=f.collect=function(t,e,i){e=b(e,i);for(var s=!C(t)&&f.keys(t),n=(s||t).length,o=Array(n),r=0;r<n;r++){var a=s?s[r]:r;o[r]=e(t[a],a,t)}return o};var S=function(t){var e=function(e,i,s,n){var o=!C(e)&&f.keys(e),r=(o||e).length,a=t>0?0:r-1;for(n||(s=e[o?o[a]:a],a+=t);a>=0&&a<r;a+=t){var l=o?o[a]:a;s=i(s,e[l],l,e)}return s};return function(t,i,s,n){var o=arguments.length>=3;return e(t,g(i,n,4),s,o)}};f.reduce=f.foldl=f.inject=S(1),f.reduceRight=f.foldr=S(-1),f.find=f.detect=function(t,e,i){var s=C(t)?f.findIndex:f.findKey,n=s(t,e,i);if(void 0!==n&&-1!==n)return t[n]},f.filter=f.select=function(t,e,i){var s=[];return e=b(e,i),f.each(t,function(t,i,n){e(t,i,n)&&s.push(t)}),s},f.reject=function(t,e,i){return f.filter(t,f.negate(b(e)),i)},f.every=f.all=function(t,e,i){e=b(e,i);for(var s=!C(t)&&f.keys(t),n=(s||t).length,o=0;o<n;o++){var r=s?s[o]:o;if(!e(t[r],r,t))return!1}return!0},f.some=f.any=function(t,e,i){e=b(e,i);for(var s=!C(t)&&f.keys(t),n=(s||t).length,o=0;o<n;o++){var r=s?s[o]:o;if(e(t[r],r,t))return!0}return!1},f.contains=f.includes=f.include=function(t,e,i,s){return C(t)||(t=f.values(t)),("number"!=typeof i||s)&&(i=0),f.indexOf(t,e,i)>=0},f.invoke=y(function(t,e,i){var s=f.isFunction(e);return f.map(t,function(t){var n=s?e:t[e];return null==n?n:n.apply(t,i)})}),f.pluck=function(t,e){return f.map(t,f.property(e))},f.where=function(t,e){return f.filter(t,f.matcher(e))},f.findWhere=function(t,e){return f.find(t,f.matcher(e))},f.max=function(t,e,i){var s=-1/0,n=-1/0,o,r;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=C(t)?t:f.values(t);for(var a=0,l=t.length;a<l;a++)null!=(o=t[a])&&o>s&&(s=o)}else e=b(e,i),f.each(t,function(t,i,o){((r=e(t,i,o))>n||r===-1/0&&s===-1/0)&&(s=t,n=r)});return s},f.min=function(t,e,i){var s=1/0,n=1/0,o,r;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=C(t)?t:f.values(t);for(var a=0,l=t.length;a<l;a++)null!=(o=t[a])&&o<s&&(s=o)}else e=b(e,i),f.each(t,function(t,i,o){((r=e(t,i,o))<n||r===1/0&&s===1/0)&&(s=t,n=r)});return s},f.shuffle=function(t){return f.sample(t,1/0)},f.sample=function(t,e,i){if(null==e||i)return C(t)||(t=f.values(t)),t[f.random(t.length-1)];var s=C(t)?f.clone(t):f.values(t),n=k(s);e=Math.max(Math.min(e,n),0);for(var o=n-1,r=0;r<e;r++){var a=f.random(r,o),l=s[r];s[r]=s[a],s[a]=l}return s.slice(0,e)},f.sortBy=function(t,e,i){var s=0;return e=b(e,i),f.pluck(f.map(t,function(t,i,n){return{value:t,index:s++,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,s=e.criteria;if(i!==s){if(i>s||void 0===i)return 1;if(i<s||void 0===s)return-1}return t.index-e.index}),"value")};var T=function(t,e){return function(i,s,n){var o=e?[[],[]]:{};return s=b(s,n),f.each(i,function(e,n){var r=s(e,n,i);t(o,e,r)}),o}};f.groupBy=T(function(t,e,i){f.has(t,i)?t[i].push(e):t[i]=[e]}),f.indexBy=T(function(t,e,i){t[i]=e}),f.countBy=T(function(t,e,i){f.has(t,i)?t[i]++:t[i]=1});var E=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;f.toArray=function(t){return t?f.isArray(t)?l.call(t):f.isString(t)?t.match(E):C(t)?f.map(t,f.identity):f.values(t):[]},f.size=function(t){return null==t?0:C(t)?t.length:f.keys(t).length},f.partition=T(function(t,e,i){t[i?0:1].push(e)},!0),f.first=f.head=f.take=function(t,e,i){if(!(null==t||t.length<1))return null==e||i?t[0]:f.initial(t,t.length-e)},f.initial=function(t,e,i){return l.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},f.last=function(t,e,i){if(!(null==t||t.length<1))return null==e||i?t[t.length-1]:f.rest(t,Math.max(0,t.length-e))},f.rest=f.tail=f.drop=function(t,e,i){return l.call(t,null==e||i?1:e)},f.compact=function(t){return f.filter(t,Boolean)};var $=function(t,e,i,s){s=s||[];for(var n=s.length,o=0,r=k(t);o<r;o++){var a=t[o];if(C(a)&&(f.isArray(a)||f.isArguments(a)))if(e)for(var l=0,c=a.length;l<c;)s[n++]=a[l++];else $(a,e,i,s),n=s.length;else i||(s[n++]=a)}return s};f.flatten=function(t,e){return $(t,e,!1)},f.without=y(function(t,e){return f.difference(t,e)}),f.uniq=f.unique=function(t,e,i,s){f.isBoolean(e)||(s=i,i=e,e=!1),null!=i&&(i=b(i,s));for(var n=[],o=[],r=0,a=k(t);r<a;r++){var l=t[r],c=i?i(l,r,t):l;e?(r&&o===c||n.push(l),o=c):i?f.contains(o,c)||(o.push(c),n.push(l)):f.contains(n,l)||n.push(l)}return n},f.union=y(function(t){return f.uniq($(t,!0,!0))}),f.intersection=function(t){for(var e=[],i=arguments.length,s=0,n=k(t);s<n;s++){var o=t[s];if(!f.contains(e,o)){var r;for(r=1;r<i&&f.contains(arguments[r],o);r++);r===i&&e.push(o)}}return e},f.difference=y(function(t,e){return e=$(e,!0,!0),f.filter(t,function(t){return!f.contains(e,t)})}),f.unzip=function(t){for(var e=t&&f.max(t,k).length||0,i=Array(e),s=0;s<e;s++)i[s]=f.pluck(t,s);return i},f.zip=y(f.unzip),f.object=function(t,e){for(var i={},s=0,n=k(t);s<n;s++)e?i[t[s]]=e[s]:i[t[s][0]]=t[s][1];return i};var I=function(t){return function(e,i,s){i=b(i,s);for(var n=k(e),o=t>0?0:n-1;o>=0&&o<n;o+=t)if(i(e[o],o,e))return o;return-1}};f.findIndex=I(1),f.findLastIndex=I(-1),f.sortedIndex=function(t,e,i,s){i=b(i,s,1);for(var n=i(e),o=0,r=k(t);o<r;){var a=Math.floor((o+r)/2);i(t[a])<n?o=a+1:r=a}return o};var P=function(t,e,i){return function(s,n,o){var r=0,a=k(s);if("number"==typeof o)t>0?r=o>=0?o:Math.max(o+a,r):a=o>=0?Math.min(o+1,a):o+a+1;else if(i&&o&&a)return o=i(s,n),s[o]===n?o:-1;if(n!==n)return o=e(l.call(s,r,a),f.isNaN),o>=0?o+r:-1;for(o=t>0?r:a-1;o>=0&&o<a;o+=t)if(s[o]===n)return o;return-1}};f.indexOf=P(1,f.findIndex,f.sortedIndex),f.lastIndexOf=P(-1,f.findLastIndex),f.range=function(t,e,i){null==e&&(e=t||0,t=0),i||(i=e<t?-1:1);for(var s=Math.max(Math.ceil((e-t)/i),0),n=Array(s),o=0;o<s;o++,t+=i)n[o]=t;return n},f.chunk=function(t,e){if(null==e||e<1)return[];for(var i=[],s=0,n=t.length;s<n;)i.push(l.call(t,s,s+=e));return i};var O=function(t,e,i,s,n){if(!(s instanceof e))return t.apply(i,n);var o=w(t.prototype),r=t.apply(o,n);return f.isObject(r)?r:o};f.bind=y(function(t,e,i){if(!f.isFunction(t))throw new TypeError("Bind must be called on a function");var s=y(function(n){return O(t,s,e,this,i.concat(n))});return s}),f.partial=y(function(t,e){var i=f.partial.placeholder,s=function(){for(var n=0,o=e.length,r=Array(o),a=0;a<o;a++)r[a]=e[a]===i?arguments[n++]:e[a];for(;n<arguments.length;)r.push(arguments[n++]);return O(t,s,this,this,r)};return s}),f.partial.placeholder=f,f.bindAll=y(function(t,e){e=$(e,!1,!1);var i=e.length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var s=e[i];t[s]=f.bind(t[s],t)}}),f.memoize=function(t,e){var i=function(s){var n=i.cache,o=""+(e?e.apply(this,arguments):s);return f.has(n,o)||(n[o]=t.apply(this,arguments)),n[o]};return i.cache={},i},f.delay=y(function(t,e,i){return setTimeout(function(){return t.apply(null,i)},e)}),f.defer=f.partial(f.delay,f,1),f.throttle=function(t,e,i){var s,n,o,r,a=0;i||(i={});var l=function(){a=!1===i.leading?0:f.now(),s=null,r=t.apply(n,o),s||(n=o=null)},c=function(){var c=f.now();a||!1!==i.leading||(a=c);var u=e-(c-a);return n=this,o=arguments,u<=0||u>e?(s&&(clearTimeout(s),s=null),a=c,r=t.apply(n,o),s||(n=o=null)):s||!1===i.trailing||(s=setTimeout(l,u)),r};return c.cancel=function(){clearTimeout(s),a=0,s=n=o=null},c},f.debounce=function(t,e,i){var s,n,o=function(e,i){s=null,i&&(n=t.apply(e,i))},r=y(function(r){if(s&&clearTimeout(s),i){var a=!s;s=setTimeout(o,e),a&&(n=t.apply(this,r))}else s=f.delay(o,e,this,r);return n});return r.cancel=function(){clearTimeout(s),s=null},r},f.wrap=function(t,e){return f.partial(e,t)},f.negate=function(t){return function(){return!t.apply(this,arguments)}},f.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,s=t[e].apply(this,arguments);i--;)s=t[i].call(this,s);return s}},f.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},f.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}},f.once=f.partial(f.before,2),f.restArgs=y;var A=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],B=function(t,e){var i=L.length,s=t.constructor,n=f.isFunction(s)&&s.prototype||o,r="constructor";for(f.has(t,r)&&!f.contains(e,r)&&e.push(r);i--;)(r=L[i])in t&&t[r]!==n[r]&&!f.contains(e,r)&&e.push(r)};f.keys=function(t){if(!f.isObject(t))return[];if(d)return d(t);var e=[];for(var i in t)f.has(t,i)&&e.push(i);return A&&B(t,e),e},f.allKeys=function(t){if(!f.isObject(t))return[];var e=[];for(var i in t)e.push(i);return A&&B(t,e),e},f.values=function(t){for(var e=f.keys(t),i=e.length,s=Array(i),n=0;n<i;n++)s[n]=t[e[n]];return s},f.mapObject=function(t,e,i){e=b(e,i);for(var s=f.keys(t),n=s.length,o={},r=0;r<n;r++){var a=s[r];o[a]=e(t[a],a,t)}return o},f.pairs=function(t){for(var e=f.keys(t),i=e.length,s=Array(i),n=0;n<i;n++)s[n]=[e[n],t[e[n]]];return s},f.invert=function(t){for(var e={},i=f.keys(t),s=0,n=i.length;s<n;s++)e[t[i[s]]]=i[s];return e},f.functions=f.methods=function(t){var e=[];for(var i in t)f.isFunction(t[i])&&e.push(i);return e.sort()};var D=function(t,e){return function(i){var s=arguments.length;if(e&&(i=Object(i)),s<2||null==i)return i;for(var n=1;n<s;n++)for(var o=arguments[n],r=t(o),a=r.length,l=0;l<a;l++){var c=r[l];e&&void 0!==i[c]||(i[c]=o[c])}return i}};f.extend=D(f.allKeys),f.extendOwn=f.assign=D(f.keys),f.findKey=function(t,e,i){e=b(e,i);for(var s=f.keys(t),n,o=0,r=s.length;o<r;o++)if(n=s[o],e(t[n],n,t))return n};var N=function(t,e,i){return e in i};f.pick=y(function(t,e){var i={},s=e[0];if(null==t)return i;f.isFunction(s)?(e.length>1&&(s=g(s,e[1])),e=f.allKeys(t)):(s=N,e=$(e,!1,!1),t=Object(t));for(var n=0,o=e.length;n<o;n++){var r=e[n],a=t[r];s(a,r,t)&&(i[r]=a)}return i}),f.omit=y(function(t,e){var i=e[0],s;return f.isFunction(i)?(i=f.negate(i),e.length>1&&(s=e[1])):(e=f.map($(e,!1,!1),String),i=function(t,i){return!f.contains(e,i)}),f.pick(t,i,s)}),f.defaults=D(f.allKeys,!0),f.create=function(t,e){var i=w(t);return e&&f.extendOwn(i,e),i},f.clone=function(t){return f.isObject(t)?f.isArray(t)?t.slice():f.extend({},t):t},f.tap=function(t,e){return e(t),t},f.isMatch=function(t,e){var i=f.keys(e),s=i.length;if(null==t)return!s;for(var n=Object(t),o=0;o<s;o++){var r=i[o];if(e[r]!==n[r]||!(r in n))return!1}return!0};var M,R;M=function(t,e,i,s){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;if(t!==t)return e!==e;var n=typeof t;return("function"===n||"object"===n||"object"==typeof e)&&R(t,e,i,s)},R=function(t,e,i,s){t instanceof f&&(t=t._wrapped),e instanceof f&&(e=e._wrapped);var n=c.call(t);if(n!==c.call(e))return!1;switch(n){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return r.valueOf.call(t)===r.valueOf.call(e)}var o="[object Array]"===n;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,l=e.constructor;if(a!==l&&!(f.isFunction(a)&&a instanceof a&&f.isFunction(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],s=s||[];for(var u=i.length;u--;)if(i[u]===t)return s[u]===e;if(i.push(t),s.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!M(t[u],e[u],i,s))return!1}else{var h=f.keys(t),d;if(u=h.length,f.keys(e).length!==u)return!1;for(;u--;)if(d=h[u],!f.has(e,d)||!M(t[d],e[d],i,s))return!1}return i.pop(),s.pop(),!0},f.isEqual=function(t,e){return M(t,e)},f.isEmpty=function(t){return null==t||(C(t)&&(f.isArray(t)||f.isString(t)||f.isArguments(t))?0===t.length:0===f.keys(t).length)},f.isElement=function(t){return!(!t||1!==t.nodeType)},f.isArray=h||function(t){return"[object Array]"===c.call(t)},f.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},f.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){f["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}}),f.isArguments(arguments)||(f.isArguments=function(t){return f.has(t,"callee")});var z=i.document&&i.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof z&&(f.isFunction=function(t){return"function"==typeof t||!1}),f.isFinite=function(t){return!f.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},f.isNaN=function(t){return f.isNumber(t)&&isNaN(t)},f.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===c.call(t)},f.isNull=function(t){return null===t},f.isUndefined=function(t){return void 0===t},f.has=function(t,e){return null!=t&&u.call(t,e)},f.noConflict=function(){return i._=s,this},f.identity=function(t){return t},f.constant=function(t){return function(){return t}},f.noop=function(){},f.property=x,f.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},f.matcher=f.matches=function(t){return t=f.extendOwn({},t),function(e){return f.isMatch(e,t)}},f.times=function(t,e,i){var s=Array(Math.max(0,t));e=g(e,i,1);for(var n=0;n<t;n++)s[n]=e(n);return s},f.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},f.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=f.invert(U),F=function(t){var e=function(e){return t[e]},i="(?:"+f.keys(t).join("|")+")",s=RegExp(i),n=RegExp(i,"g");return function(t){return t=null==t?"":""+t,s.test(t)?t.replace(n,e):t}};f.escape=F(U),f.unescape=F(j),f.result=function(t,e,i){var s=null==t?void 0:t[e];return void 0===s&&(s=i),f.isFunction(s)?s.call(t):s};var H=0;f.uniqueId=function(t){var e=++H+"";return t?t+e:e},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,X=function(t){return"\\"+W[t]};f.template=function(t,e,i){!e&&i&&(e=i),e=f.defaults({},e,f.templateSettings);var s=RegExp([(e.escape||q).source,(e.interpolate||q).source,(e.evaluate||q).source].join("|")+"|$","g"),n=0,o="__p+='";t.replace(s,function(e,i,s,r,a){return o+=t.slice(n,a).replace(V,X),n=a+e.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":s?o+="'+\n((__t=("+s+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";var r;try{r=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var a=function(t){return r.call(this,t,f)};return a.source="function("+(e.variable||"obj")+"){\n"+o+"}",a},f.chain=function(t){var e=f(t);return e._chain=!0,e};var G=function(t,e){return t._chain?f(e).chain():e};f.mixin=function(t){return f.each(f.functions(t),function(e){var i=f[e]=t[e];f.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),G(this,i.apply(f,t))}}),f},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];f.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],G(this,i)}}),f.each(["concat","join","slice"],function(t){var e=n[t];f.prototype[t]=function(){return G(this,e.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},f.prototype.valueOf=f.prototype.toJSON=f.prototype.value,f.prototype.toString=function(){return String(this._wrapped)},"function"==typeof sumo.define&&sumo.define.amd&&sumo.define("underscore",[],function(){return f})}(),sumo.define("underscore-lib",function(){}),sumo.define("underscore",["underscore-lib"],function(t){return t.noConflict()}),sumo.define("htmlParser",[],function(){function t(t,r){t=t||"",r=r||{};for(var a in e)e.hasOwnProperty(a)&&(r.autoFix&&(r["fix_"+a]=!0),r.fix=r.fix||r["fix_"+a]);var l=[],c=document.createElement("div"),u=function(t){return"string"==typeof t&&-1!==t.indexOf("&")?(c.innerHTML=t,c.textContent||c.innerText||t):t},h=function(e){t+=e},d=function(e){t=e+t},m={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},p={comment:function(){var e=t.indexOf("--\x3e");if(e>=0)return{content:t.substr(4,e-1),length:e+3}},endTag:function(){var e=t.match(s);if(e)return{tagName:e[1],length:e[0].length}},atomicTag:function(){var e=p.startTag();if(e){var i=t.slice(e.length);if(i.match(new RegExp("</\\s*"+e.tagName+"\\s*>","i"))){var s=i.match(new RegExp("([\\s\\S]*?)</\\s*"+e.tagName+"\\s*>","i"));if(s)return{tagName:e.tagName,attrs:e.attrs,content:s[1],length:s[0].length+e.length}}}},startTag:function(){if(-1===t.indexOf(">"))return null;var e=t.match(i);if(e){var s={},r={},a=e[2];return e[2].replace(n,function(t,e){if(arguments[2]||arguments[3]||arguments[4]||arguments[5])if(arguments[5])s[arguments[5]]="",r[e]=!0;else{var i=arguments[2]||arguments[3]||arguments[4]||o.test(e)&&e||"";s[e]=u(i)}else s[e]=null;a=a.replace(t,"")}),{tagName:e[1],attrs:s,booleanAttrs:r,rest:a,unary:!!e[3],length:e[0].length}}},chars:function(){var e=t.indexOf("<")
;return{length:e>=0?e:t.length}}},f=function(){for(var e in m)if(m[e].test(t)){var i=p[e]();return i?(i.type=i.type||e,i.text=t.substr(0,i.length),t=t.slice(i.length),i):null}},g=function(t){for(var e;e=f();)if(t[e.type]&&!1===t[e.type](e))return},v=function(){var e=t;return t="",e},b=function(){return t};return r.fix&&function(){var e=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,i=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,s=[];s.last=function(){return this[this.length-1]},s.lastTagNameEq=function(t){var e=this.last();return e&&e.tagName&&e.tagName.toUpperCase()===t.toUpperCase()},s.containsTagName=function(t){for(var e=0,i;i=this[e];e++)if(i.tagName===t)return!0;return!1};var n=function(t){return t&&"startTag"===t.type&&(t.unary=e.test(t.tagName)||t.unary,t.html5Unary=!/\/>$/.test(t.text)),t},o=f,a=function(){var e=t,i=n(o());return t=e,i},l=function(){var t=s.pop();d("</"+t.tagName+">")},c={startTag:function(t){var e=t.tagName;"TR"===e.toUpperCase()&&s.lastTagNameEq("TABLE")?(d("<TBODY>"),h()):r.fix_selfClose&&i.test(e)&&s.containsTagName(e)?s.lastTagNameEq(e)?l():(d("</"+t.tagName+">"),h()):t.unary||s.push(t)},endTag:function(t){s.last()?r.fix_tagSoup&&!s.lastTagNameEq(t.tagName)?l():s.pop():r.fix_tagSoup&&u()}},u=function(){o(),h()},h=function(){var t=a();t&&c[t.type]&&c[t.type](t)};f=function(){return h(),n(o())}}(),{append:h,readToken:f,readTokens:g,clear:v,rest:b,stack:l}}var e=function(){var t={},e,i=window.document.createElement("div");return e="<P><I></P></I>",i.innerHTML=e,t.tagSoup=i.innerHTML!==e,i.innerHTML="<P><i><P></P></i></P>",t.selfClose=2===i.childNodes.length,t}(),i=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,s=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,n=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,o=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,r=!1;t.supports=e,t.tokenToString=function(t){var e={comment:function(t){return"\x3c!--"+t.content},endTag:function(t){return"</"+t.tagName+">"},atomicTag:function(t){return e.startTag(t)+t.content+e.endTag(t)},startTag:function(t){var e="<"+t.tagName;for(var i in t.attrs){e+=" "+i;var s=t.attrs[i];void 0!==t.booleanAttrs&&void 0!==t.booleanAttrs[i]||(e+='="'+(s?s.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"')}return t.rest&&(e+=t.rest),e+(t.unary&&!t.html5Unary?"/>":">")},chars:function(t){return t.text}};return e[t.type](t)},t.escapeAttributes=function(t){var e={};for(var i in t){var s=t[i];e[i]=s&&s.replace(/(^|[^\\])"/g,'$1\\"')}return e};for(var a in e)t.browserHasFlaw=t.browserHasFlaw||!e[a]&&a;return t}),sumo.define("postscribe",["htmlParser"],function(t){function e(){}function i(t){return t!==d&&null!==t}function s(t){return"function"==typeof t}function n(t,e,i){var s,n=t&&t.length||0;for(s=0;s<n;s++)e.call(i,t[s],s)}function o(t,e,i){var s;for(s in t)t.hasOwnProperty(s)&&e.call(i,s,t[s])}function r(t,e){return o(e,function(e,i){t[e]=i}),t}function a(t,e){return t=t||{},o(e,function(e,s){i(t[e])||(t[e]=s)}),t}function l(t){try{return p.call(t)}catch(i){var e=[];return n(t,function(t){e.push(t)}),e}}function c(t){return!!(t&&"tagName"in t)&&!!~t.tagName.toLowerCase().indexOf("script")}function u(t){return!!(t&&"tagName"in t)&&!!~t.tagName.toLowerCase().indexOf("style")}var h={afterAsync:e,afterDequeue:e,afterStreamStart:e,afterWrite:e,autoFix:!0,beforeEnqueue:e,beforeWriteToken:function(t){return t},beforeWrite:function(t){return t},done:e,error:function(t){throw t},releaseAsync:!1},d=void 0,m=!1,p=Array.prototype.slice,f=function(t){return t[t.length-1]},g=function(){function e(t,e,s){var n=h+e;if(2===arguments.length){var o=t.getAttribute(n);return i(o)?String(o):o}i(s)&&""!==s?t.setAttribute(n,s):t.removeAttribute(n)}function a(i,s){var n=i.ownerDocument;r(this,{root:i,options:s,win:n.defaultView||n.parentWindow,doc:n,parser:t("",{autoFix:s.autoFix}),actuals:[i],proxyHistory:"",proxyRoot:n.createElement(i.nodeName),scriptStack:[],writeQueue:[]}),e(this.proxyRoot,"proxyof",0)}var h="data-ps-";return a.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var t;!this.deferredRemote&&this.writeQueue.length;)t=this.writeQueue.shift(),s(t)?this.callFunction(t):this.writeImpl(t)},a.prototype.callFunction=function(t){var e={type:"function",value:t.name||t.toString()};this.onScriptStart(e),t.call(this.win,this.doc),this.onScriptDone(e)},a.prototype.writeImpl=function(t){this.parser.append(t);for(var e,i=[],s,n;(e=this.parser.readToken())&&!(s=c(e))&&!(n=u(e));)(e=this.options.beforeWriteToken(e))&&i.push(e);this.writeStaticTokens(i),s&&this.handleScriptToken(e),n&&this.handleStyleToken(e)},a.prototype.writeStaticTokens=function(t){var e=this.buildChunk(t);if(e.actual)return e.html=this.proxyHistory+e.actual,this.proxyHistory+=e.proxy,this.proxyRoot.innerHTML=e.html,this.walkChunk(),e},a.prototype.buildChunk=function(e){var i=this.actuals.length,s=[],o=[],r=[];return n(e,function(e){var n=t.tokenToString(e);if(s.push(n),e.attrs){if(!/^noscript$/i.test(e.tagName)){var a=i++;o.push(n.replace(/(\/?>)/," "+h+"id="+a+" $1")),"ps-script"!==e.attrs.id&&"ps-style"!==e.attrs.id&&r.push("atomicTag"===e.type?"":"<"+e.tagName+" "+h+"proxyof="+a+(e.unary?" />":">"))}}else o.push(n),r.push("endTag"===e.type?n:"")}),{tokens:e,raw:s.join(""),actual:o.join(""),proxy:r.join("")}},a.prototype.walkChunk=function(){for(var t,s=[this.proxyRoot];i(t=s.shift());){var n=1===t.nodeType;if(!(n&&e(t,"proxyof"))){n&&(this.actuals[e(t,"id")]=t,e(t,"id",null));var o=t.parentNode&&e(t.parentNode,"proxyof");o&&this.actuals[o].appendChild(t)}s.unshift.apply(s,l(t.childNodes))}},a.prototype.handleScriptToken=function(t){var e=this.parser.clear();if(e&&this.writeQueue.unshift(e),t.src=t.attrs.src||t.attrs.SRC,t=this.options.beforeWriteToken(t)){t.src&&this.scriptStack.length?this.deferredRemote=t:this.onScriptStart(t);var i=this;this.writeScriptToken(t,function(){i.onScriptDone(t)})}},a.prototype.handleStyleToken=function(t){var e=this.parser.clear();e&&this.writeQueue.unshift(e),t.type=t.attrs.type||t.attrs.TYPE||"text/css",t=this.options.beforeWriteToken(t),t&&this.writeStyleToken(t),e&&this.write()},a.prototype.writeStyleToken=function(t){var e=this.buildStyle(t);this.insertStyle(e),t.content&&(e.styleSheet&&!e.sheet?e.styleSheet.cssText=t.content:e.appendChild(this.doc.createTextNode(t.content)))},a.prototype.buildStyle=function(t){var e=this.doc.createElement(t.tagName);return e.setAttribute("type",t.type),o(t.attrs,function(t,i){e.setAttribute(t,i)}),e},a.prototype.insertStyle=function(t){this.writeImpl('<span id="ps-style"/>');var e=this.doc.getElementById("ps-style");e.parentNode.replaceChild(t,e)},a.prototype.onScriptStart=function(t){t.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(t)},a.prototype.onScriptDone=function(t){if(t!==this.scriptStack[0])return void this.options.error({message:"Bad script nesting or script finished twice"});this.scriptStack.shift(),this.write.apply(this,t.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null)},a.prototype.writeScriptToken=function(t,e){var i=this.buildScript(t),s=this.shouldRelease(i),n=this.options.afterAsync;t.src&&(i.src=t.src,this.scriptLoadHandler(i,s?n:function(){e(),n()}));try{this.insertScript(i),t.src&&!s||e()}catch(t){this.options.error(t),e()}},a.prototype.buildScript=function(t){var e=this.doc.createElement(t.tagName);return o(t.attrs,function(t,i){e.setAttribute(t,i)}),t.content&&(e.text=t.content),e},a.prototype.insertScript=function(t){this.writeImpl('<span id="ps-script"/>');var e=this.doc.getElementById("ps-script");e&&e.parentNode&&e.parentNode.replaceChild(t,e)},a.prototype.scriptLoadHandler=function(t,e){function i(){t=t.onload=t.onreadystatechange=t.onerror=null}function s(){i(),e()}function n(t){i(),o(t),e()}var o=this.options.error;r(t,{onload:function(){s()},onreadystatechange:function(){/^(loaded|complete)$/.test(t.readyState)&&s()},onerror:function(){n({message:"remote script failed "+t.src})}})},a.prototype.shouldRelease=function(t){return!/^script$/i.test(t.nodeName)||!!(this.options.releaseAsync&&t.src&&t.hasAttribute("async"))},a}();return{postscribe:function(){function t(){var t=c.shift(),e;t&&(e=f(t),e.afterDequeue(),t.stream=i.apply(null,t),e.afterStreamStart())}function i(i,s,a){function c(t){t=a.beforeWrite(t),u.write(t),a.afterWrite(t)}u=new g(i,a),u.id=o++,u.name=a.name||u.id,n.streams[u.name]=u;var h=i.ownerDocument,d={close:h.close,open:h.open,write:h.write,writeln:h.writeln};r(h,{close:e,open:e,write:function(){return c(l(arguments).join(""))},writeln:function(){return c(l(arguments).join("")+"\n")}});var m=u.win.onerror||e;return u.win.onerror=function(t,e,i){a.error({msg:t+" - "+e+":"+i}),m.apply(u.win,arguments)},u.write(s,function e(){r(h,d),u.win.onerror=m,a.done(),u=null,t()}),u}function n(i,n,o){s(o)&&(o={done:o}),o=a(o,h),i=/^#/.test(i)?window.document.getElementById(i.substr(1)):i.jquery?i[0]:i;var r=[i,n,o];return i.postscribe={cancel:function(){r.stream?r.stream.abort():r[1]=e}},o.beforeEnqueue(r),c.push(r),u||t(),i.postscribe}var o=0,c=[],u=null;return r(n,{streams:{},queue:c,WriteStream:g})}()}}),sumo.define("articles",[],function(){var t=[],e=["[class^=comment]","[id^=comment]","[class*=footer]","[class^=comment]",".archive-page",".aside",".hentry-metro",".hrf-entry"],i=[".sidebar:not(body)","aside","#sidebar","footer","[class*=footer]:not(body):not([class*=not-footer])","#comments","#livefyre-comments","[class^=fyre]","[id^=comment]","[class*=related-post]:not(body)",".tve-leads-lightbox"],s=[];return{_invalidateNode:function(t){if(t&&"#text"!==t.nodeName&&(s.push(t),t.childNodes&&t.childNodes.length>0))for(var e=0;e<t.childNodes.length;e++)this._invalidateNode(t.childNodes[e])},_findInvalidElements:function(t){for(var e=0;e<i.length;e++)for(var s=i[e],n=t.querySelectorAll(s),o=0;o<n.length;o++)this._invalidateNode(n[o])},_findAnchor:function(t){for(var e=null,i=["a[rel=bookmark]","h1 > a","h2 > a","h3 > a","header > a"],s=0;s<i.length;s++){var n=i[s],o=t.querySelector(n+"[href]");if(o)return o[0]}return null},_findFooter:function(t){for(var e=[".fyre","footer",".post-footer",".footer",".entry-footer",'[class^="comment"]:not([class^=comment-count]):not([class^=comments-link]):not([class^=comments-number]):not(li)',".fb-comments","iframe[title=Disqus]","#disqus_thread"],i=[".post-meta-info"],s=0;s<e.length;s++){var n=e[s],o=t.querySelector(n);if(o){if(o.classList.contains("fb-comments")){for(var r=o,a=o,l=!1;null!==a.previousElementSibling;){if("P"===a.nodeName&&"H3"===a.previousElementSibling.nodeName){l=!0,a=a.previousElementSibling;break}a=a.previousElementSibling}if(l){for(;null!==a.previousElementSibling;)if(a=a.previousElementSibling,"H3"===a.nodeName)return a;return r}return r}return o}}return null},_findHeader:function(t){for(var e=[".main-title","header",".post-header",".post-title","h1","h2","h3","h4","h5","h6",".title",".headline"],i=0;i<e.length;i++){var s=e[i],n=t.querySelector(s);if(n)return n}return null},_validateArticles:function(t){if(!t||!t.length)return[];for(var e=[],i=0;i<t.length;i++){var n=t[i],o=!0;if(n.innerText&&""!==n.innerText.trim()){for(var r=0;r<s.length;r++)n===s[r]&&(o=!1);if(o){n.__header||(n.__header=this._findHeader(n)),n.__title=n.__header?n.__header:null,n.__footer=this._findFooter(n),self._title&&(n.__titleText=self.__title.innerText());var a=n.__header&&n.__header.length?this._findAnchor(n.__header[0]):null;n.__anchor=a||this._findAnchor(n),n.__anchor?n.__url=n.__anchor.getAttribute("href"):n.__url=null,n.__url||(n.__url=window.location.href),e.push(n)}}}return e},_findLeaves:function(t,i){for(var s=i,n=0;n<e.length;n++)s+=":not("+e[n]+")";return t.querySelectorAll(s)||[]},findAll:function(){var e=document.querySelector('main, [role="main"]'),i=e||document.body;t.push("article"),t.push(".post"),t.push(".entry-content"),t.push(".post-content"),t.push(".post_box"),t.push(".post-item"),t.push(".blog-post-wrapper"),t.push(".type-post"),t.push("#content"),t.push(".blog_content"),i===document.body?(t.push("main .hentry"),t.push("[role=main] .hentry"),t.push("main .content"),t.push("[role=main] .content")):(t.push(".hentry"),t.push(".content")),t.push("#post-content"),t.push("#blog-content"),t.push(".blog-post"),this._findInvalidElements(i);for(var s=0;s<t.length;s++){var n=this._findLeaves(i,t[s]),o=this._validateArticles(n);if(o.length>0)return o}var r=document.querySelectorAll("p"),n=[];if(r&&r.length){for(var s=0;s<r.length;s++){var a=r[s].parentNode;if(!(n.indexOf(a)>-1)){for(var l=a.childNodes,c=!1,u=0,h=0;h<l.length;h++)if("P"===l[h].tagName&&u++,u>=3){c=!0;break}c&&n.push(a)}}var o=this._validateArticles(n);if(o.length>0)return o}return[]},find:function(){var t=this.findAll();return t&&t.length?t[0]:null},hasArticles:function(){return this.findAll().length>=1}}}),sumo.define("es6!services/contact-form/index",["jquery","underscore","postscribe","articles","jquery.style","jquery.displayrules"],function(t,e,i,s){t.fn.unstatic=function(){return t(this).addClass("sumome-article"),"static"==t(this).css("position")&&t(this).css("position","relative"),"content-box"==t(this).css("box-sizing")&&t(this).css("box-sizing","border-box"),this};var n=function t(e){var i,s,n,o;return e.toHex&&(e="#"+e.toHex()),e.match(/^rgb/)?(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),i=e[1],n=e[2],s=e[3]):(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")),i=e>>16,n=e>>8&255,s=255&e),o=Math.sqrt(i*i*.299+n*n*.587+s*s*.114),o>127.5?"light":"dark"},o={settings:{},forms:[],tabs:[],articles:[],load:function e(){this.articles=t(s.findAll()),this.settings.firstArticle=this.articles.filter(":first"),this.settings.lastArticle=this.articles.filter(":last"),o.api.on("822aaf16-c4d6-4241-911a-41567c68b443/service/settings",t.proxy(function(t){t.use_captcha&&sumo.require(["lib/recaptcha_ajax"]),t.display_rules&&(this.settings.display_rules=t.display_rules),t.positions&&(this.settings.positions=t.positions),"use_captcha"in t&&(this.settings.useCaptcha=t.use_captcha),t.recaptcha_public_key&&(this.settings.recaptchaPublicKey=t.recaptcha_public_key),t.captcha_language&&(this.settings.captchaLanguage=t.captcha_language),t.heading_text&&(this.settings.headingText=t.heading_text),t.email_placeholder_text&&(this.settings.emailPlaceholderText=t.email_placeholder_text),t.body_placeholder_text&&(this.settings.bodyPlaceholderText=t.body_placeholder_text),t.continue_heading_text&&(this.settings.continueHeadingText=t.continue_heading_text),t.continue_blurb_text&&(this.settings.continueBlurbText=t.continue_blurb_text),t.continue_button_text&&(this.settings.continueButtonText=t.continue_button_text),t.tab_background_color&&(this.settings.tabBackColor=t.tab_background_color),t.pixels_shown&&(this.settings.pixelsShown=t.pixels_shown),t.pixels_conversion&&(this.settings.pixelsConversion=t.pixels_conversion),t.tab_text&&(this.settings.tabText=t.tab_text),t.tab_text_color&&(this.settings.tabTextColor=t.tab_text_color),t.modal_color&&(this.settings.modalColor=t.modal_color),t.heading_color&&(this.settings.headingColor=t.heading_color),t.text_color&&(this.settings.textColor=t.text_color),t.heading_font&&(this.settings.headingFont=t.heading_font),t.text_font&&(this.settings.textFont=t.text_font),t.button_text&&(this.settings.buttonText=t.button_text),t.button_back_color&&(this.settings.buttonBackColor=t.button_back_color),t.button_fore_color&&(this.settings.buttonForeColor=t.button_fore_color),t.content_width&&(this.settings.contentWidth=t.content_width),t.contactFormTemplate&&(this.settings.template=t.contactFormTemplate.id),t.contactFormTemplate&&(this.settings.templateHtml=t.contactFormTemplate.html),t.media_id&&(this.settings.mediaId=t.media_id),this.destroy(!0)},this)),t.ajax({type:"POST",dataType:"json",url:this.sumoProperties.sumoUrl+"/apps/contactform/load",data:{site_id:this.sumoProperties.siteId,href:window.location.href||null,geoLocation:this.sumoProperties.geoLocation,pageViews:this.sumoProperties.views,userAgent:navigator.userAgent},xhrFields:{withCredentials:!1},crossDomain:!0}).done(t.proxy(function(e){e&&"success"in e&&e.success&&(e.use_captcha&&sumo.require(["lib/recaptcha_ajax"]),this.settings.display_rules=e.display_rules,this.settings.positions=e.positions,this.settings.useCaptcha=e.use_captcha,this.settings.recaptchaPublicKey=e.recaptcha_public_key,this.settings.captchaLanguage=e.captcha_language,this.settings.headingText=e.heading_text,this.settings.emailPlaceholderText=e.email_placeholder_text,this.settings.bodyPlaceholderText=e.body_placeholder_text,this.settings.continueHeadingText=e.continue_heading_text,this.settings.continueBlurbText=e.continue_blurb_text,this.settings.continueButtonText=e.continue_button_text,this.settings.pixelsShown=e.pixels_shown,this.settings.pixelsConversion=e.pixels_conversion,this.settings.tabText=e.tab_text,this.settings.tabBackColor=e.tab_background_color,this.settings.tabTextColor=e.tab_text_color,this.settings.modalColor=e.modal_color,this.settings.headingColor=e.heading_color,this.settings.textColor=e.text_color,this.settings.buttonText=e.button_text,this.settings.buttonBackColor=e.button_back_color,this.settings.buttonForeColor=e.button_fore_color,this.settings.headingFont=e.heading_font,this.settings.textFont=e.text_font,this.settings.contentWidth=e.content_width,this.settings.template=e.contactFormTemplate?e.contactFormTemplate.id:null,this.settings.templateHtml=e.contactFormTemplate?e.contactFormTemplate.html:null,this.settings.templateSlug=e.contactFormTemplate?e.contactFormTemplate.slug:null,this.settings.mediaId=e.media_id?e.media_id:null,this.settings.timestamp=e.timestamp,this.settings.uuid=e.uuid,this.settings.hash=e.hash,this.settings.hasContactForm=e.hasContactForm,this.settings.noSumoBranding=e.noSumoBranding,this.settings.ctry=!(!this.sumoProperties.geoLocation||!this.sumoProperties.geoLocation.ctry)&&this.sumoProperties.geoLocation.ctry,this.settings.views=this.sumoProperties.views?this.sumoProperties.views:1,this.settings.reflink="https://sumo.com/?src=sm-cf-"+this.sumoProperties.siteId+"&utm_source=sumo-powered-by&utm_medium=contact-form&utm_campaign="+this.sumoProperties.siteId,t.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views)&&this.install())},o))},findAndStyleElements:function t(){this.$headingEl=this.$template.find(".sumome-contactform-heading"),this.$textEl=this.$template.find(".sumome-contactform-text"),this.$inputEl=this.$template.find(".sumome-contactform-input"),this.$textAreaEl=this.$template.find(".sumome-contactform-textarea"),this.$buttonEl=this.$template.find(".sumome-contactform-button"),this.$buttonTextEl=this.$template.find(".sumome-contactform-button-text"),this.$continueButtonEl=this.$template.find(".sumome-contactform-continue"),this.$continueButtonTextEl=this.$template.find(".sumome-contactform-continue-text"),this.settings.noSumoBranding||(this.$continueButtonEl.after('<div class="sumome-contactform-link-div"><a class="sumome-contactform-link" href="'+this.settings.reflink+'" target="_blank">Powered by Sumo</a></div>'),this.$poweredEl=this.$template.find(".sumome-contactform-link"),this.$poweredEl.style("color",this.settings.textColor,"important")),this.$errorEl=this.$template.find(".sumome-contactform-form div.sumome-contactform-error").hide(),this.$closeButton=this.$template.find(".sumome-contactform-close"),this.$closeButton.style("color",this.settings.textColor,"important"),this.$template.style("background-color","transparent","important")},shadeColor:function t(e,i){e=e.toString();var s=parseInt(e.slice(1),16),n=Math.round(2.55*i),o=(s>>16)+n,r=(s>>8&255)+n,a=(255&s)+n;return"#"+(16777216+65536*(o<255?o<1?0:o:255)+256*(r<255?r<1?0:r:255)+(a<255?a<1?0:a:255)).toString(16).slice(1)},addLoader:function e(i){var s=t("<span>&#8226;</span>").addClass("sumome-button-loading-dot");i.html(""),i.append(s.clone()).append(s.clone()).append(s.clone()).append(s.clone()),i.counter=0,i.loadingDotInterval=setInterval(t.proxy(function(){var t=i.counter%4,e=parseInt(i.counter/4)%2,s=i.find("span.sumome-button-loading-dot").eq(t);e?s.animate({opacity:0}):s.animate({opacity:1}),i.counter++},this),200)},resizeHandler:function e(){var i=t(".sumome-contactform-pullouttab-bottom-center"),s=t(".sumome-contactform-sticky-bottom-center-page");if(i&&i.length&&i.is(":visible")){var n=i.width();i.css("left",t(window).width()/2-n/2)}if(s&&s.length&&s.is(":visible")){var n=s.width();s.css("left",t(window).width()/2-n/2)}},removeLoader:function t(e,i){e.counter=0,clearInterval(e.loadingDotInterval),e.html("")},sendMessage:function e(s,n,o,r,a,l,c){s.$buttonEl.data("sumome-disabled",!0),s.$errorEl.text("").hide(),this.addLoader(s.$buttonEl),t.ajax({type:"POST",dataType:"json",url:this.sumoProperties.sumoUrl+"/apps/contactform/sendmessage",data:{site_id:this.sumoProperties.siteId,email_address:n,message:o,msgpot:r,current_url:window.location.href,timestamp:a,uuid:l,hash:c,recaptcha_challenge_field:t("#recaptcha_challenge_field").val(),recaptcha_response_field:t("#recaptcha_response_field").val()},xhrFields:{withCredentials:!1},crossDomain:!0}).done(t.proxy(function(e){if(this.removeLoader(s.$buttonEl),e&&"success"in e&&e.success){if(this.api.emit("event",{appId:"822aaf16-c4d6-4241-911a-41567c68b443",event:"message"}),s.$inputEl.hide(),s.$textAreaEl.hide(),s.$buttonEl.hide(),s.$buttonEl.text(this.settings.buttonText),s.$continueButtonEl.show(),s.$textEl.show(),s.$headingEl.text(this.settings.continueHeadingText),e.timestamp&&e.uuid&&e.hash&&(s.$hiddenTimestampEl.val(e.timestamp),s.$hiddenUuidEl.val(e.uuid),s.$hiddenHashEl.val(e.hash)),this.settings.useCaptcha&&(s.find("div#recaptcha_widget").hide(),Recaptcha.reload()),this.settings.hasContactForm&&this.settings.pixelsConversion){var n=t('<div style="position:absolute !important;width:0 !important;height:0 !important;top:0px !important;left:0px !important;margin:0 !important;padding:0 !important;font-size:0 !important;background:transparent !important;"></div>');t("body").append(n),i.postscribe(n.get(0),this.settings.pixelsConversion)}}else s.$buttonEl.text(this.settings.buttonText),s.$errorEl.text(e.error).show(),window.clearTimeout(s.timer),s.timer=setTimeout(t.proxy(function(){s.$errorEl.text("").hide()},this),5e3),e&&"recaptcha_form"in e&&(Recaptcha.reload(),s.$textAreaEl.after(this.$recaptchaWidgetEl)),setTimeout(t.proxy(function(){s.$buttonEl.data("sumome-disabled",!1)},this),1e3)},this))},addEventListeners:function e(i,s){if(i.$buttonEl=i.find(".sumome-contactform-button"),i.$textAreaEl=i.find(".sumome-contactform-textarea"),i.$inputEl=i.find(".sumome-contactform-input"),i.$continueButtonEl=i.find(".sumome-contactform-continue"),i.$textEl=i.find(".sumome-contactform-text"),i.$headingEl=i.find(".sumome-contactform-heading"),i.$closeButton=i.find(".sumome-contactform-close"),i.$captchaEl=i.find(".sumome-contactform-captcha"),i.$errorEl=i.find(".sumome-contactform-error"),i.$hiddenTimestampEl=i.find(".sumome-contactform-timestamp"),i.$hiddenUuidEl=i.find(".sumome-contactform-uuid"),i.$hiddenHashEl=i.find(".sumome-contactform-hash"),["sumome-contactform-sbp","sumome-contactform-lp","sumome-contactform-rp","sumome-contactform-mbl","sumome-contactform-mbr"].indexOf(i.attr("id"))<0&&(i.$inputEl.on("focus",t.proxy(function(t){i.addClass("sumome-contactform-focused")},this)),i.$textAreaEl.on("focus",t.proxy(function(t){i.addClass("sumome-contactform-focused")},this)),i.$inputEl.on("blur",t.proxy(function(e){setTimeout(t.proxy(function(){t(document.activeElement).parents("#"+i.attr("id")).length||i.removeClass("sumome-contactform-focused")},this))},this)),i.$textAreaEl.on("blur",t.proxy(function(e){setTimeout(t.proxy(function(){t(document.activeElement).parents("#"+i.attr("id")).length||i.removeClass("sumome-contactform-focused")},this))},this)),i.$buttonEl.on("blur",t.proxy(function(e){setTimeout(t.proxy(function(){t(document.activeElement).parents("#"+i.attr("id")).length||i.removeClass("sumome-contactform-focused")},this))},this)),i.$inputEl.on("keydown",t.proxy(function(t){13===t.keyCode&&i.$buttonEl.trigger("click")},this))),i.$buttonEl.on("click",t.proxy(function(){if(!i.continueMode&&!i.$buttonEl.data("sumome-disabled")){var e=/\S+@\S+\.\S/,s=i.$inputEl.val().trim(),n=i.$textAreaEl.val().trim(),o=i.find(".sumome-contactform-msgpot").val().trim(),r=i.find(".sumome-contactform-timestamp").val().trim(),a=i.find(".sumome-contactform-uuid").val().trim(),l=i.find(".sumome-contactform-hash").val().trim();e.test(s)&&i.$textAreaEl.val().trim().length>1&&(!this.settings.useCaptcha||this.settings.useCaptcha&&t("#recaptcha_challenge_field").val()&&t("#recaptcha_response_field").val())?this.sendMessage(i,s,n,o,r,a,l):(i.removeClass("sumome-animated sumome-shake"),i.get(0).offsetWidth=i.get(0).offsetWidth,i.addClass("sumome-animated sumome-shake"))}},this)),i.$continueButtonEl.on("click",t.proxy(function(){i.$textAreaEl.val(""),i.$inputEl.show(),i.$textAreaEl.show(),i.$buttonEl.show(),i.$continueButtonEl.hide(),i.$textEl.hide(),i.$headingEl.text(this.settings.headingText),i.$buttonEl.data("sumome-disabled",!1),s&&(s.hasClass("sumome-contactform-pullouttab-left")&&i.addClass("sumome-contactform-left-page-hidden"),s.hasClass("sumome-contactform-pullouttab-right")&&i.addClass("sumome-contactform-right-page-hidden"),(s.hasClass("sumome-contactform-pullouttab-bottom-left")||s.hasClass("sumome-contactform-pullouttab-bottom-center")||s.hasClass("sumome-contactform-pullouttab-bottom-right"))&&i.addClass("sumome-contactform-sticky-bottom-page-hidden"),i.removeClass("sumome-contactform-focused"),s.show(),this.resizeHandler())},this)),s&&(s.on("click",t.proxy(function(){s.hasClass("sumome-contactform-pullouttab-left")&&i.toggleClass("sumome-contactform-left-page-hidden"),s.hasClass("sumome-contactform-pullouttab-right")&&i.toggleClass("sumome-contactform-right-page-hidden"),(s.hasClass("sumome-contactform-pullouttab-bottom-left")||s.hasClass("sumome-contactform-pullouttab-bottom-center")||s.hasClass("sumome-contactform-pullouttab-bottom-right"))&&i.toggleClass("sumome-contactform-sticky-bottom-page-hidden"),i.hasClass("sumome-contactform-left-page-hidden")||i.hasClass("sumome-contactform-right-page-hidden")||i.hasClass("sumome-contactform-sticky-bottom-page-hidden")?(i.removeClass("sumome-contactform-focused"),s.show(),this.resizeHandler()):(i.addClass("sumome-contactform-focused"),s.hide(),this.resizeHandler())},this)),i.$closeButton.on("click",t.proxy(function(){s.hasClass("sumome-contactform-pullouttab-left")&&i.toggleClass("sumome-contactform-left-page-hidden"),s.hasClass("sumome-contactform-pullouttab-right")&&i.toggleClass("sumome-contactform-right-page-hidden"),(s.hasClass("sumome-contactform-pullouttab-bottom-left")||s.hasClass("sumome-contactform-pullouttab-bottom-center")||s.hasClass("sumome-contactform-pullouttab-bottom-right"))&&i.toggleClass("sumome-contactform-sticky-bottom-page-hidden"),i.hasClass("sumome-contactform-left-page-hidden")||i.hasClass("sumome-contactform-right-page-hidden")||i.hasClass("sumome-contactform-sticky-bottom-page-hidden")?(i.removeClass("sumome-contactform-focused"),s.show(),this.resizeHandler()):(i.addClass("sumome-contactform-focused"),s.hide(),this.resizeHandler())},this)),this.tabs.push(s)),this.settings.useCaptcha&&i.find("div.sumome-contactform-captcha")){var o=function e(s){var o={en:{instructions_visual:"Type the text",instructions_audio:"Type what you hear"},nl:{instructions_visual:"Typ de tekst",instructions_audio:"Typ wat u hoort"},fr:{instructions_visual:"Obtenir un test visuel",instructions_audio:"Obtenir un test audio"},de:{instructions_visual:"Geben Sie den angezeigten Text ein",instructions_audio:"Geben Sie das Gehörte ein"},pt:{instructions_visual:"Introduza o texto",instructions_audio:"Escreva o que ouvir"},ru:{instructions_visual:"Введите текст",instructions_audio:"Введите то, что слышите"},es:{instructions_visual:"Escriba el texto",instructions_audio:"Escribe lo que escuchas"},tr:{instructions_visual:"Metni yazın",instructions_audio:"Duyduğunuzu yazın"}},r=/\S+@\S+\.\S/,a=i.$inputEl.val().trim();if(!i.find("div#recaptcha_widget").length&&r.test(a)&&i.$textAreaEl.val().trim().length>1)if(this.$recaptchaWidgetEl)i.$textAreaEl.after(this.$recaptchaWidgetEl),this.$recaptchaWidgetEl.show();else{this.$recaptchaWidgetEl=t("<div></div>").attr("id","recaptcha_widget").css("display","none"),this.$captchaImageEl=t("<div></div>").attr("id","recaptcha_image"),this.$captchaImageErrorEl=t("<div></div>").addClass("recaptcha_only_if_incorrect_sol"),this.$captchaResponseEl=t('<input name="recaptcha_response_field" id="recaptcha_response_field" type="text" placeholder="'+o[this.settings.captchaLanguage].instructions_visual+'"/>');var l=n(this.settings.buttonBackColor);l="light"==l?"black":"white",this.$buttonContainer=t("<div></div>").addClass("sumome-captcha-button-container"),this.$captchaReloadBtn=t('<button><img src="'+this.sumoProperties.sumoUrl+"/client/images/apps/822aaf16-c4d6-4241-911a-41567c68b443/captcha-refresh-"+l+'.png"></button>').attr("alt","Get a new captcha").addClass("sumome-recaptcha-btn").attr("tabindex","-1"),this.$captchaAudioBtn=t('<button><img src="'+this.sumoProperties.sumoUrl+"/client/images/apps/822aaf16-c4d6-4241-911a-41567c68b443/captcha-audio-"+l+'.png"></button>').attr("alt","Get an audio captcha").addClass("sumome-recaptcha-btn").attr("tabindex","-1"),this.$captchaImageBtn=t('<button><img src="'+this.sumoProperties.sumoUrl+"/client/images/apps/822aaf16-c4d6-4241-911a-41567c68b443/captcha-image-"+l+'.png"></button>').attr("alt","Get an image captcha").css("display","none").addClass("sumome-recaptcha-btn").attr("tabindex","-1"),this.$captchaHelpBtn=t('<button><img src="'+this.sumoProperties.sumoUrl+"/client/images/apps/822aaf16-c4d6-4241-911a-41567c68b443/captcha-help-"+l+'.png"></button>').attr("alt","Get captcha help").addClass("sumome-recaptcha-btn").attr("tabindex","-1"),this.$captchaReloadBtn.style("background-color",this.settings.buttonBackColor,"important"),this.$captchaReloadBtn.style("border-bottom-color",this.shadeColor(this.settings.buttonBackColor,-10),"important"),this.$captchaAudioBtn.style("background-color",this.settings.buttonBackColor,"important"),this.$captchaAudioBtn.style("border-bottom-color",this.shadeColor(this.settings.buttonBackColor,-10),"important"),this.$captchaImageBtn.style("background-color",this.settings.buttonBackColor,"important"),this.$captchaImageBtn.style("border-bottom-color",this.shadeColor(this.settings.buttonBackColor,-10),"important"),this.$captchaHelpBtn.style("background-color",this.settings.buttonBackColor,"important"),this.$captchaHelpBtn.style("border-bottom-color",this.shadeColor(this.settings.buttonBackColor,-10),"important");var c=["sumome-contactform-lp","sumome-contactform-rp","sumome-contactform-mbl","sumome-contactform-mbr"];this.$captchaReloadBtn.on("focus",t.proxy(function(e){var i=t(e.target).parents(".sumome-contactform").attr("id");c.indexOf(i)<0&&t("#"+i).addClass("sumome-contactform-focused")},this)),this.$captchaAudioBtn.on("focus",t.proxy(function(e){var i=t(e.target).parents(".sumome-contactform").attr("id");c.indexOf(i)<0&&t("#"+i).addClass("sumome-contactform-focused")},this)),this.$captchaImageBtn.on("focus",t.proxy(function(e){var i=t(e.target).parents(".sumome-contactform").attr("id");c.indexOf(i)<0&&t("#"+i).addClass("sumome-contactform-focused")},this)),this.$captchaHelpBtn.on("focus",t.proxy(function(e){var i=t(e.target).parents(".sumome-contactform").attr("id");c.indexOf(i)<0&&t("#"+i).addClass("sumome-contactform-focused")},this)),this.$captchaResponseEl.on("focus",t.proxy(function(e){var i=t(e.target).parents(".sumome-contactform").attr("id");c.indexOf(i)<0&&t("#"+i).addClass("sumome-contactform-focused")},this)),
this.$captchaReloadBtn.on("blur",t.proxy(function(e){var i=t(e.target).parents(".sumome-contactform").attr("id");c.indexOf(i)<0&&setTimeout(t.proxy(function(){t(document.activeElement).parents("#"+i).length||t("#"+i).removeClass("sumome-contactform-focused")},this))},this)),this.$captchaAudioBtn.on("blur",t.proxy(function(e){var i=t(e.target).parents(".sumome-contactform").attr("id");c.indexOf(i)<0&&setTimeout(t.proxy(function(){t(document.activeElement).parents("#"+i).length||t("#"+i).removeClass("sumome-contactform-focused")},this))},this)),this.$captchaImageBtn.on("blur",t.proxy(function(e){var i=t(e.target).parents(".sumome-contactform").attr("id");c.indexOf(i)<0&&setTimeout(t.proxy(function(){t(document.activeElement).parents("#"+i).length||t("#"+i).removeClass("sumome-contactform-focused")},this))},this)),this.$captchaHelpBtn.on("blur",t.proxy(function(e){var i=t(e.target).parents(".sumome-contactform").attr("id");c.indexOf(i)<0&&setTimeout(t.proxy(function(){t(document.activeElement).parents("#"+i).length||t("#"+i).removeClass("sumome-contactform-focused")},this))},this)),this.$captchaResponseEl.on("blur",t.proxy(function(e){var i=t(e.target).parents(".sumome-contactform").attr("id");c.indexOf(i)<0&&setTimeout(t.proxy(function(){t(document.activeElement).parents("#"+i).length||t("#"+i).removeClass("sumome-contactform-focused")},this))},this)),this.$captchaReloadBtn.on("click",t.proxy(function(t){Recaptcha.reload()},this)),this.$captchaAudioBtn.on("click",t.proxy(function(t){Recaptcha.switch_type("audio"),this.$captchaImageBtn.show(),this.$captchaAudioBtn.hide(),this.$captchaResponseEl.attr("placeholder",o[this.settings.captchaLanguage].instructions_audio)},this)),this.$captchaImageBtn.on("click",t.proxy(function(t){Recaptcha.switch_type("image"),this.$captchaImageBtn.hide(),this.$captchaAudioBtn.show(),this.$captchaResponseEl.attr("placeholder",o[this.settings.captchaLanguage].instructions_visual)},this)),this.$captchaHelpBtn.on("click",t.proxy(function(t){Recaptcha.showhelp()},this)),this.$buttonContainer.append(this.$captchaImageEl),this.$buttonContainer.append(this.$captchaReloadBtn),this.$buttonContainer.append(this.$captchaAudioBtn),this.$buttonContainer.append(this.$captchaImageBtn),this.$buttonContainer.append(this.$captchaHelpBtn),this.$recaptchaWidgetEl.append(this.$buttonContainer),this.$recaptchaWidgetEl.append(this.$captchaImageErrorEl),this.$recaptchaWidgetEl.append(this.$captchaResponseEl),i.$textAreaEl.after(this.$recaptchaWidgetEl),this.$recaptchaWidgetEl.show(),Recaptcha.create(this.settings.recaptchaPublicKey,i.find("div.sumome-contactform-captcha").attr("id"),{theme:"custom",custom_theme_widget:"recaptcha_widget",lang:this.settings.captchaLanguage,callback:this.styleRecaptcha(i)})}else i.find("div#recaptcha_widget").length&&this.$recaptchaWidgetEl&&!this.$recaptchaWidgetEl.is(":visible")&&r.test(a)&&i.$textAreaEl.val().trim().length>1&&(i.$textAreaEl.after(this.$recaptchaWidgetEl),this.$recaptchaWidgetEl.show())};i.$textAreaEl.on("change.sumomeRecaptcha paste keyup.sumomeRecaptcha focus.sumomeRecaptcha",t.proxy(o,this)),i.$inputEl.on("change.sumomeRecaptcha paste.sumomeRecaptcha keyup.sumomeRecaptcha focus.sumomeRecaptcha",t.proxy(o,this))}},styleRecaptcha:function e(){this.recaptchaInterval=setInterval(t.proxy(function(){this.$captchaImageEl.style("width")&&(this.$captchaImageEl.style("width","64%"),clearInterval(this.recaptchaInterval))},this),200)},install:function s(){var n=window.location.href;if(t(window).on("resize.sumome-contactform",e.debounce(function(t){o.resizeHandler()},300)),this.settings.template){this.$template=t("<div></div>"),this.settings.templateSlug&&this.$template.addClass("sumome-contactform-template-"+this.settings.templateSlug),this.$content=t("<div></div>"),this.$content.addClass("sumome-contactform-content"),this.$template.append(this.$content),this.$template.addClass("sumome-contactform"),this.$template.timer=null;var r=this.settings.templateHtml,a=r.match(/\{sm\:.*?\}/g);if(a){var l=[];a.forEach(t.proxy(function(t){var e=t.replace(/([\{\}]|sm\:)/g,""),i=e.split("|");if(i.length>1){var s=i[1].split(":");r=r.replace(t,this.shadeColor(this.settings[i[0]],parseInt(s[1])))}else if("Font"==e.substr(-4)){var n=this.settings[e];if(n){var o=n.split(":"),a=o[0].split(","),c=a.shift(),u=o[1]?o[1]:400;a.unshift("'"+c+"'"),a.length&&(r=r.replace(new RegExp(t,"g"),"font-family: "+a.join(",")+" !important;"),l.push(c.replace(/ /g,"+")+":"+u))}else r=r.replace(t,"")}else r=r.replace(t,this.settings[i[0]])},this)),l.length&&(l=t.unique(l),r='<link href="//fonts.googleapis.com/css?family='+l.join("|")+'" type="text/css" rel="stylesheet">'+r)}this.$content.append(r),this.findAndStyleElements(),this.$headingEl.text(this.settings.headingText),this.$inputEl.attr("placeholder",this.settings.emailPlaceholderText),this.$textAreaEl.attr("placeholder",this.settings.bodyPlaceholderText),this.$textAreaEl.after("<input name='msgpot' class='sumome-contactform-msgpot' type='text' style='display:none;'>"),this.$textAreaEl.after("<input name='timestamp' class='sumome-contactform-timestamp' type='hidden' value='"+this.settings.timestamp+"'>"),this.$textAreaEl.after("<input name='uuid' class='sumome-contactform-uuid' type='hidden' value='"+this.settings.uuid+"'>"),this.$textAreaEl.after("<input name='hash' class='sumome-contactform-hash' type='hidden' value='"+this.settings.hash+"'>"),this.$textEl.html(this.settings.continueBlurbText),this.settings.useCaptcha&&(this.$captchaEl=t("<div></div>").addClass("sumome-contactform-captcha"),this.$textAreaEl.after(this.$captchaEl)),this.$buttonEl.text(this.settings.buttonText),this.$continueButtonTextEl.text(this.settings.continueButtonText),this.$pulloutTab=t("<div></div>").addClass("sumome-contactform-pullouttab"),this.$pulloutTab.text(this.settings.tabText),this.$template.addClass("sumome-contactform-small");if(Math.min(window.screen.availWidth||t(window).width(),t(window).width())>480){if("positions"in this.settings&&this.settings.positions.indexOf("lp")>=0){var c=this.$template.clone(!0,!0),u=this.$pulloutTab.clone(!0,!0);u.addClass("sumome-contactform-pullouttab-left"),c.attr("id","sumome-contactform-lp"),this.addEventListeners(c,u),this.settings.useCaptcha&&c.$captchaEl.attr("id","sumome-contactform-captcha-lp"),c.addClass("sumome-contactform-left-page sumome-contactform-left-page-hidden sumome-contactform-fixed"),u.style("background-color",this.settings.tabBackColor,"important"),u.style("color",this.settings.tabTextColor,"important"),t("body").append(u),t("body").append(c),this.forms.push(c)}if("positions"in this.settings&&this.settings.positions.indexOf("rp")>=0){var h=this.$template.clone(!0,!0),u=this.$pulloutTab.clone(!0,!0);u.addClass("sumome-contactform-pullouttab-right"),h.attr("id","sumome-contactform-rp"),this.addEventListeners(h,u),this.settings.useCaptcha&&h.$captchaEl.attr("id","sumome-contactform-captcha-lp"),h.addClass("sumome-contactform-right-page sumome-contactform-right-page-hidden sumome-contactform-fixed"),u.style("background-color",this.settings.tabBackColor,"important"),u.style("color",this.settings.tabTextColor,"important"),u.find(""),t("body").append(u),t("body").append(h),this.forms.push(h)}if("positions"in this.settings&&(this.settings.positions.indexOf("sblp")>=0||this.settings.positions.indexOf("sbcp")>=0||this.settings.positions.indexOf("sbrp")>=0)){var d=this.$template.clone(!0,!0),u=this.$pulloutTab.clone(!0,!0);d.attr("id","sumome-contactform-sbp"),d.addClass("sumome-contactform-sticky-bottom-page-hidden"),this.settings.positions.indexOf("sblp")>=0&&(u.addClass("sumome-contactform-pullouttab-bottom-left"),d.addClass("sumome-contactform-sticky-bottom-left-page sumome-contactform-fixed")),this.settings.positions.indexOf("sbcp")>=0&&(u.addClass("sumome-contactform-pullouttab-bottom-center"),d.addClass("sumome-contactform-sticky-bottom-center-page sumome-contactform-fixed")),this.settings.positions.indexOf("sbrp")>=0&&(u.addClass("sumome-contactform-pullouttab-bottom-right"),d.addClass("sumome-contactform-sticky-bottom-right-page sumome-contactform-fixed")),this.addEventListeners(d,u),this.settings.useCaptcha&&d.$captchaEl.attr("id","sumome-contactform-captcha-sbp"),u.style("background-color",this.settings.tabBackColor,"important"),u.style("color",this.settings.tabTextColor,"important"),t("body").append(u),t("body").append(d),this.forms.push(d)}}else{if("positions"in this.settings&&this.settings.positions.indexOf("mbl")>=0){var m=this.$template.clone(!0,!0),u=this.$pulloutTab.clone(!0,!0);u.addClass("sumome-contactform-pullouttab-left"),m.attr("id","sumome-contactform-mbl"),this.addEventListeners(m,u),this.settings.useCaptcha&&m.$captchaEl.attr("id","sumome-contactform-captcha-mbl"),m.addClass("sumome-contactform-mobile sumome-contactform-left-page sumome-contactform-left-page-hidden sumome-contactform-fixed"),u.style("background-color",this.settings.tabBackColor,"important"),u.style("color",this.settings.tabTextColor,"important"),t("body").append(u),t("body").append(m),this.forms.push(m)}if("positions"in this.settings&&this.settings.positions.indexOf("mbr")>=0){var p=this.$template.clone(!0,!0),u=this.$pulloutTab.clone(!0,!0);u.addClass("sumome-contactform-pullouttab-right"),p.attr("id","sumome-contactform-mbr"),this.addEventListeners(p,u),this.settings.useCaptcha&&p.$captchaEl.attr("id","sumome-contactform-captcha-mbr"),p.addClass("sumome-contactform-mobile sumome-contactform-right-page sumome-contactform-right-page-hidden sumome-contactform-fixed"),u.style("background-color",this.settings.tabBackColor,"important"),u.style("color",this.settings.tabTextColor,"important"),u.find(""),t("body").append(u),t("body").append(p),this.forms.push(p)}}if(this.$template.removeClass("sumome-contactform-small").addClass("sumome-contactform-"+this.settings.contentWidth),this.$closeButton.hide(),"positions"in this.settings&&(this.settings.positions.indexOf("blp")>=0||this.settings.positions.indexOf("bp")>=0||this.settings.positions.indexOf("brp")>=0)){var f=this.$template.clone(!0,!0);if(f.attr("id","sumome-contactform-bp"),this.addEventListeners(f),this.settings.positions.indexOf("blp")>=0){f.addClass("sumome-contactform-left");var g="blp"}else if(this.settings.positions.indexOf("brp")>=0){f.addClass("sumome-contactform-right");var g="brp"}else if(this.settings.positions.indexOf("bp")>=0){f.addClass("sumome-contactform-center");var g="bp"}this.settings.useCaptcha&&f.$captchaEl.attr("id","sumome-contactform-captcha-"+g);var v=t("footer"),b=[];v.each(t.proxy(function(e,i){var s=!1;this.articles.each(t.proxy(function(e,n){t(n).find(t(i)).length&&(s=!0)},this)),s||b.push(t(i))},this)),b.length?b[b.length-1].prepend(f):t("body").append(f),this.forms.push(f)}if("positions"in this.settings&&(this.settings.positions.indexOf("tla")>=0||this.settings.positions.indexOf("tca")>=0||this.settings.positions.indexOf("tra")>=0)){var y=this.$template.clone(!0,!0);y.attr("id","sumome-contactform-ta"),this.addEventListeners(y),this.settings.positions.indexOf("tla")>=0?y.addClass("sumome-contactform-left"):this.settings.positions.indexOf("tra")>=0?y.addClass("sumome-contactform-right"):this.settings.positions.indexOf("tca")>=0&&y.addClass("sumome-contactform-center"),this.settings.useCaptcha&&y.$captchaEl.attr("id","sumome-contactform-captcha-"+g),this.settings.firstArticle.prepend(y),this.forms.push(y)}if("positions"in this.settings&&(this.settings.positions.indexOf("bla")>=0||this.settings.positions.indexOf("bca")>=0||this.settings.positions.indexOf("bra")>=0)){var w=this.$template.clone(!0,!0);if(w.attr("id","sumome-contactform-ba"),this.addEventListeners(w),this.settings.positions.indexOf("bla")>=0){w.addClass("sumome-contactform-left");var g="bla"}else if(this.settings.positions.indexOf("bra")>=0){w.addClass("sumome-contactform-right");var g="bra"}else if(this.settings.positions.indexOf("bca")>=0){w.addClass("sumome-contactform-center");var g="bca"}this.settings.useCaptcha&&w.$captchaEl.attr("id","sumome-contactform-captcha-"+g),this.settings.lastArticle.append(w),this.forms.push(w)}}if(this.forms.length>0&&this.settings.hasContactForm&&this.settings.pixelsShown){var x=t('<div style="position:absolute !important;width:0 !important;height:0 !important;top:0px !important;left:0px !important;margin:0 !important;padding:0 !important;font-size:0 !important;background:transparent !important;"></div>');t("body").append(x),i.postscribe(x.get(0),this.settings.pixelsShown)}},destroy:function e(i){this.forms.forEach(function(t){t.$textAreaEl&&(t.$textAreaEl.off(".sumomeRecaptcha"),t.$textAreaEl.remove()),t.$inputEl&&(t.$inputEl.off(".sumomeRecaptcha"),t.$inputEl.remove())}),t(window).off(".sumome-contactform"),this.forms=[],this.tabs.forEach(function(t){t.remove()}),this.tabs=[],t(".sumome-contactform-pullouttab").remove(),t(".sumome-contactform-content").parent().filter(":not(.sumome-contactform-preview)").remove(),this.recaptchaInterval&&clearInterval(this.recaptchaInterval),this.$captchaReloadBtn&&(this.$captchaReloadBtn.remove(),this.$captchaReloadBtn=null),this.$captchaAudioBtn&&(this.$captchaAudioBtn.remove(),this.$captchaAudioBtn=null),this.$captchaImageBtn&&(this.$captchaImageBtn.remove(),this.$captchaImageBtn=null),this.$captchaHelpBtn&&(this.$captchaHelpBtn.remove(),this.$captchaHelpBtn=null),this.$recaptchaWidgetEl&&(this.$recaptchaWidgetEl.remove(),this.$recaptchaWidgetEl=null),i&&t.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views)&&this.install()}};return o}),sumo.define("content-analytics/content",["jquery","underscore","sumome-lib","lib/heap-manager","jquery.article","jquery.displayrules"],function(t,e,i,s){function n(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function t(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function t(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function t(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function t(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),255]}}],i=0;i<e.length;i++){var s=e[i].re,n=e[i].process,o=s.exec(t);o&&(channels=n(o),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.a=channels[3],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0||isNaN(this.a)?0:this.a>255?255:this.a,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i}}var o=function t(e,i,s,n,o,r){void 0==r&&(r=2),e.moveTo(i,s);for(var a=n-i,l=o-s,c=Math.floor(Math.sqrt(a*a+l*l)/r),u=a/c,h=l/c,d=0;d++<c;)i+=u,s+=h,e[d%2==0?"moveTo":"lineTo"](i,s);e[d%2==0?"moveTo":"lineTo"](n,o)},r=function t(e){var i=e.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i.join(".")},a={isShown:!1,isRecording:!1,currentData:null,reopenApp:!1,currentCampaign:null,elementData:null,load:function e(i){a.$control&&a.$control.addClass("sumome-content-analytics-control-show"),a.containerEl&&t('<div class="sumome-content-analytics-loading" />').html("Loading analytic data...<br />Press ESC to exit").appendTo(a.containerEl),t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:a.sumoProperties.sumoUrl+"/apps/contentanalytics/load",data:{site_id:a.sumoProperties.siteId,path:window.location.pathname+window.location.search,campaign_id:i||null,geoLocation:this.sumoProperties.geoLocation,pageViews:this.sumoProperties.views},success:function e(i){i.success?(t.maskElement(a.$containerEl,function(){}),a.currentData=i.data,a.currentCampaign=i.campaigns,a.redraw(),a.updateControl()):(a.currentData=null,a.currentCampaign=null,a.updateControl()),t(".sumome-content-analytics-loading").remove(),a.$control}})},toggle:function t(){a.isShown?a.hide():a.show()},redraw:function e(){if(!a.currentCampaign)return void a.hide();var s={.0625:"#0001ab",.125:"#0100e0",.1875:"#006fff",.25:"#01acfe",.3125:"#01e0ff",.375:"#01ff01",.4375:"#bdfe00",.5:"#ffff01",.5625:"#ffe001",.625:"#fe8d00",.6875:"#fb5e01",.75:"#f50000",.8125:"#f501c1"};s={.25:"#0000ff",.55:"#00ff00",.85:"#ffff00","1.0":"#ff0000"};var l=a.canvas;if("article"==a.currentCampaign.current.content_type){var c="article",u=t.articles();if(1!=u.length)return a.hide(),void i.Dialog.alert({title:"Sumo Content Analytics",message:"Unable to find the content area to display the data."});a.$article=u[0]}else{var c="page";a.$article=t(document)}var h=t(a.$article),d="article"==c?h.offset():{top:0,left:0},m=d.top;if("_footer"in a.$article&&a.$article._footer&&a.$article._footer.is(":visible")&&!a.$article._footer.hasClass("aside"))var p=a.$article._footer.offset().top-m;else var p=h.outerHeight();var f=h.outerWidth(),g=t(window).scrollTop(),v=m-g,b=d.left,y=v<0?Math.abs(v):0;v=Math.max(0,v);var w=f,x=Math.max(0,Math.min(t(window).height()-v,p-y)),_=x/p;a.$containerEl.css({top:v+"px",left:b+"px"}),a.$containerEl.width(w),a.$containerEl.height(x),l.width=w,l.height=x;var k=l.getContext("2d"),C=a.currentData.points,S=C.reduce(function(t,e){return t<e?t:e}),T=C.reduce(function(t,e){return t>e?t:e});k.clearRect(0,0,l.width,l.height);for(var E=k.createLinearGradient(0,-y,0,p-y),$={},I=null,P=0;P<C.length;P++){var O=P/100,A=T>0?C[P]/T:0;null!=I&&A==I||($[O]=A,I=A)}var L=null,B=0,I=null,D={};Object.keys($).sort(function(t,e){return t-e}).forEach(function(t){var e=Math.min($[t],null!=I?I:$[t]),i;null!==I&&I-e>B&&parseFloat(t)>0&&(B=I-e,L=parseFloat(t));try{Object.keys(s).sort(function(t,e){return t-e}).forEach(function(t){if(i=s[t],(t=parseFloat(t))>e)throw D})}catch(t){}i=new n(i),i="rgba("+i.r+","+i.g+","+i.b+",0.5)",$[t]=i,I=e});var N=Object.keys($).sort(function(t,e){return t-e}),M=null;N.forEach(function(t){var e=$[t];e!=M&&(M=e,E.addColorStop(t,e))}),k.fillStyle=E,k.fillRect(0,0,f,p);var R=a.currentData.ticks,z=1/_,U=a.currentCampaign,j=parseFloat(U.current.average_read)/100,F=Math.round(j*z*l.height)-y;F>=0&&F<=x&&(F=Math.max(1,F),F=Math.min(x-3,F),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.lineWidth=2,k.lineCap="round",k.strokeStyle="#ffffff",o(k,0,F,l.width,F,5),k.stroke(),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=8,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="#ffffff",k.textAlign="center",k.textBaseline="middle",k.fillText("Average Read",l.width/2,F<=14?F+15:F-15),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="#ffffff",k.textAlign="center",k.textBaseline="middle",k.fillText("Average Read",l.width/2,F<=14?F+15:F-15),k.save());var F;for(var H in R){var A=R[H],F=Math.round(parseFloat(H)/100*z*l.height)-y,q=A/T;F<0||F>x||(isNaN(q)&&(q=0),F=Math.max(1,F),F=Math.min(x-3,F),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.moveTo(l.width-25,F),k.lineTo(l.width,F),k.lineWidth=2,k.lineCap="round",k.strokeStyle="yellow",k.stroke(),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.moveTo(0,F),k.lineTo(25,F),k.lineWidth=2,k.lineCap="round",k.strokeStyle="yellow",k.stroke(),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=8,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="#ffffff",k.textAlign="right",k.textBaseline="middle",k.fillText(r(A)+" ("+(100*q).toFixed()+"%) readers",l.width-35,Math.min(x-14,Math.max(14,F))),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=8,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="yellow",k.textAlign="left",k.textBaseline="middle",k.fillText(H+"%",35,Math.min(x-14,Math.max(14,F))),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="#ffffff",k.textAlign="right",k.textBaseline="middle",k.fillText(r(A)+" ("+(100*q).toFixed()+"%) readers",l.width-35,Math.min(x-14,Math.max(14,F))),k.save(),k.beginPath(),k.shadowColor="rgba(0,0,0,1)",k.shadowBlur=1,k.shadowOffsetX=1,k.shadowOffsetY=1,k.font='normal 14px "Open Sans", "Open Sans", "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif',k.fillStyle="yellow",k.textAlign="left",k.textBaseline="middle",k.fillText(H+"%",35,Math.min(x-14,Math.max(14,F))),k.save())}t.updateMask(a.$containerEl)},show:function i(n){if(s.enableTracking(),n&&(a.reopenApp=!0),a.isShown)return void a.load(n);a.api.emit("a25489e9-848c-4356-97ff-161b0852c509/widget/show"),a.isShown=!0,a.api.emit("hideControl");var o=t("<div />").addClass("sumome-content-analytics").appendTo(document.body);a.$control=t('<div class="sumome-content-analytics-control sumome-content-analytics-control-show" />'),a.$close=t('<a class="sumome-content-analytics-close">&#x2715;</a>').appendTo(a.$control),a.$title=t('<span class="sumome-content-analytics-title" />').text("Loading...").appendTo(a.$control),a.$clicks=t('<span class="sumome-content-analytics-clicks" />').text("").appendTo(a.$control),a.$controls=t('<div class="sumome-content-analytics-controls" />'),a.$prev=t('<a class="sumome-content-analytics-prev sumome-content-analytics-disabled" />').appendTo(a.$controls).text("Previous Campaign").attr("title","Previous Campaign").click(a.previous),a.$stop=t('<a class="sumome-content-analytics-stop sumome-content-analytics-disabled" />').appendTo(a.$controls).text("STOP").attr("title","Stop Campaign").click(a.stop),a.$record=t('<a class="sumome-content-analytics-record sumome-content-analytics-disabled" />').appendTo(a.$controls).text("RECORD").css("display","none").attr("title","Record New Campaign").click(a.record),a.$next=t('<a class="sumome-content-analytics-next sumome-content-analytics-disabled" />').appendTo(a.$controls).text("Next Campaign").attr("title","Next Campaign").click(a.next),a.$wrapper=t('<div class="sumome-content-analytics-control-wrapper" />'),a.$controls.appendTo(a.$control),a.$control.appendTo(a.$wrapper),a.$wrapper.appendTo(o),a.$close.click(function(t){t.preventDefault(),a.hide()}),a.containerEl=o,a.$containerEl=t("<div />"),a.$canvasEl=t("<canvas />"),a.$containerEl.css({position:"fixed"}),a.$canvasEl.appendTo(a.$containerEl),a.$containerEl.appendTo(o),a.canvas=a.$canvasEl.get(0),a.load(n),t(window).on("scroll.sumome-content-analytics-widget",e.debounce(function(){a.redraw()},1)),t(window).on("resize.sumome-content-analytics-widget",e.debounce(function(){a.redraw()},1)),t(document).on("keyup.sumome-content-analytics-widget",function(t){27==t.which&&a.hide()}),document.documentElement.style.overflow="auto"},hide:function e(){s.disableTracking(),t(window).off(".sumome-content-analytics-widget"),t(document).off(".sumome-content-analytics-widget"),t.unmask(),t(".sumome-content-analytics").remove(),a.api.emit("showControl"),a.reopenApp&&(t(document.body).find(".s.u.m.o.me.sumome-react-modal-container").fadeIn(200),t(document.body).css({overflow:"hidden"}),a.api.on("a25489e9-848c-4356-97ff-161b0852c509/app/started",function(t){a.api.off("a25489e9-848c-4356-97ff-161b0852c509/app/started"),a.api.emit("a25489e9-848c-4356-97ff-161b0852c509/app/route","campaigns")}),a.reopenApp=!1),a.isShown=!1,a.api.emit("a25489e9-848c-4356-97ff-161b0852c509/widget/hide")},previous:function e(){if(!t(this).hasClass("sumome-content-analytics-disabled")){var i=a.currentCampaign;i&&i.previous&&a.load(i.previous)}},next:function e(){if(!t(this).hasClass("sumome-content-analytics-disabled")){var i=a.currentCampaign;i&&i.next&&a.load(i.next)}},stop:function e(){t(this).hasClass("sumome-content-analytics-disabled")||i.Dialog.confirm({title:"Sumo Content Analytics",message:"Are you sure you want to stop recording user reads?",callback:t.proxy(function(e){"yes"==e&&t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:a.sumoProperties.sumoUrl+"/apps/contentanalytics/stop",data:{site_id:a.sumoProperties.siteId,path:window.location.pathname+window.location.search},success:function t(e){e.success&&(a.api.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/stop"),a.load())}})},this)})},record:function e(){if(!t(this).hasClass("sumome-content-analytics-disabled")){var i="article";1!=t.articles().length&&(i="page"),t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:a.sumoProperties.sumoUrl+"/apps/contentanalytics/start",data:{site_id:a.sumoProperties.siteId,path:window.location.pathname+window.location.search,content_type:i},success:function t(e){e.success&&(a.show(),a.api.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/start"))}})}},autoRecord:function e(i,s,n){if(null==i&&(i=a.sumoProperties.siteId),null==s&&(s=a.sumoProperties.sumoUrl),!t(this).hasClass("sumome-content-analytics-disabled")){var o="article";1!=t.articles().length&&(o="page"),t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:s+"/apps/contentanalytics/start/auto",data:{site_id:i,path:window.location.pathname+window.location.search,content_type:o},success:n})}},updateControl:function t(){var e=a.currentCampaign;if(a.$control&&a.$title){if(e&&e.current){var i="";if(e.current.started_at){var s=new Date(e.current.started_at);i=s.toLocaleDateString()+" "+s.toLocaleTimeString()}if(e.current.finished_at){var n=new Date(e.current.finished_at);i+=" - "+n.toLocaleDateString()+" "+n.toLocaleTimeString()}else i+=" - ACTIVE CAMPAIGN";a.$title.text(i),a.$clicks.html('AVERAGE READ <span class="sumome-content-analytics-clicks-count">'+parseFloat(e.current.average_read).toFixed()+"%</span>")}else a.$title.text(""),a.$clicks.text("");a.$prev.toggleClass("sumome-content-analytics-disabled",!(null!=e&&null!=e.previous)),a.$stop.toggleClass("sumome-content-analytics-disabled",0==a.isRecording),a.$record.toggleClass("sumome-content-analytics-disabled",1==a.isRecording),a.isRecording?(a.$record.hide(),a.$stop.show()):(a.$stop.hide(),a.$record.show()),a.$next.toggleClass("sumome-content-analytics-disabled",!(null!=e&&null!=e.next))}},setRecording:function t(e){a.isRecording=e,a.isShown&&a.updateControl()}};return a}),sumo.define("jquery.elementMask",["jquery"],function(t){function e(){i(l)}function i(e){var i=t(window).height(),s=t(window).width();if(e){var l=e.offset();n.height(0),r.height(0),o.height(0),a.height(0),n.css("left",0),n.css("top",0),n.css("width",l.left),n.css("height",t(document).outerHeight()),r.css("left",l.left+e.outerWidth()),r.css("top",0),r.css("width",t(document).outerWidth()-l.left-e.outerWidth()),r.css("height",t(document).outerHeight()),o.css("left",l.left),o.css("top",0),o.css("width",e.outerWidth()),o.css("height",l.top),a.css("left",l.left),a.css("top",l.top+e.outerHeight()),a.css("width",e.outerWidth()),a.css("height",t(document).outerHeight()-l.top-e.outerHeight()),n.show(),r.show(),o.show(),a.show()}}function s(e){n||(n=t('<div class="sumome-element-mask sumome-ignore" />'),t("body").append(n)),r||(r=t('<div class="sumome-element-mask sumome-ignore" />'),t("body").append(r)),o||(o=t('<div class="sumome-element-mask sumome-ignore" />'),t("body").append(o)),a||(a=t('<div class="sumome-element-mask sumome-ignore" />'),t("body").append(a))}var n,o,r,a,l;t.maskElement=function(n,o){s(o),i(n),l=n,t(window).unbind("resize",e),t(window).bind("resize",e)},t.updateMask=function(t){l=t,i(t)},t.unmask=function(){t(window).unbind("resize",e),n&&n.hide(),r&&r.hide(),o&&o.hide(),a&&a.hide()}}),sumo.define("es6!services/content-analytics/index",["jquery","underscore","content-analytics/content","jquery.article","jquery.elementMask"],function(t,e,i){return function(s){var n=!1,o=!1,r=0,a=null,l=!1,c=!0,u=!0,h=!1,d="article",m=s.properties;i.sumoProperties=s.properties;var p=function t(e){for(var i=(new Date).getTime();(new Date).getTime()<i+e;);},f=function i(){function s(){var e="article"==d?a.offset():{top:0,left:0},i=e.top;if("_footer"in r&&r._footer&&r._footer.is(":visible")&&!r._footer.hasClass("aside"))var s=r._footer.offset().top-i;else var s=a.outerHeight();var n=i+s,o=t(window).scrollTop(),c=t(window).height(),u=o+c,h=Math.max(o,i),p=Math.min(n,u),f=p-h,g=f/s,v=Math.min(o+c-i,s),b=Math.max(v-c,0),y=Math.max(0,(v-c)/(s-c)).toFixed(0),w=i>=o&&i<=u,x=n>=o&&n<=u,_=Math.min(100,Math.max(0,Math.round((p-i)/s*100)));if(null==l||_>l){var k={site_id:m.siteId,last:l,read:_,path:window.location.pathname+window.location.search,_:Math.random()},C=t("<img />").css({display:"none"}).attr("src",m.sumoUrl+"/apps/contentanalytics/scroll?"+t.param(k));C.on("error",function(){t(this).remove()}),C.on("load",function(){t(this).remove()}),t(document.body).append(C),l=_}}if(!o){if("article"==d){var n=t.articles();if(1!=n.length)return;var r=n[0]}else var r=t(document);var a=t(r),l=null;t(window).on("scroll.sumome-content-analytics",e.debounce(s,1e3)),c&&(c=!1,"complete"==document.readyState?s():t(window).on("load.sumome-content-analytics",s)),o=!0}},g=function e(){o&&(t(window).off(".sumome-content-analytics"),o=!1)},v=function e(){t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:m.sumoUrl+"/apps/contentanalytics/status",data:{site_id:m.siteId,path:window.location.pathname+window.location.search},success:function e(o){o.success?(l=!0,n=null!=o.campaign&&null==o.campaign.finished_at,r=o.count,u=o.track_all_users,a=o.campaign,d=null!=o.campaign?o.campaign.content_type:"article"):n=!1,s.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/status",{campaign:a,haveStatus:l,recording:n,campaignCount:r});var c=!(!m.geoLocation||!m.geoLocation.ctry)&&m.geoLocation.ctry,p=m.views?m.views:1;o.hasContentAnalytics&&o.count<=0&&o.display_rules.length>0&&t.isCurrentUrlAllowed(o.display_rules,null,c,p)?i.autoRecord(m.siteId,m.sumoUrl,function(t){t.success&&(l=!0,n=!0,r=1,a=t.campaign,d=null!=t.campaign?t.campaign.content_type:"article",s.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/status",{campaign:a,haveStatus:l,recording:n,campaignCount:r}),f())}):h||(g(),n&&(1==u||0==u&&null==m.user)&&f())}})};return{init:function t(e,i){s.on("a25489e9-848c-4356-97ff-161b0852c509/campaign/checkStatus",function(){s.emit("a25489e9-848c-4356-97ff-161b0852c509/campaign/status",{campaign:a,haveStatus:l,recording:n,campaignCount:r})}),s.on("a25489e9-848c-4356-97ff-161b0852c509/campaign/start",function(){v()}),s.on("a25489e9-848c-4356-97ff-161b0852c509/campaign/stop",function(){v()}),s.on("a25489e9-848c-4356-97ff-161b0852c509/widget/show",function(){
h=!0,g()}),s.on("a25489e9-848c-4356-97ff-161b0852c509/widget/hide",function(){h=!1,g(),n&&(1==u||0==u&&null==m.user)&&f()}),v(),i()},destroy:function t(e){e()}}}}),sumo.define("googleanalytics/trackingcode",["jquery","postscribe"],function(t,e){return{initialize:function e(){this.api.on("674d3d92-3a9f-4620-99f6-ff856d18423d/service/reload",t.proxy(function(){this.load()},this)),this.load()},load:function i(){t.ajax({type:"POST",dataType:"json",url:this.sumoProperties.sumoUrl+"/apps/googleanalytics/load",data:{site_id:this.sumoProperties.siteId},xhrFields:{withCredentials:!1},crossDomain:!0}).done(t.proxy(function(i){if(delete window.__gaSumome,t("script[data-sumome-ga-tracking]").remove(),i&&"success"in i&&i.success&&"tracking_id"in i&&"inject_code"in i&&i.tracking_id&&i.inject_code){var s="<script data-sumome-ga-tracking>\n            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n            })(window,document,'script','//www.google-analytics.com/analytics.js','__gaSumome');\n            __gaSumome('create', '"+i.tracking_id+"', 'auto');\n            __gaSumome('send', 'pageview');\n            <\/script>\n";e.postscribe(t("head"),s)}},this))}}}),function(e,i){void 0!==t?i(e,t,require("underscore")):"function"==typeof sumo.define&&sumo.define.amd?sumo.define("backbone-lib",["underscore","jquery","exports"],function(t,s,n){e.Backbone=i(e,n,t,s)}):e.Backbone=i(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(t,e,i,s){var n=t.Backbone,o=[],r=o.push,a=o.slice,l=o.splice;e.VERSION="1.1.0",e.$=s,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var c=e.Events={on:function(t,e,i){return h(this,"on",t,[e,i])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this}),this):this},once:function(t,e,s){if(!h(this,"once",t,[e,s])||!e)return this;var n=this,o=i.once(function(){n.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,s)},off:function(t,e,s){var n,o,r,a,l,c,u,d;if(!this._events||!h(this,"off",t,[e,s]))return this;if(!t&&!e&&!s)return this._events={},this;for(a=t?[t]:i.keys(this._events),l=0,c=a.length;l<c;l++)if(t=a[l],r=this._events[t]){if(this._events[t]=n=[],e||s)for(u=0,d=r.length;u<d;u++)o=r[u],(e&&e!==o.callback&&e!==o.callback._callback||s&&s!==o.context)&&n.push(o);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!h(this,"trigger",t,e))return this;var i=this._events[t],s=this._events.all;return i&&d(i,e),s&&d(s,arguments),this},stopListening:function(t,e,s){var n=this._listeningTo;if(!n)return this;var o=!e&&!s;s||"object"!=typeof e||(s=this),t&&((n={})[t._listenId]=t);for(var r in n)t=n[r],t.off(e,s,this),(o||i.isEmpty(t._events))&&delete this._listeningTo[r];return this}},u=/\s+/,h=function(t,e,i,s){if(!i)return!0;if("object"==typeof i){for(var n in i)t[e].apply(t,[n,i[n]].concat(s));return!1}if(u.test(i)){for(var o=i.split(u),r=0,a=o.length;r<a;r++)t[e].apply(t,[o[r]].concat(s));return!1}return!0},d=function(t,e){var i,s=-1,n=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++s<n;)(i=t[s]).callback.call(i.ctx);return;case 1:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o);return;case 2:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o,r);return;case 3:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o,r,a);return;default:for(;++s<n;)(i=t[s]).callback.apply(i.ctx,e)}},m={listenTo:"on",listenToOnce:"once"};i.each(m,function(t,e){c[e]=function(e,s,n){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=i.uniqueId("l"))]=e,n||"object"!=typeof s||(n=this),e[t](s,n,this),this}}),c.bind=c.on,c.unbind=c.off,i.extend(e,c);var p=e.Model=function(t,e){var s=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(s=this.parse(s,e)||{}),s=i.defaults({},s,i.result(this,"defaults")),this.set(s,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(p.prototype,c,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,s){var n,o,r,a,l,c,u,h;if(null==t)return this;if("object"==typeof t?(o=t,s=e):(o={})[t]=e,s||(s={}),!this._validate(o,s))return!1;r=s.unset,l=s.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(n in o)e=o[n],i.isEqual(h[n],e)||a.push(n),i.isEqual(u[n],e)?delete this.changed[n]:this.changed[n]=e,r?delete h[n]:h[n]=e;if(!l){a.length&&(this._pending=!0);for(var d=0,m=a.length;d<m;d++)this.trigger("change:"+a[d],this,h[a[d]],s)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var s in this.attributes)e[s]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,s=!1,n=this._changing?this._previousAttributes:this.attributes;for(var o in t)i.isEqual(n[o],e=t[o])||((s||(s={}))[o]=e);return s},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,s=t.success;return t.success=function(i){if(!e.set(e.parse(i,t),t))return!1;s&&s(e,i,t),e.trigger("sync",e,i,t)},z(this,t),this.sync("read",this,t)},save:function(t,e,s){var n,o,r,a=this.attributes;if(null==t||"object"==typeof t?(n=t,s=e):(n={})[t]=e,s=i.extend({validate:!0},s),n&&!s.wait){if(!this.set(n,s))return!1}else if(!this._validate(n,s))return!1;n&&s.wait&&(this.attributes=i.extend({},a,n)),void 0===s.parse&&(s.parse=!0);var l=this,c=s.success;return s.success=function(t){l.attributes=a;var e=l.parse(t,s);if(s.wait&&(e=i.extend(n||{},e)),i.isObject(e)&&!l.set(e,s))return!1;c&&c(l,t,s),l.trigger("sync",l,t,s)},z(this,s),o=this.isNew()?"create":s.patch?"patch":"update","patch"===o&&(s.attrs=n),r=this.sync(o,this,s),n&&s.wait&&(this.attributes=a),r},destroy:function(t){t=t?i.clone(t):{};var e=this,s=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&n(),s&&s(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;z(this,t);var o=this.sync("delete",this,t);return t.wait||n(),o},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||R();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var s=this.validationError=this.validate(t,e)||null;return!s||(this.trigger("invalid",this,s,i.extend(e,{validationError:s})),!1)}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var g=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1};i.extend(g.prototype,c,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,b))},remove:function(t,e){var s=!i.isArray(t);t=s?[t]:i.clone(t),e||(e={});var n,o,r,a;for(n=0,o=t.length;n<o;n++)(a=t[n]=this.get(t[n]))&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,e.silent||(e.index=r,a.trigger("remove",a,this,e)),this._removeReference(a));return s?t[0]:t},set:function(t,e){e=i.defaults({},e,v),e.parse&&(t=this.parse(t,e));var s=!i.isArray(t);t=s?t?[t]:[]:i.clone(t);var n,o,r,a,l,c,u,h=e.at,d=this.model,m=this.comparator&&null==h&&!1!==e.sort,f=i.isString(this.comparator)?this.comparator:null,g=[],b=[],y={},w=e.add,x=e.merge,_=e.remove,k=!(m||!w||!_)&&[];for(n=0,o=t.length;n<o;n++){if(l=t[n],r=l instanceof p?a=l:l[d.prototype.idAttribute],c=this.get(r))_&&(y[c.cid]=!0),x&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),m&&!u&&c.hasChanged(f)&&(u=!0)),t[n]=c;else if(w){if(!(a=t[n]=this._prepareModel(l,e)))continue;g.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}k&&k.push(c||a)}if(_){for(n=0,o=this.length;n<o;++n)y[(a=this.models[n]).cid]||b.push(a);b.length&&this.remove(b,e)}if(g.length||k&&k.length)if(m&&(u=!0),this.length+=g.length,null!=h)for(n=0,o=g.length;n<o;n++)this.models.splice(h+n,0,g[n]);else{k&&(this.models.length=0);var C=k||g;for(n=0,o=C.length;n<o;n++)this.models.push(C[n])}if(u&&this.sort({silent:!0}),!e.silent){for(n=0,o=g.length;n<o;n++)(a=g[n]).trigger("add",a,this,e);(u||k&&k.length)&&this.trigger("sort",this,e)}return s?t[0]:t},reset:function(t,e){e||(e={});for(var s=0,n=this.models.length;s<n;s++)this._removeReference(this.models[s]);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,s=this;return t.success=function(i){var n=t.reset?"reset":"set";s[n](i,t),e&&e(s,i,t),s.trigger("sync",s,i,t)},z(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var s=this,n=e.success;return e.success=function(t,e,i){i.wait&&s.add(t,i),n&&n(t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var s=new this.model(t,e);return s.validationError?(this.trigger("invalid",this,s.validationError,e),!1):s},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,s){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,s),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];i.each(y,function(t){g.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var w=["groupBy","countBy","sortBy"];i.each(w,function(t){g.prototype[t]=function(e,s){var n=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,n,s)}});var x=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,k)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];i.extend(x.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==i&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var s=t[e];if(i.isFunction(s)||(s=this[t[e]]),s){var n=e.match(_),o=n[1],r=n[2];s=i.bind(s,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,s):this.$el.on(o,r,s)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var s=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(s,!1)}}}),e.sync=function(t,s,n){var o=S[t];i.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:o,dataType:"json"};if(n.url||(r.url=i.result(s,"url")||R()),null!=n.data||!s||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||s.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",n.emulateJSON&&(r.data._method=o);var a=n.beforeSend;n.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"===r.type&&C&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=n.xhr=e.ajax(i.extend(r,n));return s.trigger("request",s,l,n),l};var C=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var T=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,I=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(T.prototype,c,{initialize:function(){},route:function(t,s,n){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(s)&&(n=s,s=""),n||(n=this[s]);var o=this;return e.history.route(t,function(i){var r=o._extractParameters(t,i);n&&n.apply(o,r),o.trigger.apply(o,["route:"+s].concat(r)),o.trigger("route",s,r),e.history.trigger("route",o,s,r)}),this},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(P,"\\$&").replace(E,"(?:$1)?").replace($,function(t,e){return e?t:"([^/]+)"}).replace(I,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var s=t.exec(e).slice(1);return i.map(s,function(t){return t?decodeURIComponent(t):null})}});var O=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,B=/msie [\w.]+/,D=/\/$/,N=/[?#].*$/;O.started=!1,i.extend(O.prototype,c,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(D,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(A,"")},start:function(t){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var s=this.getFragment(),n=document.documentMode,o=B.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(L,"/"),o&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(s)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=s;var r=this.location,a=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!O.started)return!1;e&&!0!==e||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(N,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var s=t.href.replace(/(javascript:|#).*$/,"");t.replace(s+"#"+e)}else t.hash="#"+e}}),e.history=new O;var M=function(t,e){var s=this,n;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var o=function(){this.constructor=n};return o.prototype=s.prototype,n.prototype=new o,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};p.extend=g.extend=T.extend=x.extend=O.extend=M;var R=function(){throw new Error('A "url" property or function must be specified')},z=function(t,e){var i=e.error;e.error=function(s){i&&i(t,s,e),t.trigger("error",t,s,e)}};return e}),function(t){"function"==typeof require&&void 0!==e&&e.exports?e.exports=t(require("underscore")):"function"==typeof sumo.define?sumo.define("cocktail",["underscore","jquery"],t):this.Cocktail=t(_)}(function(t,e){var i={};i.mixins={},i.mixin=function e(s){var n=t.chain(arguments).toArray().rest().flatten().value(),o=s.prototype||s,r={};return t(n).each(function(e){t.isString(e)&&(e=i.mixins[e]),t(e).each(function(e,i){if(t.isFunction(e)){if(o[i]===e)return;o[i]&&(r[i]=r.hasOwnProperty(i)?r[i]:[o[i]],r[i].push(e)),o[i]=e}else t.isArray(e)?o[i]=t.union(e,o[i]||[]):t.isObject(e)?o[i]=t.extend({},e,o[i]||{}):i in o||(o[i]=e)})}),t(r).each(function(e,i){o[i]=function(){var i=this,s=arguments,n;return t(e).each(function(e){var o=t.isFunction(e)?e.apply(i,s):e;n=void 0===o?n:o}),n}}),s};var s;return i.patch=function n(o){s=o.Model.extend;var r=function(s,n){var o=this,r;r=s&&t.has(s,"constructor")?s.constructor:function(){if("defaultProps"in this){var t=this.defaultProps;e.extend(!0,this,t)}return o.apply(this,arguments)},t.extend(r,o,n);var a=function(){this.constructor=r};a.prototype=o.prototype,r.prototype=new a,s&&t.extend(r.prototype,s),r.__super__=o.prototype,klass=r;var l=klass.prototype.mixins;return l&&klass.prototype.hasOwnProperty("mixins")&&i.mixin(klass,l),klass};t([o.Model,o.Collection,o.Router,o.View]).each(function(e){e.mixin=function e(){i.mixin(this,t.toArray(arguments))},e.extend=r})},i.unpatch=function e(i){t([i.Model,i.Collection,i.Router,i.View]).each(function(t){t.mixin=void 0,t.extend=s})},i}),sumo.define("backbone",["backbone-lib","cocktail"],function(t,e){return e.patch(t),t.noConflict()}),sumo.define("handlebars/safe-string",["exports"],function(t){function e(t){this.string=t}e.prototype.toString=function(){return""+this.string},t.default=e}),sumo.define("handlebars/utils",["./safe-string","exports"],function(t,e){function i(t){return a[t]||"&amp;"}function s(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function n(t){return t instanceof r?t.toString():t||0===t?(t=""+t,c.test(t)?t.replace(l,i):t):""}function o(t){return!t&&0!==t||!(!d(t)||0!==t.length)}var r=t.default,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/;e.extend=s;var u=Object.prototype.toString;e.toString=u;var h=function(t){return"function"==typeof t};h(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"===u.call(t)});var h;e.isFunction=h;var d=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===u.call(t)};e.isArray=d,e.escapeExpression=n,e.isEmpty=o}),sumo.define("handlebars/exception",["exports"],function(t){function e(t,e){var s;e&&e.firstLine&&(s=e.firstLine,t+=" - "+s+":"+e.firstColumn);for(var n=Error.prototype.constructor.call(this,t),o=0;o<i.length;o++)this[i[o]]=n[i[o]];s&&(this.lineNumber=s,this.column=e.firstColumn)}var i=["description","fileName","lineNumber","message","name","number","stack"];e.prototype=new Error,t.default=e}),sumo.define("handlebars/base",["./utils","./exception","exports"],function(t,e,i){function s(t,e){this.helpers=t||{},this.partials=e||{},n(this)}function n(t){t.registerHelper("helperMissing",function(t){if(2!==arguments.length)throw new a("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var s=i.inverse||function(){},n=i.fn;return d(e)&&(e=e.call(this)),!0===e?n(this):!1===e||null==e?s(this):h(e)?e.length>0?t.helpers.each(e,i):s(this):n(e)}),t.registerHelper("each",function(t,e){var i=e.fn,s=e.inverse,n=0,o="",r;if(d(t)&&(t=t.call(this)),e.data&&(r=g(e.data)),t&&"object"==typeof t)if(h(t))for(var a=t.length;n<a;n++)r&&(r.index=n,r.first=0===n,r.last=n===t.length-1),o+=i(t[n],{data:r});else for(var l in t)t.hasOwnProperty(l)&&(r&&(r.key=l,r.index=n,r.first=0===n),o+=i(t[l],{data:r}),n++);return 0===n&&(o=s(this)),o}),t.registerHelper("if",function(t,e){return d(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers.if.call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){if(d(t)&&(t=t.call(this)),!r.isEmpty(t))return e.fn(t)}),t.registerHelper("log",function(e,i){var s=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(s,e)}),t.registerHelper("capitalize",function(t){return t.charAt(0).toUpperCase()+t.slice(1)})}function o(t,e){f.log(t,e)}var r=t,a=e.default,l="1.3.0";i.VERSION="1.3.0";var c=4;i.COMPILER_REVISION=4;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};i.REVISION_CHANGES=u;var h=r.isArray,d=r.isFunction,m=r.toString,p="[object Object]";i.HandlebarsEnvironment=s,s.prototype={constructor:s,logger:f,log:o,registerHelper:function(t,e,i){if(m.call(t)===p){if(i||e)throw new a("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else i&&(e.not=i),this.helpers[t]=e},registerPartial:function(t,e){m.call(t)===p?r.extend(this.partials,t):this.partials[t]=e}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(f.level<=t){var i=f.methodMap[t];"undefined"!=typeof console&&console[i]}}};i.logger=f,i.log=o;var g=function(t){var e={};return r.extend(e,t),e};i.createFrame=g}),sumo.define("handlebars/runtime",["./utils","./exception","./base","exports"],function(t,e,i,s){function n(t){var e=t&&t[0]||1,i=d;if(e!==i){if(e<i){var s=m[i],n=m[e];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+s+") or downgrade your runtime to an older version ("+n+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function o(t,e){if(!e)throw new h("No environment passed to template");var i=function(t,i,s,n,o,r){var a=e.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(e.compile){var l={helpers:n,partials:o,data:r};return o[i]=e.compile(t,{data:void 0!==r},e),o[i](s,l)}throw new h("The partial "+i+" could not be compiled when running in runtime-only mode")},s={escapeExpression:u.escapeExpression,invokePartial:i,programs:[],program:function(t,e,i){var s=this.programs[t];return i?s=a(t,e,i):s||(s=this.programs[t]=a(t,e)),s},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i={},u.extend(i,e),u.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,n){n=n||{};var o=n.partial?n:e,r,a;n.partial||(r=n.helpers,a=n.partials);var l=t.call(s,o,i,r,a,n.data);return n.partial||e.VM.checkRevision(s.compilerInfo),l}}function r(t,e,i){var s=Array.prototype.slice.call(arguments,3),n=function(t,n){return n=n||{},e.apply(this,[t,n.data||i].concat(s))};return n.program=t,n.depth=s.length,n}function a(t,e,i){var s=function(t,s){return s=s||{},e(t,s.data||i)};return s.program=t,s.depth=0,s}function l(t,e,i,s,n,o){var r={partial:!0,helpers:s,partials:n,data:o};if(void 0===t)throw new h("The partial "+e+" could not be found");if(t instanceof Function)return t(i,r)}function c(){return""}var u=t,h=e.default,d=i.COMPILER_REVISION,m=i.REVISION_CHANGES;s.checkRevision=n,s.template=o,s.programWithDepth=r,s.program=a,s.invokePartial=l,s.noop=c}),sumo.define("handlebars.runtime",["./handlebars/base","./handlebars/safe-string","./handlebars/exception","./handlebars/utils","./handlebars/runtime","exports"],function(t,e,i,s,n,o){var r=t,a=e.default,l=i.default,c=s,u=n,h=function(){var t=new r.HandlebarsEnvironment;return c.extend(t,r),t.SafeString=a,t.Exception=l,t.Utils=c,t.VM=u,t.template=function(e){return u.template(e,t)},t},d=h();d.create=h,o.default=d}),sumo.define("handlebars/compiler/ast",["../exception","exports"],function(t,e){function i(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var s=t.default,n={ProgramNode:function(t,e,s,o){var r,a;3===arguments.length?(o=s,s=null):2===arguments.length&&(o=e,e=null),i.call(this,o),this.type="program",this.statements=t,this.strip={},s?(a=s[0],a?(r={first_line:a.firstLine,last_line:a.lastLine,last_column:a.lastColumn,first_column:a.firstColumn},this.inverse=new n.ProgramNode(s,e,r)):this.inverse=new n.ProgramNode(s,e),this.strip.right=e.left):e&&(this.strip.left=e.right)},MustacheNode:function(t,e,s,o,r){if(i.call(this,r),this.type="mustache",this.strip=o,null!=s&&s.charAt){var a=s.charAt(3)||s.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!s;t instanceof n.SexprNode?this.sexpr=t:this.sexpr=new n.SexprNode(t,e),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,e,s){i.call(this,s),this.type="sexpr",this.hash=e;var n=this.id=t[0],o=this.params=t.slice(1),r=this.eligibleHelper=n.isSimple;this.isHelper=r&&(o.length||e)},PartialNode:function(t,e,s,n){i.call(this,n),this.type="partial",this.partialName=t,this.context=e,this.strip=s},BlockNode:function(t,e,n,o,r){if(i.call(this,r),t.sexpr.id.original!==o.path.original)throw new s(t.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=t,this.program=e,this.inverse=n,this.strip={left:t.strip.left,right:o.strip.right},(e||n).strip.left=t.strip.right,(n||e).strip.right=o.strip.left,n&&!e&&(this.isInverse=!0)},ContentNode:function(t,e){i.call(this,e),this.type="content",this.string=t},HashNode:function(t,e){i.call(this,e),this.type="hash",this.pairs=t},IdNode:function(t,e){i.call(this,e),this.type="ID";for(var n="",o=[],r=0,a=0,l=t.length;a<l;a++){var c=t[a].part;if(n+=(t[a].separator||"")+c,".."===c||"."===c||"this"===c){if(o.length>0)throw new s("Invalid path: "+n,this);".."===c?r++:this.isScoped=!0}else o.push(c)}this.original=n,this.parts=o,this.string=o.join("."),this.depth=r,this.isSimple=1===t.length&&!this.isScoped&&0===r,this.stringModeValue=this.string},PartialNameNode:function(t,e){i.call(this,e),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,e){i.call(this,e),this.type="DATA",this.id=t},StringNode:function(t,e){i.call(this,e),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,e){i.call(this,e),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,e){i.call(this,e),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,e){i.call(this,e),this.type="comment",this.comment=t}};e.default=n}),sumo.define("handlebars/compiler/parser",["exports"],function(t){var e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var i={trace:function t(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},
productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function e(i,s,n,o,r,a,l){var c=a.length-1;switch(r){case 1:return new o.ProgramNode(a[c-1],this._$);case 2:return new o.ProgramNode([],this._$);case 3:this.$=new o.ProgramNode([],a[c-1],a[c],this._$);break;case 4:this.$=new o.ProgramNode(a[c-2],a[c-1],a[c],this._$);break;case 5:this.$=new o.ProgramNode(a[c-1],a[c],[],this._$);break;case 6:this.$=new o.ProgramNode(a[c],this._$);break;case 7:case 8:this.$=new o.ProgramNode([],this._$);break;case 9:this.$=[a[c]];break;case 10:a[c-1].push(a[c]),this.$=a[c-1];break;case 11:this.$=new o.BlockNode(a[c-2],a[c-1].inverse,a[c-1],a[c],this._$);break;case 12:this.$=new o.BlockNode(a[c-2],a[c-1],a[c-1].inverse,a[c],this._$);break;case 13:case 14:this.$=a[c];break;case 15:this.$=new o.ContentNode(a[c],this._$);break;case 16:this.$=new o.CommentNode(a[c],this._$);break;case 17:case 18:this.$=new o.MustacheNode(a[c-1],null,a[c-2],t(a[c-2],a[c]),this._$);break;case 19:this.$={path:a[c-1],strip:t(a[c-2],a[c])};break;case 20:case 21:this.$=new o.MustacheNode(a[c-1],null,a[c-2],t(a[c-2],a[c]),this._$);break;case 22:this.$=new o.PartialNode(a[c-2],a[c-1],t(a[c-3],a[c]),this._$);break;case 23:this.$=t(a[c-1],a[c]);break;case 24:this.$=new o.SexprNode([a[c-2]].concat(a[c-1]),a[c],this._$);break;case 25:this.$=new o.SexprNode([a[c]],null,this._$);break;case 26:this.$=a[c];break;case 27:this.$=new o.StringNode(a[c],this._$);break;case 28:this.$=new o.IntegerNode(a[c],this._$);break;case 29:this.$=new o.BooleanNode(a[c],this._$);break;case 30:this.$=a[c];break;case 31:a[c-1].isHelper=!0,this.$=a[c-1];break;case 32:this.$=new o.HashNode(a[c],this._$);break;case 33:this.$=[a[c-2],a[c]];break;case 34:this.$=new o.PartialNameNode(a[c],this._$);break;case 35:this.$=new o.PartialNameNode(new o.StringNode(a[c],this._$),this._$);break;case 36:this.$=new o.PartialNameNode(new o.IntegerNode(a[c],this._$));break;case 37:this.$=new o.DataNode(a[c],this._$);break;case 38:this.$=new o.IdNode(a[c],this._$);break;case 39:a[c-2].push({part:a[c],separator:a[c-1]}),this.$=a[c-2];break;case 40:this.$=[{part:a[c]}];break;case 43:this.$=[];break;case 44:a[c-1].push(a[c]);break;case 47:this.$=[a[c]];break;case 48:a[c-1].push(a[c])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function t(e,i){throw new Error(e)},parse:function t(e){function i(t){o.length=o.length-2*t,r.length=r.length-t,a.length=a.length-t}function s(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,o=[0],r=[null],a=[],l=this.table,c="",u=0,h=0,d=0,m=2,p=1;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;a.push(f);var g=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var v,b,y,w,x,_,k={},C,S,T,E;;){if(y=o[o.length-1],this.defaultActions[y]?w=this.defaultActions[y]:(null!==v&&void 0!==v||(v=s()),w=l[y]&&l[y][v]),void 0===w||!w.length||!w[0]){var $="";if(!d){E=[];for(C in l[y])this.terminals_[C]&&C>2&&E.push("'"+this.terminals_[C]+"'");$=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==v?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError($,{text:this.lexer.match,token:this.terminals_[v]||v,line:this.lexer.yylineno,loc:f,expected:E})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+v);switch(w[0]){case 1:o.push(v),r.push(this.lexer.yytext),a.push(this.lexer.yylloc),o.push(w[1]),v=null,b?(v=b,b=null):(h=this.lexer.yyleng,c=this.lexer.yytext,u=this.lexer.yylineno,f=this.lexer.yylloc,d>0&&d--);break;case 2:if(S=this.productions_[w[1]][1],k.$=r[r.length-S],k._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},g&&(k._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),void 0!==(_=this.performAction.call(k,c,h,u,this.yy,w[1],r,a)))return _;S&&(o=o.slice(0,-1*S*2),r=r.slice(0,-1*S),a=a.slice(0,-1*S)),o.push(this.productions_[w[1]][0]),r.push(k.$),a.push(k._$),T=l[o[o.length-2]][o[o.length-1]],o.push(T);break;case 3:return!0}}return!0}},s=function(){var t={EOF:1,parseError:function t(e,i){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,i)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var s=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===s.length?this.yylloc.first_column:0)+s[s.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,s,n,o;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),a=0;a<r.length&&(!(i=this._input.match(this.rules[r[a]]))||e&&!(i[0].length>e[0].length)||(e=i,s=a,this.options.flex));a++);return e?(o=e[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[s],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function t(){var e=this.next();return void 0!==e?e:this.lex()},begin:function t(e){this.conditionStack.push(e)},popState:function t(){return this.conditionStack.pop()},_currentRules:function t(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function t(e){this.begin(e)}};return t.options={},t.performAction=function t(e,i,s,n){function o(t,e){return i.yytext=i.yytext.substr(t,i.yyleng-e)}var r=n;switch(s){case 0:if("\\\\"===i.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===i.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),i.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return o(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return o(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return i.yytext=o(1,2).replace(/\\"/g,'"'),32;case 24:return i.yytext=o(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:case 27:return 34;case 28:return 33;case 29:return 40;case 30:return i.yytext=o(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return i.lexer=s,e.prototype=i,i.Parser=e,new e}();t.default=e}),sumo.define("handlebars/compiler/base",["./parser","./ast","exports"],function(t,e,i){function s(t){return t.constructor===o.ProgramNode?t:(n.yy=o,n.parse(t))}var n=t.default,o=e.default;i.parser=n,i.parse=s}),sumo.define("handlebars/compiler/compiler",["../exception","exports"],function(t,e){function i(){}function s(t,e,i){if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0);var s=i.parse(t),n=(new i.Compiler).compile(s,e);return(new i.JavaScriptCompiler).compile(n,e)}function n(t,e,i){function s(){var s=i.parse(t),n=(new i.Compiler).compile(s,e),o=(new i.JavaScriptCompiler).compile(n,e,void 0,!0);return i.template(o)}if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=e||{})||(e.data=!0);var n;return function(t,e){return n||(n=s()),n.call(this,t,e)}}var o=t.default;e.Compiler=i,i.prototype={compiler:i,disassemble:function(){for(var t=this.opcodes,e,i=[],s,n,o=0,r=t.length;o<r;o++)if(e=t[o],"DECLARE"===e.opcode)i.push("DECLARE "+e.name+"="+e.value);else{s=[];for(var a=0;a<e.args.length;a++)n=e.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),s.push(n);i.push(e.opcode+" "+s.join(" "))}return i.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;i<e;i++){var s=this.opcodes[i],n=t.opcodes[i];if(s.opcode!==n.opcode||s.args.length!==n.args.length)return!1;for(var o=0;o<s.args.length;o++)if(s.args[o]!==n.args[o])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(i=0;i<e;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0},i)for(var s in i)this.options.knownHelpers[s]=i[s];return this.accept(t)},accept:function(t){var e=t.strip||{},i;return e.left&&this.opcode("strip"),i=this[t.type](t),e.right&&this.opcode("strip"),i},program:function(t){for(var e=t.statements,i=0,s=e.length;i<s;i++)this.accept(e[i]);return this.isSimple=1===s,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),i=this.guid++,s;this.usePartial=this.usePartial||e.usePartial,this.children[i]=e;for(var n=0,o=e.depths.list.length;n<o;n++)(s=e.depths.list[n])<2||this.addDepth(s-1);return i},block:function(t){var e=t.mustache,i=t.program,s=t.inverse;i&&(i=this.compileProgram(i)),s&&(s=this.compileProgram(s));var n=e.sexpr,o=this.classifySexpr(n);"helper"===o?this.helperSexpr(n,i,s):"simple"===o?(this.simpleSexpr(n),this.opcode("pushProgram",i),this.opcode("pushProgram",s),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(n,i,s),this.opcode("pushProgram",i),this.opcode("pushProgram",s),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e=t.pairs,i,s;this.opcode("pushHash");for(var n=0,o=e.length;n<o;n++)i=e[n],s=i[1],this.options.stringParams?(s.depth&&this.addDepth(s.depth),this.opcode("getContext",s.depth||0),this.opcode("pushStringParam",s.stringModeValue,s.type),"sexpr"===s.type&&this.sexpr(s)):this.accept(s),this.opcode("assignToHash",i[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(t,e,i){var s=t.id,n=s.parts[0],o=null!=e||null!=i;this.opcode("getContext",s.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",n,o)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var s=this.setupFullMustacheParams(t,e,i),n=t.id.parts[0];if(this.options.knownHelpers[n])this.opcode("invokeKnownHelper",s.length,n);else{if(this.options.knownHelpersOnly)throw new o("You specified knownHelpersOnly, but used the unknown helper "+n,t);this.opcode("invokeHelper",s.length,n,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth),t.parts[0]?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var e=1,i=t.parts.length;e<i;e++)this.opcode("lookup",t.parts[e])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new o("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,i=0,s=e.length;i<s;i++)this.opcode("lookup",e[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,i=t.eligibleHelper,s=this.options;if(i&&!e){var n=t.id.parts[0];s.knownHelpers[n]?e=!0:s.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e=t.length,i;e--;)i=t[e],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type),"sexpr"===i.type&&this.sexpr(i)):this[i.type](i)},setupFullMustacheParams:function(t,e,i){var s=t.params;return this.pushParams(s),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),s}},e.precompile=s,e.compile=n}),sumo.define("handlebars/compiler/javascript-compiler",["../base","../exception","exports"],function(t,e,i){function s(t){this.value=t}function n(){}var o=t.COMPILER_REVISION,r=t.REVISION_CHANGES,a=t.log,l=e.default;n.prototype={nameLookup:function(t,e){var i,s;return 0===t.indexOf("depth")&&(i=!0),s=/^[0-9]+$/.test(e)?t+"["+e+"]":n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",i?"("+t+" && "+s+")":s},compilerInfo:function(){var t=o;return"this.compilerInfo = ["+t+",'"+r[t]+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,i,s){this.environment=t,this.options=e||{},a("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var n=t.opcodes,o;this.i=0;for(var r=n.length;this.i<r;this.i++)o=n[this.i],"DECLARE"===o.opcode?this[o.name]=o.value:this[o.opcode].apply(this,o.args),o.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(s)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,i="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(i+=" data = data || {};"),t.push(i)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var s=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],n=0,o=this.environment.depths.list.length;n<o;n++)s.push("depth"+this.environment.depths.list[n]);var r=this.mergeSource();if(this.isChild||(r=this.compilerInfo()+r),t)return s.push(r),Function.apply(this,s);var l="function "+(this.name||"")+"("+s.join(",")+") {\n  "+r+"}";return a("debug",l+"\n\n"),l},mergeSource:function(){for(var t="",e,i=0,s=this.source.length;i<s;i++){var n=this.source[i];n.appendToBuffer?e=e?e+"\n    + "+n.content:n.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=n+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e,i){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var s=this.lastHelper=this.setupHelper(t,e,!0),n=this.nameLookup("depth"+this.lastContext,e,"context"),o="helper = "+s.name+" || "+n;s.paramsInit&&(o+=","+s.paramsInit),this.push("("+o+",helper ? helper.call("+s.callParams+") : helperMissing.call("+s.helperMissingParams+"))"),i||this.flushInline()},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var i=this.setupHelper(0,t,e),s=this.lastHelper=this.nameLookup("helpers",t,"helper"),n=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit),this.pushSource("if (helper = "+s+") { "+o+" = helper.call("+i.callParams+"); }"),this.pushSource("else { helper = "+n+"; "+o+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e=this.popStack(),i,s;this.options.stringParams&&(s=this.popStack(),i=this.popStack());var n=this.hash;i&&n.contexts.push("'"+t+"': "+i),s&&n.types.push("'"+t+"': "+s),n.values.push("'"+t+"': ("+e+")")},compiler:n,compileChildren:function(t,e){for(var i=t.children,s,n,o=0,r=i.length;o<r;o++){s=i[o],n=new this.compiler;var a=this.matchExistingProgram(s);null==a?(this.context.programs.push(""),a=this.context.programs.length,s.index=a,s.name="program"+a,this.context.programs[a]=n.compile(s,e,this.context),this.context.environments[a]=s):(s.index=a,s.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;e<i;e++){var s=this.context.environments[e];if(s&&s.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e=this.environment.children[t],i=e.depths.list,s,n=[e.index,e.name,"data"],o=0,r=i.length;o<r;o++)s=i[o],1===s?n.push("depth0"):n.push("depth"+(s-1));return(0===i.length?"self.program(":"self.programWithDepth(")+n.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new s(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e="",i=this.isInline(),n,o,r;if(i){var a=this.popStack(!0);if(a instanceof s)n=a.value,r=!0;else{o=!this.stackSlot;var l=o?this.incrStack():this.topStackName();e="("+this.push(l)+" = "+a+"),",n=this.topStack()}}else n=this.topStack();var c=t.call(this,n);return i?(r||this.popStack(),o&&this.stackSlot--,this.push("("+e+c+")")):(/^stack/.test(n)||(n=this.nextStack()),this.pushSource(n+" = ("+e+c+");")),n},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];n instanceof s?this.compileStack.push(n):this.pushStack(n)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof s)return i.value;if(!e){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return i},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof s?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,i){var s=[];return{params:s,paramsInit:this.setupParams(t,s,i),name:this.nameLookup("helpers",e,"helper"),callParams:["depth0"].concat(s).join(", "),helperMissingParams:i&&["depth0",this.quotedString(e)].concat(s).join(", ")}},setupOptions:function(t,e){var i=[],s=[],n=[],o,r,a;i.push("hash:"+this.popStack()),this.options.stringParams&&(i.push("hashTypes:"+this.popStack()),i.push("hashContexts:"+this.popStack())),r=this.popStack(),((a=this.popStack())||r)&&(a||(this.context.aliases.self="this",a="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),i.push("inverse:"+r),i.push("fn:"+a));for(var l=0;l<t;l++)o=this.popStack(),e.push(o),
this.options.stringParams&&(n.push(this.popStack()),s.push(this.popStack()));return this.options.stringParams&&(i.push("contexts:["+s.join(",")+"]"),i.push("types:["+n.join(",")+"]")),this.options.data&&i.push("data:data"),i},setupParams:function(t,e,i){var s="{"+this.setupOptions(t,e).join(",")+"}";return i?(this.useRegister("options"),e.push("options"),"options="+s):(e.push(s),"")}};for(var c="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),u=n.RESERVED_WORDS={},h=0,d=c.length;h<d;h++)u[c[h]]=!0;n.isValidJavaScriptVariableName=function(t){return!(n.RESERVED_WORDS[t]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t))},i.default=n}),sumo.define("handlebars",["./handlebars.runtime","./handlebars/compiler/ast","./handlebars/compiler/base","./handlebars/compiler/compiler","./handlebars/compiler/javascript-compiler","exports"],function(t,e,i,s,n,o){var r=t.default,a=e.default,l=i.parser,c=i.parse,u=s.Compiler,h=s.compile,d=s.precompile,m=n.default,p=r.create,f=function(){var t=p();return t.compile=function(e,i){return h(e,i,t)},t.precompile=function(e,i){return d(e,i,t)},t.AST=a,t.Compiler=u,t.JavaScriptCompiler=m,t.Parser=l,t.parse=c,t};return r=f(),r.create=f,o.default=r,r}),function(i,s){"function"==typeof sumo.define&&sumo.define.amd?sumo.define("tether",s):"object"==typeof t?e.exports=s(require,t,e):i.Tether=s()}(this,function(t,e,i){function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){var e=getComputedStyle(t),i=e.position;if("fixed"===i)return t;for(var s=t;s=s.parentNode;){var n=void 0;try{n=getComputedStyle(s)}catch(t){}if(void 0===n||null===n)return s;var o=n.overflow,r=n.overflowX;if(/(auto|scroll)/.test(o+n.overflowY+r)&&("absolute"!==i||["relative","absolute","fixed"].indexOf(n.position)>=0))return s}return document.body}function o(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var i=e.documentElement,s={},n=t.getBoundingClientRect();for(var o in n)s[o]=n[o];var r=C(e);return s.top-=r.top,s.left-=r.left,void 0===s.width&&(s.width=document.body.scrollWidth-s.left-s.right),void 0===s.height&&(s.height=document.body.scrollHeight-s.top-s.bottom),s.top=s.top-i.clientTop,s.left=s.left-i.clientLeft,s.right=e.body.clientWidth-s.width-s.left,s.bottom=e.body.clientHeight-s.height-s.top,s}function r(t){return t.offsetParent||document.documentElement}function a(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");l(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var s=t.offsetWidth;i===s&&(s=e.clientWidth),document.body.removeChild(e);var n=i-s;return{width:n,height:n}}function l(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var i in e)({}).hasOwnProperty.call(e,i)&&(t[i]=e[i])}),t}function c(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var i=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),s=d(t).replace(i," ");m(t,s)}}function u(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{c(t,e);var i=d(t)+" "+e;m(t,i)}}function h(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=d(t);return new RegExp("(^| )"+e+"( |$)","gi").test(i)}function d(t){return t.className instanceof SVGAnimatedString?t.className.baseVal:t.className}function m(t,e){t.setAttribute("class",e)}function p(t,e,i){i.forEach(function(i){-1===e.indexOf(i)&&h(t,i)&&c(t,i)}),e.forEach(function(e){h(t,e)||u(t,e)})}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){var i=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+i>=e&&e>=t-i}function g(){return"undefined"!=typeof performance&&void 0!==performance.now?performance.now():+new Date}function v(){for(var t={top:0,left:0},e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];return i.forEach(function(e){var i=e.top,s=e.left;"string"==typeof i&&(i=parseFloat(i,10)),"string"==typeof s&&(s=parseFloat(s,10)),t.top+=i,t.left+=s}),t}function b(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}function y(t,e){return"scrollParent"===e?e=t.scrollParent:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),void 0!==e.nodeType&&function(){var t=o(e),i=t,s=getComputedStyle(e);e=[i.left,i.top,t.width+i.left,t.height+i.top],q.forEach(function(t,i){t=t[0].toUpperCase()+t.substr(1),"Top"===t||"Left"===t?e[i]+=parseFloat(s["border"+t+"Width"]):e[i]-=parseFloat(s["border"+t+"Width"])})}(),e}var w=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),x=void 0;void 0===x&&(x={modules:[]});var _=function(){var t=0;return function(){return++t}}(),k={},C=function t(e){var i=e._tetherZeroElement;void 0===i&&(i=e.createElement("div"),i.setAttribute("data-tether-id",_()),l(i.style,{top:0,left:0,position:"absolute"}),e.body.appendChild(i),e._tetherZeroElement=i);var s=i.getAttribute("data-tether-id");if(void 0===k[s]){k[s]={};var n=i.getBoundingClientRect();for(var o in n)k[s][o]=n[o];T(function(){delete k[s]})}return k[s]},S=[],T=function t(e){S.push(e)},E=function t(){for(var e=void 0;e=S.pop();)e()},$=function(){function t(){s(this,t)}return w(t,[{key:"on",value:function t(e,i,s){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[e]&&(this.bindings[e]=[]),this.bindings[e].push({handler:i,ctx:s,once:n})}},{key:"once",value:function t(e,i,s){this.on(e,i,s,!0)}},{key:"off",value:function t(e,i){if(void 0===this.bindings||void 0===this.bindings[e])if(void 0===i)delete this.bindings[e];else for(var s=0;s<this.bindings[e].length;)this.bindings[e][s].handler===i?this.bindings[e].splice(s,1):++s}},{key:"trigger",value:function t(e){if(void 0!==this.bindings&&this.bindings[e])for(var i=0;i<this.bindings[e].length;){var s=this.bindings[e][i],n=s.handler,o=s.ctx,r=s.once,a=o;void 0===a&&(a=this);for(var l=arguments.length,c=Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];n.apply(a,c),r?this.bindings[e].splice(i,1):++i}}}]),t}();x.Utils={getScrollParent:n,getBounds:o,getOffsetParent:r,extend:l,addClass:u,removeClass:c,hasClass:h,updateClasses:p,defer:T,flush:E,uniqueId:_,Evented:$,getScrollBarSize:a};var I=function(){function t(t,e){var i=[],s=!0,n=!1,o=void 0;try{for(var r=t[Symbol.iterator](),a;!(s=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(t){n=!0,o=t}finally{try{!s&&r.return&&r.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();if(void 0===x)throw new Error("You must include the utils.js file before tether.js");var P=x.Utils,n=P.getScrollParent,o=P.getBounds,r=P.getOffsetParent,l=P.extend,u=P.addClass,c=P.removeClass,p=P.updateClasses,T=P.defer,E=P.flush,a=P.getScrollBarSize,O=function(){for(var t=document.createElement("div"),e=["transform","webkitTransform","OTransform","MozTransform","msTransform"],i=0;i<e.length;++i){var s=e[i];if(void 0!==t.style[s])return s}}(),A=null,L=[],B=function t(){L.forEach(function(t){t.position(!1)}),E()};!function(){var t=null,e=null,i=null,s=function s(){if(void 0!==e&&e>16)return e=Math.min(e-16,250),void(i=setTimeout(s,250));void 0!==t&&g()-t<10||(void 0!==i&&(clearTimeout(i),i=null),t=g(),B(),e=g()-t)};["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,s)})}();var D={center:"center",left:"right",right:"left"},N={middle:"middle",top:"bottom",bottom:"top"},M={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},R=function t(e,i){var s=e.left,n=e.top;return"auto"===s&&(s=D[i.left]),"auto"===n&&(n=N[i.top]),{left:s,top:n}},z=function t(e){var i=e.left,s=e.top;return void 0!==M[e.left]&&(i=M[e.left]),void 0!==M[e.top]&&(s=M[e.top]),{left:i,top:s}},U=function t(e){var i=e.split(" "),s=I(i,2);return{top:s[0],left:s[1]}},j=U,F=function(){function t(e){var i=this;s(this,t),this.position=this.position.bind(this),L.push(this),null===A&&(A=window.setInterval(H.position,500)),this.history=[],this.setOptions(e,!1),x.modules.forEach(function(t){void 0!==t.initialize&&t.initialize.call(i)}),this.position()}return w(t,[{key:"getClass",value:function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],i=this.options.classes;return void 0!==i&&i[e]?this.options.classes[e]:this.options.classPrefix?this.options.classPrefix+"-"+e:e}},{key:"setOptions",value:function t(e){var i=this,s=arguments.length<=1||void 0===arguments[1]||arguments[1],o={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=l(o,e);var r=this.options,a=r.element,c=r.target,h=r.targetModifier;if(this.element=a,this.target=c,this.targetModifier=h,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if(void 0===i[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==i[t].jquery?i[t]=i[t][0]:"string"==typeof i[t]&&(i[t]=document.querySelector(i[t]))}),u(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&u(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=j(this.options.targetAttachment),this.attachment=j(this.options.attachment),this.offset=U(this.options.offset),this.targetOffset=U(this.options.targetOffset),void 0!==this.scrollParent&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParent=this.target:this.scrollParent=n(this.target),!1!==this.options.enabled&&this.enable(s)}},{key:"getTargetBounds",value:function t(){if(void 0===this.targetModifier)return o(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var e=o(this.target),i={height:e.height,width:e.width,top:e.top,left:e.left};return i.height=Math.min(i.height,e.height-(pageYOffset-e.top)),i.height=Math.min(i.height,e.height-(e.top+e.height-(pageYOffset+innerHeight))),i.height=Math.min(innerHeight,i.height),i.height-=2,i.width=Math.min(i.width,e.width-(pageXOffset-e.left)),i.width=Math.min(i.width,e.width-(e.left+e.width-(pageXOffset+innerWidth))),i.width=Math.min(innerWidth,i.width),i.width-=2,i.top<pageYOffset&&(i.top=pageYOffset),i.left<pageXOffset&&(i.left=pageXOffset),i}if("scroll-handle"===this.targetModifier){var e=void 0,s=this.target;s===document.body?(s=document.documentElement,e={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):e=o(s);var n=getComputedStyle(s),r=s.scrollWidth>s.clientWidth||[n.overflow,n.overflowX].indexOf("scroll")>=0||this.target!==document.body,a=0;r&&(a=15);var l=e.height-parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)-a,i={width:15,height:.975*l*(l/s.scrollHeight),left:e.left+e.width-parseFloat(n.borderLeftWidth)-15},c=0;l<408&&this.target===document.body&&(c=-11e-5*Math.pow(l,2)-.00727*l+22.58),this.target!==document.body&&(i.height=Math.max(i.height,24));var u=this.target.scrollTop/(s.scrollHeight-l);return i.top=u*(l-i.height-c)+e.top+parseFloat(n.borderTopWidth),this.target===document.body&&(i.height=Math.max(i.height,24)),i}}},{key:"clearCache",value:function t(){this._cache={}}},{key:"cache",value:function t(e,i){return void 0===this._cache&&(this._cache={}),void 0===this._cache[e]&&(this._cache[e]=i.call(this)),this._cache[e]}},{key:"enable",value:function t(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&u(this.target,this.getClass("enabled")),u(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),e&&this.position()}},{key:"disable",value:function t(){c(this.target,this.getClass("enabled")),c(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParent&&this.scrollParent.removeEventListener("scroll",this.position)}},{key:"destroy",value:function t(){var e=this;this.disable(),L.forEach(function(t,i){if(t===e)return void L.splice(i,1)}),0===L.length&&null!==A&&(window.clearInterval(A),A=null)}},{key:"updateAttachClasses",value:function t(e,i){var s=this;e=e||this.attachment,i=i||this.targetAttachment;var n=["left","top","bottom","right","middle","center"];void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var o=this._addAttachClasses;e.top&&o.push(this.getClass("element-attached")+"-"+e.top),e.left&&o.push(this.getClass("element-attached")+"-"+e.left),i.top&&o.push(this.getClass("target-attached")+"-"+i.top),i.left&&o.push(this.getClass("target-attached")+"-"+i.left);var r=[];n.forEach(function(t){r.push(s.getClass("element-attached")+"-"+t),r.push(s.getClass("target-attached")+"-"+t)}),T(function(){void 0!==s._addAttachClasses&&(p(s.element,s._addAttachClasses,r),!1!==s.options.addTargetClasses&&p(s.target,s._addAttachClasses,r),delete s._addAttachClasses)})}},{key:"position",value:function t(){var e=this,i=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var s=R(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,s);var n=this.cache("element-bounds",function(){return o(e.element)}),l=n.width,c=n.height;if(0===l&&0===c&&void 0!==this.lastSize){var u=this.lastSize;l=u.width,c=u.height}else this.lastSize={width:l,height:c};var h=this.cache("target-bounds",function(){return e.getTargetBounds()}),d=h,m=b(z(this.attachment),{width:l,height:c}),p=b(z(s),d),f=b(this.offset,{width:l,height:c}),g=b(this.targetOffset,d);m=v(m,f),p=v(p,g);for(var y=h.left+p.left-m.left,w=h.top+p.top-m.top,_=0;_<x.modules.length;++_){var k=x.modules[_],C=k.position.call(this,{left:y,top:w,targetAttachment:s,targetPos:h,elementPos:n,offset:m,targetOffset:p,manualOffset:f,manualTargetOffset:g,scrollbarSize:T,attachment:this.attachment});if(!1===C)return!1;void 0!==C&&"object"==typeof C&&(w=C.top,y=C.left)}var S={page:{top:w,left:y},viewport:{top:w-pageYOffset,bottom:pageYOffset-w-c+innerHeight,left:y-pageXOffset,right:pageXOffset-y-l+innerWidth}},T=void 0;return document.body.scrollWidth>window.innerWidth&&(T=this.cache("scrollbar-size",a),S.viewport.bottom-=T.height),document.body.scrollHeight>window.innerHeight&&(T=this.cache("scrollbar-size",a),S.viewport.right-=T.width),-1!==["","static"].indexOf(document.body.style.position)&&-1!==["","static"].indexOf(document.body.parentElement.style.position)||(S.page.bottom=document.body.scrollHeight-w-c,S.page.right=document.body.scrollWidth-y-l),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var t=e.cache("target-offsetparent",function(){return r(e.target)}),i=e.cache("target-offsetparent-bounds",function(){return o(t)}),s=getComputedStyle(t),n=i,a={};if(["Top","Left","Bottom","Right"].forEach(function(t){a[t.toLowerCase()]=parseFloat(s["border"+t+"Width"])}),i.right=document.body.scrollWidth-i.left-n.width+a.right,i.bottom=document.body.scrollHeight-i.top-n.height+a.bottom,S.page.top>=i.top+a.top&&S.page.bottom>=i.bottom&&S.page.left>=i.left+a.left&&S.page.right>=i.right){var l=t.scrollTop,c=t.scrollLeft;S.offset={top:S.page.top-i.top+l-a.top,left:S.page.left-i.left+c-a.left}}}(),this.move(S),this.history.unshift(S),this.history.length>3&&this.history.pop(),i&&E(),!0}}},{key:"move",value:function t(e){var i=this;if(void 0!==this.element.parentNode){var s={};for(var n in e){s[n]={};for(var o in e[n]){for(var a=!1,c=0;c<this.history.length;++c){var u=this.history[c];if(void 0!==u[n]&&!f(u[n][o],e[n][o])){a=!0;break}}a||(s[n][o]=!0)}}var h={top:"",left:"",right:"",bottom:""},d=function t(e,s){if(!1!==(void 0!==i.options.optimizations?i.options.optimizations.gpu:null)){var n=void 0,o=void 0;e.top?(h.top=0,n=s.top):(h.bottom=0,n=-s.bottom),e.left?(h.left=0,o=s.left):(h.right=0,o=-s.right),h[O]="translateX("+Math.round(o)+"px) translateY("+Math.round(n)+"px)","msTransform"!==O&&(h[O]+=" translateZ(0)")}else e.top?h.top=s.top+"px":h.bottom=s.bottom+"px",e.left?h.left=s.left+"px":h.right=s.right+"px"},m=!1;if((s.page.top||s.page.bottom)&&(s.page.left||s.page.right)?(h.position="absolute",d(s.page,e.page)):(s.viewport.top||s.viewport.bottom)&&(s.viewport.left||s.viewport.right)?(h.position="fixed",d(s.viewport,e.viewport)):void 0!==s.offset&&s.offset.top&&s.offset.left?function(){h.position="absolute";var t=i.cache("target-offsetparent",function(){return r(i.target)});r(i.element)!==t&&T(function(){i.element.parentNode.removeChild(i.element),t.appendChild(i.element)}),d(s.offset,e.offset),m=!0}():(h.position="absolute",d({top:!0,left:!0},e.page)),!m){for(var p=!0,g=this.element.parentNode;g&&"BODY"!==g.tagName;){if("static"!==getComputedStyle(g).position){p=!1;break}g=g.parentNode}p||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var v={},b=!1;for(var o in h){var y=h[o],w=this.element.style[o];""!==w&&""!==y&&["top","left","bottom","right"].indexOf(o)>=0&&(w=parseFloat(w),y=parseFloat(y)),w!==y&&(b=!0,v[o]=y)}b&&T(function(){l(i.element.style,v)})}}}]),t}();F.modules=[],x.position=B;var H=l(F,x),I=function(){function t(t,e){var i=[],s=!0,n=!1,o=void 0;try{for(var r=t[Symbol.iterator](),a;!(s=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(t){n=!0,o=t}finally{try{!s&&r.return&&r.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=x.Utils,o=P.getBounds,l=P.extend,p=P.updateClasses,T=P.defer,q=["left","top","right","bottom"];x.modules.push({position:function t(e){var i=this,s=e.top,n=e.left,r=e.targetAttachment;if(!this.options.constraints)return!0;var a=this.cache("element-bounds",function(){return o(i.element)}),c=a.height,u=a.width;if(0===u&&0===c&&void 0!==this.lastSize){var h=this.lastSize;u=h.width,c=h.height}var d=this.cache("target-bounds",function(){return i.getTargetBounds()}),m=d.height,f=d.width,g=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,i=t.pinnedClass;e&&g.push(e),i&&g.push(i)}),g.forEach(function(t){["left","top","right","bottom"].forEach(function(e){g.push(t+"-"+e)})});var v=[],b=l({},r),w=l({},this.attachment);return this.options.constraints.forEach(function(t){var e=t.to,o=t.attachment,a=t.pin;void 0===o&&(o="");var l=void 0,h=void 0;if(o.indexOf(" ")>=0){var d=o.split(" "),p=I(d,2);h=p[0],l=p[1]}else l=h=o;var g=y(i,e);"target"!==h&&"both"!==h||(s<g[1]&&"top"===b.top&&(s+=m,b.top="bottom"),s+c>g[3]&&"bottom"===b.top&&(s-=m,b.top="top")),"together"===h&&(s<g[1]&&"top"===b.top&&("bottom"===w.top?(s+=m,b.top="bottom",s+=c,w.top="top"):"top"===w.top&&(s+=m,b.top="bottom",s-=c,w.top="bottom")),s+c>g[3]&&"bottom"===b.top&&("top"===w.top?(s-=m,b.top="top",s-=c,w.top="bottom"):"bottom"===w.top&&(s-=m,b.top="top",s+=c,w.top="top")),"middle"===b.top&&(s+c>g[3]&&"top"===w.top?(s-=c,w.top="bottom"):s<g[1]&&"bottom"===w.top&&(s+=c,w.top="top"))),"target"!==l&&"both"!==l||(n<g[0]&&"left"===b.left&&(n+=f,b.left="right"),n+u>g[2]&&"right"===b.left&&(n-=f,b.left="left")),"together"===l&&(n<g[0]&&"left"===b.left?"right"===w.left?(n+=f,b.left="right",n+=u,w.left="left"):"left"===w.left&&(n+=f,b.left="right",n-=u,w.left="right"):n+u>g[2]&&"right"===b.left?"left"===w.left?(n-=f,b.left="left",n-=u,w.left="right"):"right"===w.left&&(n-=f,b.left="left",n+=u,w.left="left"):"center"===b.left&&(n+u>g[2]&&"left"===w.left?(n-=u,w.left="right"):n<g[0]&&"right"===w.left&&(n+=u,w.left="left"))),"element"!==h&&"both"!==h||(s<g[1]&&"bottom"===w.top&&(s+=c,w.top="top"),s+c>g[3]&&"top"===w.top&&(s-=c,w.top="bottom")),"element"!==l&&"both"!==l||(n<g[0]&&"right"===w.left&&(n+=u,w.left="left"),n+u>g[2]&&"left"===w.left&&(n-=u,w.left="right")),"string"==typeof a?a=a.split(",").map(function(t){return t.trim()}):!0===a&&(a=["top","left","right","bottom"]),a=a||[];var x=[],_=[];s<g[1]&&(a.indexOf("top")>=0?(s=g[1],x.push("top")):_.push("top")),s+c>g[3]&&(a.indexOf("bottom")>=0?(s=g[3]-c,x.push("bottom")):_.push("bottom")),n<g[0]&&(a.indexOf("left")>=0?(n=g[0],x.push("left")):_.push("left")),n+u>g[2]&&(a.indexOf("right")>=0?(n=g[2]-u,x.push("right")):_.push("right")),x.length&&function(){var t=void 0;t=void 0!==i.options.pinnedClass?i.options.pinnedClass:i.getClass("pinned"),v.push(t),x.forEach(function(e){v.push(t+"-"+e)})}(),_.length&&function(){var t=void 0;t=void 0!==i.options.outOfBoundsClass?i.options.outOfBoundsClass:i.getClass("out-of-bounds"),v.push(t),_.forEach(function(e){v.push(t+"-"+e)})}(),(x.indexOf("left")>=0||x.indexOf("right")>=0)&&(w.left=b.left=!1),(x.indexOf("top")>=0||x.indexOf("bottom")>=0)&&(w.top=b.top=!1),b.top===r.top&&b.left===r.left&&w.top===i.attachment.top&&w.left===i.attachment.left||i.updateAttachClasses(w,b)}),T(function(){!1!==i.options.addTargetClasses&&p(i.target,v,g),p(i.element,v,g)}),{top:s,left:n}}});var P=x.Utils,o=P.getBounds,p=P.updateClasses,T=P.defer;x.modules.push({position:function t(e){var i=this,s=e.top,n=e.left,r=this.cache("element-bounds",function(){return o(i.element)}),a=r.height,l=r.width,c=this.getTargetBounds(),u=s+a,h=n+l,d=[];s<=c.bottom&&u>=c.top&&["left","right"].forEach(function(t){var e=c[t];e!==n&&e!==h||d.push(t)}),n<=c.right&&h>=c.left&&["top","bottom"].forEach(function(t){var e=c[t];e!==s&&e!==u||d.push(t)});var m=[],f=[],g=["left","top","right","bottom"];return m.push(this.getClass("abutted")),g.forEach(function(t){m.push(i.getClass("abutted")+"-"+t)}),d.length&&f.push(this.getClass("abutted")),d.forEach(function(t){f.push(i.getClass("abutted")+"-"+t)}),T(function(){!1!==i.options.addTargetClasses&&p(i.target,f,m),p(i.element,f,m)}),!0}});var I=function(){function t(t,e){var i=[],s=!0,n=!1,o=void 0;try{for(var r=t[Symbol.iterator](),a;!(s=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(t){n=!0,o=t}finally{try{!s&&r.return&&r.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return x.modules.push({position:function t(e){var i=e.top,s=e.left;if(this.options.shift){var n=this.options.shift;"function"==typeof this.options.shift&&(n=this.options.shift.call(this,{top:i,left:s}));var o=void 0,r=void 0;if("string"==typeof n){n=n.split(" "),n[1]=n[1]||n[0];var a=I(n,2);o=a[0],r=a[1],o=parseFloat(o,10),r=parseFloat(r,10)}else o=n.top,r=n.left;return i+=o,s+=r,{top:i,left:s}}}}),H}),function(i,s){"function"==typeof sumo.define&&sumo.define.amd?sumo.define("shepherd",["tether"],s):"object"==typeof t?e.exports=s(require("tether")):i.Shepherd=s(i.Tether)}(this,function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function s(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}function n(t,e){var i=void 0;return void 0!==t.matches?i=t.matches:void 0!==t.matchesSelector?i=t.matchesSelector:void 0!==t.msMatchesSelector?i=t.msMatchesSelector:void 0!==t.webkitMatchesSelector?i=t.webkitMatchesSelector:void 0!==t.mozMatchesSelector?i=t.mozMatchesSelector:void 0!==t.oMatchesSelector&&(i=t.oMatchesSelector),i.call(t,e)}function o(t,e){if(null===t||void 0===t)return t;if("object"==typeof t)return t;var i=t.split(" "),s=i.length,n=e.length;s>n&&(i[0]=i.slice(0,s-n+1).join(" "),i.splice(1,n));for(var o={},r=0;r<n;++r){o[e[r]]=i[r]}return o}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),a=function t(e,i,s){for(var n=!0;n;){var o=e,r=i,a=s;l=u=c=void 0,n=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,r);if(void 0!==l){if("value"in l)return l.value;var c=l.get;if(void 0===c)return;return c.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,i=r,s=a,n=!0}},l=t.Utils,c=l.Evented,u=l.addClass,h=l.extend,d=l.hasClass,m=l.removeClass,p=l.uniqueId,f=new c,g={"top right":"bottom left","top left":"bottom right","top center":"bottom center","middle right":"middle left","middle left":"middle right","middle center":"middle center","bottom left":"top right","bottom right":"top left","bottom center":"top center",top:"bottom center",left:"middle right",right:"middle left",bottom:"top center",center:"middle center",middle:"middle center"},v=function(l){function c(t,i){return e(this,c),a(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,t,i),this.tour=t,this.bindMethods(),this.setOptions(i),this}return i(c,l),r(c,[{key:"bindMethods",value:function t(){var e=this;["_show","show","hide","isOpen","cancel","complete","scrollTo","destroy"].map(function(t){e[t]=e[t].bind(e)})}},{key:"setOptions",value:function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e,this.destroy(),this.id=this.options.id||this.id||"step-"+p();var i=this.options.when;if(i)for(var s in i)if({}.hasOwnProperty.call(i,s)){var n=i[s];this.on(s,n,this)}this.options.buttons}},{key:"getTour",value:function t(){return this.tour}},{key:"bindAdvance",value:function t(){var e=this,i=o(this.options.advanceOn,["selector","event"]),s=i.event,r=i.selector,a=function t(i){e.isOpen()&&(void 0!==r?n(i.target,r)&&e.tour.next():e.el&&i.target===e.el&&e.tour.next())};document.body.addEventListener(s,a),this.on("destroy",function(){return document.body.removeEventListener(s,a)})}},{key:"getAttachTo",value:function t(){var e=o(this.options.attachTo,["element","on"])||{},i=e.element;if("string"==typeof i&&(e.element=document.querySelector(i),!e.element))throw new Error("The element for this Shepherd step was not found "+i);return e}},{key:"setupTether",value:function e(){if(void 0===t)throw new Error("Using the attachment feature of Shepherd requires the Tether library");var i=this.getAttachTo(),s=i.on in g?g[i.on]:g.right;void 0===i.element&&(i.element="viewport",s="middle center");var n={classPrefix:"sumome-shepherd",element:this.el,constraints:[{to:"window",pin:!0,attachment:"together"}],target:i.element,offset:i.offset||"0 0",attachment:s};this.tether&&this.tether.destroy(),this.tether=new t(h(n,this.options.tetherOptions))}},{key:"show",value:function t(){var e=this;if(void 0!==this.options.beforeShowPromise){var i=this.options.beforeShowPromise();if(void 0!==i)return i.then(function(){return e._show()})}this._show()}},{key:"_show",value:function t(){var e=this;this.trigger("before-show"),this.el||this.render(),u(this.el,"sumome-shepherd-open"),document.body.setAttribute("data-shepherd-step",this.id),this.setupTether(),this.options.scrollTo&&setTimeout(function(){e.scrollTo()}),this.trigger("show")}},{key:"hide",value:function t(){this.trigger("before-hide"),m(this.el,"sumome-shepherd-open"),document.body.removeAttribute("data-shepherd-step"),this.tether&&this.tether.destroy(),this.tether=null,this.trigger("hide")}},{key:"isOpen",value:function t(){return d(this.el,"sumome-shepherd-open")}},{key:"cancel",value:function t(){this.tour.cancel(),this.trigger("cancel")}},{key:"complete",value:function t(){this.tour.complete(),this.trigger("complete")}},{key:"scrollTo",value:function t(){var e=this.getAttachTo(),i=e.element;void 0!==this.options.scrollToHandler?this.options.scrollToHandler(i):void 0!==i&&i.scrollIntoView()}},{key:"destroy",value:function t(){void 0!==this.el&&(document.body.removeChild(this.el),delete this.el),this.tether&&this.tether.destroy(),this.tether=null,this.trigger("destroy")}},{key:"render",value:function t(){var e=this;void 0!==this.el&&this.destroy(),this.el=s("<div class='sumome-shepherd-step "+(this.options.classes||"")+"' data-id='"+this.id+"' "+(this.options.idAttribute?'id="'+this.options.idAttribute+'"':"")+"></div>");var i=document.createElement("div");i.className="sumome-shepherd-content",this.el.appendChild(i);var n=document.createElement("header");if(i.appendChild(n),void 0!==this.options.title&&(n.innerHTML+="<h3 class='sumome-shepherd-title'>"+this.options.title+"</h3>",this.el.className+=" shepherd-has-title"),this.options.showCancelLink){var o=s("<a href class='sumome-shepherd-cancel-link'>✕</a>");n.appendChild(o),this.el.className+=" sumome-shepherd-has-cancel-link",this.bindCancelLink(o)}void 0!==this.options.text&&function(){var t=s("<div class='sumome-shepherd-text'></div>"),n=e.options.text;"function"==typeof n&&(n=n.call(e,t)),n instanceof HTMLElement?t.appendChild(n):("string"==typeof n&&(n=[n]),n.map(function(e){t.innerHTML+="<p>"+e+"</p>"})),i.appendChild(t)}();var r=document.createElement("footer");this.options.buttons&&function(){var t=s("<ul class='sumome-shepherd-buttons'></ul>");e.options.buttons.map(function(i){var n=s("<li><a class='sumome-shepherd-button "+(i.classes||"")+"'>"+i.text+"</a>");t.appendChild(n),e.bindButtonEvents(i,n.querySelector("a"))}),r.appendChild(t)}(),i.appendChild(r),document.body.appendChild(this.el),this.setupTether(),this.options.advanceOn&&this.bindAdvance()}},{key:"bindCancelLink",value:function t(e){var i=this;e.addEventListener("click",function(t){t.preventDefault(),i.tour.trigger("close")})}},{key:"bindButtonEvents",value:function t(e,i){var s=this;e.events=e.events||{},void 0!==e.action&&(e.events.click=e.action);for(var n in e.events)if({}.hasOwnProperty.call(e.events,n)){var o=e.events[n];"string"==typeof o&&function(){var t=o;o=function(){return s.tour.show(t)}}(),i.addEventListener(n,o)}this.on("destroy",function(){for(var t in e.events)if({}.hasOwnProperty.call(e.events,t)){var s=e.events[t];i.removeEventListener(t,s)}})}}]),c}(c),b=function(t){function s(){var t=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return e(this,s),a(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,i),this.bindMethods(),this.options=i,this.steps=this.options.steps||[],["complete","cancel","close","hide","start","show","active","inactive"].map(function(e){!function(e){
t.on(e,function(i){i=i||{},i.tour=t,f.trigger(e,i)})}(e)}),this}return i(s,t),r(s,[{key:"bindMethods",value:function t(){var e=this;["next","back","cancel","complete","hide"].map(function(t){e[t]=e[t].bind(e)})}},{key:"addStep",value:function t(e,i){return void 0===i&&(i=e),i instanceof v?i.tour=this:("string"!=typeof e&&"number"!=typeof e||(i.id=e.toString()),i=h({},this.options.defaults,i),i=new v(this,i)),this.steps.push(i),this}},{key:"getById",value:function t(e){for(var i=0;i<this.steps.length;++i){var s=this.steps[i];if(s.id===e)return s}}},{key:"getCurrentStep",value:function t(){return this.currentStep}},{key:"next",value:function t(){var e=this.steps.indexOf(this.currentStep);e===this.steps.length-1?(this.hide(e),this.trigger("complete"),this.done()):this.show(e+1)}},{key:"back",value:function t(){var e=this.steps.indexOf(this.currentStep);this.show(e-1)}},{key:"cancel",value:function t(){void 0!==this.currentStep&&this.currentStep.hide(),this.trigger("cancel"),this.done()}},{key:"complete",value:function t(){void 0!==this.currentStep&&this.currentStep.hide(),this.trigger("complete"),this.done()}},{key:"hide",value:function t(){void 0!==this.currentStep&&this.currentStep.hide(),this.trigger("hide"),this.done()}},{key:"done",value:function t(){f.activeTour=null,m(document.body,"sumome-shepherd-active"),this.trigger("inactive",{tour:this})}},{key:"show",value:function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];this.currentStep?this.currentStep.hide():(u(document.body,"sumome-shepherd-active"),this.trigger("active",{tour:this})),f.activeTour=this;var i=void 0;(i="string"==typeof e?this.getById(e):this.steps[e])&&(this.trigger("show",{step:i,previous:this.currentStep}),this.currentStep=i,i.show())}},{key:"start",value:function t(){this.trigger("start"),this.currentStep=null,this.next()}}]),s}(c);return h(f,{Tour:b,Step:v,Evented:c}),f}),sumo.define("countries",[],function(){return["Afghanistan","Åland Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua And Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia, Plurinational State Of","Bonaire, Sint Eustatius And Saba","Bosnia And Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (keeling) Islands","Colombia","Comoros","Congo","Congo, The Democratic Republic Of The","Cook Islands","Costa Rica","Côte D'ivoire","Croatia","Cuba","Curaçao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands (malvinas)","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-bissau","Guyana","Haiti","Heard Island And Mcdonald Islands","Holy See (vatican City State)","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran, Islamic Republic Of","Iraq","Ireland","Isle Of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Democratic People's Republic Of","Korea, Republic Of","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao","Macedonia, The Former Yugoslav Republic Of","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia, Federated States Of","Moldova, Republic Of","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestine, State Of","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Réunion","Romania","Russian Federation","Rwanda","Saint Barthélemy","Saint Helena, Ascension And Tristan Da Cunha","Saint Kitts And Nevis","Saint Lucia","Saint Martin (french Part)","Saint Pierre And Miquelon","Saint Vincent And The Grenadines","Samoa","San Marino","Sao Tome And Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten (dutch Part)","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia And The South Sandwich Islands","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Svalbard And Jan Mayen","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan, Province Of China","Tajikistan","Tanzania, United Republic Of","Thailand","Timor-leste","Togo","Tokelau","Tonga","Trinidad And Tobago","Tunisia","Turkey","Turkmenistan","Turks And Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Venezuela, Bolivarian Republic Of","Viet Nam","Virgin Islands, British","Virgin Islands, U.s.","Wallis And Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"]}),sumo.define("plugins/text!lib/sumome/templates/container.handlebars",[],function(){return'<div class="sumome-container-header">\n  <span class="sumome-container-title"></span>\n</div>\n<div class="sumome-container-container"></div>\n'}),sumo.define("plugins/text!lib/sumome/templates/slide_container.handlebars",[],function(){return'<div class="sumome-settings-header">\n  <span class="sumome-settings-left"><i class="sumome-arrow-back"></i>Back</span>\n  <span class="sumome-settings-title"></span>\n  <span class="sumome-settings-right"><button class="sumome-button sumome-success sumome-tiny">Save</button></span>\n</div>\n<div class="sumome-settings-sidebar"></div>\n<div class="sumome-settings-container">\n</div>\n'}),sumo.define("plugins/text!lib/sumome/templates/wizard_container.handlebars",[],function(){return'<div class="sumome-settings-header">\n  <span class="sumome-settings-left"><i class="sumome-arrow-back"></i>Back</span>\n  <span class="sumome-settings-title"></span>\n</div>\n<div class="sumome-settings-sidebar"></div>\n<div class="sumome-settings-container">\n</div>\n<div class="sumome-settings-footer">\n  <button class="sumome-button sumome-primary sumome-tiny sumome-wizard-save">Continue</button>\n</div>'}),sumo.define("plugins/text!lib/sumome/templates/tab_container.handlebars",[],function(){return'<div class="sumome-tab-container-iconbar"></div>\n<div class="sumome-tab-container-header">\n  <span class="sumome-tab-container-left"><i class="sumome-arrow-back"></i>Back</span>\n  <span class="sumome-tab-container-title"></span>\n</div>\n<div class="sumome-tab-container-container">\n</div>\n<div class="sumome-tab-container-footer">\n  <span class="sumome-tab-container-right"><button class="sumome-button sumome-success sumome-tiny">Save</button></span>\n</div>\n'}),sumo.define("plugins/text!lib/sumome/templates/mdi_container.handlebars",[],function(){return'<ul class="sumome-xdi-tab-container">\n</ul>\n<div class="sumome-xdi-container-container">\n\n</div>'}),function(t){"function"==typeof e?e.exports=t():"function"==typeof sumo.define&&sumo.define.amd?sumo.define("nprogress",t):this.NProgress=t()}(function(){function t(t,e,i){return t<e?e:t>i?i:t}function e(t){return 100*(-1+t)}function i(t,i,s){var n;return n="translate3d"===c.positionUsing?{transform:"translate3d("+e(t)+"%,0,0)"}:"translate"===c.positionUsing?{transform:"translate("+e(t)+"%,0)"}:{"margin-left":e(t)+"%"},n.transition="all "+i+"ms "+s,n}function s(t,e){return("string"==typeof t?t:r(t)).indexOf(" "+e+" ")>=0}function n(t,e){var i=r(t),n=i+e;s(i,e)||(t.className=n.substring(1))}function o(t,e){var i=r(t),n;s(t,e)&&(n=i.replace(" "+e+" "," "),t.className=n.substring(1,n.length-1))}function r(t){return(" "+(t.className||"")+" ").replace(/\s+/gi," ")}function a(t){t&&t.parentNode&&t.parentNode.removeChild(t)}var l={};l.version="0.1.3";var c=l.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};l.configure=function(t){var e,i;for(e in t)void 0!==(i=t[e])&&t.hasOwnProperty(e)&&(c[e]=i);return this},l.status=null,l.set=function(e){var s=l.isStarted();0!=e&&(e=t(e,c.minimum,1)),l.status=1===e||0===e?null:e;var n=l.render(!s),o=n.querySelector(c.barSelector),r=c.speed,a=c.easing;return n.offsetWidth,u(function(t){""===c.positionUsing&&(c.positionUsing=l.getPositioningCSS()),h(o,i(e,r,a)),1===e||0===e?(h(n,{transition:"none",opacity:1}),n.offsetWidth,setTimeout(function(){h(n,{transition:"all "+r+"ms linear",opacity:0}),setTimeout(function(){l.remove(),t()},r)},r)):setTimeout(t,r)}),this},l.isStarted=function(){return"number"==typeof l.status},l.start=function(){l.status||l.set(c.minimum);var t=function(){setTimeout(function(){l.status&&(l.trickle(),t())},c.trickleSpeed)};return c.trickle&&t(),this},l.done=function(t){return t||l.status?l.inc(.3+.5*Math.random()).set(1):this},l.error=function(t){return t||l.status?l.dec(.3+.5*Math.random()).set(0):this},l.inc=function(e){var i=l.status;return i?("number"!=typeof e&&(e=(1-i)*t(Math.random()*i,.1,.95)),i=t(i+e,0,.994),l.set(i)):l.start()},l.dec=function(e){var i=l.status;return"number"!=typeof e&&(e=(1-i)*t(Math.random()*i,.1,.95)),i=t(i-e,0,.994),l.set(i)},l.trickle=function(){return l.inc(Math.random()*c.trickleRate)},function(){var t=0,e=0;l.promise=function(i){return i&&"resolved"!=i.state()?(0==e&&l.start(),t++,e++,i.always(function(){e--,0==e?(t=0,l.done()):l.set((t-e)/t)}),this):this}}(),l.render=function(t){if(l.isRendered())return document.getElementById("sumome-nprogress");n(document.documentElement,"nprogress-busy");var i=document.createElement("div");i.id="sumome-nprogress",i.innerHTML=c.template;var s=i.querySelector(c.barSelector),o=t?"-100":e(l.status||0),r;h(s,{transition:"all 0 linear",transform:"translate3d("+o+"%,0,0)"}),c.showSpinner||(r=i.querySelector(c.spinnerSelector))&&a(r);var u=document.getElementsByClassName("sumome-modal");return u&&u.length?u[0].appendChild(i):document.body.appendChild(i),i},l.remove=function(){o(document.documentElement,"nprogress-busy");var t=document.getElementById("sumome-nprogress");t&&a(t)},l.isRendered=function(){return!!document.getElementById("sumome-nprogress")},l.getPositioningCSS=function(){var t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"};var u=function(){function t(){var i=e.shift();i&&i(t)}var e=[];return function(i){e.push(i),1==e.length&&t()}}(),h=function(){function t(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})}function e(t){var e=document.body.style;if(t in e)return t;for(var i=n.length,s=t.charAt(0).toUpperCase()+t.slice(1),o;i--;)if((o=n[i]+s)in e)return o;return t}function i(i){return i=t(i),o[i]||(o[i]=e(i))}function s(t,e,s){e=i(e),t.style[e]=s}var n=["Webkit","O","Moz","ms"],o={};return function(t,e){var i=arguments,n,o;if(2==i.length)for(n in e)void 0!==(o=e[n])&&e.hasOwnProperty(n)&&s(t,n,o);else s(t,i[1],i[2])}}();return l}),function(){var i;i=function(t){var e,i;return e=!1,t(function(){var s;return s=(document.body||document.documentElement).style,e=void 0!==s.animation||void 0!==s.WebkitAnimation||void 0!==s.MozAnimation||void 0!==s.MsAnimation||void 0!==s.OAnimation,t(window).bind("resize.vex",function(t){if(!t||"resize"!=t.type||t.target==window)return i.resize()}),t(window).bind("keyup.vex",function(t){if(27===t.keyCode)return i.closeByEscape()})}),i={globalID:1,animationEndEvent:"animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",baseClassNames:{vex:"sumome-vex",content:"sumome-vex-content",overlay:"sumome-vex-overlay",close:"sumome-vex-close",closing:"sumome-vex-closing",open:"sumome-vex-open"},defaultOptions:{content:"",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",css:{},overlayClassName:"",overlayCSS:{},contentClassName:"",contentCSS:{},closeClassName:"",openClassName:"",closeCSS:{},allowBackgroundScrolling:!1},open:function(e){return e=t.extend({},i.defaultOptions,e),e.id=i.globalID,i.globalID+=1,e.$vex=t("<div>").addClass(i.baseClassNames.vex).addClass(e.className).css(e.css).data({vex:e}),e.openClassName&&e.$vex.addClass(e.openClassName),e.allowBackgroundScrolling||i.setupHTMLClassName(e.$vex),e.$vexOverlay=t("<div>").addClass(i.baseClassNames.overlay).addClass(e.overlayClassName).css(e.overlayCSS).data({vex:e}),e.overlayClosesOnClick&&e.$vexOverlay.bind("click.vex",function(e){if(e.target===this)return i.close(t(this).data().vex.id)}),e.$vex.append(e.$vexOverlay),e.$vexContent=t("<div>").addClass(i.baseClassNames.content).addClass(e.contentClassName).css(e.contentCSS).append(e.content).data({vex:e}),e.$vexContent.find("link").bind("load.vex",function(t){return i.resize()}),e.$vexContent.bind("resize.vex",function(t){return i.resize()}),e.$vex.append(e.$vexContent),e.customCloseButton?e.showCloseButton&&(e.$closeButton=e.$vexContent.find("."+e.closeClassName).eq(0).data({vex:e}).bind("click.vex",function(){return i.close(t(this).data().vex.id)})):e.showCloseButton&&(e.$closeButton=t("<div>").addClass(i.baseClassNames.close).addClass(e.closeClassName).css(e.closeCSS).data({vex:e}).bind("click.vex",function(){return i.close(t(this).data().vex.id)}),e.$vexContent.append(e.$closeButton)),t(e.appendLocation).append(e.$vex),e.afterOpen&&e.afterOpen(e.$vexContent,e),setTimeout(function(){return e.$vexContent.trigger("vexOpen",e)},0),e.$vexContent},getAllVexes:function(){return t("."+i.baseClassNames.vex+':not(".'+i.baseClassNames.closing+'") .'+i.baseClassNames.content)},getVexByID:function(e){return i.getAllVexes().filter(function(){return t(this).data().vex.id===e})},close:function(t){var e;if(!t){if(e=i.getAllVexes().last(),!e.length)return!1;t=e.data().vex.id}return i.closeByID(t)},closeAll:function(){var e;return e=i.getAllVexes().map(function(){return t(this).data().vex.id}).toArray(),!(null==e||!e.length)&&(t.each(e.reverse(),function(t,e){return i.closeByID(e)}),!0)},closeByID:function(s){var n,o,r,a,l;if(o=i.getVexByID(s),o.length)return n=o.data().vex.$vex,l=t.extend({},o.data().vex),r=function(){if(l.beforeClose)return l.beforeClose(o,l)},a=function(){if(o.trigger("vexClose",l),n.remove(),l.afterClose)return l.afterClose(o,l)},e?(r(),n.unbind(i.animationEndEvent).bind(i.animationEndEvent,function(){return a()}).addClass(i.baseClassNames.closing)):(r(),a()),!0},resizeByID:function(e){var s,n,o,r,a;if(n=i.getVexByID(e),n.length)return s=n.data().vex.$vex,a=t.extend({},n.data().vex),n.trigger("vexResize",a),!0},resize:function(){var e,s,n;return n=i.getAllVexes().map(function(){return t(this).data().vex.id}).toArray(),!(null==n||!n.length)&&(s=Math.max.apply(Math,n),e=i.getVexByID(s),i.resizeByID(s))},closeByEscape:function(){var e,s,n;return n=i.getAllVexes().map(function(){return t(this).data().vex.id}).toArray(),!(null==n||!n.length)&&(s=Math.max.apply(Math,n),e=i.getVexByID(s),!0===e.data().vex.escapeButtonCloses&&i.closeByID(s))},setupHTMLClassName:function(e){return e.bind("vexOpen.vex",function(){return t("html").addClass(i.baseClassNames.open)}).bind("vexClose.vex",function(){if(!i.getAllVexes().length)return t("html").removeClass(i.baseClassNames.open)})},hideLoading:function(){return t(".vex-loading-spinner").remove()},showLoading:function(){return i.hideLoading(),t("body").append('<div class="vex-loading-spinner '+i.defaultOptions.className+'"></div>')}}},"function"==typeof sumo.define&&sumo.define.amd?sumo.define("vex",["jquery"],i):"object"==typeof t?e.exports=i(require("jquery")):window.vex=i(jQuery)}.call(this),sumo.define("jquery.drags",["jquery"],function(t){t.fn.drags=function(e){if(e=t.extend({handle:"",cursor:"move"},e),""===e.handle)var i=this;else var i=this.find(e.handle);return i.css("cursor",e.cursor).on("mousedown.drags",function(i){if(t(this).trigger("dragstart"),""===e.handle)var s=t(this).addClass("draggable");else var s=t(this).addClass("active-handle").parent().addClass("draggable");var n=s.css("z-index"),o=s.outerHeight(),r=s.outerWidth(),a=s.offset().top+o-i.pageY,l=s.offset().left+r-i.pageX;s.css("z-index",10000001).parents().on("mousemove.drags",function(e){var i=e.pageY+a-o,s=e.pageX+l-r;t(".draggable").trigger("dragmove",{top:i,left:s}),t(".draggable").offset({top:i,left:s}).on("mouseup",function(){t(this).removeClass("draggable").css("z-index",n)})}),i.preventDefault()}).on("mouseup.drags",function(){if(""===e.handle)var i=t(this).removeClass("draggable");else var i=t(this).removeClass("active-handle").parent().removeClass("draggable");i.parents().unbind("mousemove.drags"),t(this).trigger("dragend")})}}),sumo.define("jquery.resizes",["jquery"],function(t){t.fn.resizes=function(e){if(e=t.extend({handle:"",cursor:"se-resize",body:"",min_width:200,min_height:100,onResized:null},e),""===e.handle)var i=this;else var i=this.find(e.handle),s=this.find(e.body);return i.css("cursor",e.cursor).on("mousedown",function(i){if(""===e.handle)var n=t(this);else var n=t(this).parent();var o=n.css("z-index"),r=n.outerHeight(),a=n.outerWidth(),l=i.pageY,c=i.pageX,u=s.outerWidth(),h=s.outerHeight();n.css("z-index",10000001).parents().on("mousemove.jqueryResize",function(t){var i=!1;a+t.pageX-c>=e.min_width&&(i=!0,n.width(a+t.pageX-c)),r+t.pageY-l>=e.min_height&&(i=!0,n.height(r+t.pageY-l),s.height(h+t.pageY-l)),i&&(e.onResized?e.onResized():s.children().trigger("resize"))}),t(document).on("mouseup",function(){n.parents().off(".jqueryResize")}),i.preventDefault()})}}),sumo.define("jquery.ui.position",["jquery"],function(t){function e(t,e,i){return[parseInt(t[0],10)*(d.test(t[0])?e/100:1),parseInt(t[1],10)*(d.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var n,o=Math.max,r=Math.abs,a=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,h=/^\w+/,d=/%$/,m=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,s=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),e=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=s[0].clientWidth),s.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:n?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return m.apply(this,arguments);n=t.extend({},n);var d,p,f,g,v,b,y=t(n.of),w=t.position.getWithinInfo(n.within),x=t.position.getScrollInfo(w),_=(n.collision||"flip").split(" "),k={};return b=s(y),y[0].preventDefault&&(n.at="left top"),p=b.width,f=b.height,g=b.offset,v=t.extend({},g),t.each(["my","at"],function(){var t=(n[this]||"").split(" "),e,i;1===t.length&&(t=l.test(t[0])?t.concat(["center"]):c.test(t[0])?["center"].concat(t):["center","center"]),t[0]=l.test(t[0])?t[0]:"center",t[1]=c.test(t[1])?t[1]:"center",e=u.exec(t[0]),i=u.exec(t[1]),k[this]=[e?e[0]:0,i?i[0]:0],n[this]=[h.exec(t[0])[0],h.exec(t[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===n.at[0]?v.left+=p:"center"===n.at[0]&&(v.left+=p/2),"bottom"===n.at[1]?v.top+=f:"center"===n.at[1]&&(v.top+=f/2),d=e(k.at,p,f),v.left+=d[0],v.top+=d[1],this.each(function(){var s,l,c=t(this),u=c.outerWidth(),h=c.outerHeight(),m=i(this,"marginLeft"),b=i(this,"marginTop"),C=u+m+i(this,"marginRight")+x.width,S=h+b+i(this,"marginBottom")+x.height,T=t.extend({},v),E=e(k.my,c.outerWidth(),c.outerHeight());"right"===n.my[0]?T.left-=u:"center"===n.my[0]&&(T.left-=u/2),"bottom"===n.my[1]?T.top-=h:"center"===n.my[1]&&(T.top-=h/2),T.left+=E[0],T.top+=E[1],t.support.offsetFractions||(T.left=a(T.left),T.top=a(T.top)),s={marginLeft:m,marginTop:b},t.each(["left","top"],function(e,i){t.ui.position[_[e]]&&t.ui.position[_[e]][i](T,{targetWidth:p,targetHeight:f,elemWidth:u,elemHeight:h,collisionPosition:s,collisionWidth:C,collisionHeight:S,offset:[d[0]+E[0],d[1]+E[1]],my:n.my,at:n.at,within:w,elem:c})}),n.using&&(l=function(t){var e=g.left-T.left,i=e+p-u,s=g.top-T.top,a=s+f-h,l={target:{element:y,left:g.left,top:g.top,width:p,height:f},element:{element:c,left:T.left,top:T.top,width:u,height:h},horizontal:i<0?"left":e>0?"right":"center",vertical:a<0?"top":s>0?"bottom":"middle"};p<u&&r(e+i)<p&&(l.horizontal="center"),f<h&&r(s+a)<f&&(l.vertical="middle"),o(r(e),r(i))>o(r(s),r(a))?l.important="horizontal":l.important="vertical",n.using.call(this,t,l)}),c.offset(t.extend(T,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i=e.within,s=i.isWindow?i.scrollLeft:i.offset.left,n=i.width,r=t.left-e.collisionPosition.marginLeft,a=s-r,l=r+e.collisionWidth-n-s,c;e.collisionWidth>n?a>0&&l<=0?(c=t.left+a+e.collisionWidth-n-s,t.left+=a-c):t.left=l>0&&a<=0?s:a>l?s+n-e.collisionWidth:s:a>0?t.left+=a:l>0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i=e.within,s=i.isWindow?i.scrollTop:i.offset.top,n=e.within.height,r=t.top-e.collisionPosition.marginTop,a=s-r,l=r+e.collisionHeight-n-s,c;e.collisionHeight>n?a>0&&l<=0?(c=t.top+a+e.collisionHeight-n-s,t.top+=a-c):t.top=l>0&&a<=0?s:a>l?s+n-e.collisionHeight:s:a>0?t.top+=a:l>0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i=e.within,s=i.offset.left+i.scrollLeft,n=i.width,o=i.isWindow?i.scrollLeft:i.offset.left,a=t.left-e.collisionPosition.marginLeft,l=a-o,c=a+e.collisionWidth-n-o,u="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,d=-2*e.offset[0],m,p;l<0?((m=t.left+u+h+d+e.collisionWidth-n-s)<0||m<r(l))&&(t.left+=u+h+d):c>0&&((p=t.left-e.collisionPosition.marginLeft+u+h+d-o)>0||r(p)<c)&&(t.left+=u+h+d)},top:function(t,e){var i=e.within,s=i.offset.top+i.scrollTop,n=i.height,o=i.isWindow?i.scrollTop:i.offset.top,a=t.top-e.collisionPosition.marginTop,l=a-o,c=a+e.collisionHeight-n-o,u="top"===e.my[1],h=u?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1],p,f;l<0?(f=t.top+h+d+m+e.collisionHeight-n-s,t.top+h+d+m>l&&(f<0||f<r(l))&&(t.top+=h+d+m)):c>0&&(p=t.top-e.collisionPosition.marginTop+h+d+m-o,t.top+h+d+m>c&&(p>0||r(p)<c)&&(t.top+=h+d+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,o,r=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)e.style[o]=s[o];e.appendChild(a),i=r||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",n=t(a).offset().left,t.support.offsetFractions=n>10&&n<11,e.innerHTML="",i.removeChild(e)}()}),sumo.define("jquery.modal",["jquery","jquery.drags","jquery.resizes","jquery.ui.position"],function(t){t.fn.extend({closeModal:function(e,i){var s="fast",n=i?t(this).closest(".sumome-launcher-container-wrapper"):t(this).closest(".sumome-modal");n.fadeOut("fast",t.proxy(function(){this.triggerHandler("close.sumome-modal"),n.remove(),e&&e()},this))},setModalTitle:function(e){t(this).closest(".sumome-modal").find(".sumome-modal-header").html(e)},resizeModal:function(e){var i=t(this).closest("#sumome-modal-mask"),s=t(document.body);e&&(s=i.find(".sumome-modal"));var n=s.find(".sumome-modal-body"),o=s.find(".sumome-modal-header"),r=s.find(".sumome-modal-notice"),a=s.find(".sumome-launcher-go-pro-header"),l=s.find(".sumome-control-manage-mode"),c=s.find(".sumome-launcher-error-message");n.parent().is(".sumome-auto")&&(n.css("height",""),s.css("height","")),i.is(":visible")&&s.show();var u=s.is(":visible");u||s.show();var h=document.documentElement.clientHeight||0,d=o.is(":visible")?o.innerHeight():0,m=l.is(":visible")?l.innerHeight():0,p=r.is(":visible")?r.innerHeight():0,f=a.is(":visible")?a.innerHeight():0,g=c.is(":visible")?c.innerHeight():0,v=h-d-f-p-m-g;e&&(v=n.parent().innerHeight()-d-p),u||s.hide(),v>0&&n.height(v),n.children().trigger("resize")},showModal:function(e){var i={className:"sumome-medium",element:window,title:"",appendTo:null,autoFocus:!0,closeButton:!0,my:"center center",at:"center center",handleTab:!0,resizable:!1,height:null,width:null,isLegacyModal:!1};e=t.extend({},i,e);var s=e.isManageMode?0:100,n=t('<div class="sumome-launcher-container-wrapper"></div>'),o=t('<div id="sumome-modal-mask"></div>'),r=t('<div class="sumome-modal-header"></div>'),a=t('<p class="sumome-modal-notice"></p>'),l=t('<div class="sumome-modal-body"></div>'),c=t('<div class="sumome-modal-resizer"></div>'),u=t('<div class="sumome-modal"></div>'),h=t('<a href="javascript:void(0)" class="sumome-modal-close" title="Close"></a>'),d=t(".sumome-launcher-container-wrapper");d.length&&d.remove(),e.isLegacyModal||o.css("position","initial"),o.appendTo(n),u.hide(),n.hide(),e.isManageMode||r.append(e.title);var m=t.proxy(function(){e.confirmCloseCallback?e.confirmCloseCallback()&&t(this).closeModal(null,e.isLegacyModal):t(this).closeModal(null,e.isLegacyModal)},this);e.closeButton&&(r.prepend(h),h.on("click",m)),e.isManageMode&&(e.title&&-1===e.title.indexOf("Sumo")?(r.prepend('<div class="sumome-modal-breadcrumbs"><a href="javascript:void(0)" class="sumome-home-button"><span class="sumome-icon-home"></span> Home</a>&nbsp;</div>'),r.find(".sumome-modal-breadcrumbs").append('<span class="sumo-fa sumo-fa-chevron-right sumome-modal-chevron"></span>'),r.find(".sumome-modal-breadcrumbs").append(e.title),r.find(".sumome-home-button").on("click",m)):r.addClass("sumome-modal-header-launcher"),o.addClass("sumome-modal-mask-inline"),u.addClass("sumome-modal-inline")),e.className&&u.addClass(e.className),e.isLegacyModal&&(e.height&&u.height(e.height),e.width&&u.width(e.width),e.resizer&&!e.isManageMode?u.append(e.resizer):e.resizable&&!e.isManageMode&&u.append(c),u.append(r)),u.append(a),u.append(l),l.append(t(this));var p=e.appendTo?document.getElementById(e.appendTo.id):null;p?p.appendChild(n.get(0)):n.appendTo(t(document.body)),u.appendTo(o),n.fadeIn(s),this.triggerHandler("beforeOpen.sumome-modal"),u.animate({opacity:0},s,t.proxy(function(){e.isLegacyModal&&(e.isManageMode||u.drags({handle:r}),e.resizable&&u.resizes({handle:c,body:l,onResized:t.proxy(function(){t(this).resizeModal(e.isLegacyModal)},this)}),t(this).resizeModal(e.isLegacyModal)),u.show(e.isLegacyModal),t(this).resizeModal(e.isLegacyModal),e.autoFocus?u.animate({opacity:1},s,t.proxy(function(){t(u.find("a[href], button, input, select, textarea").filter(":visible").filter(":enabled").toArray().sort(function(t,e){return(t.tabIndex>0?t.tabIndex:1e3)-(e.tabIndex>0?e.tabIndex:1e3)})).eq(0).focus(),this.triggerHandler("open.sumome-modal")},this)):u.animate({opacity:1},s,t.proxy(function(){this.triggerHandler("open.sumome-modal")},this))},this)),e.handleTab&&(t(u).on("keydown",t.proxy(function(e){if(9==e.keyCode){var i=t(document.activeElement);e.preventDefault(),e.stopPropagation();var s=t(u.find("a[href], button, input, select, textarea").filter(":visible").filter(":enabled").toArray().sort(function(t,e){return(t.tabIndex>0?t.tabIndex:1e3)-(e.tabIndex>0?e.tabIndex:1e3)}));s.eq((s.index(i)+1)%s.length).focus()}else if(13==e.keyCode){var i=t(document.activeElement);i.is("input")&&(e.preventDefault(),e.stopPropagation(),this.triggerHandler("enterPressed.sumome-modal"))}},this)),t(u).on("keyup",t.proxy(function(i){27==i.keyCode&&(i.preventDefault(),i.stopPropagation(),e.confirmCloseCallback?e.confirmCloseCallback()&&t(this).closeModal(null,e.isManageMode):t(this).closeModal(null,e.isManageMode))},this)))}})}),sumo.define("jquery.sortable",["jquery"],function(t){!function(t,e,i,s){function n(t,e){return Math.max(0,t[0]-e[0],e[0]-t[1])+Math.max(0,t[2]-e[1],e[1]-t[3])}function o(e,i,s,n){var o=e.length,r=n?"offset":"position";for(s=s||0;o--;){var a=e[o].el?e[o].el:t(e[o]),l=a[r]();l.left+=parseInt(a.css("margin-left"),10),l.top+=parseInt(a.css("margin-top"),10),i[o]=[l.left-s,l.left+a.outerWidth()+s,l.top-s,l.top+a.outerHeight()+s]}}function r(t,e){var i=e.offset();return{left:t.left-i.left,top:t.top-i.top}}function a(t,e,i){e=[e.left,e.top],i=i&&[i.left,i.top];for(var s,o=t.length,r=[];o--;)s=t[o],r[o]=[o,n(s,e),i&&n(s,i)];return r=r.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]})}function l(e){this.options=t.extend({},d,e),this.containers=[],this.options.rootGroup||(this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=s))}function c(e,i){this.el=e,this.options=t.extend({},h,i),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var s=this.rootGroup.options.itemPath;this.target=s?this.el.find(s):this.el,this.target.on(u.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var u,h={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},d={afterMove:function(t,e,i){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"sumome-dragging",draggedClass:"sumome-dragged",placeholderClass:"sumome-placeholder",isValidTarget:function(t,e){return!0},onCancel:function(t,e,i,s){},onDrag:function(t,e,i,s){t.css(e)},onDragStart:function(e,i,s,n){e.css({height:e.outerHeight(),width:e.outerWidth()}),e.addClass(i.group.options.draggedClass),t("body").addClass(i.group.options.bodyClass)},onDrop:function(e,i,s,n){e.removeClass(i.group.options.draggedClass).removeAttr("style"),t("body").removeClass(i.group.options.bodyClass)},onMousedown:function(t,e,i){if(!i.target.nodeName.match(/^(input|select|textarea)$/i))return i.preventDefault(),!0},placeholder:'<li class="sumome-placeholder"/>',pullPlaceholder:!0,serialize:function(e,i,s){var n=t.extend({},e.data());return s?[i]:(i[0]&&(n.children=i),delete n.subContainers,delete n.sortable,n)},tolerance:0},m={},p=0,f={left:0,top:0,bottom:0,right:0},u={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"
},g="subContainers";l.get=function(t){return m[t.group]||(t.group===s&&(t.group=p++),m[t.group]=new l(t)),m[t.group]},l.prototype={dragInit:function(e,i){this.$document=t(i.el[0].ownerDocument),this.item=t(e.target).closest(this.options.itemSelector),this.itemContainer=i,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,d.onMousedown,e)&&(this.setPointer(e),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0)},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,d.onDragStart,t),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,r(this.pointer,this.item.offsetParent()),d.onDrag,t);var e=t.pageX||t.originalEvent.pageX,i=t.pageY||t.originalEvent.pageY,n=this.sameResultBox,o=this.options.tolerance;(!n||n.top-o>i||n.bottom+o<i||n.left-o>e||n.right+o<e)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=s))},drop:function(t){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,d.onCancel,t),this.options.onDrop(this.item,this.getContainer(this.item),d.onDrop,t),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=s,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var i=a(this.getContainerDimensions(),t,e),n=i.length;n--;){var o=i[n][0];if(!i[n][1]||this.options.pullPlaceholder){var l=this.containers[o];if(!l.disabled){if(!this.$getOffsetParent()){var c=l.getItemOffsetParent();t=r(t,c),e=r(e,c)}if(l.searchValidTarget(t,e))return!0}}}this.sameResultBox&&(this.sameResultBox=s)},movePlaceholder:function(t,e,i,s){var n=this.lastAppendedItem;!s&&n&&n[0]===e[0]||(e[i](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=s,this.options.afterMove(this.placeholder,t,e))},getContainerDimensions:function(){return this.containerDimensions||o(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===s){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e=this.getPointer(t);if(this.$getOffsetParent()){var i=r(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=i}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(t){var e=this.getPointer(t);return Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(t){return{left:t.pageX||t.originalEvent.pageX,top:t.pageY||t.originalEvent.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){t.delayMet=!0},this.options.delay))},scroll:function(t){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e){var i=this,s=["drag","drop","scroll"];t.each(s,function(t,s){i.$document[e](u[s],i[s+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=s},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);for(var e=this.containers.length;e--;)this.containers[e].traverse(t)},_clearDimensions:function(){this.containerDimensions=s},_destroy:function(){m[this.options.group]=s}},c.prototype={dragInit:function(t){var e=this.rootGroup;!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)&&e.dragInit(t,this)},isValidDrag:function(t){return 1==t.which||"touchstart"==t.type&&1==t.originalEvent.touches.length},searchValidTarget:function(t,e){var i=a(this.getItemDimensions(),t,e),s=i.length,n=this.rootGroup,o=!n.options.isValidTarget||n.options.isValidTarget(n.item,this);if(!s&&o)return n.movePlaceholder(this,this.target,"append"),!0;for(;s--;){var r=i[s][0];if(!i[s][1]&&this.hasChildGroup(r)){if(this.getContainerGroup(r).searchValidTarget(t,e))return!0}else if(o)return this.movePlaceholder(r,t),!0}},movePlaceholder:function(e,i){var s=t(this.items[e]),n=this.itemDimensions[e],o="after",r=s.outerWidth(),a=s.outerHeight(),l=s.offset(),c={left:l.left,right:l.left+r,top:l.top,bottom:l.top+a};if(this.options.vertical){var u=(n[2]+n[3])/2;i.top<=u?(o="before",c.bottom-=a/2):c.top+=a/2}else{var h=(n[0]+n[1])/2;i.left<=h?(o="before",c.right-=r/2):c.left+=r/2}this.hasChildGroup(e)&&(c=f),this.rootGroup.movePlaceholder(this,s,o,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),o(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;return t="relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var n=t.data(this.items[e],"subContainers");if(n===s){var o=this.$getChildren(this.items[e],"container");if(n=!1,o[0]){var r=t.extend({},this.options,{rootGroup:this.rootGroup,group:p++});n=o[i](r).data(i).group}t.data(this.items[e],"subContainers",n)}return n},$getChildren:function(e,i){var s=this.rootGroup.options,n=s[i+"Path"],o=s[i+"Selector"];return e=t(e),n&&(e=e.find(n)),e.children(o)},_serialize:function(e,i){var s=this,n=i?"item":"container",o=this.$getChildren(e,n).not(this.options.exclude).map(function(){return s._serialize(t(this),!i)}).get();return this.rootGroup.options.serialize(e,o,i)},traverse:function(e){t.each(this.items||[],function(i){var s=t.data(this,"subContainers");s&&s.traverse(e)}),e(this)},_clearDimensions:function(){this.itemDimensions=s},_destroy:function(){var e=this;this.target.off(u.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=t.grep(this.group.containers,function(t){return t!=e})),t.each(this.items||[],function(){t.removeData(this,"subContainers")})}};var v={enable:function(){this.traverse(function(t){t.disabled=!1})},disable:function(){this.traverse(function(t){t.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};t.extend(c.prototype,v),t.fn.sortable=function(e){var n=Array.prototype.slice.call(arguments,1);return this.map(function(){var o=t(this),r=o.data(i);return r&&v[e]?v[e].apply(r,n)||this:(r||e!==s&&"object"!=typeof e||o.data(i,new c(o,e)),this)})}}(t,window,"sumome-sortable")}),sumo.define("jquery.ba-resize",["jquery"],function(t){!function(t,e,i){"$:nomunge";function s(){r=e[a](function(){n.each(function(){var e=t(this),i=e.width(),s=e.height(),n=t.data(this,c);i===n.w&&s===n.h||e.trigger(l,[n.w=i,n.h=s])}),s()},o[u])}var n=t([]),o=t.sized=t.extend(t.sized,{}),r,a="setTimeout",l="sized",c=l+"-special-event",u="delay",h="throttleWindow";o[u]=250,o[h]=!0,t.event.special[l]={setup:function(){if(!o[h]&&this[a])return!1;var e=t(this);n=n.add(e),t.data(this,c,{w:e.width(),h:e.height()}),1===n.length&&s()},teardown:function(){if(!o[h]&&this[a])return!1;var e=t(this);n=n.not(e),e.removeData(c),n.length||clearTimeout(r)},add:function(e){function s(e,s,o){var r=t(this),a=t.data(this,c);a.w=s!==i?s:r.width(),a.h=o!==i?o:r.height(),n.apply(this,arguments)}if(!o[h]&&this[a])return!1;var n;if(t.isFunction(e))return n=e,s;n=e.handler,e.handler=s}}}(t,this)}),sumo.define("sumome-lib",["underscore","jquery","backbone","handlebars","shepherd","tether","countries","plugins/text!lib/sumome/templates/container.handlebars","plugins/text!lib/sumome/templates/slide_container.handlebars","plugins/text!lib/sumome/templates/wizard_container.handlebars","plugins/text!lib/sumome/templates/tab_container.handlebars","plugins/text!lib/sumome/templates/mdi_container.handlebars","nprogress","vex","jquery.modal","jquery.sortable","jquery.ba-resize"],function(t,e,i,s,n,o,r,a,l,c,u,h,d,m){var p={};return p.Countries=r,p.Dialog={Buttons:{OK:{id:"ok",text:"OK",type:"primary"},CANCEL:{id:"cancel",text:"Cancel",type:"secondary"},YES:{id:"yes",text:"Yes",type:"primary"},NO:{id:"no",text:"No",type:"secondary"}},alert:function t(i){return"string"==typeof i&&(i={message:"<p>"+i+"</p>"}),i=e.extend({},p.Dialog.defaultAlertOptions,i),p.Dialog.open(i)},confirm:function t(i){return i=e.extend({},p.Dialog.defaultConfirmOptions,i),p.Dialog.open(i)},prompt:function t(i){return"string"==typeof i&&(i={message:"<p>"+i+"</p>"}),i=e.extend({},p.Dialog.defaultPromptOptions,i),i.prompt=!0,p.Dialog.open(i)},custom:function t(i){return i=e.extend({},p.Dialog.defaultCustomOptions,i),p.Dialog.open(i)},open:function t(i){var s=m.open({content:p.Dialog.buildDialogForm(i),className:"sumome-dialog-popup sumome-dialog-popup-"+i.size,overlayClassName:"sumome-dialog-popup-overlay",contentClassName:i.contentClassName||"sumome-dialog-popup-content",closeClassName:"sumome-dialog-popup-close",showCloseButton:i.showCloseButton,customCloseButton:i.customCloseButton,escapeButtonCloses:i.escapeButtonCloses,overlayClosesOnClick:i.overlayClosesOnClick,allowBackgroundScrolling:i.allowBackgroundScrolling,beforeClose:i.beforeClose});return i.dialog=s,i.view&&(i.view.dialog=i.dialog),s.on("vexResize",e.proxy(function(t,i){var s=Math.floor(Math.max((e(window).height()-i.$vexContent.outerHeight())/2,0));i.$vex.css({"padding-top":s+"px"})},s)),s.on("close",e.proxy(function(){m.close(this.data("vex").id)},s)),s.on("vexOpen",e.proxy(function(t,i){i.$vexContent.on("sized",e.proxy(function(){p.Dialog.resize(i)},s)),i.$vexContent.find('input[type="text"]').focus(),p.Dialog.resize(i)},s)),s.on("vexClose",function(){e(window).off("keydown.sumome-dialog")}),s},resize:function t(i){var s=i.$vexContent.parent(),n="small",o=s.innerWidth();n=o>=1440?"xxlarge":o>=1080?"xlarge":o>=768?"large":o>=480?"medium":"small";var r=Math.floor(Math.max((e(window).height()-i.$vexContent.outerHeight())/2,0));i.$vex.css({"padding-top":r+"px"})},buildDialogForm:function t(i){var s=e('<div><div class="sumome-row"><div class="sumome-12 sumome-columns"><h2 class="sumome-dialog-title"></h2></div></div><div class="sumome-row"><div class="sumome-12 sumome-columns sumome-dialog-message"></div></div><div class="sumome-row"><div class="sumome-12 sumome-columns"><hr /><div class="sumome-text-'+i.buttonAlign+' sumome-dialog-buttons"></div></div></div></div>'),n=s.find(".sumome-dialog-title"),o=s.find(".sumome-dialog-message");if(i.title&&i.title.length>0?n.text(i.title):n.parent().parent().remove(),i.view)o.parent().replaceWith(i.view.el);else if(i.prompt){var r=e('<div class="sumome-dialog-popup-form" />');if(i.message){var a=e('<label class="sumome-dialog-label" />');a.html(i.message),r.append(a)}var l=e('<input type="text" class="sumome-dialog-input" />');"default"in i&&l.val(i.default),r.append(l),o.append(r)}else o.html("<h4>"+i.message+"</h4>");e(window).on("keydown.sumome-dialog",function(t){13==t.keyCode&&s.find("button").filter(function(){return["ok","yes"].indexOf(e(this).data("id"))>=0}).eq(0).trigger("click")});var c=s.find(".sumome-dialog-buttons");return(i.view||i.prompt||(i.contentClassName||"").indexOf("sumome-import-prompt")>-1)&&c.parent().find("hr").remove(),e.each(i.buttons,function(t,s){var n=e('<button class="sumome-button sumome-tiny sumome-radius" />').data("id",s.id).text(s.text);s.size&&n.removeClass("sumome-tiny").addClass("sumome-"+s.size),"type"in s&&n.addClass("sumome-"+s.type),n.click(function(){"cancel"!==e(this).data("id")&&"validator"in i&&i.validator&&!i.validator()||("callback"in i&&i.callback?!1!==i.callback(e(this).data("id"),e(this).closest(".sumome-dialog-popup-content").find('input[type="text"]').val())&&m.close(i.dialog.data("vex").id):m.close(i.dialog.data("vex").id))}),c.append(n)}),s}},p.Dialog.defaultAlertOptions={title:"Alert",message:"Alert",size:"small",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!1,buttons:[p.Dialog.Buttons.OK],buttonAlign:"right"},p.Dialog.defaultCustomOptions={title:"Custom",message:"",size:"small",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!1,buttons:[],buttonAlign:"right"},p.Dialog.defaultPromptOptions={title:"Custom",message:"",size:"small",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!1,buttons:[p.Dialog.Buttons.CANCEL,p.Dialog.Buttons.OK],buttonAlign:"right"},p.Dialog.defaultConfirmOptions={title:"Confirm",message:"Confirm",size:"small",showCloseButton:!0,customCloseButton:!1,escapeButtonCloses:!0,overlayClosesOnClick:!1,buttons:[p.Dialog.Buttons.NO,p.Dialog.Buttons.YES],buttonAlign:"right"},p.ViewHelper={parent:null,installTour:function i(s){if(!s)throw"No installTour slug specified";this.tour=new n.Tour({defaults:{classes:"sumome-shepherd-theme-arrows",showCancelLink:!0,buttons:!1}}),this.on("hide",e.proxy(function(){this.tour&&(this.lastTourStep=this.tour.currentStep?this.tour.currentStep.id:null,this.tour.hide())},this)),this.on("focused",e.proxy(function(){this.tour&&this.lastTourStep&&!this.seenTour(s)&&this.tour.show(this.lastTourStep)},this)),this.on("beforeDestroy",e.proxy(function(){this.tour&&(this.tour.complete(),this.tour=null)},this)),this.tour.on("close",e.proxy(function(){p.Dialog.confirm({title:"End Lesson",message:"Are you sure? We only recommend ending this lesson if you know what you are doing.",buttons:[{id:"no",type:"primary",text:"No, Continue"},{id:"yes",type:"secondary",text:"Yes, End Lesson"}],callback:t.bind(function(t){"yes"==t&&(this.cancelTour(s,this.tour.currentStep.id),this.tour.cancel())},this)})},this)),"installTourSteps"in this&&t.isFunction(this.installTourSteps)&&this.installTourSteps()},seenTour:function t(e){return!("api"in this)||(!("tours"in this.api.properties)||0!=this.api.properties.tours.length&&this.api.properties.tours.indexOf(e)>-1)},completeTour:function t(i,s){e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:this.api.properties.sumoUrl+"/api/tour/complete",data:{site_id:this.api.properties.siteId,slug:i},success:e.proxy(function(t){t.success?("api"in this&&("tours"in this.api.properties||(this.api.properties.tours=[]),this.api.properties.tours.push(i)),s&&s(null,t)):s&&s(t)},this)})},cancelTour:function t(i,s,n){e.ajax({type:"POST",dataType:"json",beforeSend:function t(i){i.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:this.api.properties.sumoUrl+"/api/tour/cancel",data:{site_id:this.api.properties.siteId,slug:i,step:s},success:e.proxy(function(t){t.success?("api"in this&&("tours"in this.api.properties||(this.api.properties.tours=[]),this.api.properties.tours.push(i)),n&&n(null,t)):n&&n(t)},this)})},checkDefaultProps:function e(i){var s=this;t(i).each(function(t){s&&!s.hasOwnProperty(t)&&s.__proto__.hasOwnProperty(t)})},getModal:function t(){for(var e=this;e&&e.getParent;){if(e.isModal)return e;e=e.getParent()}return null},getContainer:function t(){for(var e=this;e&&e.getParent;){if(e.isContainer)return e;e=e.getParent()}return null},getParent:function t(){return this.parent}},p.ModalView={modalTitle:"Unknown Modal",modalIconClass:null,modalSize:"medium",modalIcon:null,appendTo:null,modalMenu:[],isModal:!0,menuMode:!1,autoFocus:!0,stopOnClose:!0,isLegacyModal:!1,defaultProps:{currentConfig:{}},initialize:function i(s){e.extend(this,s),this.on("beforeDestroy",e.proxy(function(){this.currentView&&this.currentView.trigger("beforeDestroy")},this)),this.$el.on("close.sumome-modal",e.proxy(function(){this.trigger("beforeDestroy"),this.remove(),this.stopOnClose&&"api"in this&&this.api.close()},this)),this.$el.on("open.sumome-modal",e.proxy(function(){this.trigger("showModal"),this.trigger("resize")},this)),this.$el.on("resize",e.proxy(function(){this.trigger("resize")},this));var n="";this.isLegacyModal&&(n+=" sumome-"+this.modalSize),this.modalClassName&&(n+=" "+this.modalClassName);var o=[],r="",a=this.api.properties.sumoUrl+"/sites/";if(this.modalIcon&&(r="Launcher"===this.modalIconClass&&"manage"===this.api.properties.mode?'<a href="'+a+'"><img src="'+this.api.properties.baseUrl+this.modalIcon+'" class="sumome-modal-icon-manage" /></a>':"Launcher"===this.modalIconClass?'<a href="'+a+'"><img src="'+this.api.properties.baseUrl+this.modalIcon+'" class="sumome-modal-icon-large" /></a>':'<a href="'+a+'"><img src="'+this.api.properties.baseUrl+this.modalIcon+'" class="sumome-modal-icon" /></a>',o.push(e(r))),this.modalTitle&&"Launcher"!==this.modalIconClass&&o.push(this.modalTitle),this.modalMenu&&this.modalMenu.length>0){var l=e("<ul />");this.buildMenu(l,this.modalMenu),l.children("li").on("click.delegateMenu"+this.cid,e.proxy(function(i){this.menuMode=!0,i.stopPropagation(),e("body").on("click.delegateMenu"+this.cid,e.proxy(function(i){this.menuMode=!1,e("body").off("click.delegateMenu"+this.cid),this.timerId=window.setTimeout(t.bind(this.closeMenu,this,l),200)},this));var s=e(i.target);s.parents("ul").length>1||(s.is("li")||(s=s.closest("li")),this.timerId&&window.clearTimeout(this.timerId),window.setTimeout(t.bind(this.openMenu,this,l,s),100))},this)),l.children("li").on("mouseenter.delegateMenu"+this.cid,e.proxy(function(i){if(this.menuMode){var s=e(i.target);if(s.parents("ul").length>1)return;s.is("li")||(s=s.closest("li")),this.timerId&&window.clearTimeout(this.timerId),window.setTimeout(t.bind(this.openMenu,this,l,s),100)}},this)),l.children("li").on("mouseleave.delegateMenu"+this.cid,e.proxy(function(e){this.timerId=window.setTimeout(t.bind(this.closeMenu,this,l),200)},this)),l.children("li").children("ul").on("mouseenter.delegateMenu"+this.cid,e.proxy(function(t){window.clearTimeout(this.timerId)},this)),o.push(l),l.hide()}this.$el.showModal({resizable:!0,min_width:250,className:n,title:o,autoFocus:this.autoFocus,confirmCloseCallback:t.bind(this.confirmClose,this),isManageMode:"manage"===this.api.properties.mode,appendTo:this.appendTo,isLegacyModal:this.isLegacyModal}),e(window).on("resize.sumome-modal"+this.cid,e.proxy(function(t){t&&"resize"==t.type&&t.target!=window||(this.$el.resizeModal(this.isLegacyModal),"auto"==this.modalSize?this.recenter():this.trigger("resize"))},this)),"manage"===this.api.properties.mode&&"Launcher"===this.modalIconClass&&this.$el.closest(".sumome-modal").find(".sumome-modal-header").hide()},confirmClose:function i(){if("getDirty"in this&&this.getDirty()){var s=document.activeElement;return p.Dialog.confirm({title:"Close Window",message:"Are you sure you want to close this window without saving? Changes will be lost.",callback:t.bind(function(t){"yes"==t?this.$el.closeModal():e(s).focus()},this)}),!1}return!0},remove:function t(){this.undelegateMenu(),e(window).off(".sumome-modal"+this.cid),i.View.prototype.remove.call(this)},removeMenu:function t(){this.undelegateMenu(),this.$el.closest(".sumome-modal").find(".sumome-modal-header > ul").remove()},hideMenu:function t(){this.$el.closest(".sumome-modal").find(".sumome-modal-header > ul").hide()},showMenu:function t(){this.$el.closest(".sumome-modal").find(".sumome-modal-header > ul").show()},openMenu:function i(s,n){s.children("li").removeClass("sumome-open"),n.find("li").each(t.bind(function(i,s){var n=e(s),o=n.data("sumome-menu-item");if("visibilityCallback"in o){var r=o.visibilityCallback;t.isFunction(r)||(r=this[r]),r.call(this,n)}else n.removeAttr("class"),n.show()},this)),n.addClass("sumome-open")},closeMenu:function t(e){e.children("li").removeClass("sumome-open")},buildMenu:function i(s,n){var o;for(o=0;o<n.length;o++){var r=e("<li />").data("sumome-menu-item",n[o]),a=e('<a href="javascript:void(0);">'+n[o].title+"</a>");if(r.append(a),"items"in n[o]){var l=e("<ul />");this.buildMenu(l,n[o].items),r.append(l)}if("callback"in n[o]){var c="click.delegateMenu"+this.cid,u=n[o].callback;t.isFunction(u)||(u=this[u]),u&&(u=t.bind(u,this),a.on(c,u))}s.append(r)}return s},showNotice:function t(e,i){var s=this.$el.closest(".sumome-modal"),n=s.find(".sumome-modal-notice");n.html(e),i&&"string"==typeof i&&(n.css("cursor","pointer"),n.on("click",function(){window.location.hash="",setTimeout(function(){window.location.hash=i},0)})),n.show(),this.$el.resizeModal(this.isLegacyModal)},showImportNotice:function e(i,s){var n=this.$el.closest(".sumome-modal"),o=n.find(".sumome-modal-notice");o.html(i),o.css("cursor","pointer"),o.on("click",t.bind(function(){this.api.emit("stop","156085c5-0017-4150-b225-a731ad248f38/app"),this.api.emit("startApp",{app:"156085c5-0017-4150-b225-a731ad248f38",opts:{importSource:s}})},this)),o.show(),this.$el.resizeModal(this.isLegacyModal)},showUpgradeNotice:function t(i,s){var n=this.$el.closest(".sumome-modal"),o=n.find(".sumome-modal-notice").addClass("sumome-modal-notice-upgrade");o.html('<a href="javascript:void(0)" class="sumome-modal-notice-hide" title="Hide"><img src="'+this.api.properties.sumoUrl+'/client/images/modal-close.png" alt="Hide"></a><a href="javascript:void(0);" class="sumome-button sumome-tiny sumome-success">Upgrade Now</a><img src="'+this.api.properties.sumoUrl+'/client/images/apps/sumome-pro/64.png"><h4>Sumo Pro</h4>Grow your website faster with advanced display rules, pro insights, integrations, and more. SAVE 40% yearly when you upgrade now.'),o.find(".sumome-modal-notice-hide").on("click",e.proxy(function(){this.hideNotice()},this)),s&&o.find(".sumome-button").on("click",function(t){s(i,{hideBasicOption:!0})}),o.show(),this.$el.resizeModal(this.isLegacyModal)},hideNotice:function t(){var e=this.$el.closest(".sumome-modal"),i=e.find(".sumome-modal-notice");i.hide(),i.removeClass("sumome-modal-notice-upgrade"),i.css("cursor","auto"),i.off("click"),this.$el.resizeModal(this.isLegacyModal)},close:function t(e){this.$el.off("close.sumome-modal"),this.trigger("beforeDestroy"),null!==this.el.parentNode?this.$el.closeModal(e):e&&e()},setSize:function t(i){var s=this.$el.parents(".sumome-modal"),n="sumome-"+i;if(!s.hasClass(n)){s.css("width",""),s.removeClass("sumome-auto sumome-tiny sumome-small sumome-medium sumome-large sumome-xlarge sumome-max").addClass(n),s.css("left",Math.floor((window.innerWidth-s.width())/2)+"px"),("large"==i&&e(window).height()<480||"xlarge"==i&&e(window).height()<640)&&s.css("height",e(window).height()+"px"),s.resize();var o=Math.max(Math.floor((e(window).height()-s.outerHeight())/2),0);s.css("top",o+"px")}},checkSize:function t(){var i=this.$el.parents(".sumome-modal");i.width()>.94*e(window).width()&&i.css("width",Math.round(.94*e(window).width())+"px"),i.height()>.94*e(window).height()&&i.css("height",Math.round(.94*e(window).height())+"px"),i.css("left",Math.floor((window.innerWidth-i.width())/2)+"px"),i.resize();var s=Math.max(Math.floor((e(window).height()-i.outerHeight())/2),0);i.css("top",s+"px"),this.$el.resizeModal(this.isLegacyModal),this.trigger("resize")},recenter:function t(){this.$el.trigger("resize"),this.$el.resizeModal(this.isLegacyModal);var i=this.$el.parents(".sumome-modal");i.css("left",Math.floor((window.innerWidth-i.width())/2)+"px"),i.resize();var s=Math.max(Math.floor((e(window).height()-i.outerHeight())/2),0);i.css("top",s+"px"),this.trigger("resize")},toggleSidebar:function t(e){e?(this.$parent=this.$el.children(".sumome-settings-container"),this.$parent.css("width","60%"),this.$sidebar=this.$el.children(".sumome-settings-sidebar"),this.$sidebar.css("display","inline"),this.$sidebar.html(e)):(this.$parent=this.$el.children(".sumome-settings-container"),this.$parent.css("width","100%"),this.$sidebar=this.$el.children(".sumome-settings-sidebar"),this.$sidebar.css("display","none"))},toggleFooter:function t(e){e?(this.$footer=this.$el.children(".sumome-settings-footer"),this.$footer.show(),this.trigger("resize")):(this.$footer=this.$el.children(".sumome-settings-footer"),this.$footer.hide(),this.trigger("resize"))},setSidebar:function t(e){this.$sidebar.html(e)},showProgressBar:function t(){d.start()},errorProgressBar:function t(){d.error()},finishProgressBar:function t(){d.done()},undelegateMenu:function t(){this.$el.closest(".sumome-modal").find("ul, li, a").off(".delegateMenu"+this.cid)},resize:function t(){var e=this.$el.parents(".sumome-modal"),i="small",s=e.innerWidth();if(i=s>=1440?"xxlarge":s>=1080?"xlarge":s>=768?"large":s>=480?"medium":"small",this.isLegacyModal){var n="sumome-res-"+i;e.removeClass("sumome-res-small sumome-res-medium sumome-res-large sumome-res-xlarge sumome-res-xxlarge").addClass(n)}o.position()}},t.extend(p.ModalView,p.ViewHelper),p.ContainerChildView={showSidebar:!1,showFooter:!0,containerTemplate:s.compile(a),defaultProps:{currentConfig:{}},initialize:function t(i){var s=this.getModal();sumo.require(["plugins/css!../css/sumome-container.css"],e.proxy(function(){this.resize()},this)),this.on("resize",this.resize,this),s.toggleFooter(this.showFooter),s.toggleSidebar(this.showSidebar),this.$wrapEl=e("<div />").addClass("sumome-container"),this.$wrapEl.html(this.containerTemplate()),this.$containerEl=this.$wrapEl.find(".sumome-container-container"),this.$containerEl.append(this.$el)},resize:function t(){var e=this.$wrapEl.parent().innerHeight(),i="none"!=this.$el.find(".sumome-container-footer").css("display")?this.$el.find(".sumome-container-footer").outerHeight():0;this.$wrapEl.height(e),e-=i,this.$containerEl.height(e)},getEl:function t(){return this.$wrapEl}},t.extend(p.ContainerChildView,p.ViewHelper),p.SlideChildView={canGoBack:!1,canSave:!1,containerTitle:"",buttonTitle:"Save",wizardButtonTitle:"Next",previousView:null,showSidebar:!1,showFooter:!0,defaultProps:{isDirty:!1,currentConfig:{}},initialize:function t(e){var i=this.getModal(),s=this.getContainer();this.isDirty=!1,this.wizard=s.wizard,s.setCanGoBack(this.canGoBack),s.setCanSave(this.canSave),s.setTitle(this.containerTitle),s.setButtonTitle(this.wizard?this.wizardButtonTitle:this.buttonTitle),this.setDirty(this.getDirty()),i.toggleFooter(this.showFooter),i.toggleSidebar(this.showSidebar)},setDirty:function t(e){if(this.isDirty=!1!==e,this.isDirty){var i=this.getContainer();i&&i.$saveEl&&i.$saveEl.find(".sumome-button.sumome-success").addClass("sumome-hvr-back-pulse")}else{var i=this.getContainer();i&&i.$saveEl&&i.$saveEl.find(".sumome-button.sumome-success").removeClass("sumome-hvr-back-pulse")}},getDirty:function t(){return this.isDirty},goBack:function t(){this.getContainer().goBack()},goForward:function t(){this.getContainer().goForward()},goto:function t(e){this.getContainer().goto(e)},getEl:function t(){return this.$el}},t.extend(p.SlideChildView,p.ViewHelper),p.SlideStaticGridView={listItems:[],events:{"click ul li":"rowClick","mouseenter ul li":"rowEnter","mouseleave ul li":"rowLeave"},initialize:function t(e){this.$el.addClass("sumome-12 sumome-columns"),this.render()},rowClick:t.debounce(function(t){var i=e(t.target).closest("li").index();if(i>=0&&i<this.listItems.length){var s=this.listItems[i];!s.preventDefault&&s.view&&this.getContainer().slideTo(s.view,"left",s.params),s.onClickCallback&&s.onClickCallback(s.params,t.target,this)}},500,!0),render:function t(){this.$el.html('<ul class="sumome-small-block-grid-3 sumome-settings-grid"></ul>');var i,s=this.$el.find("ul");for(i=0;i<this.listItems.length;i++){var n=this.listItems[i],o=e("<li></li>");n.image?o.append('<img src="'+n.image+'" />'):n.icon&&o.append('<span><i class="sumome-fa sumome-fa-white sumome-fa-medium '+n.icon+'"></i></span>'),o.append("<h6>"+n.params.title+"</h6>"),s.append(o)}if(!this.listItems.length&&this.emptyMessage){var o=e('<li style="cursor:default;"></li>');o.append(this.emptyMessage),s.append(o)}}},p.SlideStaticListView={listItems:[],events:{"click ul li":"rowClick"},initialize:function t(e){this.$el.addClass("sumome-settings-list"),this.render()},rowClick:t.debounce(function(t){var i=e(t.target).closest("li").index();if(i>=0&&i<this.listItems.length){var s=this.listItems[i];!s.preventDefault&&s.view&&this.getContainer().slideTo(s.view,"left",s.params),s.onClickCallback&&s.onClickCallback(s.params,t.target,this)}},500,!0),render:function t(){this.$el.html("<ul></ul>");var i,s=this.$el.find("ul");for(i=0;i<this.listItems.length;i++){var n=this.listItems[i],o=e("<li></li>");n.image?o.append('<span style="background:transparent;"><i class="sumome-fa sumome-fa-white sumome-fa-medium" style="width:30px; background-size:contain; background-image: url(\''+n.image+"');\"></i></span>"):n.icon&&o.append('<span><i class="sumome-fa sumome-fa-white sumome-fa-medium '+n.icon+'"></i></span>'),o.append(n.title),n.noArrow||o.append('<i class="sumome-arrow-forward sumome-right">&gt;</i>'),s.append(o)}if(!this.listItems.length&&this.emptyMessage){var o=e('<li style="cursor:default;"></li>');o.append(this.emptyMessage),s.append(o)}}},p.SlideWizardView={template:s.compile(c),tagName:"div",className:"sumome-settings",wizard:!0,isContainer:!0,currentViewIndex:0,currentView:null,events:{"click .sumome-settings-left":"goBack","click .sumome-settings-right":"save","click .sumome-wizard-save":"save"},defaultProps:{currentConfig:{}},initialize:function t(i){this.on("resize",this.resize,this),this.on("beforeDestroy",e.proxy(function(){this.currentView&&this.currentView.trigger("beforeDestroy")},this)),this.render(),this.resize(),this.listItems&&this.listItems.length>0&&(this.currentView=this.appendView(this.listItems[0].view),this.currentView.trigger("focused"))},getEl:function t(){return this.$el},getDirty:function t(){return this.currentView&&this.currentView.getDirty()},render:function t(){this.$el.html(this.template()),this.$saveEl=this.$el.find(".sumome-settings-header .sumome-settings-right, .sumome-wizard-save"),this.$containerEl=this.$el.find(".sumome-settings-container"),this.$containerEl.addClass("sumome-animated-container"),this.$sidebarEl=this.$el.find(".sumome-settings-sidebar")},goto:function t(e){if(e>=0&&e+1<this.listItems.length){this.currentViewIndex=e;var i=this.listItems[this.currentViewIndex];i.view&&this.slideTo(i.view,"right",i.params)}},goBack:t.throttle(function(){if(this.currentViewIndex>0){var t=this.listItems[this.currentViewIndex];this.currentViewIndex-=1;var e=this.listItems[this.currentViewIndex];e.view&&this.slideTo(e.view,"right",e.params),t.removeOnBack&&this.listItems.splice(this.currentViewIndex+1)}},500),goForward:function t(){if(this.currentViewIndex+1<this.listItems.length){this.currentViewIndex+=1;var e=this.listItems[this.currentViewIndex];e.view&&this.slideTo(e.view,"left",e.params)}},save:t.debounce(function(){this.currentView&&this.currentView.trigger("save")},500,!0),setButtonTitle:function t(e){this.$saveEl.find("button").text(e)},setTitle:function t(e){},resize:function t(){var e=this.$el.parent().innerHeight(),i=this.$el.find(".sumome-settings-header").outerHeight(),s="none"!=this.$el.find(".sumome-settings-footer").css("display")?this.$el.find(".sumome-settings-footer").outerHeight():0;this.$el.height(e),e-=i,e-=s,this.$containerEl.height(e),this.$sidebarEl.height(e),this.currentView&&this.currentView.trigger("resize")},showView:function t(e){var i=this.listItems[e];i.view&&this.slideTo(i.view,"left",i.params)},setCanGoBack:function t(e){},setCanSave:function t(e){this.$saveEl.toggle(e)},appendView:function t(i,s){var n=new i(e.extend({},{api:this.api,settings:this,parent:this},s));return this.$containerEl.append(n.getEl()),this.clearData={},n.trigger("resize"),n},slideTo:function t(e,i,s){var n=this.appendView(e,s)
;return this.slide(n,this.currentView,i||"left"),n},slide:function t(i,s,n){var o=this.$containerEl,r=e(i.getEl()),a=e(s.getEl());this.toggleSidebar(!1),a.show(),r.show(),o.addClass("sumome-animated-container-slide-"+n+"-ct"),r.addClass("sumome-animated-container-slide-"+n+"-new"),setTimeout(e.proxy(function(){o.addClass("sumome-animated-container-slide-"+n+"-ct-sliding"),setTimeout(e.proxy(function(){a.hide(),o.removeClass("sumome-animated-container-slide-"+n+"-ct"),o.removeClass("sumome-animated-container-slide-"+n+"-ct-sliding"),r.removeClass("sumome-animated-container-slide-"+n+"-new"),setTimeout(e.proxy(function(){s.trigger("beforeDestroy"),s.remove(),this.currentView=i,this.currentView.trigger("focused"),this.$containerEl.scrollTop(0)},this),0)},this),450)},this),0)}},t.extend(p.SlideWizardView,p.ViewHelper),p.SlideContainerView={template:s.compile(l),tagName:"div",wizard:!1,isContainer:!0,className:"sumome-settings",events:{"click .sumome-settings-left":"goBack","click .sumome-settings-right":"save"},defaultProps:{currentView:null,previousViewParams:[],previousViewStack:[],clearData:{},currentConfig:{}},initialize:function t(i){this.checkDefaultProps(["defaultView"]),this.on("resize",this.resize,this),this.on("beforeDestroy",e.proxy(function(){this.currentView&&this.currentView.trigger("beforeDestroy")},this)),this.on("hide",e.proxy(function(){this.currentView&&this.currentView.trigger("hide")},this)),this.render(),this.resize(),this.currentView=this.appendView(this.defaultView),this.currentView.trigger("focused"),this.trigger("initialized")},getEl:function t(){return this.$el},render:function t(){this.$el.html(this.template()),this.$saveEl=this.$el.find(".sumome-settings-header .sumome-settings-right"),this.$containerEl=this.$el.find(".sumome-settings-container"),this.$containerEl.addClass("sumome-animated-container"),this.$sidebarEl=this.$el.find(".sumome-settings-sidebar"),this.clearData={}},goBack:t.throttle(function(){this.clearData.runOnBack&&this.clearData.runOnBack(this),this.previousViewParams.length>1&&this.previousViewParams.pop(),this.previousViewStack.length>0&&this.slideTo(this.previousViewStack.pop(),"right",this.previousViewParams[this.previousViewParams.length-1])},500),save:function t(){this.currentView&&this.currentView.trigger("save")},setButtonTitle:function t(e){this.$saveEl.find("button").text(e)},setTitle:function t(e){},setCanGoBack:function t(e){},setCanSave:function t(e){this.$saveEl.toggle(e)},resize:function t(){var e=this.$el.parent().innerHeight(),i=this.$el.find(".sumome-settings-header").outerHeight(),s="none"!=this.$el.find(".sumome-settings-footer").css("display")?this.$el.find(".sumome-settings-footer").outerHeight():0;this.$el.height(e),e-=i,e-=s,this.$containerEl.height(e),this.$sidebarEl.height(e),this.currentView&&this.currentView.trigger("resize"),o.position()},getDirty:function t(){return this.currentView&&this.currentView.getDirty()},appendView:function t(i,s){var n=new i(e.extend({},{api:this.api,settings:this,parent:this},s));return this.$containerEl.append(n.getEl()),this.clearData={},n.trigger("resize"),n},slideTo:function t(e,i,s){var n=this.appendView(e,s);return this.currentView&&"left"==(i||"left")&&(this.previousViewParams.push(s),this.previousViewStack.push(this.currentView.constructor)),this.slide(n,this.currentView,i||"left"),this.clearData={},n},slide:function t(i,s,n){var o=this.$containerEl,r=e(i.getEl()),a=e(s.getEl());this.toggleSidebar(!1),a.show(),r.show(),o.addClass("sumome-animated-container-slide-"+n+"-ct"),r.addClass("sumome-animated-container-slide-"+n+"-new"),setTimeout(e.proxy(function(){o.addClass("sumome-animated-container-slide-"+n+"-ct-sliding"),setTimeout(e.proxy(function(){a.hide(),o.removeClass("sumome-animated-container-slide-"+n+"-ct"),o.removeClass("sumome-animated-container-slide-"+n+"-ct-sliding"),r.removeClass("sumome-animated-container-slide-"+n+"-new"),setTimeout(e.proxy(function(){s.trigger("beforeDestroy"),s.remove(),this.currentView=i,this.currentView.trigger("focused"),this.$containerEl.scrollTop(0)},this),0)},this),450)},this),0)}},t.extend(p.SlideContainerView,p.ViewHelper),p.MDIContainerView={template:s.compile(h),isContainer:!0,wizard:!1,className:"sumome-xdi",defaultProps:{extraParams:{},wasInitialized:!1,tabItems:[],actionTab:null,canShowTabBar:!0,currentConfig:{}},initialize:function t(i){e.extend(this,i),sumo.require(["plugins/css!../css/sumome-xdi-container.css"],e.proxy(function(){this.resize()},this)),this.on("beforeDestroy",e.proxy(function(){var t=0;for(t=0;t<this.tabItems.length;t++){var e=this.tabItems[t];"view"in e&&e.view&&e.viewAppended&&(e.view.trigger("beforeDestroy"),e.view.remove(),e.view=null,e.viewAppended=!1)}},this)),this.on("resize",this.resize,this),this.on("focused",this.focused,this),this.render();var s=null;this.$tabBarEl.sortable({nested:!1,vertical:!1,delay:200,afterMove:e.proxy(function(t,e,i){s&&t.css({width:s.outerWidth(),height:s.outerHeight()})},this),onDrop:e.proxy(function(t,i,s,n){t.removeClass("sumome-dragged").removeAttr("style"),e("body").removeClass("sumome-dragging"),this.updateTabOrder(),this.trigger("reorder")},this),onDrag:e.proxy(function(t,e,i,s){var n=this.$tabBarEl.offset();t.css({left:e.left-n.left})},this),onDragStart:e.proxy(function(t,i,n,o){s=t,t.addClass("sumome-dragged"),e("body").addClass("sumome-dragging")},this)}),this.trigger("initialized"),this.wasInitialized=!0},remove:function t(){this.$tabBarEl&&this.$tabBarEl.sortable("destroy"),this.closeAllTabs(),i.View.prototype.remove.call(this)},render:function t(){this.$el.html(this.template({baseUrl:this.api.properties.baseUrl})),this.$containerEl=this.$el.find(".sumome-xdi-container-container"),this.$tabBarEl=this.$el.find(".sumome-xdi-tab-container").hide(),this.canShowTabBar&&this.$tabBarEl.show(),null!==this.actionTab&&this.addTab({id:"action",title:this.actionTab.title,callback:this.actionTab.callback,closeable:!1})},focused:function t(){o.position()},resize:function t(){var e=this.$el.find(".sumome-xdi-tab-container").outerHeight(),i=this.$el.parent().innerHeight();this.$el.height(i),this.canShowTabBar&&(i-=e),this.$containerEl.height(i);var s=this.getSelectedTab();s&&"view"in s&&s.view&&s.viewAppended&&s.view.trigger("resize"),o.position()},findTab:function t(e){for(var i=0;i<this.tabItems.length;i++){var s=this.tabItems[i];if(s.title==e)return s}return null},addAndSelectTab:function t(e){this.addTab(e),this.selectTab(e.id)},getTab:function t(e){for(var i=0;i<this.tabItems.length;i++){var s=this.tabItems[i];if(s.id==e)return s}return null},getTabs:function t(){return this.tabItems},updateTabOrder:function i(){var s=this.$tabBarEl.children(".sumome-xdi-tab-item").map(function(t,i){return e(i).data("sumome-tab")}).get();this.tabItems=t.sortBy(this.tabItems,function(t,e){return s.indexOf(t.id)-s.indexOf(e.id)})},addTab:function i(s){if(!this.getTab(s.id)){this.tabItems.push(s);var n=e('<li class="sumome-xdi-tab-item" data-sumome-tab="'+s.id+'"><label>'+s.title+'</label><a href="javascript:void(0);" title="Close"></a></li>');if(null!==this.actionTab&&this.$tabBarEl.children().length>0?this.$tabBarEl.children().last().before(n):this.$tabBarEl.append(n),"icon"in s&&s.icon){var r=e('<img src="'+this.api.properties.baseUrl+s.icon+'" />');n.find("label").prepend(r)}"closeable"in s&&!1===s.closeable&&n.find("a").remove(),"view"in s&&s.view&&(s.viewAppended=!1),"id"in s&&"action"==s.id?n.find("label").on("click",e.proxy(function(e){if("callback"in s){var i=s.callback;t.isFunction(i)||(i=this[i]),i=t.bind(i,this),i()}},this)):n.find("label").on("click",e.proxy(function(t){this.selectTab(s.id),this.trigger("change")},this)),n.find("a").on("click",e.proxy(function(t){this.closeTab(s.id),this.trigger("change")},this)),this.tabItems.length>1&&this.$tabBarEl.show(),o.position()}},closeAllTabs:function t(){var e=0;for(e=0;e<this.tabItems.length;e++){var i=this.tabItems[e];"view"in i&&i.view&&i.viewAppended&&(i.view.trigger("beforeDestroy"),i.view.remove())}this.$tabBarEl.find(".sumome-xdi-tab-item").remove(),this.tabItems=[]},closeTab:function i(s,n){var o=this.getTab(s),r=null;if(!n&&o&&"view"in o&&o.view&&o.viewAppended){if(o.view.getDirty())return void p.Dialog.confirm({title:"Close Tab",message:"Are you sure you want to close this tab without saving? Changes will be lost.",callback:t.bind(function(t){"yes"==t&&this.closeTab(s,!0)},this)})}var a=this.$tabBarEl.find('.sumome-xdi-tab-item[data-sumome-tab="'+s+'"]').eq(0);a.length>0&&(r=a.next(".sumome-xdi-tab-item"),0!=r.length&&"action"!=r.data("sumome-tab")||(r=a.prev(".sumome-xdi-tab-item")),a.remove()),o&&("view"in o&&o.view&&o.viewAppended&&(o.view.trigger("beforeDestroy"),o.view.remove()),this.tabItems=e.grep(this.tabItems,function(t){return t.id!=s})),r&&r.length>0&&this.selectTab(r.data("sumome-tab"))},renameTab:function t(e,i){var s=this.$tabBarEl.find('.sumome-xdi-tab-item[data-sumome-tab="'+e+'"]').eq(0);if(s.length>0){s.find("label").contents().filter(function(){return 3==this.nodeType}).first().replaceWith(i);var n=this.getTab(e);n&&(n.title=i)}},getTabCount:function t(){return this.tabItems.length},showTabBar:function t(){this.canShowTabBar=!0,this.$tabBarEl.show(),this.resize()},hideTabBar:function t(){this.canShowTabBar=!1,this.$tabBarEl.hide(),this.resize()},getDirty:function t(){var e=this.getSelectedTab(),i=[];return e&&e.view&&e.viewAppended&&e.view.getDirty()&&i.push(e.id),this.tabItems.forEach(function(t){t&&t.view&&t.viewAppended&&t.view.getDirty()&&i.indexOf(t.id)<0&&i.push(t.id)}),i.length>0&&(this.selectTab(i[0]),!0)},getSelectedTab:function t(){var e=this.$tabBarEl.find(".sumome-xdi-tab-item.sumome-selected").eq(0);return e.length>0&&this.getTab(e.data("sumome-tab"))},selectTab:function t(i){var s=this.getSelectedTab();s&&s.view.trigger("hide");var n=this.$tabBarEl.find('.sumome-xdi-tab-item[data-sumome-tab="'+i+'"]').eq(0);n.length>0&&(this.$tabBarEl.find(".sumome-xdi-tab-item").removeClass("sumome-selected"),n.addClass("sumome-selected"));var o=this.getTab(i);o&&(this.$containerEl.children().hide(),"view"in o&&o.view&&(o.viewAppended||(o.view=this.appendView(o.view,"params"in o?o.params:{}),o.viewAppended=!0),e(o.view.getEl()).show(),o.view.trigger("focused"),o.view.trigger("resize")))},appendView:function t(i,s){var n=this.hasOwnProperty("settings")?this.settings:this,o=new i(e.extend({},{api:this.api,settings:n,parent:this},s,this.extraParams));return this.$containerEl.append(o.getEl()),this.clearData={},o},getEl:function t(){return this.$el},slideTo:function t(e,i,s){var n=this.appendView(e,s);return this.currentView&&"left"==(i||"left")&&(this.previousViewParams.push(s),this.previousViewStack.push(this.currentView.constructor)),this.slide(n,this.currentView,i||"left"),this.clearData={},n}},t.extend(p.MDIContainerView,p.ViewHelper),p.TabContainerView={template:s.compile(u),tagName:"div",isContainer:!0,wizard:!1,className:"sumome-tab-container",modalClassName:"sumome-modal-tab",appendTo:"lasjdlfajsdlfkjasldkfjasdf",events:{"click .sumome-tab-container-left":"goBack","click .sumome-tab-container-right":"save"},defaultProps:{extraParams:{},currentView:null,wasInitialized:!1,clearData:{},previousViewStack:[],previousViewParams:[],currentConfig:{}},initialize:function t(i){e.extend(this,i),this.checkDefaultProps(["defaultView","tabItems"]);var s=this.getModal();this.modalClassName&&e(s.el).closest(".sumome-modal").addClass(this.modalClassName),sumo.require(["plugins/css!../css/sumome-tab-container.css"],e.proxy(function(){this.resize()},this)),this.on("resize",this.resize,this),this.on("focused",this.focused,this),this.on("beforeDestroy",e.proxy(function(){this.currentView&&(this.currentView.trigger("beforeDestroy"),this.currentView.remove(),this.currentView=null)},this)),this.on("hide",e.proxy(function(){this.currentView&&this.currentView.trigger("hide")},this)),this.render(),this.defaultView&&(this.currentView=this.appendView(this.defaultView),e(this.currentView.getEl()).show(),this.currentView.trigger("focused")),this.trigger("initialized"),this.wasInitialized=!0},render:function t(){this.$el.html(this.template({baseUrl:this.api.properties.baseUrl})),this.$iconBarEl=this.$el.find(".sumome-tab-container-iconbar"),this.$backEl=this.$el.find(".sumome-tab-container-header .sumome-tab-container-left"),this.$titleEl=this.$el.find(".sumome-tab-container-header .sumome-tab-container-title"),this.$saveEl=this.$el.find(".sumome-tab-container-footer .sumome-tab-container-right"),this.$containerEl=this.$el.find(".sumome-tab-container-container"),this.$containerEl.addClass("sumome-animated-container"),this.clearData={};for(var e=0;e<this.tabItems.length;e++){var i=this.tabItems[e];this.addTab(i)}},getEl:function t(){return this.$el},insertTab:function t(e,i){for(var s=0;s<this.tabItems.length;s++){if(this.tabItems[s].title==e.title)return}this.tabItems.push(e),this.addTab(e,i)},goBack:t.throttle(function(){function e(){this.clearData.runOnBack&&this.clearData.runOnBack(this),this.previousViewParams.length>1&&this.previousViewParams.pop(),this.previousViewStack.length>0&&this.slideTo(this.previousViewStack.pop(),"right",this.previousViewParams[this.previousViewParams.length-1])}this.currentView&&this.currentView.getDirty()?p.Dialog.confirm({title:"Leave Page",message:"Are you sure you want to go back without saving? Changes will be lost.",callback:t.bind(function(t){"yes"==t&&e.call(this)},this)}):e.call(this)},500),save:function t(){this.currentView&&this.currentView.trigger("save")},setButtonTitle:function t(e){this.$saveEl.find("button").text(e)},setTitle:function t(e){this.$titleEl.html(e),this.selectTab(e)},selectTab:function t(e){var i=this.$iconBarEl.find('.sumome-item[data-sumome-tab="'+e+'"]').eq(0);i.length>0&&(this.$iconBarEl.find(".sumome-item").removeClass("sumome-selected"),i.addClass("sumome-selected"))},toggleContainerFooter:function t(e){e?(this.$footer=this.$el.children(".sumome-tab-container-footer"),this.$footer.show(),this.trigger("resize")):(this.$footer=this.$el.children(".sumome-tab-container-footer"),this.$footer.hide(),this.trigger("resize"))},setCanGoBack:function t(i){var s=this.$el.find(".sumome-tab-container-header");!i&&s?e(s).hide():i&&s&&e(s).show(),this.$backEl.toggle(i)},setCanSave:function t(e){this.$saveEl.toggle(e),this.toggleContainerFooter(e)},focused:function t(){this.currentView&&this.currentView.trigger("focused"),o.position()},resize:function t(){var e=this.$el.parent().innerHeight(),i="none"!=this.$el.find(".sumome-tab-container-header").css("display")?this.$el.find(".sumome-tab-container-header").outerHeight():0,s="none"!=this.$el.find(".sumome-tab-container-footer").css("display")?this.$el.find(".sumome-tab-container-footer").outerHeight():0,n="none"!==this.$el.find(".sumome-tab-container-iconbar").css("display")?this.$el.find(".sumome-tab-container-iconbar").outerHeight():0;this.$el.height(e),e-=s,e-=i,e-=n,this.$containerEl.height(e),this.currentView&&this.currentView.trigger("resize"),o.position()},throttledResize:t.debounce(function(){this.resize()},500,!1),addSwitch:function t(i,s){var n=e('<div class="sumome-switch-item"><div class="sumome-switch sumome-round sumome-tiny"><input type="checkbox" id="switch'+this.cid+'" /><label for="switch'+this.cid+'"></label></div><label></label></div>');s?this.$iconBarEl.append(n):this.$iconBarEl.prepend(n),this.switchLabel=i,this.$switchEl=n.find('input[type="checkbox"]'),this.$switchLabelEl=n.find(">label"),this.$switchLabelEl.html((this.switchLabel?this.switchLabel+" <br>":"")+"Paused"),this.$switchEl.on("change",e.proxy(function(){this.$switchLabelEl.html((this.switchLabel?this.switchLabel+" <br>":"")+(this.$switchEl.prop("checked")?"Active":"Paused")),this.trigger("switched")},this)),o.position()},removeSwitch:function t(){var e=this.$iconBarEl.find(".sumome-switch-item");e.length&&e.remove()},setSwitch:function t(e){this.$switchEl&&(this.$switchEl.prop("checked",e),this.$switchLabelEl.html((this.switchLabel?this.switchLabel+" <br>":"")+(this.$switchEl.prop("checked")?"Active":"Paused")))},isSwitched:function t(){return this.$switchEl?this.$switchEl.prop("checked"):null},toggleSwitch:function t(){this.setSwitch(!this.isSwitched()),this.trigger("switched")},addTab:function i(s,n){var r=e('<a class="sumome-item" href="javascript:void(0);" data-sumome-tab="'+s.title+'">'+s.title+"</a>");void 0===n?this.$iconBarEl.append(r):this.$iconBarEl.children(".sumome-item").eq(n).before(r),r.on("click",e.proxy(function(e){var i=function t(e){"view"in e&&e.view?this.slideTo(e.view):"url"in e&&e.url?window.location.href=e.url:"hash"in e&&e.hash&&(window.location.hash="",setTimeout(function(){window.location.hash=e.hash},0))};this.currentView&&this.currentView.getDirty()?p.Dialog.confirm({title:"Leave Tab",message:"Are you sure you want to leave this tab without saving? Changes will be lost.",callback:t.bind(function(t){"yes"==t&&i.call(this,s)},this)}):i.call(this,s)},this)),this.throttledResize(),o.position()},findTab:function t(e){for(var i=0;i<this.tabItems.length;i++){var s=this.tabItems[i];if(s.title==e)return s}return null},removeTab:function t(i){var s=this.findTab(i);s&&(this.tabItems=e.grep(this.tabItems,function(t){return t.title!=i}),this.$iconBarEl.find('[data-sumome-tab="'+s.title+'"]').remove())},appendView:function t(i,s){var n=this.hasOwnProperty("settings")?this.settings:this,o=new i(e.extend({},{api:this.api,settings:n,parent:this},s,this.extraParams));return this.$containerEl.append(o.getEl()),this.clearData={},o.trigger("resize"),o},slideTo:function t(e,i,s){var n=this.appendView(e,s);return this.currentView&&"left"==(i||"left")&&(this.previousViewParams.push(s),this.previousViewStack.push(this.currentView.constructor)),this.slide(n,this.currentView,i||"left"),this.clearData={},n},slide:function t(i,s,n){var o=this.$containerEl,r=e(i.getEl());if(s){e(s.getEl()).hide()}r.show(),s&&(s.trigger("beforeDestroy"),s.remove(),s=null),this.currentView=i,this.currentView.trigger("focused"),this.$containerEl.scrollTop(0)},getDirty:function t(){return this.currentView&&this.currentView.getDirty()}},t.extend(p.TabContainerView,p.ViewHelper),p}),sumo.define("lib/heatmaps",["require"],function(t){var e={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},i=function t(){var i=function t(e){this._coordinator={},this._data=[],this._radi=[],this._min=0,this._max=1,this._xField=e.xField||e.defaultXField,this._yField=e.yField||e.defaultYField,this._valueField=e.valueField||e.defaultValueField,e.radius&&(this._cfgRadius=e.radius)},s=e.defaultRadius;return i.prototype={_organiseData:function(t,e){var i=t[this._xField],n=t[this._yField],o=this._radi,r=this._data,a=this._max,l=this._min,c=t[this._valueField]||1,u=t.radius||this._cfgRadius||s;return r[i]||(r[i]=[],o[i]=[]),r[i][n]?r[i][n]+=c:(r[i][n]=c,o[i][n]=u),r[i][n]>a?(e?this.setDataMax(r[i][n]):this._max=r[i][n],!1):{x:i,y:n,value:c,radius:u,min:l,max:a}},_unOrganizeData:function(){var t=[],e=this._data,i=this._radi;for(var s in e)for(var n in e[s])t.push({x:s,y:n,radius:i[s][n],value:e[s][n]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var i=this._organiseData(arguments[0],!0);i&&this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[i]})}return this},setData:function(t){var e=t.data,i=e.length;this._data=[],this._radi=[];for(var s=0;s<i;s++)this._organiseData(e[s],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},i}(),s=function t(){function e(t){var e=t.container,s=this.shadowCanvas=document.createElement("canvas"),n=this.canvas=t.canvas||document.createElement("canvas"),o=this._renderBoundaries=[1e4,1e4,0,0],r=getComputedStyle(t.container)||{};n.className="sumome-heatmap-canvas",this._width=n.width=s.width=+r.width.replace(/px/,""),this._height=n.height=s.height=+r.height.replace(/px/,""),this.shadowCtx=s.getContext("2d"),this.ctx=n.getContext("2d"),n.style.cssText=s.style.cssText="position:absolute;left:0;top:0;",n.style.width=this._width+"px",n.style.height=this._height+"px",e.style.position="relative",e.appendChild(n),this._palette=i(t),this._templates={},this._setStyles(t)}var i=function(t){var e=t.gradient||t.defaultGradient,i=document.createElement("canvas"),s=i.getContext("2d");i.width=256,i.height=1;var n=s.createLinearGradient(0,0,256,1);for(var o in e)n.addColorStop(o,e[o]);return s.fillStyle=n,s.fillRect(0,0,256,1),s.getImageData(0,0,256,1).data},s=function(t,e){var i=document.createElement("canvas"),s=i.getContext("2d"),n=t,o=t;if(i.width=i.height=2*t,1==e)s.beginPath(),s.arc(n,o,t,0,2*Math.PI,!1),s.fillStyle="rgba(0,0,0,1)",s.fill();else{var r=s.createRadialGradient(n,o,t*e,n,o,t);r.addColorStop(0,"rgba(0,0,0,1)"),r.addColorStop(1,"rgba(0,0,0,0)"),s.fillStyle=r,s.fillRect(0,0,2*t,2*t)}return i},n=function(t){for(var e=[],i=t.min,s=t.max,n=t.radi,t=t.data,o=Object.keys(t),r=o.length;r--;){var a=o[r];if(t.hasOwnProperty(a))for(var l=Object.keys(t[a]),c=l.length;c--;){var u=l[c];if(t[a].hasOwnProperty(u)){var h=t[a][u],d=n[a][u];e.push({x:a,y:u,value:h,radius:d})}}}return{min:i,max:s,data:e}};return e.prototype={renderPartial:function(t){this._drawAlpha(t),this._colorize()},renderAll:function(t){this._clear(),this._drawAlpha(n(t)),this._colorize()},_updateGradient:function(t){this._palette=i(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px"},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e=this._min=t.min,i=this._max=t.max,t=t.data||[],n=t.length,o=1-this._blur;n--;){var r=t[n],a=r.x,l=r.y,c=r.radius,u=Math.min(r.value,i),h=a-c,d=l-c,m=this.shadowCtx,p;this._templates[c]?p=this._templates[c]:this._templates[c]=p=s(c,o),m.globalAlpha=(u-e)/(i-e),m.drawImage(p,h,d),h<this._renderBoundaries[0]&&(this._renderBoundaries[0]=h),d<this._renderBoundaries[1]&&(this._renderBoundaries[1]=d),h+2*c>this._renderBoundaries[2]&&(this._renderBoundaries[2]=h+2*c),d+2*c>this._renderBoundaries[3]&&(this._renderBoundaries[3]=d+2*c)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],i=this._renderBoundaries[2]-t,s=this._renderBoundaries[3]-e,n=this._width,o=this._height,r=this._opacity,a=this._maxOpacity,l=this._minOpacity,c=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),t+i>n&&(i=n-t),e+s>o&&(s=o-e);for(var u=this.shadowCtx.getImageData(t,e,i,s),h=u.data,d=h.length,m=this._palette,p=3;p<d;p+=4){var f=h[p],g=4*f;if(g){var v;v=r>0?r:f<a?f<l?l:f:a,h[p-3]=m[g],h[p-2]=m[g+1],h[p-1]=m[g+2],h[p]=c?m[g+3]:v}}u.data=h,this.ctx.putImageData(u,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e,i=this.shadowCtx,s=i.getImageData(t.x,t.y,1,1),n=s.data[3],o=this._max,r=this._min;return e=Math.abs(o-r)*(n/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},e}(),n=function t(){var i=!1;return"canvas2d"===e.defaultRenderer&&(i=s),i}(),o={merge:function(){for(var t={},e=arguments.length,i=0;i<e;i++){var s=arguments[i];for(var n in s)t[n]=s[n]}return t}},r=function t(){function s(){var t=this._config=o.merge(e,arguments[0]||{});if(this._coordinator=new r,t.plugin){var s=t.plugin;if(!e.plugins[s])throw new Error("Plugin '"+s+"' not found. Maybe it was not registered.");var l=e.plugins[s];this._renderer=new l.renderer(t),this._store=new l.store(t)}else this._renderer=new n(t),this._store=new i(t);a(this)}var r=function t(){function e(){this.cStore={}}return e.prototype={on:function(t,e,i){var s=this.cStore;s[t]||(s[t]=[]),s[t].push(function(t){return e.call(i,t)})},emit:function(t,e){var i=this.cStore;if(i[t])for(var s=i[t].length,n=0;n<s;n++){var o=i[t][n];o(e)}}},e}(),a=function(t){var e=t._renderer,i=t._coordinator,s=t._store;i.on("renderpartial",e.renderPartial,e),i.on("renderall",e.renderAll,e),i.on("extremachange",function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})}),s.setCoordinator(i)};return s.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=o.merge(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},s}();return{create:function(t){return new r(t)},register:function(t,i){e.plugins[t]=i}}}),sumo.define("heatmaps/heatmaps",["jquery","underscore","sumome-lib","lib/heatmaps","jquery.displayrules","jquery.drags","jquery.resizes"],function(t,e,i,s){var n=function t(e){var i=e.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i.join(".")},o=function t(e,i){return Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y))<i.r},r=function t(e,i){return e.x>i.x1&&e.x<i.x2&&e.y>i.y1&&e.y<i.y2},a=function t(e,i){return Math.sqrt((e.x-i.x)*(e.x-i.x)+(e.y-i.y)*(e.y-i.y))},l=function e(i,s){u.containerEl.css("left","100%");var n=document.elementFromPoint(i,s);return u.containerEl.css("left",""),t(n).getSelector()[0]},c=function t(e,i,s){Array.isArray(i)||(i=[i]);var n=s?-1:1;return e.sort(function(t,e){var s=t[i[0]],o=e[i[0]],r=s<o?-1*n:s>o?1*n:0;if(0==r&&i[1]){s=t[i[1]];var o=e[i[1]];r=s<o?-1*n:s>o?1*n:0}return r})},u={isShown:!1,isRecording:!1,currentData:null,reopenApp:!1,currentCampaign:null,elementData:null,lastPagePos:null,countsEnabled:!0,elementListShowing:!1,elementListHovered:!1,controlsHovered:!1,noAnimationTimer:null,selectedElements:{},activeClickLabelSelector:null,theme:{backgroundColor:"rgba(3, 3, 16, .3)",gradient:{0:"#03030f",.125:"#1f1159",.25:"#952a66",.375:"#b73b50",.5:"#d6693f",.625:"#e8a736",.75:"#efd455",.875:"#fbfbc4"}},load:function e(i){u.$control&&u.$control.addClass("sumome-heatmaps-control-show"),u.containerEl&&t('<div class="sumome-heatmaps-loading" />').html("Loading heat map data...<br />Press ESC to exit").appendTo(u.containerEl),t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:u.api.properties.sumoUrl+"/apps/heatmaps/load",data:{site_id:u.api.properties.siteId,path:window.location.pathname+window.location.search,campaign_id:i||null,geoLocation:this.api.properties.geoLocation,pageViews:this.api.properties.views,userAgent:navigator.userAgent},success:function e(i){i.success?(u.currentData=i.data,u.theme=i.theme,u.currentCampaign=i.campaigns,u.$elementListWrapper&&u.$elementListWrapper.css("height",""),u.refresh(),u.updateControl()):(u.currentData=null,u.currentCampaign=null,u.updateControl()),t(".sumome-heatmaps-loading").remove(),u.$control&&setTimeout(function(){t(".sumome-heatmaps-control").removeClass("sumome-heatmaps-control-show")},1e4)}})},refresh:function t(){u.findElements(u.currentData)},findElements:function e(i){var s=Number.NaN,n=Number.NaN,o=[],a={};if(i)for(var l=0;l<i.length;l++){var h,d=i[l].selector;if(!(["html","body"].indexOf(d)>=0)){try{h=t(d)}catch(t){continue}if(h.length)if(h.is(":visible")){if(!h.hasClass("sumome-heatmap-canvas")&&(a[d]?(a[d].count+=parseInt(i[l].value),a[d].clicks=a[d].count):(a[d]={element:h[0],selector:d,clicks:parseInt(i[l].value),count:parseInt(i[l].value),left:h.offset().left,top:h.offset().top,width:h.outerWidth(),height:h.outerHeight(),visible:!0},a[d].rectangle={x1:h.offset().left,x2:h.offset().left+h.outerWidth(),y1:h.offset().top,y2:h.offset().top+h.outerHeight()}),null!==h)){var m=u.findPosForElement(h,i[l].x,i[l].y);if(m){var p=parseInt(i[l].value,10);s=isNaN(s)?p:Math.min(p,s),n=isNaN(n)?p:Math.max(n,p);var f={x:Math.round(m.left),y:Math.round(m.top),value:p};o.push(f)}}}else a[d]={element:null,selector:d,clicks:parseInt(i[l].value),count:parseInt(i[l].value),top:99998,visible:!1};else a[d]={element:null,selector:d,clicks:parseInt(i[l].value),count:parseInt(i[l].value),top:99999,visible:!1}}}u.elementData={min:0,max:n,data:o,elements:[]};for(var d in a)u.elementData.elements.push(a[d]);a=u.elementData.elements;for(var l=0;l<a.length;l++)if(a[l].visible)for(var g=0;g<a.length;g++){var m={x:a[g].left+a[g].width/2,y:a[g].top+a[g].height/2},v=a[l].width-a[g].width>=0&&a[l].height-a[g].height>=0;l!=g&&a[g].visible&&v&&r(m,a[l].rectangle)&&(a[l].count+=a[g].clicks)}c(a,"count",!0);for(var l=0;l<a.length;l++)a[l].rank=l+1;u.redraw(),u.renderElementsList()},redraw:function e(){if(u.elementData&&u.map){for(var i=t(window).scrollTop(),s=t(window).scrollLeft(),n=t(window).height(),o={min:u.elementData.min,max:u.elementData.max,data:[]},r=0;r<u.elementData.data.length;r++){var a=u.elementData.data[r].x-s,l=u.elementData.data[r].y-i;l<0||l>n||o.data.push({x:a,y:l,value:u.elementData.data[r].value})}u.map.setData(o),u.map.configure(u.theme)}},toggle:function t(){u.isShown?u.hide():u.show()},hide:function e(){t(window).off(".sumome-heatmaps-widget"),t(document).off(".sumome-heatmaps-widget"),u.containerEl.remove(),u.containerEl=null,u.map=null,u.isShown=!1,u.countsEnabled=!0,u.elementListShowing=!1,u.elementListHovered=!1,u.controlsHovered=!1,u.selectedElements={},u.api.emit("showControl"),u.reopenApp&&(t(document.body).find(".sumome-heatmaps").remove(),t(document.body).find(".s.u.m.o.me.sumome-react-modal-container").fadeIn(),t(document.body).css({overflow:"hidden"}),t(document.documentElement).css({overflow:"hidden"}),u.api.on("2c40add5-3570-45d7-8212-8fc2942f7f74/app/started",function(t){u.api.off("2c40add5-3570-45d7-8212-8fc2942f7f74/app/started"),u.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/app/route","campaigns")}),u.reopenApp=!1)},show:function i(n){if(t(document.body).find(".s.u.m.o.me.sumome-react-modal-container").fadeOut(),t(document.body).css({overflow:"auto"}),t(document.documentElement).css({overflow:"auto"}),n&&(u.reopenApp=!0),u.isShown)return void u.load(n);u.isShown=!0,u.api.emit("hideControl")
;var o=t("<div />").addClass("sumome-heatmaps").appendTo(document.body);u.$control=t('<div class="sumome-heatmaps-control sumome-heatmaps-control-show" />'),u.$close=t('<a class="sumome-heatmaps-close">&#x2715;</a>').appendTo(u.$control),u.$title=t('<span class="sumome-heatmaps-title" />').text("Loading...").appendTo(u.$control),u.$clicks=t('<span class="sumome-heatmaps-clicks" />').text(" ").appendTo(u.$control),u.$prev=t('<a class="sumome-heatmaps-prev sumome-heatmaps-disabled" />').appendTo(u.$control).text("Previous Campaign").attr("title","Previous Campaign").click(u.previous),u.$stop=t('<a class="sumome-heatmaps-stop sumome-heatmaps-disabled" />').appendTo(u.$control).text("STOP").attr("title","Stop Campaign").click(u.stop),u.$record=t('<a class="sumome-heatmaps-record sumome-heatmaps-disabled" />').appendTo(u.$control).text("RECORD").css("display","none").attr("title","Record New Campaign").click(u.record),u.$next=t('<a class="sumome-heatmaps-next sumome-heatmaps-disabled" />').appendTo(u.$control).text("Next Campaign").attr("title","Next Campaign").click(u.next),u.$counts=t('<a class="sumome-heatmaps-counts sumome-heatmaps-disabled sumome-heatmaps-counts-on" />').appendTo(u.$control).text("HIDE COUNTS").attr("title","Toggle Click Counts").click(u.toggleCounts),u.$control.append(t("<br />")),u.$listToggle=t('<a class="sumome-heatmaps-list-toggle sumome-heatmaps-disabled" />').appendTo(u.$control).attr("title","Toggle Element List").click(u.toggleElementList),u.$listToggleTitle=t('<span class="sumome-heatmaps-list-toggle-title" />').appendTo(u.$listToggle).text("SHOW ELEMENT LIST"),u.$wrapper=t('<div class="sumome-heatmaps-control-wrapper" />'),u.$control.appendTo(u.$wrapper),u.$thermometer=t('<div class="sumome-heatmaps-thermometer" />'),u.$thermCount=t('<span class="sumome-heatmaps-thermometer-count" />').appendTo(u.$thermometer),u.$thermStem=t('<span class="sumome-heatmaps-thermometer-stem" />').appendTo(u.$thermometer),u.$thermometer.appendTo(o),u.$elementListWrapper=t('<div class="sumome-heatmaps-element-list-wrapper" />'),u.$elementListTitle=t('<div class="sumome-heatmaps-element-list-title" />').text("CLICKED ELEMENT LIST").appendTo(u.$elementListWrapper),u.$elementListClose=t('<a class="sumome-heatmaps-element-list-close">&#x2715;</a>').appendTo(u.$elementListWrapper),u.$elementListBody=t('<div class="sumome-heatmaps-element-list-body" />').appendTo(u.$elementListWrapper),u.$elementListTable=t('<table class="sumome-heatmaps-element-list-table"><thead><tr><th data-sort="rank">#</th><th data-sort="selector">element name</th><th data-sort="count">clicks</th></tr></thead></table>').appendTo(u.$elementListBody),u.$elementListItems=t('<tbody class="sumome-heatmaps-element-list-items" />').appendTo(u.$elementListTable),u.$elementListCorner=t('<a class="sumome-heatmaps-element-list-corner"></a>').appendTo(u.$elementListWrapper),u.$elementListWrapper.appendTo(u.$wrapper),u.$elementListWrapper.drags({handle:".sumome-heatmaps-element-list-title"}),u.$elementListWrapper.resizes({handle:u.$elementListCorner,cursor:"nwse-resize",min_width:250,min_height:85,onResized:t.proxy(function(){var e=u.$elementListTable.height()+25+2,i=t(window).height()-parseInt(u.$elementListWrapper.css("top").replace("px"));e>i&&(e=i);var s=t(window).width()-parseInt(u.$elementListWrapper.css("left").replace("px"));u.$elementListWrapper.css({"max-height":e,"max-width":s})},this)}),u.$elementListTitle.dblclick(function(e){var i=u.$elementListTable.height()+25+2,s=t(window).height();u.$elementListWrapper.css({top:"0px",left:"0px",width:"1px",height:i,"max-height":s})}),u.$elementListClose.click(function(t){u.toggleElementList(t,!0)}),u.$elementListWrapper.on("mouseenter",function(){u.elementListHovered=!0}),u.$elementListWrapper.on("mouseleave",function(){u.elementListHovered=!1}),u.$control.on("mouseenter",function(){u.controlsHovered=!0}),u.$control.on("mouseleave",function(){u.controlsHovered=!1}),u.$clicked=t('<div class="sumome-heatmaps-clicked sumome-heatmaps-clicked-animate" />'),u.$clickedLabel=t('<span class="sumome-heatmaps-clicked-label" />').appendTo(u.$clicked).text(".selector"),u.$clickedSelected=t('<div class="sumome-heatmaps-clicked-selected" />').appendTo(o),u.$clicked.click(u.selectActiveElClickEvent),u.$thermometer.click(u.selectActiveElClickEvent),u.$elementListTable.find("th").click(function(e){var i=0;t(this).hasClass("sumome-heatmaps-element-list-tab-sort-down")&&(i=1),t(this).hasClass("sumome-heatmaps-element-list-tab-sort-up")&&(i=-1),t(this).parent().find("th").removeClass("sumome-heatmaps-element-list-tab-sort-up").removeClass("sumome-heatmaps-element-list-tab-sort-down");var s=t(this).data("sort");if(s){var n=!1;i>0&&(n=!0),"count"!=s&&"rank"!=s||0!=i||(n=!0),t(this).addClass(n?"sumome-heatmaps-element-list-tab-sort-up":"sumome-heatmaps-element-list-tab-sort-down"),c(u.elementData.elements,s,n),u.renderElementsList()}}),u.$clicked.appendTo(o),u.$wrapper.appendTo(o),u.$close.click(function(t){t.preventDefault(),u.hide()}),u.containerEl=o;var r={container:o.get(0)};t.extend(r,u.theme);var a=s.create(r);o.css({position:"fixed"}),u.map=a,u.load(n),o.on("mousemove",e.debounce(function(t){u.refreshClickedLabel(t)},150)),o.on("mousemove",e.debounce(function(t){u.refreshThermometer(t)},1)),t(window).on("resize.sumome-heatmaps-widget",e.debounce(function(){var t=0,e=0;u.containerEl&&(t=u.containerEl.width(),e=u.containerEl.height()),t&&e&&u.map._renderer.setDimensions(t,e),u.refresh(),u.refreshClickedLabel(),u.refreshSelectedLabels()},300)),t(window).on("scroll.sumome-heatmaps-widget",e.debounce(function(){u.redraw(),u.refreshClickedLabel(),u.refreshSelectedLabels()},1)),t(document).on("keyup.sumome-heatmaps-widget",function(t){27==t.which&&u.hide()})},renderElementsList:function e(){var i=55+30*u.elementData.elements.length+2,s;u.isShown||u.show(),u.$elementListWrapper&&u.$elementListWrapper[0]&&u.$elementListWrapper[0].hasAttribute("style")&&u.$elementListWrapper.attr("style").replace("max-height:","").indexOf("height:")>-1&&u.$elementListWrapper.height()<=i||u.$elementListWrapper.css("height",i),u.$elementListItems.empty(),u.elementData.elements.forEach(function(e){function i(i,n){var o=t(e.selector),r=o.offset().top,a=o.height(),l=r+a,c=t(window).height(),h;h=a<c?r-(c/2-a/2):r;var d=250,m=t(window).scrollTop(),p=t(window).height()+m;m<=r&&p>=r&&m<=l&&p>=l&&(d=0),d&&t("html, body").stop().animate({scrollTop:h},d),clearTimeout(s),s=setTimeout(function(){u.showClickedWrapper(e),n&&n()},d)}var n=e.selector in u.selectedElements,o=t('<tr class="sumome-heatmaps-element-list-item'+(n?" sumome-heatmaps-element-list-item-selected":"")+'" selector="'+e.selector+'"><td>'+e.rank+'</td><td class="sumome-heatmaps-element-list-item-selector">'+e.selector+"</td><td>"+e.count+"</td></tr>"),r=500,a;e.visible?(o.on("click",function(s){clearTimeout(a);var n=Object?Object.keys(u.selectedElements).length:0,o=e.selector in u.selectedElements&&1==n;if(!(s.shiftKey||s.ctrlKey||s.metaKey||o)){u.$clickedSelected.empty();var r="sumome-heatmaps-element-list-item-selected";t("."+r).removeClass(r),u.selectedElements={}}if(e.selector in u.selectedElements&&u.selectedElements[e.selector])return t(this).removeClass("sumome-heatmaps-element-list-item-selected"),t("#"+u.selectedElements[e.selector].id).remove(),void delete u.selectedElements[e.selector];t(this).addClass("sumome-heatmaps-element-list-item-selected"),i(s,function(){u.setSelectedElEvent(e.selector)})}),o.on("mouseenter",function(){clearTimeout(a),a=setTimeout(i,500)}),o.on("mouseleave",function(){clearTimeout(a)})):(o.addClass("sumome-heatmaps-element-list-item-invisible"),o.attr("title","Element is not visible"),o.find(".sumome-heatmaps-element-list-item-selector").text(e.selector+" [not visible]")),u.$elementListItems.append(o)}),u.$elementListWrapper.attr("style").indexOf("left: calc(50%")>=0&&u.$elementListWrapper.css("left","calc(50% - "+u.$elementListWrapper.width()/2+"px)")},findPosForElement:function t(e,i,s){var n=e.offset(),o=e.outerWidth(),r=e.outerHeight();return n.top+=r*s,n.left+=o*i,n},toggleCounts:function e(i){t(this).hasClass("sumome-heatmaps-disabled")||(u.countsEnabled?(u.$counts.removeClass("sumome-heatmaps-counts-on"),u.$counts.text("VIEW COUNTS"),u.countsEnabled=!1,u.hideClickedWrapper(),u.$thermometer.css("opacity","0")):(u.$counts.addClass("sumome-heatmaps-counts-on"),u.$counts.text("HIDE COUNTS"),u.countsEnabled=!0))},toggleElementList:function e(i,s){t(this).hasClass("sumome-heatmaps-disabled")||(u.elementListShowing||s?(u.$listToggle.removeClass("sumome-heatmaps-list-toggle-on"),u.$listToggleTitle.text("SHOW ELEMENT LIST"),u.$elementListWrapper.removeClass("sumome-heatmaps-element-list-wrapper-showing"),u.elementListShowing=!1):(u.$elementListWrapper.css("max-width",parseInt(t(window).width()/2)),u.$elementListWrapper.css({left:"calc(50% - "+u.$elementListWrapper.width()/2+"px)",top:"","max-height":""}),u.$listToggle.addClass("sumome-heatmaps-list-toggle-on"),u.$listToggleTitle.text("HIDE ELEMENT LIST"),u.$elementListWrapper.addClass("sumome-heatmaps-element-list-wrapper-showing"),u.elementListShowing=!0))},previous:function e(){if(!t(this).hasClass("sumome-heatmaps-disabled")){var i=u.currentCampaign;i&&i.previous&&u.load(i.previous)}},next:function e(){if(!t(this).hasClass("sumome-heatmaps-disabled")){var i=u.currentCampaign;i&&i.next&&u.load(i.next)}},stop:function e(){t(this).hasClass("sumome-heatmaps-disabled")||t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:u.api.properties.sumoUrl+"/apps/heatmaps/stop",data:{site_id:u.api.properties.siteId,path:window.location.pathname+window.location.search},success:function t(e){e.success&&(u.load(),u.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/stop"))}})},record:function e(){t(this).hasClass("sumome-heatmaps-disabled")||t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:u.api.properties.sumoUrl+"/apps/heatmaps/start",data:{site_id:u.api.properties.siteId,path:window.location.pathname+window.location.search},success:function t(e){e.success&&(u.load(),u.api.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/start"))}})},autoRecord:function e(i,s,n){null==i&&(i=u.api.properties.siteId),null==s&&(s=u.api.properties.sumoUrl),t(this).hasClass("sumome-heatmaps-disabled")||t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:s+"/apps/heatmaps/start/auto",data:{site_id:i,path:window.location.pathname+window.location.search},success:n})},updateControl:function t(){var e=u.currentCampaign;if(u.$control&&u.$title){if(e&&e.current){var i="";if(e.current.started_at){var s=new Date(e.current.started_at);i=s.toLocaleDateString()+" "+s.toLocaleTimeString()}if(e.current.finished_at){var o=new Date(e.current.finished_at);i+=" - "+o.toLocaleDateString()+" "+o.toLocaleTimeString()}else i+=" - ACTIVE CAMPAIGN";u.$title.text(i),u.$clicks.html('<span class="sumome-heatmaps-clicks-count">'+n(e.current.total_clicks)+"</span> CLICK"+(1==e.current.total_clicks?"":"S")+" RECORDED")}else u.$title.text(""),u.$clicks.text("");u.$prev.toggleClass("sumome-heatmaps-disabled",!(null!=e&&null!=e.previous)),u.$stop.toggleClass("sumome-heatmaps-disabled",0==u.isRecording),u.$record.toggleClass("sumome-heatmaps-disabled",1==u.isRecording),u.isRecording?(u.$record.hide(),u.$stop.show()):(u.$stop.hide(),u.$record.show()),u.$next.toggleClass("sumome-heatmaps-disabled",!(null!=e&&null!=e.next)),u.$counts.removeClass("sumome-heatmaps-disabled");var r=u.elementData&&"elements"in u.elementData&&u.elementData.elements.length>0;u.$listToggle.toggleClass("sumome-heatmaps-disabled",!r),r||u.toggleElementList(null,!0),u.selectedElements={},u.$clickedSelected.empty()}},setRecording:function t(e){u.isRecording=e,u.isShown&&u.updateControl()},refreshClickedLabel:function e(i){var s=t(window).scrollTop(),n=t(window).scrollLeft(),o=t(window).height(),a=null,c=null,h=!1;if(i?(a={x:i.clientX,y:i.clientY},u.lastPagePos=a,h=!0):a=u.lastPagePos,(c={x:a.x+n,y:a.y+s})&&u.countsEnabled&&u.elementData&&!u.elementListHovered&&!u.controlsHovered&&u.containerEl){for(var d=!1,m=u.elementData.elements,p=[],f=0,g=0;g<m.length;g++)m[g].visible&&r(c,m[g].rectangle)&&p.push(m[g]);if(p.length>0){for(var v=0,g=0;g<p.length;g++){if(l(a.x,a.y)==p[g].selector){v=g;break}}var b=p[v];p.pop(v),p.unshift(b),!h&&u.$clicked.hasClass("sumome-heatmaps-clicked-animate")&&(u.$clicked.removeClass("sumome-heatmaps-clicked-animate"),window.clearTimeout(u.noAnimationTimer),u.noAnimationTimer=setTimeout(function(){u.$clicked.addClass("sumome-heatmaps-clicked-animate")},250)),u.showClickedWrapper(p[0])}else u.hideClickedWrapper()}else u.elementListHovered||u.controlsHovered||u.hideClickedWrapper()},refreshSelectedLabels:function e(i){if(u.selectedElements){var s=t(window).scrollTop(),n=t(window).scrollLeft();for(selector in u.selectedElements){var o=u.selectedElements[selector],r=t("#"+o.id);if(r.length>0){var a=t(o.selector);r.css({top:a.offset().top-s-2,left:a.offset().left-n-2,width:a.outerWidth()+4,height:a.outerHeight()+4})}}}},showClickedWrapper:function e(i){var s=t(window).scrollTop(),o=t(window).scrollLeft(),r=t(window).height(),a=u.currentCampaign,l="current"in a&&a.current?a.current.total_clicks:null,c=(100*i.count/l).toFixed(0),h=i.left-o-2,d=i.top-s-2,m=i.width+4,p=i.height+4,f=r-(d+p);u.$clicked.css("opacity","1"),u.$clicked.css("left",h).css("top",d).css("width",m).css("height",p);var g=n(i.count)+(1==i.count?" click":" clicks");if(l&&(g=g+" ("+c+"%)"),u.$clickedLabel.html('<span class="sumome-heatmaps-clicked-label-name">'+i.selector+'</span><span class="sumome-heatmaps-clicked-label-stat">'+g+"</span>"),u.activeClickLabelSelector=i.selector,d>20||f>20){u.$clickedLabel.removeClass("sumome-heatmaps-clicked-label-mid"),u.$clickedLabel.css("top","");-1*d+r-18>p?u.$clickedLabel.removeClass("sumome-heatmaps-clicked-label-top"):u.$clickedLabel.addClass("sumome-heatmaps-clicked-label-top")}else u.$clickedLabel.removeClass("sumome-heatmaps-clicked-label-top"),u.$clickedLabel.addClass("sumome-heatmaps-clicked-label-mid"),u.$clickedLabel.css("top",-1*d+5)},hideClickedWrapper:function t(){u.$clicked.css("opacity","0"),u.activeClickLabelSelector=null},refreshThermometer:function e(i){var s=t(window).scrollTop(),r=t(window).scrollLeft(),l=t(window).width(),c={x:i.clientX,y:i.clientY},h=!1,d=0;if(u.elementData&&u.countsEnabled&&!u.elementListHovered&&!u.controlsHovered){for(var m=0;m<u.elementData.data.length;m++){var p={x:u.elementData.data[m].x-r,y:u.elementData.data[m].y-s,r:40};if(o(c,p)){h=!0;var f=u.elementData.data[m].value,g=a(c,p).toFixed(2),v=(1-g/45).toFixed(2);g<5&&(v=1),d+=Math.round(f*v)}}if(h){var b=c.y-21,y=c.x-0;u.$thermometer.css("opacity","1"),u.$thermometer.css("left",y).css("top",b),d<=0&&(d=1),u.$thermCount.text(d>1?n(d)+" clicks":"1 click"),y>l-200?(u.$thermometer.addClass("sumome-heatmaps-thermometer-left"),u.$thermometer.css("left","initial").css("right",l-y)):(u.$thermometer.removeClass("sumome-heatmaps-thermometer-left"),u.$thermometer.css("right",""))}else u.$thermometer.css("opacity","0")}else u.$thermometer.css("opacity","0")},setSelectedElEvent:function t(e){var i="sumome-heatmaps-clicked-"+(new Date).getUTCMilliseconds();u.$clicked.clone().removeClass("sumome-heatmaps-clicked-animate").addClass("sumome-heatmaps-clicked-selected").attr("id",i).appendTo(u.$clickedSelected),u.selectedElements[e]={id:i,selector:e}},selectActiveElClickEvent:function e(i){var s=u.activeClickLabelSelector;if(s){var n=Object?Object.keys(u.selectedElements).length:0,o=s in u.selectedElements&&1==n;if(!(i.shiftKey||i.ctrlKey||i.metaKey||o)){u.$clickedSelected.empty();var r="sumome-heatmaps-element-list-item-selected";t("."+r).removeClass(r),u.selectedElements={}}if(s in u.selectedElements&&u.selectedElements[s])return t(".sumome-heatmaps-element-list-item[selector='"+s+"']").removeClass("sumome-heatmaps-element-list-item-selected"),t("#"+u.selectedElements[s].id).remove(),void delete u.selectedElements[s];t(".sumome-heatmaps-element-list-item[selector='"+s+"']").addClass("sumome-heatmaps-element-list-item-selected"),u.setSelectedElEvent(u.activeClickLabelSelector)}}};return u}),sumo.define("jquery.similar",["jquery"],function(t){String.prototype.levenshtein=function(t){var e=new Array,i=t,s=this,n=i.length,o=this.length,r,a,l=function(t,e,i){var s=t;return e<s&&(s=e),i<s&&(s=i),s};if(0!=n&&0!=o){for(var r=0;r<=n;r++)e[r]=new Array;for(r=0;r<=n;r++)e[r][0]=r;for(a=0;a<=o;a++)e[0][a]=a;for(r=1;r<=n;r++){var c=i.charAt(r-1);for(a=1;a<=o;a++){var u=s.charAt(a-1);e[r][a]=c==u?e[r-1][a-1]:1+l(e[r-1][a-1],e[r][a-1],e[r-1][a])}}return e[n][o]}},t.fn.textExcept=function(e){if(!this.get(0)||-1!=t.inArray(this.get(0).nodeName.toLowerCase(),["script"]))return"";try{return t(this).contents().filter(function(){return 1!=t(this).is(e)}).map(function(){return 1==this.nodeType&&-1==t.inArray(this.nodeName.toLowerCase(),["script"])?t(this).textExcept(e):3==this.nodeType?t.trim(this.data):void 0}).get().join("")}catch(t){}return""},t.expr[":"].similar=t.expr.createPseudo(function(e){return function(i){var s=t(i).textExcept(".sumome-leads-edit").replace(/[^0-9a-zA-Z\s.,]/g,"").substr(0,128);return s&&s.levenshtein(e.substr(0,128))<5}})}),sumo.define("es6!services/heatmaps/index",["jquery","heatmaps/heatmaps","selectorator","jquery.similar"],function(t,e){return function(i){var s=!1,n=!1,o=0,r=[],a=Date.parse(new Date),l=function t(e){for(var i=(new Date).getTime();(new Date).getTime()<i+e;);},c=function e(){if(r.length){var s=window.location.pathname+window.location.search,n=encodeURIComponent(JSON.stringify(r)),o=t("<img />").css({display:"none"}).attr("src",i.properties.sumoUrl+"/apps/heatmaps/click?clicks="+n+"&site_id="+i.properties.siteId+"&path="+s);o.on("error",function(){t(this).remove()}),o.on("load",function(){t(this).remove()}),t(document.body).append(o),r=[],a=Date.parse(new Date)}},u=function e(i){if(1==i.which){var s,n,o;if(document.elementFromPoint)n=document.elementFromPoint(i.clientX,i.clientY);else if(document.caretPositionFromPoint)s=document.caretPositionFromPoint(i.clientX,i.clientY),n=s.offsetNode,o=s.offset;else{if(!document.caretRangeFromPoint)return;s=document.caretRangeFromPoint(i.clientX,i.clientY),n=s.startContainer,o=s.startOffset}if(t(n).parents("svg").length>=1&&(n=t(n).parents("svg")[0]),!(t(n).closest(".sumome-control").length>0||t(n).closest(".sumome-heatmaps").length>0)&&(o=t(n).offset())&&"left"in o&&"top"in o){o.left=i.pageX-o.left,o.top=i.pageY-o.top;var u=.05,h=o.left/t(n).outerWidth(),d=o.top/t(n).outerHeight();h=(.05*Math.round(h/.05)).toFixed(2),d=(.05*Math.round(d/.05)).toFixed(2);var m={left:h,top:d},p=t(n).getSelector()[0];if(p&&!isNaN(m.left)&&!isNaN(m.top)&&isFinite(m.left)&&isFinite(m.top)){var f={selector:p,x:m.left,y:m.top,_:Math.random()};r.push(f);var g=t(i.target).is("a")&&t(i.target).attr("href")&&0!==t(i.target).attr("href").indexOf("#")&&0!==t(i.target).attr("href").toLowerCase().indexOf("javascript"),v=t(i.target).parents("a").length>0&&t(i.target).parents("a").attr("href")&&0!==t(i.target).parents("a").attr("href").indexOf("#")&&0!==t(i.target).parents("a").attr("href").indexOf("javascript"),b=!(!g||!t(i.target).hasClass("no-delay"))||!(!v||!t(i.target).parents("a").hasClass("no-delay")),y=Date.parse(new Date)-a;!g&&!v||b?(y>=1e4||r.length>=5)&&c():(c(),l(500))}}}},h=function e(){n||(t(window).unload(function(){c()}),t(document).on("mousedown.sumome-heatmaps",u))},d=function e(){n&&(t(document).off("mousedown.sumome-heatmaps"),n=!1)},m=function n(){t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:i.properties.sumoUrl+"/apps/heatmaps/status",data:{site_id:i.properties.siteId,user_id:i.properties.user,path:window.location.pathname+window.location.search},success:function n(r){var a=!0;r.success?(s=r.isRecording,o=r.count,a=r.track_all_users):s=!1,i.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:s,campaignCount:o});var l=!(!i.properties.geoLocation||!i.properties.geoLocation.ctry)&&i.properties.geoLocation.ctry,c=i.properties.views?i.properties.views:1;r.hasHeatmaps&&r.count<=0&&r.display_rules.length>0&&t.isCurrentUrlAllowed(r.display_rules,null,l,c)?e.autoRecord(i.properties.siteId,i.properties.sumoUrl,function(t){t.success&&(s=!0,o=1,i.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:s,campaignCount:o}),h())}):s&&(1==a||0==a&&null==i.properties.user)?h():d()}})};return{init:function t(e,n){i.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/checkStatus",function(){i.emit("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/status",{recording:s,campaignCount:o})}),i.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/start",function(){m()}),i.on("2c40add5-3570-45d7-8212-8fc2942f7f74/campaign/stop",function(){m()}),m(),n()},destroy:function t(e){e()}}}}),sumo.define("color",[],function(){return{lightOrDark:function(t){var e,i,s,n;return t.toHex&&(t="#"+t.toHex()),t.match(/^rgb/)?(t=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),e=t[1],s=t[2],i=t[3]):(t=+("0x"+t.slice(1).replace(t.length<5&&/./g,"$&$&")),e=t>>16,s=t>>8&255,i=255&t),n=Math.sqrt(e*e*.299+s*s*.587+i*i*.114),n>127.5?"light":"dark"},whiteOrBlack:function(t){return"light"==this.lightOrDark(t)?"black":"white"},shadeColor:function(t,e){t=t.toString();var i=parseInt(t.slice(1),16),s=Math.round(2.55*e),n=(i>>16)+s,o=(i>>8&255)+s,r=(255&i)+s;return"#"+(16777216+65536*(n<255?n<1?0:n:255)+256*(o<255?o<1?0:o:255)+(r<255?r<1?0:r:255)).toString(16).slice(1)},RGBColor:function(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),255]}}],i=0;i<e.length;i++){var s=e[i].re,n=e[i].process,o=s.exec(t);o&&(channels=n(o),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.a=channels[3],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0||isNaN(this.a)?0:this.a>255?255:this.a,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i}},hexToRGBA:function(t,e){var i=new this.RGBColor(t);return i.a=e||1,i.toRGBA()}}}),sumo.define("plugins/text!image-sharer/templates/sharer_popup.html",[],function(){return'<div class="sumome-image-sharer-popup-form">\n  <div class="sumome-form">\n    <div class="sumome-row" id="sumome-image-sharer">\n      <div class="sumome-image-sharer-preloader">\n        <img src="{{preloader}}" />\n      </div>\n    </div>\n  </div>\n</div>\n'}),sumo.define("jquery.timer",["jquery"],function(t){"use strict";if(null===t)throw"jQuery is not defined";var e=function(e){var i={timerCallback:function(){},startCallback:function(){},pauseCallback:function(){},resumeCallback:function(){},stopCallback:function(){},finishCallback:function(){},interval:1e3,timeout:!1,useSetTimeout:!0};e.interval=parseInt(e.interval,10),e.interval=isNaN(e.interval)?i.interval:e.interval,e.timeout=parseInt(e.timeout,10),e.timeout=isNaN(e.timeout)?i.timeout:e.timeout,this._options=t.extend(i,e),this._timerFunction=this._options.useSetTimeout?"Timeout":"Interval",this._timerID=null,this._startTime=0,this._pausedInterval=-1,this._passedTime=0,this._status="stopped"};e.prototype={_activate:function(){var t=this;this._startTime=(new Date).getTime(),this._timerID=window["set"+this._timerFunction](function(){t._passedTime=(new Date).getTime()-t._startTime,t._options.timeout&&t._passedTime>=t._options.timeout?t._finish():t._options.timerCallback()},this._options.interval)},_finish:function(){window["clear"+this._timerFunction](this._timerID),this._startTime=0,this._pausedInterval=-1,this._passedTime=0,this._timerID=null,this._options.finishCallback(),this._status="finished"},start:function(){0===this._startTime&&(this._activate(),this._options.startCallback(),this._status="running")},pause:function(){0!==this._startTime&&null!==this._timerID&&(window["clear"+this._timerFunction](this._timerID),this._passedTime=(new Date).getTime()-this._startTime,this._pausedInterval=this._passedTime%this._options.interval,this._timerID=null,this._options.pauseCallback(),this._status="paused")},resume:function(t){if(t=void 0!==t&&t,-1!==this._pausedInterval){if(t){var e=this;setTimeout(function(){e._options.timerCallback(),e._options.useSetTimeout||e._activate()},this._options.interval-this._pausedInterval)}else this._activate();this._options.resumeCallback(),this._status="running"}},stop:function(){0!==this._startTime&&null!==this._timerID&&(this._finish(),this._options.stopCallback(),this._status="stopped")},kill:function(){null!==this._timerID&&(window["clear"+this._timerFunction](this._timerID),this._startTime=0,this._pausedInterval=-1,this._timerID=null,this._status="stopped")},status:function(){return this._status}},t.timer=function(i,s,n,o){if(void 0===i)return t.timer["#LIST#"];if("string"!=typeof i||!i.match(/^[a-zA-Z][a-zA-Z_0-9]*$/))throw"Invalid timer name (it must start with a letter and cannot contain other characters than letters, numbers and underscore";if(void 0===s)return t.timer[i];if(null===s){if(t.timer[i]){t.timer[i].kill(),delete t.timer[i];var r=t.timer["#LIST#"].indexOf(i);r>-1&&t.timer["#LIST#"].splice(r,1)}return!0}if("function"!=typeof s)throw"Please provide a callback function for setTimer/setInterval function";if(n=parseInt(n,10),isNaN(n)||n<=0)throw"Please provide an interval for timer (in seconds)";return o=o||{},o.timerCallback=s,o.interval=n,t.timer[i]=new e(o),t.timer["#LIST#"].push(i),t.timer[i]},t.timer["#LIST#"]=[]}),sumo.define("jquery.naturalwidth",["jquery"],function(t){for(var e=["Width","Height"],i;i=e.pop();)!function(e,i){t.fn[e]=e in new Image?function(){return this[0][e]}:function(){var t=this[0],e,s;return"img"===t.tagName.toLowerCase()&&(e=new Image,e.src=t.src,s=e[i]),s}}("natural"+i,i.toLowerCase())}),sumo.define("jquery.nearest",["jquery","jquery.drags","jquery.resizes","jquery.ui.position"],function(t){function e(e,s,n){e||(e="div");var o=t(s.container),r=o.offset()||{left:0,top:0},a=[o.width()||0,o.height()||0],l={x:[r.left,r.left+a[0]],y:[r.top,r.top+a[1]],w:[0,a[0]],h:[0,a[1]]},c,u,h;for(c in l)l.hasOwnProperty(c)&&(h=i.exec(s[c]))&&(u=l[c],s[c]=(u[1]-u[0])*h[1]/100+u[0]);!1===s.sameX&&!1===s.checkHoriz&&(s.sameX=!s.checkHoriz),!1===s.sameY&&!1===s.checkVert&&(s.sameY=!s.checkVert);var d=o.find(e),m=[],p=!!s.furthest,f=!s.sameX,g=!s.sameY,v=!!s.onlyX,b=!!s.onlyY,y=p?0:1/0,w=parseFloat(s.x)||0,x=parseFloat(s.y)||0,_=parseFloat(w+s.w)||w,k=parseFloat(x+s.h)||x,C=parseFloat(s.tolerance)||0,S=!!t.fn.each2,T=Math.min,E=Math.max;!s.includeSelf&&n&&(d=d.not(n)),C<0&&(C=0),d[S?"each2":"each"](function(e,i){var s=S?i:t(this),n=s.offset(),o=n.left,r=n.top,a=s.outerWidth(),l=s.outerHeight(),c=o+a,u=r+l,h=E(o,w),d=T(c,_),$=E(r,x),I=T(u,k),P=d>=h,O=I>=$,A,L,B,D;(f&&g||!f&&!g&&P&&O||f&&O||g&&P||f&&v||g&&b)&&(A=P?0:h-d,L=O?0:$-I,B=v||b?v?A:L:P||O?E(A,L):Math.sqrt(A*A+L*L),(D=p?B>=y-C:B<=y+C)&&(y=p?E(y,B):T(y,B),m.push({node:this,dist:B})))});var $=m.length,I=[],P,O,A,L;if($)for(p?(P=y-C,O=y):(P=y,O=y+C),A=0;A<$;A++)L=m[A],L.dist>=P&&L.dist<=O&&I.push(L.node);return I}var i=/^([\d.]+)%$/;t.each(["nearest","furthest","touching"],function(i,s){var n={x:0,y:0,w:0,h:0,tolerance:1,container:document,furthest:"furthest"==s,includeSelf:!1,sameX:"touching"===s,sameY:"touching"===s,onlyX:!1,onlyY:!1};t[s]=function(i,s,o){if(!i||void 0===i.x||void 0===i.y)return t([]);var r=t.extend({},n,i,o||{});return t(e(s,r))},t.fn[s]=function(i,s){if(!this.length)return this.pushStack([]);var o;if(i&&t.isPlainObject(i))return o=t.extend({},n,i,s||{}),this.pushStack(e(this,o));var r=this.offset(),a={x:r.left,y:r.top,w:this.outerWidth(),h:this.outerHeight()};return o=t.extend({},n,a,s||{}),this.pushStack(e(i,o,this))}})}),sumo.define("es6!services/image-sharer/index",["jquery","URI","color","articles","plugins/text!image-sharer/templates/sharer_popup.html","vex","twitter-text","jquery.timer","jquery.naturalwidth","jquery.nearest","jquery.displayrules"],function(t,e,i,s,n,o,r,a){t.expr[":"].invisible=t.expr.createPseudo(function(e){return function(e){if("hidden"===t(e).css("visibility")||0===t(e).css("opacity"))return!0;var i=t(e).parent();return!!i&&i.is(":invisible")}});var l=function t(e,i){return!(i.x>e.x+e.width||i.x+i.width<e.x||i.y>e.y+e.height||i.y+i.height<e.y)},c={currentImage:null,buttonEl:null,win:null,currentImageUrl:null,currentImageData:null,useUrlShortener:!0,shortener:"sumoly",short_domain:null,useAltText:!0,twitterUsername:null,color:null,position:null,contentOnly:!1,ignoreLinks:!0,ignoreImgLinks:!1,relShareOnly:!1,ctry:!1,shortUrls:{},scope:function e(){if(c.contentOnly){var i=s.findAll();return t(i)}return t(document)},load:function e(){t.ajax({type:"POST",dataType:"json",xhrFields:{withCredentials:!1},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/load",data:{site_id:c.sumoProperties.siteId,geoLocation:c.sumoProperties.geoLocation,pageViews:c.sumoProperties.views,userAgent:navigator.userAgent},success:function t(e){e.success&&(c.useAltText=e.use_alt_text,c.useUrlShortener=e.use_url_shortener,c.shortener=e.shortener,c.shortDomain=e.short_domain,c.contentOnly=e.content_only,c.ignoreLinks=e.ignore_links,c.ignoreImgLinks=e.ignore_img_links,c.relShareOnly=e.rel_share_only,c.twitterUsername=e.twitter_username,c.color=e.color,c.utm=e.utm,c.utm_source=e.utm_source,c.utm_medium=e.utm_medium,c.utm_name=e.utm_name,c.utm_custom_key=e.utm_custom_key,c.utm_custom_val=e.utm_custom_val,c.vertical=e.vertical,c.vertical_offset=parseInt(e.vertical_offset),c.vertical_offset_type=e.vertical_offset.replace(/[0-9]/g,""),c.horizontal_offset=parseInt(e.horizontal_offset),c.horizontal_offset_type=e.horizontal_offset.replace(/[0-9]/g,""),c.hasImageSharer=e.hasImageSharer,c.position=e.position,c.display_rules=e.display_rules,c.services=e.services,c.ctry=!(!c.sumoProperties.geoLocation||!c.sumoProperties.geoLocation.ctry)&&c.sumoProperties.geoLocation.ctry,c.views=!(!c.sumoProperties.views||!c.sumoProperties.views)&&c.sumoProperties.views,c.reflink="https://sumo.com/?src=sm-is-"+c.sumoProperties.siteId+"&utm_source=sumo-powered-by&utm_medium=image-sharer&utm_campaign="+c.sumoProperties.siteId,c.setup())}})},cleanup:function e(){c.scope().off(".image-sharer"),t(window).off(".image-sharer")},init:function e(){n=n.replace("{{preloader}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/preloader.gif"),t(window).on("scroll",c.debounce(function(){c.scroll()},1)),c.load(),c.api.on("55c989d5-855d-4538-b67b-3cdb46acd968/service/settings",function(t){c.hideSharer(),c.cleanup(),c.useAltText=t.use_alt_text,
c.contentOnly=t.content_only,c.ignoreLinks=t.ignore_links,c.ignoreImgLinks=t.ignore_img_links,c.relShareOnly=t.rel_share_only,c.useUrlShortener=t.use_url_shortener,c.shortener=t.shortener,c.shortDomain=t.short_domain,c.twitterUsername=t.twitter_username,c.color=t.color,c.utm=t.utm,c.utm_source=t.utm_source,c.utm_medium=t.utm_medium,c.utm_name=t.utm_name,c.utm_custom_key=t.utm_custom_key,c.utm_custom_val=t.utm_custom_val,c.hasImageSharer=t.hasImageSharer,c.position!==t.position&&(c.position=t.position,c.positionSharer()),c.display_rules=t.display_rules,c.services=t.services,c.setup()})},setup:function e(){if(c.buttonEl=t('<div class="sumome-image-sharer"></div>'),c.services.slice(0).forEach(t.proxy(function(e){var s="sumome-image-sharer-"+e;"yummly"===e&&(s+=" sumome-image-sharer-src-only");var n=t('<a href="javascript:void(0);" class="'+s+'"><div></div></a>');if(c.vertical&&n.addClass("sumome-image-sharer-vertical"),c.color){var o={backgroundColor:c.color,borderColor:i.shadeColor(c.color,-5)};n.css(o).hover(t.proxy(function(){t(this).css({backgroundColor:i.shadeColor(c.color,5),borderColor:c.color})}),t.proxy(function(){t(this).css(o)}));var r={};"black"===i.whiteOrBlack(c.color)&&(r.backgroundImage='url("'+this.sumoProperties.baseUrl+"images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/"+e+'-black-60.png")'),n.find("div").css(r).hover(t.proxy(function(){t(this).css(r)}))}c.buttonEl.append(n)},c)),c.vertical?(c.buttonEl.css("width",40),c.buttonEl.css("height",40*c.services.length)):c.buttonEl.css("width",40*c.services.length),c.buttonEl.on("click","a.sumome-image-sharer-twitter",c.openTwitter),c.buttonEl.on("click","a.sumome-image-sharer-facebook",c.openFacebook),c.buttonEl.on("click","a.sumome-image-sharer-pinterest",c.openPinterest),c.buttonEl.on("click","a.sumome-image-sharer-tapiture",c.openTapiture),c.buttonEl.on("click","a.sumome-image-sharer-tumblr",c.openTumblr),c.buttonEl.on("click","a.sumome-image-sharer-yummly",c.openYummly),t("body").append(c.buttonEl),t.isCurrentUrlAllowed(c.display_rules,null,c.ctry,c.views)){var s=c.scope();s.on("mouseenter.image-sharer","img",c.debounce(c.mouseenter,250)),s.on("mouseleave.image-sharer","img",c.debounce(c.mouseleave,250)),t(window).on("touchstart.image-sharer",c.debounce(c.touch,200)),t(window).on("resize.image-sharer",c.throttle(c.positionSharer,150))}},debounce:function t(e,i){var s;return function(){var t=this,n=arguments;clearTimeout(s),(s=setTimeout(function(){s=null,e.apply(t,n)},i))||e.apply(t,n)}},throttle:function t(e,i){var s,n,o,r=null,a=0,l=function t(){a=(new Date).getTime(),r=null,o=e.apply(s,n),r||(s=n=null)};return function(){var t=(new Date).getTime();a||(a=t);var c=i-(t-a);return s=this,n=arguments,c<=0||c>i?(clearTimeout(r),r=null,a=t,o=e.apply(s,n),r||(s=n=null)):r||(r=setTimeout(l,c)),o}},loadImageProperties:function i(s){var n=c.currentImage.attr("src");c.useAltText?c.currentImageAlt=c.currentImage.attr("alt")||t(document).find("title").text()||"":c.currentImageAlt=t(document).find("title").text()||"";try{if(0===n.indexOf("data:image")){if(c.currentImageUrl=n,c.currentImageData=n,"yummly"===s)throw new Error}else c.currentImageUrl=new e(n).absoluteTo(window.location.toString()).toString(),c.currentImageData=c.getImageData(c.currentImage);return!0}catch(t){var o=c.currentImage.attr("srcset"),r=[];if(!o)return!1;if(o=o.split(","),o&&o.length&&(o.forEach(function(t){(t=t.trim().split(" "))&&2===t.length&&r.push({src:t[0],weight:parseInt(t[1])})}),r.sort(function(t,e){return e.weight-t.weight})),!r.length)return!1;try{return c.currentImageUrl=new e(r[0].src).absoluteTo(window.location.toString()).toString(),c.currentImageData=c.getImageData(c.currentImage),!0}catch(t){return!1}}},openFacebook:function e(i){i.preventDefault(),c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"facebook-click"}),c.loadImageProperties("facebook")&&(c.$modal=o.open({content:n,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),c.$modal.on("vexClose",function(){var e=t.timer("closeImageSharer");e&&e.kill()}),c.$modal.on("vexResize",t.proxy(function(e,i){var s=Math.max((t(window).height()-i.$vexContent.outerHeight())/2,0);i.$vex.css({"padding-top":s+"px"})},this)),c.$modal.on("vexOpen",t.proxy(function(t,e){c.$modal.resize(),c.loadFacebookMarkup()},this)))},generateShare:function e(i){var s=window.location.href;if(s=c.checkAndAddUTMParams(s,"facebook"),c.useUrlShortener){var n=c.shortener+":"+s;n in c.shortUrls?c.generateShareFromUrl(i,c.shortUrls[n]):t.ajax({type:"POST",dataType:"json",url:c.sumoProperties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:c.sumoProperties.siteId,href:s},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(t){t.success&&(c.shortUrls[n]=t.url,s=t.url),c.generateShareFromUrl(i,s)})}else c.generateShareFromUrl(i,s)},generateShareFromUrl:function t(e,i){e=(e+" "+i).trim(),c.$modal.find("textarea").val(e),c.$modal.find(".sumome-image-sharer-link").attr("href",c.reflink),c.$modal.find(".sumome-image-sharer-fb-message").text(e)},loadFacebookMarkup:function e(i){t.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/facebook/load",data:{site_id:c.sumoProperties.siteId},statusCode:{401:function t(){i||c.loadFacebookMarkup()}},success:function e(i){i=i.replace("{{sumome-icon}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),i=i.replace("{{facebook-icon}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/facebook-icon-128.png"),t("#sumome-image-sharer").html(i);var s=t("#sumome-image-sharer .sumome-connect");s.length>0?(c.goSmall(),c.$modal.find(".sumome-image-sharer-link").attr("href",c.reflink),s.click(c.authenticateFacebook)):(c.goLarge(),c.$modal.find(".sumome-image-sharer-fb-image").css("background-image","url("+c.currentImageUrl+")"),c.generateShare(c.currentImageAlt),c.$modal.find("select").change(function(){var e=t(this).find("option").filter(":selected"),i=e.text(),s=e.attr("value"),n=e.data("access-token");c.$modal.find(".sumome-image-sharer-fb-user img").attr("src","https://graph.facebook.com/v2.8/"+s+"/picture?access_token="+n),c.$modal.find(".sumome-image-sharer-fb-user a").text(i)}),c.$modal.find("textarea").on("keyup",function(){c.$modal.find(".sumome-image-sharer-fb-message").text(t(this).val())}),c.$modal.find("button").click(c.submitFacebook),c.$modal.find(".sumome-image-sharer-fb-message").focus(),c.$modal.resize())}})},checkFacebookWindowClosed:function t(){c.isAuthWindowClosed()?c.loadFacebookMarkup():setTimeout(c.checkFacebookWindowClosed,500)},authenticateFacebook:function t(){c.isAuthWindowClosed()?(c.win=window.open(c.sumoProperties.sumoUrl+"/apps/image-sharer/facebook/login","image-sharer-auth","width=640,height=400"),c.win.focus(),c.checkFacebookWindowClosed()):(c.win.location=c.sumoProperties.sumoUrl+"/apps/image-sharer/facebook/login",c.win.resizeTo(640,400),c.win.focus(),c.checkFacebookWindowClosed())},submitFacebook:function e(){var i=c.$modal.find("textarea").val().trim(),s=c.currentImageUrl,n=c.$modal.find("option").filter(":selected"),o=n.text(),r=n.attr("value"),a=n.data("access-token");c.$modal.find("select, textarea, button").prop("disabled",!0),t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/facebook/post",data:{status:i,image_url:s,image_data:c.currentImageData,targetId:r,targetToken:a},statusCode:{401:function t(){c.loadFacebookMarkup()},500:function t(){c.close()}},success:function e(i){i.success?(c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"facebook-share"}),c.goSmall(),t("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),t("#sumome-image-sharer").find("button").click(function(t){c.close()}),c.$modal.resize(),t.timer("closeImageSharer",c.close,3e3).start()):(c.goSmall(),c.showError(i.error),t("#sumome-image-sharer").find("button").click(function(t){c.close()}),c.$modal.resize())}})},openTumblr:function e(i){i.preventDefault(),c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"tumblr-click"}),c.loadImageProperties("tumblr")&&(c.$modal=o.open({content:n,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),c.$modal.on("vexClose",function(){var e=t.timer("closeImageSharer");e&&e.stop()}),c.$modal.on("vexResize",t.proxy(function(e,i){var s=Math.max((t(window).height()-i.$vexContent.outerHeight())/2,0);i.$vex.css({"padding-top":s+"px"})},this)),c.$modal.on("vexOpen",t.proxy(function(t,e){c.$modal.resize(),c.loadTumblrMarkup()},this)))},loadTumblrMarkup:function e(i){t.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/tumblr/load",data:{site_id:c.sumoProperties.siteId},statusCode:{401:function t(){i||c.loadTumblrMarkup()}},success:function e(i){i=i.replace("{{sumome-icon}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),i=i.replace("{{tumblr-icon}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/tumblr-icon-128.png"),t("#sumome-image-sharer").html(i);var s=t("#sumome-image-sharer .sumome-connect");s.length>0?(c.goSmall(),c.$modal.find(".sumome-image-sharer-link").attr("href",c.reflink),s.click(c.authenticateTumblr)):(c.goLarge(),c.$modal.find(".sumome-image-sharer-tm-image").css("background-image","url("+c.currentImageUrl+")"),c.generateTumblr(c.currentImageAlt),c.$modal.find("textarea").on("keyup",function(){c.$modal.find(".sumome-image-sharer-tm-message").text(t(this).val())}),c.$modal.find("button").click(c.submitTumblr),c.$modal.find(".sumome-image-sharer-tm-message").focus(),c.$modal.resize())}})},generateTumblr:function e(i){var s=window.location.href;if(s=c.checkAndAddUTMParams(s,"tumblr"),c.useUrlShortener){var n=c.shortener+":"+s;n in c.shortUrls?c.generateShareFromUrl(i,c.shortUrls[n]):t.ajax({type:"POST",dataType:"json",url:c.sumoProperties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:c.sumoProperties.siteId,href:s},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(t){t.success&&(c.shortUrls[n]=t.url,s=t.url),i=(i+" "+s).trim(),c.$modal.find("textarea").val(i),c.$modal.find(".sumome-image-sharer-tm-message").text(i)})}else i=(i+" "+s).trim(),c.$modal.find("textarea").val(i),c.$modal.find(".sumome-image-sharer-link").attr("href",c.reflink),c.$modal.find(".sumome-image-sharer-tm-message").text(i)},checkTumblrWindowClosed:function t(){c.isAuthWindowClosed()?c.loadTumblrMarkup():setTimeout(c.checkTumblrWindowClosed,500)},authenticateTumblr:function t(){c.isAuthWindowClosed()?(c.win=window.open(c.sumoProperties.sumoUrl+"/apps/image-sharer/tumblr/login","image-sharer-auth","width=740,height=400"),c.win.focus(),c.checkTumblrWindowClosed()):(c.win.location=c.sumoProperties.sumoUrl+"/apps/image-sharer/tumblr/login",c.win.resizeTo(740,400),c.win.focus(),c.checkTumblrWindowClosed())},submitTumblr:function e(){var i=c.$modal.find("textarea").val().trim(),s=c.currentImageUrl,n=c.$modal.find("select").val();c.$modal.find("textarea, button, select").prop("disabled",!0),t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/tumblr/post",data:{status:i,image_url:s,image_data:c.currentImageData,base_hostname:n},statusCode:{401:function t(){c.loadTumblrMarkup()}},success:function e(i){i.success?(c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"tumblr-share"}),c.goSmall(),t("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),t("#sumome-image-sharer").find("button").click(function(t){c.close()}),c.$modal.resize(),t.timer("closeImageSharer",c.close,3e3).start()):(c.goSmall(),c.showError(i.error),t("#sumome-image-sharer").find("button").click(function(t){c.close()}),c.$modal.resize())}})},openTwitter:function e(i){i.preventDefault(),c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"twitter-click"}),c.loadImageProperties("twitter")&&(c.$modal=o.open({content:n,overlayClosesOnClick:!1,className:"sumome-image-sharer-popup sumome-image-sharer-popup-small",overlayClassName:"sumome-image-sharer-popup-overlay",contentClassName:"sumome-image-sharer-popup-content",closeClassName:"sumome-image-sharer-popup-close"}),c.$modal.on("vexClose",function(){var e=t.timer("closeImageSharer");e&&e.stop()}),c.$modal.on("vexResize",t.proxy(function(e,i){var s=Math.max((t(window).height()-i.$vexContent.outerHeight())/2,0);i.$vex.css({"padding-top":s+"px"})},this)),c.$modal.on("vexOpen",t.proxy(function(t,e){c.$modal.resize(),c.loadTwitterMarkup()},this)))},generateTweet:function e(i){var s=window.location.href;if(s=c.checkAndAddUTMParams(s,"twitter"),c.useUrlShortener){var n=c.shortener+":"+s;n in c.shortUrls?c.generateTweetFromUrl(i,c.shortUrls[n]):t.ajax({type:"POST",dataType:"json",url:c.sumoProperties.sumoUrl+"/apps/image-sharer/shorten",data:{site_id:c.sumoProperties.siteId,href:s},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(t){t.success&&(c.shortUrls[n]=t.url,s=t.url),c.generateTweetFromUrl(i,s)})}else c.generateTweetFromUrl(i,s)},generateTweetFromUrl:function t(e,i){var s=(i.substr(0,6),23),n=c.twitterUsername,o=256-s;n&&("@"!==n.substr(0,1)&&(n="@"+n),o-=5+n.length),e=e.trim(),e=e.replace(/\r\n|\n|\r/g," "),e.length+1>o&&(e=e.substr(0,o-2)+"…"),e=(e+" "+i+(n?" via "+n:"")).trim(),c.$modal.find("textarea").val(e),c.$modal.find(".sumome-image-sharer-link").attr("href",c.reflink),c.$modal.find(".sumome-image-sharer-tw-message").text(e),c.updateTwitterCount()},updateTwitterCount:function t(){var e=c.$modal.find("textarea").val().trim(),i=c.charactersLeft(e);c.$modal.find(".sumome-image-sharer-tw-count").html(i+" chars remaining"),i<0?c.$modal.find(".sumome-image-sharer-tw-count").css({color:"red"}):c.$modal.find(".sumome-image-sharer-tw-count").css({color:""})},loadTwitterMarkup:function e(i){t.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/twitter/load",data:{site_id:c.sumoProperties.siteId},statusCode:{401:function t(){i||c.loadTwitterMarkup()}},success:function e(i){i=i.replace("{{sumome-icon}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/sumome-crown-128.png"),i=i.replace("{{twitter-icon}}",c.sumoProperties.sumoUrl+"/client/images/apps/55c989d5-855d-4538-b67b-3cdb46acd968/twitter-icon-128.png"),t("#sumome-image-sharer").html(i);var s=t("#sumome-image-sharer .sumome-connect");s.length>0?(c.goSmall(),c.$modal.find(".sumome-image-sharer-link").attr("href",c.reflink),s.click(c.authenticateTwitter)):(c.goLarge(),c.$modal.find(".sumome-image-sharer-tw-image").css("background-image","url("+c.currentImageUrl+")"),c.generateTweet(c.currentImageAlt),c.$modal.find("textarea").on("keyup",function(){c.$modal.find(".sumome-image-sharer-tw-message").text(t(this).val()),c.updateTwitterCount()}),c.$modal.find("button").click(c.submitTwitter),c.$modal.find(".sumome-image-sharer-tw-message").focus(),c.$modal.resize())}})},checkTwitterWindowClosed:function t(){c.isAuthWindowClosed()?c.loadTwitterMarkup():setTimeout(c.checkTwitterWindowClosed,500)},authenticateTwitter:function t(){c.isAuthWindowClosed()?(c.win=window.open(c.sumoProperties.sumoUrl+"/apps/image-sharer/twitter/login","image-sharer-auth","width=740,height=400"),c.win.focus(),c.checkTwitterWindowClosed()):(c.win.location=c.sumoProperties.sumoUrl+"/apps/image-sharer/twitter/login",c.win.resizeTo(740,400),c.win.focus(),c.checkTwitterWindowClosed())},submitTwitter:function e(){var i=c.$modal.find("textarea").val().trim(),s=c.currentImageUrl;c.$modal.find("textarea, button").prop("disabled",!0);var i=c.$modal.find("textarea").val().trim();c.charactersLeft(i)>=0?t.ajax({type:"POST",dataType:"json",beforeSend:function e(i){i.setRequestHeader("X-Sumo-Auth",t.cookie("__smToken"))},xhrFields:{withCredentials:!0},crossDomain:!0,url:c.sumoProperties.sumoUrl+"/apps/image-sharer/twitter/post",data:{status:i,image_url:s,image_data:c.currentImageData},statusCode:{401:function t(){c.loadTwitterMarkup()}},success:function e(i){i.success?(c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"twitter-share"}),c.goSmall(),t("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Snap!</h3><h5>Your photo was shared.</h5><hr><button class="sumome-button sumome-radius sumome-expand">Okay</button></div>'),t("#sumome-image-sharer").find("button").click(function(t){c.close()}),c.$modal.resize(),t.timer("closeImageSharer",c.close,3e3).start()):(c.goSmall(),c.showError(i.error),t("#sumome-image-sharer").find("button").click(function(t){c.close()}),c.$modal.resize())}}):c.$modal.find("textarea, button").prop("disabled",!1)},openPinterest:function t(e){if(e.preventDefault(),c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"pinterest-click"}),c.loadImageProperties("pinterest")){var i=window.location.toString();i=c.checkAndAddUTMParams(i,"pinterest"),c.closeAuthWindow(),c.win=window.open(c.generatePinterestUrl(i),"image-sharer-pinterest","width=640,height=320")}},generatePinterestUrl:function e(i){var s={url:i,media:c.currentImageUrl,description:c.currentImageAlt};return"http://pinterest.com/pin/create/button/?"+t.param(s)},openTapiture:function t(e){if(e.preventDefault(),c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"tapiture-click"}),c.loadImageProperties("tapiture")){var i=window.location.toString();i=c.checkAndAddUTMParams(i,"tapiture"),c.closeAuthWindow(),c.win=window.open(c.generateTapitureUrl(i),"image-sharer-tapiture","width=600,height=500")}},generateTapitureUrl:function e(i){var s={url:c.currentImageUrl,title:c.currentImageAlt,page_url:i,type:"image"};return"http://tapiture.com/widget/tap?"+t.param(s)},openYummly:function t(e){if(e.preventDefault(),c.api.emit("event",{appId:"55c989d5-855d-4538-b67b-3cdb46acd968",event:"yummly-click"}),c.loadImageProperties("yummly")){var i=window.location.toString();i=c.checkAndAddUTMParams(i,"yummly"),c.closeAuthWindow(),c.win=window.open(c.generateYummlyUrl(i),"image-sharer-yummly","width=600,height=500")}},generateYummlyUrl:function e(i){var s={url:i,title:c.currentImageAlt,image:c.currentImageUrl};return"http://www.yummly.com/urb/verify?"+t.param(s)},goSmall:function t(){c.$modal.closest(".sumome-image-sharer-popup").removeClass("sumome-image-sharer-popup-large").addClass("sumome-image-sharer-popup-small"),this.resize()},goLarge:function t(){c.$modal.closest(".sumome-image-sharer-popup").removeClass("sumome-image-sharer-popup-small").addClass("sumome-image-sharer-popup-large"),this.resize()},resize:function t(){var e=c.$modal.closest(".sumome-image-sharer-popup"),i="small",s=e.innerWidth();i=s>=1440?"xxlarge":s>=1080?"xlarge":s>=768?"large":s>=480?"medium":"small";var n="sumome-res-"+i;e.removeClass("sumome-res-small sumome-res-medium sumome-res-large sumome-res-xlarge sumome-res-xxlarge").addClass(n)},showError:function e(i){t("#sumome-image-sharer").html('<div class="sumome-12 sumome-columns sumome-text-center"><h3>Golly Gee Wilikers</h3><h5>'+i+'</h5><hr><button class="sumome-button sumome-alert sumome-radius sumome-expand">Close</button></div>')},close:function t(){c.closeAuthWindow(),o.close()},openAuthWindow:function t(){c.isAuthWindowClosed()&&(c.win=window.open("about:blank","image-sharer-auth","width=1,height=1"))},isAuthWindowClosed:function t(){return!c.win||c.win.closed},closeAuthWindow:function t(){c.isAuthWindowClosed()||(c.win.close(),c.win=null)},mouseenter:function e(i){var s=Math.min(window.screen.availWidth||t(window).width(),t(window).width());if(t.isCurrentUrlAllowed(c.display_rules,null,c.ctry,c.views)){var n=t.timer("hideImageSharer");n&&n.kill(),c.currentImage=null;var o=t(i.target),r=o.naturalWidth(),a=o.naturalHeight(),s=o.width(),l=o.height();if(r<150||a<150)return void c.buttonEl.stop(!0,!0).fadeOut(500);if(o.parent().is("div[id^=grs_]"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(o.is(".ob-widget *"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(o.is(".s.u.m.o.me *"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(o.attr("rel")&&0===o.attr("rel").toLowerCase().indexOf("noshare"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(o.attr("rel")&&0===o.attr("rel").toLowerCase().indexOf("share"));else{var u=o.parent(),h=/[^\/\\]+(?:jpg|gif|png)/gi;if(c.ignoreLinks&&u&&"A"===u.get(0).tagName.toUpperCase()&&u.attr("href")&&u.attr("href")!==o.attr("src")&&null===u.attr("href").match(h))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(c.ignoreImgLinks&&u&&"A"===u.get(0).tagName.toUpperCase()&&u.attr("href")&&u.attr("href")!==o.attr("src")&&null!==u.attr("href").match(h))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(o.parents("form").length>0)return void c.buttonEl.stop(!0,!0).fadeOut(500);if(o.is(":hidden")||o.is(":invisible"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(c.relShareOnly)return void c.buttonEl.stop(!0,!0).fadeOut(500)}c.currentImage=t(i.target),c.positionSharer(),c.isOverFixedHeader()||c.buttonEl.stop(!0,!0).fadeIn(500)}},visibleArea:function e(i){for(var s={height:i.offsetHeight,width:i.offsetWidth,isRelative:!1},n={y:i.offsetTop||0,x:i.offsetLeft||0,node:i.offsetParent},o,r,a,l,c;!t(i).is("body")&&null!==(i=i.parentNode);){try{o=window.getComputedStyle(i)}catch(t){}if(o&&"relative"===o.position&&(s.isRelative=!0),o&&"hidden"===o.overflow)return r=i.offsetHeight-Math.max(t("body").offset().top,n.y),a=i.offsetWidth-Math.max(t("body").offset().left,n.x),i!==n.node&&(r+=i.offsetTop||0,a+=i.offsetLeft||0),r<s.height&&(s.height=r<0?0:r),a<s.width&&(s.width=a<0?0:a),s;i===n.node&&(n.y=n.y+(i.offsetTop||0),n.x=n.x+(i.offsetLeft||0),n.node=i.offsetParent)}return s},positionSharer:function i(){if(null!==c.currentImage&&!t(".sumome-image-sharer-popup-content").is(":visible")){var s=c.currentImage.offset(),n=c.currentImage.offsetParent().offset(),o=c.visibleArea(c.currentImage[0]),r=o.hasHiddenOverflow,a=["absolute"].indexOf(c.currentImage.css("position"))>=0;if(a){if(o.isRelative)var l=["absolute","fixed","relative"];else var l=["absolute","fixed"];var u=c.currentImage.parents().filter(function(){return!t(this).is("body,html")&&l.indexOf(t(this).css("position"))>=0});a=u&&u.length}var h=null,d=null,m=null,p=null;if(a){var f=Math.max(t("body").offset().top+(isNaN(parseFloat(t("body").css("padding-top")))?0:parseFloat(t("body").css("padding-top"))),s.top-(s.top-n.top)),g=Math.max(t("body").offset().left+(isNaN(parseFloat(t("body").css("padding-left")))?0:parseFloat(t("body").css("padding-left"))),s.left-(s.left-n.left)),h=parseFloat(isNaN(parseFloat(c.currentImage.css("padding-top")))?0:parseFloat(c.currentImage.css("padding-top")))+parseFloat(isNaN(parseFloat(c.currentImage.css("border-top")))?0:c.currentImage.css("border-top")),d=parseFloat(isNaN(parseFloat(c.currentImage.css("padding-left")))?0:parseFloat(c.currentImage.css("padding-left")))+parseFloat(isNaN(parseFloat(c.currentImage.css("border-left")))?0:c.currentImage.css("border-left"));m=s.top-f+h<0?0:s.top-f+h,p=s.left-g+d<0?0:s.left-g+d}else if("fixed"===c.currentImage.css("position"))var f=c.currentImage.position().top,g=c.currentImage.position().left;else var f=Math.max(t("body").offset().top+(isNaN(parseFloat(t("body").css("padding-top")))?0:parseFloat(t("body").css("padding-top"))),s.top),g=Math.max(t("body").offset().left+(isNaN(parseFloat(t("body").css("padding-left")))?0:parseFloat(t("body").css("padding-left"))),s.left);if(null===h)var h=parseFloat(isNaN(c.currentImage.css("padding-top"))?0:c.currentImage.css("padding-top"))+isNaN(parseFloat(c.currentImage.css("border-top")))?0:parseFloat(c.currentImage.css("border-top")),d=parseFloat(isNaN(c.currentImage.css("padding-left"))?0:c.currentImage.css("padding-left"))+isNaN(parseFloat(c.currentImage.css("border-left")))?0:parseFloat(c.currentImage.css("border-left"));var v=parseFloat(isNaN(c.currentImage.css("padding-left"))?0:c.currentImage.css("padding-bottom"))+isNaN(parseFloat(c.currentImage.css("border-bottom")))?0:parseFloat(c.currentImage.css("border-bottom")),b=parseFloat(isNaN(c.currentImage.css("padding-left"))?0:c.currentImage.css("padding-right"))+isNaN(parseFloat(c.currentImage.css("border-right")))?0:parseFloat(c.currentImage.css("border-right")),y=o.height-(null!==m?f-s.top+m:h)-v,w=o.width-(null!==p?g-s.left+p:d)-b,x=null!==m?m:h,_=null!==p?p:d,k={},C="px"===c.vertical_offset_type?c.vertical_offset:y*(c.vertical_offset/100),S="px"===c.horizontal_offset_type?c.horizontal_offset:w*(c.horizontal_offset/100),T=c.currentImage.attr("src"),E=!0;try{0===T.indexOf("data:image")?E=!1:(c.currentImageUrl=new e(T).absoluteTo(window.location.toString()).toString(),c.currentImageData=c.getImageData(c.currentImage))}catch(t){E=!1}if(!E){var $=c.currentImage.attr("srcset");$&&($=$.split(","))&&$.length&&$.forEach(function(t){E||(t=t.trim().split(" "))&&2===t.length&&(E=!0)})}var I=c.buttonEl.find(".sumome-image-sharer-src-only");I.toggle(E);var P="2px 0",O="2px 0 2px 2px",A="2px 2px 2px 0",L="3px 0 0 3px",B="0 3px 3px 0";c.vertical&&(P="0 2px",O="2px 2px 0 2px",A="0 2px 2px 2px",L="3px 3px 0 0",B="0 0 3px 3px"),c.buttonEl.find("> a").css({borderRadius:"0px",borderWidth:P});var D=c.buttonEl.find("> a"+(E?"":":not(.sumome-image-sharer-src-only)"));D.first().css({borderRadius:L,borderWidth:O}),D.last().css({borderRadius:B,borderWidth:A});var N=c.services.length;!E&&I&&I.length&&(N-=I.length);var M=c.vertical?40*N:40,R=c.vertical?40:40*N;c.vertical?(c.buttonEl.css("width",40),c.buttonEl.css("height",40*N)):c.buttonEl.css("width",40*N),"c"!==c.position&&(C+=10,S+=10),k="tl"===c.position?{top:f+C,left:g+S}:"tr"===c.position?{top:f+C,left:g+w-R-S}:"bl"===c.position?{top:f+y-M-C,left:g+S}:"br"===c.position?{top:f+y-M-C,left:g+w-R-S}:{top:f+y/2-M/2+C,left:g+w/2-R/2+S},k.top+=x,k.left+=_,k.position="fixed"===c.currentImage.css("position")?"fixed":"absolute",c.buttonEl.css(k)}},getImageData:function e(i){var s=t(i).naturalWidth(),n=t(i).naturalHeight(),o=t(i).attr("src"),r=document.createElement("canvas"),a=1280,l=800;if(o&&o.toLowerCase().indexOf(".gif")>-1)return null;if(r){var c=Math.min(1280/s,800/n);c<1&&(s*=c,n*=c),r.width=s,r.height=n;var u=r.getContext("2d");if(u){u.drawImage(i.get(0),0,0,s,n);try{return r.toDataURL()}catch(t){}}}return null},charactersLeft:function t(e){return 280-r.txt.getTweetLength(e)},touch:function e(i){var s=Math.min(window.screen.availWidth||t(window).width(),t(window).width());if(t.isCurrentUrlAllowed(c.display_rules,null,c.ctry,c.views)){var n=t.timer("hideImageSharer");n&&n.kill();var o=i.pageX||i.originalEvent.touches[0].pageX,r=i.pageY||i.originalEvent.touches[0].pageY,a=t.nearest({x:o,y:r},"img");if(c.currentImage=null,!a)return void c.buttonEl.stop(!0,!0).fadeOut(500);var l=a.naturalWidth(),u=a.naturalHeight(),s=a.width(),h=a.height();if(l<150||u<150)return void c.buttonEl.stop(!0,!0).fadeOut(500);if(a.parent().is("div[id^=grs_]"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(a.is(".ob-widget *"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(a.is(".s.u.m.o.me *"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(a.attr("rel")&&0===a.attr("rel").toLowerCase().indexOf("noshare"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(a.attr("rel")&&0===a.attr("rel").toLowerCase().indexOf("share"));else{var d=a.parent(),m=/[^\/\\]+(?:jpg|gif|png)/gi;if(c.ignoreLinks&&d&&"A"===d.get(0).tagName.toUpperCase()&&d.attr("href")&&d.attr("href")!==a.attr("src")&&null===d.attr("href").match(m))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(c.ignoreImgLinks&&d&&"A"===d.get(0).tagName.toUpperCase()&&d.attr("href")&&d.attr("href")!==a.attr("src")&&null!==d.attr("href").match(m))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(a.parents("form").length>0)return void c.buttonEl.stop(!0,!0).fadeOut(500);if(a.is(":hidden")||a.is(":invisible"))return void c.buttonEl.stop(!0,!0).fadeOut(500);if(c.relShareOnly)return void c.buttonEl.stop(!0,!0).fadeOut(500)}c.currentImage=a,c.positionSharer(),c.isOverFixedHeader()||(c.buttonEl.stop(!0,!0).fadeIn(500),t.timer("hideImageSharer",c.hideSharer,5e3).start())}},mouseleave:function e(i){if(null!==c.currentImage){var s=t(i.toElement||i.relatedTarget);s.hasClass(".sumome-image-sharer")||s.closest(".sumome-image-sharer").length>0||c.hideSharer()}},hideSharer:function e(){var i=t.timer("hideImageSharer");i&&i.kill(),c.currentImage=null,c.buttonEl.stop(!0,!0).fadeOut(500)},scroll:function t(){c.isOverFixedHeader()&&c.hideSharer()},isOverFixedHeader:function e(){if(!c.buttonEl)return!1;var i="1"===c.buttonEl.css("opacity"),s="fixed"===t("header").css("position");if(i&&s){var n=8,o={x:parseInt(c.buttonEl.css("left").replace("px",""))-t(window).scrollLeft()-8,y:parseInt(c.buttonEl.css("top").replace("px",""))-t(window).scrollTop()-8,width:c.buttonEl.width()+16,height:c.buttonEl.height()+16},r={x:t("header").position().left,y:t("header").position().top,width:t("header").width(),height:t("header").height()};return!!l(o,r)}return!1},checkAndAddUTMParams:function t(i,s){if(c.hasImageSharer&&i&&"utm"in c&&c.utm){var n=e(i);"utm_source"in c&&c.utm_source&&(n.removeQuery("utm_source"),n.addQuery("utm_source",c.utm_source.replace("{service}",s))),"utm_medium"in c&&c.utm_medium&&(n.removeQuery("utm_medium"),n.addQuery("utm_medium",c.utm_medium.replace("{service}",s))),"utm_name"in c&&c.utm_name&&(n.removeQuery("utm_campaign"),n.addQuery("utm_campaign",c.utm_name.replace("{service}",s))),"utm_custom_key"in c&&c.utm_custom_key&&"utm_custom_val"in c&&c.utm_custom_val&&(n.removeQuery(c.utm_custom_key),n.addQuery(c.utm_custom_key,c.utm_custom_val.replace("{service}",s))),i=n.toString()}return i}};return c}),sumo.define("plugins/text!share/templates/share.html",[],function(){return""}),sumo.define("jquery.print-preview",["jquery"],function(t){t.fn.printPreview=function(){return t.printPreview.loadPrintPreview(),this};var e,i,s,n,o=function(){for(var t,e=3,i=document.createElement("div"),s=i.getElementsByTagName("i");i.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",s[0];);return e>4?e:t}();t.printPreview={loadPrintPreview:function(){s=t('<div id="sumome-share-print-modal"></div>'),n=t('<div id="sumome-share-print-modal-controls"><a href="#" class="sumome-share-print-modal-controls-print" title="Print page">Print page</a><a href="#" class="sumome-share-print-modal-controls-close" title="Close print preview">Close</a>').hide();var e=t('<iframe id="sumome-share-print-modal-content" scrolling="no" border="0" frameborder="0" name="print-frame" />');s.hide().append(n).append(e).appendTo("body");var i=e[0].contentWindow.document;i.open(),i.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><title>'+document.title+"</title></head><body></body></html>"),i.close();var o=t("head link[media*=print], head link[media=all]").clone(),r=t("body > *:not(#sumome-share-print-modal):not(script)").clone()
;o.each(function(){t(this).attr("media","all")}),t("head",i).append(o),t("body",i).append(r),t("a",i).bind("click.printPreview",function(t){t.preventDefault()}),t("head").append('<style type="text/css">@media print {/* -- Print Preview --*/#sumome-share-print-modal-mask,#sumome-share-print-modal {display: none !important;}}</style>'),t.printPreview.loadMask(),t("body").css({overflowY:"hidden",height:"100%"}),t("img",i).load(function(){e.height(t("body",e.contents())[0].scrollHeight)}),starting_position=t(window).height()+t(window).scrollTop();var a={top:starting_position,height:"100%",overflowY:"auto",zIndex:1e4,display:"block"};s.css(a).animate({top:t(window).scrollTop()},400,"linear",function(){n.fadeIn("slow").focus()}),e.height(t("body",e.contents())[0].scrollHeight),t("a",n).bind("click",function(e){e.preventDefault(),t(this).hasClass("sumome-share-print-modal-controls-print")?window.print():t.printPreview.distroyPrintPreview()})},distroyPrintPreview:function(){n.fadeOut(100),s.animate({top:t(window).scrollTop()-t(window).height(),opacity:1},400,"linear",function(){s.remove(),t("body").css({overflowY:"auto",height:"auto"})}),e.fadeOut("slow",function(){e.remove()}),t(document).unbind("keydown.printPreview.mask"),e.unbind("click.printPreview.mask"),t(window).unbind("resize.printPreview.mask")},loadMask:function(){i=t.printPreview.sizeUpMask(),e=t('<div id="sumome-share-print-modal-mask" />').appendTo(t("body")),e.css({position:"absolute",top:0,left:0,width:i[0],height:i[1],display:"none",opacity:0,zIndex:9999,backgroundColor:"#000"}),e.css({display:"block"}).fadeTo("400",.75),t(window).bind("resize..printPreview.mask",function(){t.printPreview.updateMaskSize()}),e.bind("click.printPreview.mask",function(e){t.printPreview.distroyPrintPreview()}),t(document).bind("keydown.printPreview.mask",function(e){27==e.keyCode&&t.printPreview.distroyPrintPreview()})},sizeUpMask:function(){if(o){var e=t(document).height(),i=t(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e-i<20?i:e]}return[t(document).width(),t(document).height()]},updateMaskSize:function(){var i=t.printPreview.sizeUpMask();e.css({width:i[0],height:i[1]})}}}),sumo.define("jquery.share",["jquery","jquery.print-preview"],function(t){t.shareServices={amazonuniversalregistry:{name:"Amazon Universal Registry",url:"https://www.amazon.com/registry/add?t={TEXT}&u={URL}",width:1e3,height:640,background:"#F7AD29",color:"#fff"},amazonuswishlist:{name:"Amazon Wishlist",url:"https://www.amazon.com/wishlist/add?t={TEXT}&u={URL}",width:1e3,height:640,background:"#FC9A18",color:"#fff"},aollifestream:{name:"AOL Lifestream",url:"http://lifestream.aol.com/share/?url={URL}&title={TEXT}&description={DESC}",width:580,height:440,background:"#8DB822",color:"#fff"},aolmail:{name:"AOL Mail",url:"https://mail.aol.com/webmail-std/en-us/composemessage?to=&subject={TEXT}&body={URL}",width:600,height:500,background:"#262626",color:"#fff"},arto:{name:"Arto",url:"http://www.arto.com/section/linkshare/default.aspx?lu={URL}&ln={TEXT}",width:1e3,height:770,background:"#8DB822",color:"#fff"},bitly:{name:"Bitly",url:"https://bitly.com/a/bitmarklet?u={URL}",width:1160,height:500,background:"#EE6023",color:"#fff"},bloggerpost:{name:"Blogger",url:"https://www.blogger.com/blog-this.g?t&u={URL}&n={TEXT}",width:750,height:700,background:"#F79638",color:"#fff"},boxnet:{name:"Box",url:"https://www.box.com/api/1.0/import?import_as=link&url={URL}&name={TEXT}",width:500,height:500,background:"#2F88B1",color:"#fff"},buffer:{name:"Buffer",url:"http://bufferapp.com/add?text={TEXT}&url={URL}",width:890,height:532,background:"#242424",color:"#fff",fetch:"https://api.bufferapp.com/1/links/shares.json?url={URL}",parse:function(t){return parseInt(t.shares)},priority:89},delicious:{name:"Delicious",url:"http://del.icio.us/post?url={URL}&title={TEXT}&notes={DESC}",width:550,height:588,background:"#3399ff",color:"#fff",priority:85},digg:{name:"Digg",url:"http://digg.com/submit?url={URL}&title={TEXT}",width:1080,height:670,background:"#0093CC",color:"#fff",priority:86},diigo:{name:"Diigo",url:"https://www.diigo.com/post?url={URL}&title={TEXT}&description={DESC}",width:625,height:660,background:"#4DA2E4",color:"#fff"},diigolet:{name:"Diigolet",width:600,height:500,background:"#4DA2E4",color:"#fff",javascript:function(){s=document.createElement("script"),s.type="text/javascript",s.src="https://www.diigo.com/javascripts/webtoolbar/diigolet_b_h_b.js",document.body.appendChild(s)}},email:{name:"Email",url:"mailto:?subject={TEXT}&body={DESC}%20{URL}{PROMO}",width:600,height:500,background:"#aaa",color:"#fff",priority:99},evernote:{name:"Evernote",url:"http://www.evernote.com/clip.action?url={URL}&title={TEXT}",width:960,height:533,background:"#6fb536",color:"#fff",priority:85},facebook:{name:"Facebook",url:"http://www.facebook.com/sharer.php?u={URL}",width:600,height:600,background:"#3b5998",color:"#fff",fetch:"//graph.facebook.com/?id={URL}",parse:function(t){return parseInt(t.share.share_count)},priority:100},facebooklike:{name:"Facebook Like",url:"https://sumo.com/apps/share/facebook-like?href={URL}",width:600,height:300,background:"#5a739d",color:"#fff",fetch:"//api.facebook.com/method/links.getStats?urls={URL}&format=json",parse:function(t){return parseInt(t[0].like_count)},priority:95},facebooksend:{name:"Facebook Send",url:"https://www.facebook.com/dialog/send?app_id=859406404089021&link={URL}&redirect_uri=https%3a%2f%2fsumo.com%2fapps%2fshare%2fthanks&display=popup",width:600,height:500,background:"#3b5998",color:"#fff"},fancy:{name:"Fancy",width:600,height:500,background:"#494E57",color:"#fff",javascript:function(){thefancy_username="";var t="thefancy_tagger_bookmarklet_helper_js",e=document.getElementById(t),i=!0;if(e){var s=window;try{s.thefancy_bookmarklet?(s.thefancy_bookmarklet.tagger.cleanListeners(),e.parentNode.removeChild(e)):i=!1}catch(t){i=!1}}i&&(_my_script=document.createElement("SCRIPT"),_my_script.type="text/javascript",_my_script.id=t,_my_script.src=location.protocol+"//fancy.com/bookmarklet/fancy_tagger.js?x="+Math.random(),document.getElementsByTagName("head")[0].appendChild(_my_script))}},flipboard:{name:"Flipboard",url:"https://share.flipboard.com/bookmarklet/popout?v=2&title={TEXT}&url={URL}",width:600,height:500,background:"#CC0713",color:"#fff"},friendfeed:{name:"FriendFeed",url:"http://www.friendfeed.com/share?url={URL}&title={TEXT}",width:800,height:550,background:"#87a9d9",color:"#fff"},googlebookmarks:{name:"Google Bookmarks",url:"https://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk={URL}&title={TEXT}&annotation={DESC}",width:600,height:500,background:"#4A8CF6",color:"#fff"},googlemail:{name:"Gmail",url:"https://mail.google.com/mail/u/0/?view=cm&fs=1&to&su={TEXT}&body={URL}&ui=2&tf=1",width:600,height:500,background:"#E04C40",color:"#fff"},googleplus:{name:"Google+",url:"https://plus.google.com/share?url={URL}",width:512,height:432,background:"#dd4b39",color:"#fff",method:"googleplus",fetch:"https://clients6.google.com/rpc?key=AIzaSyCKSbrvQasunBoV16zDH9R33D88CeLr9gQ",parse:function(t){return parseInt(t.result.metadata.globalCounts.count)},priority:96},hootsuite:{name:"Hootsuite",url:"https://hootsuite.com/hootlet/load?address={URL}&title={TEXT}",width:750,height:650,background:"#000",color:"#fff"},houzz:{name:"Houzz",width:600,height:500,background:"#7AC143",color:"#fff",javascript:function(){function t(t,e,i){var s=t.indexOf("?"),n=t.indexOf("#");return s==t.length-1&&(t=t.substring(0,s),s=-1),(n>0?t.substring(0,n):t)+(s>0?"&"+e+"="+i:"?"+e+"="+i)+(n>0?t.substring(n):"")}var e=document.createElement("link");e.rel="stylesheet",e.href=t("//www.houzz.com/res/2125/css/style?f=clipper","cb",Math.floor(1e6*Math.random())),document.getElementsByTagName("head")[0].appendChild(e);var i=document.createElement("script");i.type="text/javascript",i.src=t("//www.houzz.com/js/script?f=clipper&v=2125&s=101&l=en-US&d=1&m=1","cb",Math.floor(1e6*Math.random())),document.body.appendChild(i)}},instapaper:{name:"Instapaper",url:"http://www.instapaper.com/hello2?url={URL}&title={TEXT}&description={DESC}",width:475,height:200,background:"#464646",color:"#000"},kaboodle:{name:"Kaboodle",width:600,height:500,background:"#B9212A",color:"#fff",javascript:function(){var t="0.3",e=document,i;try{i=e.standardCreateElement("script")}catch(t){}"object"!=typeof i&&(i=e.createElement("script"));try{i.type="text/javascript",i.src="http://www.kaboodle.com/zg/g.js",i.id="c_grab_js",e.getElementsByTagName("head")[0].appendChild(i)}catch(t){window.location="http://www.kaboodle.com/za/selectpage?p_pop=false&pa=url&u="+window.location}}},kik:{name:"Kik",url:"http://share-api.kik.com/share.do?url={URL}&title={TEXT}",width:600,height:550,background:"#8CC04F",color:"#fff"},lineapp:{name:"Line",url:"http://line.me/R/msg/text/?{TEXT}%20-%20{URL}",width:600,height:500,background:"#01C312",color:"#fff"},linkedin:{name:"LinkedIn",url:"http://www.linkedin.com/shareArticle?mini=true&url={URL}&title={TEXT}&summary={DESC}",width:615,height:495,background:"#007bb6",color:"#fff",method:"linkedin",fetch:"https://www.linkedin.com/countserv/count/share?format=jsonp&url={URL}",parse:function(t){return parseInt(t.count)},priority:91},meneame:{name:"Menéame",url:"https://www.meneame.net/submit.php?url={URL}",width:600,height:500,background:"#FC6320",color:"#fff"},microsoftonenote:{name:"Microsoft OneNote",url:"https://www.onenote.com/clipper/save?sourceUrl={URL}&title={TEXT}&notes={DESC}",width:800,height:660,background:"#80397B",color:"#fff"},misterwong:{name:"Mister Wong",url:"http://www.mister-wong.com/index.php?action=addurl&bm_url={URL}&bm_description={TEXT}",width:1e3,height:560,background:"#AB0414",color:"#fff"},misterwongcn:{name:"Mister Wong CN",url:"http://www.mister-wong.cn/index.php?action=addurl&bm_url={URL}&bm_description={TEXT}",width:1e3,height:560,background:"#AB0414",color:"#fff"},misterwonges:{name:"Mister Wong ES",url:"http://www.mister-wong.es/index.php?action=addurl&bm_url={URL}&bm_description={TEXT}",width:1e3,height:560,background:"#AB0414",color:"#fff"},misterwongfr:{name:"Mister Wong FR",url:"http://www.mister-wong.fr/index.php?action=addurl&bm_url={URL}&bm_description={TEXT}",width:1e3,height:560,background:"#AB0414",color:"#fff"},misterwongru:{name:"Mister Wong RU",url:"http://www.mister-wong.RU/index.php?action=addurl&bm_url={URL}&bm_description={TEXT}",width:1e3,height:560,background:"#AB0414",color:"#fff"},newsvine:{name:"Newsvine",url:"http://www.newsvine.com/_tools/seed&save?u={URL}&h={TEXT}",width:500,height:700,background:"#11660C",color:"#fff"},odnoklassniki:{name:"Odnoklassniki",url:"http://connect.ok.ru/dk?st.cmd=WidgetSharePreview&st.shareUrl={URL}",width:540,height:395,background:"#F38230",color:"#fff"},outlook:{name:"Outlook",url:"https://mail.live.com/secure/start?action=compose&to=&subject={TEXT}&body={URL}",width:600,height:500,background:"#1172C6",color:"#fff"},pinboardin:{name:"Pinboard",url:"https://pinboard.in/add?next=same&url={URL}&description={DESC}&title={TEXT}",width:600,height:500,background:"#214CF4",color:"#fff"},pinterest:{name:"Pinterest",url:"http://pinterest.com/pin/create/button/?url={URL}&description={TEXT}&media={IMAGE}",width:765,height:320,background:"#cb2027",color:"#fff",fetch:"//widgets.pinterest.com/v1/urls/count.json?callback=?&source=6&url={URL}",parse:function(t){return parseInt(t.count)},javascript:function(t,e,i,s,n,r,a){!function(i,s,n,r,a,l,c){var u="",h={k:"PIN_"+(new Date).getTime(),me:/\/\/assets\.pinterest\.com\/js\/pinmarklet\.js/,grid:t+"/apps/share/pinterest-grid",maxWait:5e3,quality:30,xv:"data-pinterest-extension-installed",log:"https://log.pinterest.com/",hazPinningNow:"data-pinterest-pinmarklet-rendered",pattern:{instagram:{page:/^https?:\/\/(.*?\.|)instagram\.com\//,url:/^https?:\/\/(.*?\.|)instagram\.com\/p\//},amazon:{media:/^https?:\/\/(.*?\.|)images-amazon\.com\/images\//,page:/^https?:\/\/(.*?\.|)amazon\.com\//},pinterest:{page:/^https?:\/\/(.*?\.|)pinterest\.com\//},facebook:{page:/^https?:\/\/([a-zA-Z0-9]*\.|)facebook\.com\//},craigslist:{page:/^https?:\/\/(.*?\.|)craigslist\.org\//},itunes:{page:/^https?:\/\/itunes\.apple\.com\//},youtube:{iframe:/^https?:\/\/www\.youtube\.com\/embed/,media:/^https?:\/\/(.*?\.|)ytimg\.com\/(vi|li)\//,page:/^https?:\/\/(.*?\.|)youtube\.com\//},flickr:{media:/^https?:\/\/(.*?)\.staticflickr\.com\//,page:/^https?:\/\/www\.flickr\.com\//},"500px":{media:/^https?:\/\/(.*?)\.500px\.org\//},vimeo:{iframe:/^https?:\/\/player\.vimeo\.com\/video\//,media:/^https?:\/\/i\.vimeocdn\.com\/video\//,page:/^https?:\/\/vimeo\.com\//},google:{page:/^https?:\/\/www\.google\.com\/search(.*&tbm=isch.*)/},twitter:{page:/^https?:\/\/twitter\.com\//},wikipedia:{page:/^https?:\/\/(.*?\.|)wikipedia\.org\//}},validConfigParam:["debug","noCancel","noHeader","pinMethod","render","share","quiet","quality","pinbox","via","xuid","edu","guid"],validImageFileType:{gif:1,jpg:1,jpeg:1,png:1,webp:1},invalidImageFileType:{svg:1},imgLimitMin:119,imgLimitFloor:79,imgLimitHorz:3,thumbCellSize:236,thumbCellMargin:14,tag:{link:["rel","href"],meta:["name","content","property","http-equiv","content-language"],a:["data-pin-href","data-pin-id"],iframe:["src"],img:["src","title","alt","naturalHeight","naturalWidth","nopin","data-pin-nopin","data-pin-id","data-pin-media","data-pin-url","data-pin-description","usemap"]},cdn:{"https:":"https://s-passets.pinimg.com","http:":"http://passets.pinterest.com"},msg:e,hashList:[/efa3a2deb839/,/20c46b653b00/,/9e2089d8b8f2/,/820a6e7baa0f/,/293aa4f9b3d0/,/1529ad2b2cc8/,/8de5d416e5d2/,/8c2d5961f7af/,/540b2374abf1/,/415215dcadbf/,/dbafdf055617/,/871de03c9980/,/85ae87da6618/,/1d1d5ffa1d50/,/1847807c0ea1/,/08fb2eb6424d/,/a32353817e45/,/71c1f4783e6d/,/79f57d83d54a/,/eefa602a72ed/,/32aa39d04eb4/,/25f7c9982cea/]},d=window[h.k]={w:window,d:document,a:h,s:{},f:function(){return{callback:[],sha:function(t){function e(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<24-i%32;return e}function i(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>24-i%32&255);return e}function s(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function n(t,e){return t<<e|t>>>32-e}function o(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var i=Array(80),o=1732584193,l=-271733879,c=-1732584194,u=271733878,h=-1009589776,d=0;d<t.length;d+=16){for(var m=o,p=l,f=c,g=u,v=h,b=0;b<80;b++){i[b]=b<16?t[d+b]:n(i[b-3]^i[b-8]^i[b-14]^i[b-16],1);var y=s(s(n(o,5),r(b,l,c,u)),s(s(h,i[b]),a(b)));h=u,u=c,c=n(l,30),l=o,o=y}o=s(o,m),l=s(l,p),c=s(c,f),u=s(u,g),h=s(h,v)}return Array(o,l,c,u,h)}function r(t,e,i,s){return t<20?e&i|~e&s:t<40?e^i^s:t<60?e&i|e&s|i&s:e^i^s}function a(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function l(t){return i(o(e(t),8*t.length))}function c(t){for(var e,i="0123456789abcdef",s="",n=0;n<t.length;n++)e=t.charCodeAt(n),s=s+i.charAt(e>>>4&15)+i.charAt(15&e);return s}return c(l(t))},get:function(t,e){var i=null;return i=void 0!==t[e]?t[e]:t.getAttribute(e)},set:function(t,e,i){"string"==typeof t[e]?t[e]=i:t.setAttribute(e,i)},getEl:function(t){var e=null;return e=t.target?3===t.target.nodeType?t.target.parentNode:t.target:t.srcElement},parse:function(t,e){var i,s,n,o,r,a;if(a={},i=t.split("#")[0].split("?"),i[1])for(s=i[1].split("&"),o=0,r=s.length;o<r;o+=1)n=s[o].split("="),2===n.length&&e[n[0]]&&(a[n[0]]=n[1]);return a},make:function(t){var e,i,s,n=!1;for(e in t)if(t[e].hasOwnProperty){n=d.d.createElement(e);for(i in t[e])if(t[e][i]&&t[e][i].hasOwnProperty)if("string"==typeof t[e][i])d.f.set(n,i,t[e][i]);else if("style"===i)for(s in t[e][i])n.style.setProperty?n.style.setProperty(s,t[e][i][s],"important"):n.style[s]=t[e][i][s];break}return n},kill:function(t){"string"==typeof t&&(t=d.d.getElementById(t)),t&&t.parentNode&&t.parentNode.removeChild(t)},call:function(t,e){var i,s,n="?";d.v.nextCallback||(d.v.nextCallback=0),i=d.v.nextCallback,d.v.nextCallback=d.v.nextCallback+1,s=d.a.k+".f.callback["+i+"]",d.f.callback[i]=function(t){e(t,i),d.f.kill(s),d.v.callbackLoadingCount=d.v.callbackLoadingCount-1},t.match(/\?/)&&(n="&"),d.d.b.appendChild(d.f.make({SCRIPT:{id:s,type:"text/javascript",charset:"utf-8",src:t+n+"callback="+s}})),d.v.callbackLoadingCount=d.v.callbackLoadingCount+1},listen:function(t,e,i,s){void 0!==d.w.sumomeSharePinterestEvent&&(void 0!==t.removeEventListener&&t.removeEventListener(e,d.w.sumomeSharePinterestEvent,!1),void 0!==t.detachEvent&&t.detachEvent("on"+e,d.w.sumomeSharePinterestEvent)),s?void 0!==t.removeEventListener?t.removeEventListener(e,i,!1):void 0!==t.detachEvent&&t.detachEvent("on"+e,i):void 0!==d.w.addEventListener?t.addEventListener(e,i,!1):void 0!==d.w.attachEvent&&t.attachEvent("on"+e,i),d.w.sumomeSharePinterestEvent=i},debug:function(t){},getConfig:function(){var t=d.d.getElementsByTagName("SCRIPT"),e=t.length,i=0,s=0,n=d.a.validConfigParam.length,o=null,r="",a=function(t){d.w.setTimeout(function(){d.f.kill(t)},10)};for(i=0;i<e;i+=1)if(t[i].src.match(d.a.me)){for(s=0;s<n;s+=1)r=d.a.validConfigParam[s],(o=t[i].getAttribute(r))&&(d.v.config[r]=o);a(t[i]);break}},getSelection:function(){return(""+(d.w.getSelection?d.w.getSelection():d.d.getSelection?d.d.getSelection():d.d.selection.createRange().text)).replace(/(^\s+|\s+$)/g,"")},getDim:function(t){var e,i;return e=0,i=0,"number"==typeof t.naturalHeight?e=t.naturalHeight:"number"==typeof t.height&&(e=t.height),"number"==typeof t.naturalWidth?i=t.naturalWidth:"number"==typeof t.width&&(i=t.width),{h:e,w:i}},check:{fileType:function(t){var e,i;return e=!0,t.src&&(i=t.src.split("#")[0].split("?")[0].split(".").pop(),d.a.invalidImageFileType[i]&&(e=!1)),e},visibility:function(t){var e,i,s;for(i=t.parentNode,e=!0;i&&"HTML"!==i.tagName;){if(i.currentStyle?("none"===i.currentStyle.display||"hidden"===i.currentStyle.visibility)&&(e=!1):d.w.getComputedStyle&&("none"===d.w.getComputedStyle(t).getPropertyValue("display")||"hidden"===d.w.getComputedStyle(t).getPropertyValue("visibility"))&&(e=!1),!1===e){s=t.src+": is invisible";break}i=i.parentNode}return e},noPin:function(t){var e,i;return e=!0,d.f.get(t,"data-pin-nopin")&&(e=!1,i=t.src+": data-pin-nopin=true"),d.f.get(t,"nopin")&&(e=!1,i=t.src+": nopin=nopin"),e},size:function(t){var e,i,s;return e=!1,s=d.f.getDim(t),s.h>d.a.imgLimitFloor&&s.w>d.a.imgLimitFloor?s.h>d.a.imgLimitMin||s.w>d.a.imgLimitMin?s.w<s.h*d.a.imgLimitHorz?e=!0:i=t.src+" too wide":i=t.src+" one dimension <= "+d.a.imgLimitMin:i=t.src+" one dimension <= "+d.a.imgLimitFloor,e},dupe:function(t){var e=t;"object"==typeof t&&(e=t.src);var i=!0;return d.v.src[e]?i=!1:d.v.src[e]=!0,i},source:function(t,e){var i,s,n;return i=!1,n="string"==typeof t?t:t.src||t.href,n&&n.match(/^http/)&&(n.match(/File:/)||(e?(s=n.split("#")[0].split("?")[0].split(".").pop(),d.a.validImageFileType[s]&&(i=!0)):i=!0)),i},domain:function(t){var e,i,s,n,o;if(o=t,"object"==typeof t&&(o=t.src),n=o.split("/")[2],s=!0,void 0===d.v.srcDomain[n]){for(var i=d.f.sha(n),e=0,r=d.a.hashList.length;e<r;e+=1)if(i.match(d.a.hashList[e])){s=!1;break}d.v.srcDomain[n]={bad:s}}else s=d.v.srcDomain[n].bad;return s}},tag:{img:function(t){var e,i;e=!0;for(i in d.f.check)if(!d.f.check[i](t)){e=!1;break}return e},iframe:function(t){var e,i;if(t.src.match(d.a.pattern.instagram.url)&&(i=t.src.split("embed"),i[1]&&(e="https://api.instagram.com/oembed?url="+encodeURIComponent(i[0]),d.f.call(e,d.f.handlers.instagram))),t.src.match(d.a.pattern.youtube.iframe)){var i=t.src.split("#")[0].split("?")[0].split("/")[4];i&&(e={media:"http://i.ytimg.com/vi/"+i+"/hqdefault.jpg",set:{description:d.d.title,url:"http://www.youtube.com/watch?v="+i,isVideo:!0,attrib:"youtube"}},d.f.loadImg(e))}t.src.match(d.a.pattern.vimeo.iframe)&&(i=function(t){t.thumbnail_url&&(e={media:t.thumbnail_url.split("_")[0]+".jpg",set:{url:"https://vimeo.com/"+t.video_id,description:t.title,isVideo:!0,attrib:"vimeo"}},d.f.loadImg(e))},e="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(t.src),d.f.call(e,i))},a:function(t){var e,i,s,n;(i=d.f.get(t,"data-pin-href"))&&(s=d.f.parse(i,{url:!0,media:!0,description:!0}),s.media&&(e={media:decodeURIComponent(s.media),set:{pinItButton:!0,url:decodeURIComponent(s.url)||void 0,description:decodeURIComponent(s.description)||void 0}},n=d.f.get(t,"data-pin-id"),n&&(e.set.dataPinId=n),d.f.loadImg(e),d.v.hazLoggedPinItButton||(d.v.hazLoggedPinItButton=!0)))},link:function(t){var e,i;e=t.rel,i=t.href,e&&i&&(e=e.toLowerCase(),"canonical"===e&&(d.v.canonicalUrl||(d.v.canonicalUrl=i)),("icon"===e||"shortcut-icon"===e||"apple-touch-icon"===e)&&(d.v.config.favicon=i))},meta:function(t){var e,i,s,n,o,r;e=d.f.get(t,"content"),i=d.f.get(t,"description"),s=d.f.get(t,"property"),o=d.f.get(t,"http-equiv"),r=d.f.get(t,"content-language"),n=d.f.get(t,"name"),o&&r&&d.f.setLang(r),e&&(n&&"pinterest"===n&&("nopin"===e.toLowerCase()&&(d.v.data.close=i||d.v.msg.noPinMeta),"nohover"===e.toLowerCase()&&(d.v.noHoverMeta=!0),"pinterest-rich-pin"===n&&e.toLowerCase()),s&&("og:image"===s&&(d.v.meta.og.media=e),"og:url"===s&&(d.v.meta.og.url=e),"og:description"===s&&(d.v.meta.og.description=e),"og:title"===s&&(d.v.meta.og.title=e),"pin:media"===s&&(d.v.meta.pinterest.media=e),"pin:url"===s&&(d.v.meta.pinterest.url=e),"pin:description"===s&&(d.v.meta.pinterest.description=e),"pin:id"===s&&(d.v.meta.pinterest.id=e)))}},loadImg:function(t){var e,i;d.v.imgLoadingCount=d.v.imgLoadingCount+1,e=d.d.createElement("IMG"),e.onerror=function(){d.w.clearTimeout(i),d.v.imgLoadingCount=d.v.imgLoadingCount-1},e.onload=function(){var e,s,n,o,r,a;if(d.w.clearTimeout(i),n={},d.v.imgLoadingCount=d.v.imgLoadingCount-1,n.loaded=!0,a=d.f.getDim(this),n.height=a.h,n.width=a.w,n.media=this.src,t.set)if("string"==typeof t.set)n[t.set]=!0,d.v.hazSet[t.set]=!0;else for(e in t.set)n[e]=t.set[e],d.v.hazSet[e]=!0;for(t.url&&d.v.canonicalUrl&&(t.url!==d.v.canonicalUrl?(o=d.v.canonicalUrl.split("/")[2],r=t.url.split("/")[2],o===r?(n.url=t.url,n.linkOffPage=!0):(n.url=t.url,n.via=d.v.canonicalUrl,n.linkOffDomain=!0)):n.isVideo&&(n.isCanonical=!0),d.f.kill(this)),t.description&&(n.description=t.description),d.v.found.unshift(n),e=1,s=d.v.found.length;e<s;e+=1)if(d.v.found[e].media===this.src){n.metaOg?(n.description&&(d.v.found[e].description=n.description),n.url&&(d.v.found[e].url=n.url),d.v.found[e].isCanonical=!0,d.v.found.shift()):d.v.found.splice(e,1);break}},i=d.w.setTimeout(function(){e=null,d.v.imgLoadingCount=d.v.imgLoadingCount-1},d.a.maxWait),e.src=t.media},handlers:{instagram:function(t){t&&t.thumbnail_url&&t.title&&t.html&&(o={media:t.thumbnail_url,set:{url:t.html.split('<a href="')[1].split('"')[0],description:t.title}},d.f.loadImg(o))}},srcSet:function(t){var e=d.f.get(t,"srcset"),i,s,n,o,r="",a=0;if(e&&(i=e.split(","),i.length)){for(s=0;s<i.length;s+=1)o=i[s].replace(/^\s+|\s+$/g,"").replace(/\s\s+/g," ").split(" "),o[1]&&(o[1]=o[1].replace(/[^0-9.]/g,"")-0,a<o[1]&&(a=o[1],r=o[0]));r&&(n=r.split("#")[0].split("?")[0].split(".").pop(),d.a.validImageFileType[n]&&!t.getAttribute("data-pin-media")&&t.setAttribute("data-pin-media",r))}},modifiers:{page:[function(){var t,e,i,n=s||d.d.URL;n.match(d.a.pattern.vimeo.page)&&(e=d.d.getElementsByTagName("VIDEO")[0])&&(i=e.parentNode.parentNode.getAttribute("data-thumb"))&&(t={media:i,set:{sourceBump:!0,url:n,description:d.d.title}},d.f.loadImg(t))},function(){var t,e,i,n,o=s||d.d.URL;if(o.match(d.a.pattern.instagram.page))if(o.match(d.a.pattern.instagram.url))n="https://api.instagram.com/oembed?url="+encodeURIComponent(o),d.f.call(n,d.f.handlers.instagram);else for(t=d.d.getElementsByTagName("A"),e=0,i=t.length;e<i;e+=1)t[e].href&&t[e].href.match(d.a.pattern.instagram.url)&&(n="https://api.instagram.com/oembed?url="+encodeURIComponent(t[e].href.split("#")[0].split("?")[0]),d.f.call(n,d.f.handlers.instagram))},function(){var t,e,i,n,o,r,a;if((s||d.d.URL).match(d.a.pattern.amazon.page)){var e=d.d.getElementsByTagName("A");for(i=0,n=e.length;i<n;i+=1)if(e[i].href&&e[i].href.match("pinterest.com%2Fpin%2Fcreate%2Fbutton%3F")){if(t=e[i].href.split("&token=")[0].split("pinterest.com%2Fpin%2Fcreate%2Fbutton%3F"),t[1])try{(o=decodeURIComponent(t[1]))&&(a=d.f.parse("?"+o,{url:!0,media:!0,description:!0}),a.media&&a.url&&a.description&&(a.url=a.url.split("ref%3D")[0],a.description=a.description.split("http")[0],r={media:decodeURIComponent(a.media),set:{sourceBump:!0,url:decodeURIComponent(a.url),description:decodeURIComponent(a.description)}},d.f.loadImg(r)))}catch(t){}break}}},function(){var t,e,i,n,o,r,a,l,c,u=s||d.d.URL;if(c=function(t){var e={};e.media="https://i.ytimg.com/vi/"+t.id+"/hqdefault.jpg",e.url="http://www.youtube.com/watch?v="+t.id,e.set={isVideo:!0,attrib:"youtube",url:e.url,description:d.d.title},t.sourceBump&&(e.set.sourceBump=!0),t.sourceOrder&&(e.set.sourceOrder=t.sourceOrder),d.f.loadImg(e)},u.match(d.a.pattern.youtube.page))for(e=u.split("#")[0].split("?v="),e[1]&&c({id:e[1].split("&")[0],sourceBump:!0}),e=d.d.getElementsByClassName("_mfw"),i=0,n=e.length;i<n;i+=1)if((o=e[i].currentStyle||d.w.getComputedStyle(e[i],!1))&&o.backgroundImage&&"none"!==o.backgroundImage&&(t=o.backgroundImage.split("&")[0].split("="),t[1])){for(r=t[1].split(","),a=r.length-1,l=-1;a>l;a-=1)c({id:r[a],sourceOrder:a});break}},function(){var t,e,i,n,o,r,a,l,c,u;if((s||d.d.URL).match(d.a.pattern.google.page)&&(d.v.doNotSort=!0,t=d.d.getElementById("ires")))for(e=t.getElementsByTagName("A"),i=0,n=e.length;i<n;i+=1)if(a="",media="",e[i].href&&(r=e[i].href.split("imgrefurl="),r[1]&&(a=r[1].split("&")[0]),r=e[i].href.split("imgurl="),r[1]&&(media=r[1].split("&")[0])),a&&media&&(o=e[i].getElementsByTagName("IMG"),o[0]&&(d.f.set(o[0],"data-pin-url",decodeURIComponent(a)),d.f.set(o[0],"data-pin-media",decodeURIComponent(media)))),l=e[i].parentNode.getElementsByTagName("DIV"),l[2]&&(c=l[2].textContent))try{"object"==typeof(u=JSON.parse(c))&&(u.s||u.pt)&&d.f.set(o[0],"data-pin-description",u.s||u.pt)}catch(t){}},function(){(s||d.d.URL).match(d.a.pattern.pinterest.page)&&!0===window.isMainPinterestSite&&(d.v.data.close=d.v.msg.noPinningFromPinterest)},function(){(s||d.d.URL).match(d.a.pattern.facebook.page)&&(d.v.data.close=d.v.msg.noPinDomain.replace(/%noPinDomain%/,"Facebook"))},function(){(s||d.d.URL).match(d.a.pattern.craigslist.page)&&(d.v.data.close=d.v.msg.noPinDomain.replace(/%noPinDomain%/,"Craigslist"))}],img:[function(t,e){if((s||d.d.URL).match(d.a.pattern.itunes.page)){t.description=d.d.title.split(" on the App Store")[0];var i=d.d.getElementById("title");if(i){var n=i.getElementsByTagName("H1"),o=i.getElementsByTagName("H2");if(n[0]&&o[0]){var r=n[0].innerHTML,a=o[0].innerHTML;r&&a&&(a=a.charAt(0).toLowerCase()+a.substr(1),t.description=r+" "+a)}}}},function(t,e){var i,n;(s||d.d.URL).match(d.a.pattern.twitter.page)&&(i=e.parentNode.parentNode)&&"A"===i.tagName&&d.f.get(i,"data-resolved-url-large")&&(t.media=d.f.get(i,"data-resolved-url-large"),t.url=i.href,(n=i.parentNode.parentNode.parentNode.getElementsByClassName("tweet-text")[0])&&"P"===n.tagName&&(t.description=n.innerText))},function(t,e){var i;return i=!1,t.media.match(d.a.pattern.flickr.media)&&(t.getsAttribution=!0,t.attrib="flickr",t.url=d.v.canonicalUrl,i=!0),i},function(t,e){var i,s,n;return i=!1,t.media.match(d.a.pattern["500px"].media)&&(t.getsAttribution=!0,s=t.media.split("#")[0].split("?")[0].split("/"),n=s.pop(),n.match(/.jpg/)&&(t.media=s.join("/")+"/2048.jpg",t.set={getsAttribution:!0,attrib:"fivehundredpx",url:d.v.canonicalUrl},d.f.loadImg(t),i=!0)),i},function(t,e){var i,s;return i=!1,t.media.match(d.a.pattern.youtube.media)&&(s=t.media.split("/")[4],t.media="https://i.ytimg.com/vi/"+s+"/hqdefault.jpg",t.url=d.v.canonicalUrl,t.url.match(d.a.pattern.youtube.page)&&(t.url="https://www.youtube.com/watch?v="+s),t.set={isVideo:!0,attrib:"youtube",url:t.url},d.f.loadImg(t),i=!0),i},function(t,e){var i,s;return i=!1,t.url||(t.url=d.v.canonicalUrl),s=t["data-pin-url"],s&&(delete t["data-pin-url"],t.dataPinUrl=s,t.url=s),s=t["data-pin-id"],s&&(delete t["data-pin-id"],t.dataPinId=s),s=t["data-pin-description"],s&&(delete t["data-pin-description"],t.dataPinDescription=s),s=t["data-pin-media"],s&&(delete t["data-pin-media"],d.f.check.source(s)&&(t.media=s,t.set={dataPinMedia:!0,url:t.url},t.dataPinUrl&&(t.set.dataPinUrl=t.dataPinUrl),t.dataPinDescription&&(t.set.dataPinDescription=t.dataPinDescription),t.dataPinId&&(t.set.dataPinId=t.dataPinId),d.f.loadImg(t),i=!0)),i},function(t,e){var i,n,o=s||d.d.URL;return i=!1,n=e.parentNode,"A"===n.tagName&&n.href&&d.f.check.source(n,!0)&&!o.match(d.a.pattern.wikipedia.page)&&(t.url||(t.url=d.v.canonicalUrl),t.media=n.href,t.set={linkedImg:!0,url:t.url},d.f.loadImg(t),i=!0),i}],meta:[function(){var t,e;return t=!1,d.v.meta.pinterest&&d.v.meta.pinterest.media&&d.f.check.source(d.v.meta.pinterest.media)&&(e={media:d.v.meta.pinterest.media,set:{metaPinterest:!0,url:d.v.meta.pinterest.url||d.v.canonicalUrl,description:d.v.meta.pinterest.description||d.d.title||void 0}},d.v.meta.pinterest.id&&(e.set.dataPinId=d.v.meta.pinterest.id),d.f.loadImg(e),t=!0),t},function(){var t,e;return d.v.meta.og&&d.v.meta.og.media&&d.f.check.source(d.v.meta.og.media)&&(e={media:d.v.meta.og.media,set:{metaOg:!0,url:d.v.meta.og.url||d.v.canonicalUrl,description:d.v.meta.og.description||d.v.meta.og.title||d.d.title||void 0}},d.f.loadImg(e),t=!0),t=!1}]},runMods:function(t,e,i){if(d.f.modifiers[t])for(var s=0;s<d.f.modifiers[t].length&&!d.f.modifiers[t][s](e,i);s+=1);},getTags:function(){var t,e,i,s,n,o,r,a,l,c;for(t in d.a.tag)if(e=d.d.getElementsByTagName(t),i=e.length)for(s=d.a.tag[t],n=0;n<i;n+=1){for("img"===t&&d.f.srcSet(e[n]),o=null,r=0;r<s.length;r+=1)(a=d.f.get(e[n],s[r]))&&(o||(o={}),o[s[r]]=a);o&&"function"==typeof d.f.tag[t]&&d.f.tag[t](e[n])&&"img"===t&&(o.sourceOrder=d.v.sourceOrder,d.v.sourceOrder=d.v.sourceOrder+1,o.src&&(o.media=o.src,delete o.src),d.f.runMods(t,o,e[n]),o.description||(l=o.media.split("/").pop(),c=l.split(".")[0],(o.title===l||o.title===c)&&(o.title=null),(o.alt===l||o.alt===c)&&(o.alt=null),o.description=o.title||o.alt||d.v.meta.pinterest.description||d.v.meta.og.description||d.v.meta.og.title||d.v.title||void 0),d.v.found.push(o))}},arrange:function(){var t,e,i,s,n,o;for(t=0,e=d.v.found.length;t<e;t+=1)o=0,i=d.v.found[t],i.dataPinDescription&&(i.description=i.dataPinDescription),!i.description&&(i.description=u),i.description=i.description.substring(0,497),497===i.description.length&&(i.description=i.description+"..."),"number"==typeof i.naturalHeight&&i.naturalHeight&&(i.height=i.naturalHeight,delete i.naturalHeight),"number"==typeof i.naturalWidth&&i.naturalWidth&&(i.width=i.naturalWidth,delete i.naturalWidth),s=parseInt(i.height),n=parseInt(i.width),n>s&&(n=s),s>3*n&&(s=3*n),o=s*n,i.isCanonical&&(o*=3),(i.dataPinId||i.pinItButton||i.dataPinMedia||i.dataPinUrl||i.metaPinterest)&&(o*=3),i.isVideo&&(o*=3),i.sourceBump&&(o*=3),n<d.a.thumbCellSize&&(o/=2,d.v.hazSet.sourceBump&&(o/=10)),i.metaOg&&e>1&&n<d.a.thumbCellSize&&(o/=100),i.sourceOrder&&(o-=100*i.sourceOrder),i.order=o;if(d.v.found.length&&!d.v.doNotSort){var r=function(t,e){return e.order-t.order};for(d.v.found.sort(r),o=d.v.found[0].order,t=1,e=d.v.found.length;t<e;t+=1)if(d.v.found[t].order<o/d.v.config.quality){d.v.found[t].halt=!0;break}}},log:function(t){},done:function(){var t,e;if(d.v.data.close)d.v.config.quiet||d.w.alert(d.v.data.close);else{for(d.f.arrange(),d.v.data.thumb=d.v.found,t=0,e=d.v.data.thumb.length;t<e;t+=1)d.v.data.thumb[t].src=d.v.data.thumb[t].media,d.v.data.thumb[t].isVideo&&(d.v.data.thumb[t].multimedia=!0);if(d.v.config.share)return d.d.b.setAttribute(d.v.config.share,JSON.stringify(d.v.data)),void(d.v.data.thumb.length||d.v.config.quiet||d.w.alert(d.v.msg.noPinnablesFound));if(d.w[d.v.config.render]&&"function"==typeof d.w[d.v.config.render])return void d.w[d.v.config.render](d.v.data);d.v.defaultBodyOverflow="",
"function"==typeof d.w.getComputedStyle&&"function"===d.w.getComputedStyle(d.d.b).getPropertyValue&&(d.v.defaultBodyOverflow=d.w.getComputedStyle(d.d.b).getPropertyValue("overflow")),"visible"===d.v.defaultBodyOverflow&&(d.v.defaultBodyOverflow=""),d.d.b.style.overflow="hidden",d.v.data.config=d.v.config,d.v.data.hazExtension=!0;var s=JSON.stringify(d.v.data);d.s.dark=d.f.make({IFRAME:{id:d.a.k+"_grid",src:d.a.grid,frameBorder:"0",style:{display:"block",position:"fixed",height:"100%",width:"100%",top:"0",left:"0",bottom:"0",right:"0",margin:"0",clip:"auto","z-index":"9223372036854775807"}}});var n=function(){d.d.b.style.overflow=d.v.defaultBodyOverflow,d.d.b.removeAttribute(d.a.hazPinningNow),d.f.kill(d.s.dark)},o=(new Date).getTime();d.s.dark.onload=function(){var t=(new Date).getTime()-o;d.v.receiver=d.s.dark.contentWindow,d.v.receiver.postMessage(s,d.s.dark.src),d.f.listen(d.w,"message",function(t){d.w.clearTimeout(d.v.renderFailed),"x"===t.data&&n();try{var e=JSON.parse(t.data);if("object"==typeof e&&void 0!==e.type&&void 0!==e.url&&void 0!==e.name&&void 0!==e.specs&&"sumomeShareCallback"==e.type){var s=d.w.open(e.url,e.name,e.specs);if(i)var o=0,r="object"!=typeof s||null===s,a=setInterval(function(){(r||s.closed||o++>120)&&(r&&alert("Please disable your popup blocker"),clearInterval(a),i())},500)}}catch(t){}}),this.focus()},d.f.set(d.d.b,d.a.hazPinningNow,"true"),d.d.b.appendChild(d.s.dark),d.v.renderFailed=d.w.setTimeout(function(){d.w.alert(d.v.msg.noPinnablesFound),n()},d.a.maxWait)}},setLang:function(t){t&&("object"==typeof d.a.msg[t]?(d.v.msg=d.a.msg[t],d.v.data.msg=d.v.msg):(t=t.split("-")[0],"object"==typeof d.a.msg[t]?(d.v.msg=d.a.msg[t],d.v.data.msg=d.v.msg):(d.v.msg=d.a.msg.en,d.v.data.msg=d.v.msg)))},getLang:function(){var t;(t=d.d.getElementsByTagName("HTML")[0].getAttribute("lang")||"en")&&(t=t.toLowerCase(),d.f.setLang(t))},init:function(){for(var t,e=s||d.d.URL,i=d.d.getElementsByTagName("TITLE"),n=0;n<i.length;n++)u||(u=i[n].textContent);d.d.b=d.d.getElementsByTagName("BODY")[0],d.d.b&&(d.w.getComputedStyle||(d.w.getComputedStyle=function(){return!1}),d.f.get(d.d.b,d.a.hazPinningNow)||(d.d.d=d.d.documentElement,d.d.h=d.d.getElementsByTagName("HEAD")[0],d.v={sourceOrder:0,canonicalUrl:e,src:{},config:{pinMethod:"bookmarklet",quality:d.a.quality,favicon:d.w.location.protocol+"//"+e.split("/")[2]+"/favicon.ico",xv:d.d.b.getAttribute(d.a.xv)},hazSet:{},meta:{og:{},pinterest:{}},imgLoadingCount:0,callbackLoadingCount:0,srcDomain:{},extensionVer:d.f.get(d.d.b,"data-pinterest-extension-installed")||void 0,msg:d.a.msg.en,css:"",data:{blacklistedSource:{},thumb:[]},found:[]},d.f.getLang(),d.f.getConfig(),d.v.data.url=e,d.v.config.pinbox&&(d.v.data.pinbox=d.v.config.pinbox),d.f.check.domain(e)?(d.f.runMods("page"),d.f.getTags(),d.f.runMods("meta"),d.v.safety=d.w.setTimeout(function(){d.v.check&&d.w.clearTimeout(d.v.check),d.f.done()},d.a.maxWait),(t=function(){d.v.imgLoadingCount>0||d.v.callbackLoadingCount>0?d.v.check=d.w.setTimeout(t,100):(d.v.safety&&d.w.clearTimeout(d.v.safety),d.f.done())})()):(d.v.data.close=d.v.msg.noPinDomain,d.f.done())))}}}()};d.f.init()}(a,i,null,null,!0)},priority:97},plurk:{name:"Plurk",url:"http://www.plurk.com/m?content={URL}&qualifier=shares",width:600,height:500,background:"#CF682E",color:"#fff"},pocket:{name:"Pocket",url:"https://getpocket.com/save?url={URL}&title={TEXT}",width:520,height:315,background:"#EE4056",color:"#fff"},printfriendly:{name:"PrintFriendly.com",background:"#9ec36e",foreground:"#fff",javascript:function(){if(window.priFri)window.print();else{var t="";pfstyle="nbk",pfBkVersion="1",t=window.location.href.match(/https/)?"https://pf-cdn.printfriendly.com/ssl/main.js":"http://cdn.printfriendly.com/printfriendly.js",_pnicer_script=document.createElement("SCRIPT"),_pnicer_script.type="text/javascript",_pnicer_script.src=t+"?x="+Math.random(),document.getElementsByTagName("head")[0].appendChild(_pnicer_script)}}},printerfriendly:{name:"Printer Friendly",background:"#999",foreground:"#fff",javascript:function(){t(document).printPreview()}},reddit:{name:"Reddit",url:"http://reddit.com/submit?url={URL}&title={TEXT}",width:860,height:500,background:"#ff5700",color:"#fff",method:"json",fetch:"//buttons.reddit.com/button_info.json?url={URL}",parse:function(t){return"data"in t&&"children"in t.data&&t.data.children.length>0?parseInt(t.data.children[0].data.score):0},priority:92},slashdot:{name:"Slashdot",width:600,height:500,background:"#1A5C59",color:"#fff",javascript:function(){var t=document.body;t&&!document.xmlVersion&&(z=document.createElement("script"),z.src="https://images.slashdot.org/slashdot-submission.ssl.js",t.appendChild(z))}},sms:{name:"SMS",url:"sms:?body={TEXT}%0A%0D{URL}",width:600,height:500,background:"#0076ff",color:"#fff",priority:93},soupio:{name:"Soup",url:"",width:450,height:400,background:"#C80813",color:"#fff",javascript:function(){var t=["body","frameset","head"],e=document.location.protocol+"//www.soup.io/",i="soup_bookmarklet_"+Math.floor(1e5*Math.random());window.open(e+"bookmarklet-loading.html",i,"toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=400");try{var s=document.createElement("script");s.setAttribute("src",e+"bookmarklet/js/"+i+"/5");for(var n=0;0<t.length;0){var o=document.getElementsByTagName(t[0])[0];if(o){o.appendChild(s);break}}}catch(o){}}},stumbleupon:{name:"StumbleUpon",url:"http://www.stumbleupon.com/submit?url={URL}&title={TEXT}",width:480,height:412,background:"#eb4823",color:"#fff",priority:90},sumome:{name:"SumoMe",url:"",width:600,height:500,background:"#0f52ba",color:"#fff"},tapiture:{name:"Tapiture",url:"http://tapiture.com/widget/tap?url={IMAGE}&title={TEXT}&page_url={URL}&type=image&description=&alt={DESC}&img_title=&img_width=&img_height=",width:600,height:500,background:"#325892",color:"#fff"},techmeme:{name:"Techmeme",filterText:function(t){return function(t,e){var i,s;if(i=t.split(""),i.length>e){for(s=i.length-1;s>-1;--s)if(s>e)i.length=s;else if(" "===i[s]){i.length=s;break}i.push("...")}return i.join("")}(t,117)},url:"https://twitter.com/intent/tweet?url={URL}&text=tip+@techmeme:+{TEXT}",width:600,height:445,background:"#1E4B62",color:"#fff"},tinyurl:{name:"TinyURL",url:"http://tinyurl.com/create.php?url={URL}",width:800,height:660,background:"#009",color:"#fff"},tumblr:{name:"Tumblr",url:"http://www.tumblr.com/share?v=3&u={URL}&t={TEXT}",width:450,height:450,background:"#2c4762",color:"#fff",priority:88},twitter:{name:"Twitter",filterText:function(t){return function(t,e){var i,s;if(i=t.split(""),i.length>e){for(s=i.length-1;s>-1;--s)if(s>e)i.length=s;else if(" "===i[s]){i.length=s;break}i.push("…")}return i.join("")}(t,117)},url:"https://twitter.com/intent/tweet?url={URL}&text={TEXT}&via={VIA}&related={RELATED}",width:600,height:445,background:"#00aced",color:"#fff",params:{via:{label:"Twitter @username",desc:"Twitter screen name to append to tweets with the via attribute. Do not include @ symbol."},related:{label:"Suggested accounts",desc:"Comma separated list of Twitter accounts to suggest following. Do not include @ symbol or spaces."}},priority:98},typepadpost:{name:"Typepad",url:"http://www.typepad.com/services/quickpost/post?v=2&qp_show=ac&qp_title={TEXT}&qp_href={URL}&qp_text={DESC}",width:585,height:735,background:"#7A9B5D",color:"#fff"},viadeo:{name:"Viadeo",url:"http://www.viadeo.com/shareit/share/?url={URL}",width:600,height:600,background:"#E46123",color:"#fff"},vk:{name:"VKontakte",url:"http://vk.com/share.php?url={URL}&title={TEXT}",width:660,height:500,background:"#4D76A1",color:"#fff"},wanelo:{name:"Wanelo",width:600,height:500,background:"#518653",color:"#fff",javascript:function(){function t(){window.waneloBookmarklet()}if(window.waneloBookmarklet)t();else{var e=encodeURIComponent(location.href),i=Math.floor(1e3*Math.random()),s=document.createElement("script");s.setAttribute("src","//wanelo.com/bookmarklet/3/setup?*="+i+"&url="+e),s.onload=t,s.setAttribute("type","text/javascript"),document.getElementsByTagName("head")[0].appendChild(s)}}},weheartit:{name:"We Heart It",url:"http://weheartit.com/heart-it/new_entry?encoding=utf-8&popup=1&hearting_method=heart_it_button&image_url={IMAGE}&source_url={URL}",width:700,height:500,background:"#FD6B9C",color:"#fff"},whatsapp:{name:"WhatsApp",url:"whatsapp://send?text={TEXT}%20{URL}",width:600,height:500,background:"#1d9e11",color:"#fff",priority:94},wordpressblog:{name:"Wordpress Blog",url:"https://sumo.com/apps/share/wordpress?u={URL}&t={TEXT}&s={DESC}&i={IMAGE}",width:600,height:350,background:"#000",color:"#fff"},wykop:{name:"Wykop",url:"http://www.wykop.pl/dodaj/link/?url={URL}&title={TEXT}&desc={DESC}",width:600,height:500,background:"#4684AD",color:"#fff"},xing:{name:"XING",url:"https://www.xing.com/spi/shares/new?url={URL}",width:600,height:600,background:"#006567",color:"#fff"},yahoomail:{name:"Yahoo! Mail",url:"http://compose.mail.yahoo.com/?subject={TEXT}&body={URL}",width:1160,height:690,background:"#2E147B",color:"#fff"},yammer:{name:"Yammer",url:"https://www.yammer.com/messages/new?login=true&trk_event=yammer_share&status={TEXT} {URL}",width:600,height:350,background:"#1074C3",color:"#fff"},ychackernews:{name:"YC Hacker News",url:"https://news.ycombinator.com/submitlink?u={URL}&t={TEXT}",width:600,height:335,background:"#FC6620",color:"#fff"},yummly:{name:"Yummly",url:"http://www.yummly.com/urb/verify?url={URL}&title={TEXT}&image={IMAGE}",width:600,height:500,background:"#e0601f",color:"#fff",fetch:"//www.yummly.com/services/yum-count?url={URL}",parse:function(t){if("count"in t)return parseInt(t.count);if("error"in t)throw new Error(t.error);return 0},priority:87}},t.shareSortedKeys=Object.keys(t.shareServices);var e=function(e,i){var s="priority"in t.shareServices[e]?t.shareServices[e].priority:0,n="priority"in t.shareServices[i]?t.shareServices[i].priority:0,o=n-s;return 0==o?e<i?-1:1:o};t.shareSortedKeys.sort(e),t.shareShortUrls={},t.share=function(e,i,s){var n=i.url||window.location.href.split("#")[0],o=i.text||t('meta[property="og:title"]').eq(0).attr("content")||t("title").eq(0).text()||document.title,s=s||null,r=t('meta[property="og:image"]').eq(0).attr("content")||t('link[rel="image_src"]').eq(0).attr("href")||"",a=i.noSumoBranding;if("twitter"===e&&t('meta[name="twitter:image"]').length&&(r=t('meta[name="twitter:image"]').eq(0).attr("content")),""==r){var l=0,c=null;t("img").each(function(){var e=t(this).width(),i=t(this).height(),s=1;if(e&&i){s=e>=i?i/e:e/i;var n=e*i*s;n>l&&(l=n,c=t(this))}}),null!=c&&(r=c.get(0).src||"")}var e=e.toLowerCase();if(e in t.shareServices)if("javascript"in t.shareServices[e])if("shortenUrl"in i&&"shortener"in i&&i.shortenUrl&&"pinterest"!=e){var u=i.shortener+":"+n;u in t.shareShortUrls?(n=t.shareShortUrls[u],t.shareServices[e].javascript(n,o,null,r,function(){s&&s(e,n)})):t.ajax({type:"POST",dataType:"json",url:i.sumoUrl+"/apps/share/shorten",data:{site_id:i.siteId,href:n},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(a){"success"in a&&a.success&&(t.shareShortUrls[u]=a.url,n=a.url,t.extend(i,a)),t.shareServices[e].javascript(n,o,null,r,function(){s&&s(e,n)})})}else if("pinterest"===e){var h=(document.getElementsByTagName("HTML")[0].getAttribute("lang")||"en").toLowerCase(),d={};t.ajax({type:"POST",dataType:"json",url:i.sumoUrl+"/apps/share/pinterest/messages",data:{site_id:i.siteId,language:h},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(a){void 0!==a.success&&a.success&&void 0!==a.messages?d[h]=a.messages:d[h]={noPinDomain:"Sorry, pinning is not allowed from this domain. Please contact the site operator if you have any questions.",noPinMeta:"Sorry, pinning is not allowed from this page. Please contact the site operator if you have any questions.",noPinnablesFound:"Sorry, couldn't find any pinnable things on this page.",noPinningFromPinterest:"Oops! That button doesn't work on Pinterest. Try using the red Pin It button at the top of any Pin.",choosePin:"Choose a Pin to save"},t.shareServices[e].javascript(i.sumoUrl,d,n,o,null,r,function(){s&&s(e,n)})})}else t.shareServices[e].javascript(n,o,null,r,function(){s&&s(e,n)});else{var m=t.shareServices[e].url,p=t.shareServices[e].width,f=t.shareServices[e].height,g="sumomeShare-"+4294967296*Math.random();if(m){var v=["pinterest","reddit","stumbleupon","yummly"];if("shortenUrl"in i&&"shortener"in i&&i.shortenUrl&&v.indexOf(e)<0){var u=i.shortener+":"+n;u in t.shareShortUrls?(n=t.shareShortUrls[u],t.shareWindow(e,i,m,o,n,r,a,g,s)):("http"==m.toLowerCase().substring(0,4)&&window.open("facebook"==e?"":i.sumoUrl+"/apps/share/loading",g,"height="+f+",width="+p+",location=0,menubar=0,status=0,titlebar=0,toolbar=0"),t.ajax({type:"POST",dataType:"json",url:i.sumoUrl+"/apps/share/shorten",data:{site_id:i.siteId,href:n},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(l){"success"in l&&l.success&&(t.shareShortUrls[u]=l.url,n=l.url,t.extend(i,l)),t.shareWindow(e,i,m,o,n,r,a,g,s)}))}else t.shareWindow(e,i,m,o,n,r,a,g,s)}}},t.shareWindow=function(e,i,s,n,o,r,a,l,c){if("filterText"in t.shareServices[e]&&(n=t.shareServices[e].filterText(n)),s=s.replace(/{URL}/g,encodeURIComponent(o)),s=s.replace("{TEXT}",encodeURIComponent(n)),s=s.replace("{DESC}",""),s=s.replace("{IMAGE}",encodeURIComponent(r)),s=s.replace("{PROMO}",a?"":"%0A%0A%0AShared%20by%20Sumo%20%28%20http%3A%2F%2Fsumo.com%2F%20%29"),"params"in t.shareServices[e])for(var u in t.shareServices[e].params)if(u in i&&i[u])s=s.replace("{"+u.toUpperCase()+"}",encodeURIComponent(i[u]));else if("twitter"!==e||"via"!==u&&"related"!==u||!t('meta[name="twitter:site"]').length&&!t('meta[name="twitter:creator"]').length)s=s.replace("&"+u+"={"+u.toUpperCase()+"}","");else{var h=t('meta[name="twitter:site"]').eq(0).attr("content")||"",d=t('meta[name="twitter:creator"]').eq(0).attr("content")||"",m=h&&d&&h!==d,p;"@"===h.substr(0,1)&&(h=h.substr(1)),"@"===d.substr(0,1)&&(d=d.substr(1)),p="via"===u?m?h+" @"+d:h||d:m?h+","+d:d||h,s=s.replace("{"+u.toUpperCase()+"}",encodeURIComponent(p))}if("sms:?"==s.toLowerCase().substring(0,5)&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&(s=s.replace(/sms:(\+?([0-9]*))?\?/,"sms:$1&")),"http"!=s.toLowerCase().substring(0,4)){var f=document.createElement("a");if(f.href=s,document.body.appendChild(f),"FastClick"in window&&window.FastClick)window.location.href=s;else if(f.click)f.click();else if(document.createEvent){var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window),f.dispatchEvent(g)}document.body.removeChild(f),c&&c(e,o)}else{var v=t.shareServices[e].width,b=t.shareServices[e].height,y=window.open(s,l,"height="+b+",width="+v+",location=0,menubar=0,status=0,titlebar=0,toolbar=0");if(c)var w=0,x=setInterval(function(){(y.closed||w++>120)&&(clearInterval(x),c(e,o))},500)}},t.shareFetch=function(e,i,s){var s=s||null,i=i||window.location.href.split("#")[0];"function"==typeof i&&(s=i,i=window.location.href.split("#")[0]);var e=e.toLowerCase();if(e in t.shareServices&&"fetch"in t.shareServices[e]&&"parse"in t.shareServices[e])try{var n="jsonp";if("method"in t.shareServices[e]&&(n=t.shareServices[e].method),"json"==n)t.ajax({type:"GET",url:t.shareServices[e].fetch.replace("{URL}",encodeURIComponent(i)),jsonp:"jsonp",dataType:"jsonp",cache:!1,success:function(n){try{var o=t.shareServices[e].parse(n);null!==s&&s(null,i,o)}catch(t){null!==s&&s(t)}},error:function(t){null!==s&&s(t)}});else{if("jsonproxy"==n)return s(null,i,0);if("jsonp"==n)t.ajax({type:"GET",url:t.shareServices[e].fetch.replace("{URL}",encodeURIComponent(i)),contentType:"application/json",dataType:"jsonp",cache:!1,success:function(n){try{var o=t.shareServices[e].parse(n);null!==s&&s(null,i,o)}catch(t){null!==s&&s(t)}},error:function(t){null!==s&&s(t)}});else if("googleplus"==n)t.ajax({type:"POST",url:t.shareServices[e].fetch.replace("{URL}",encodeURIComponent(i)),contentType:"application/json",cache:!1,data:JSON.stringify({method:"pos.plusones.get",id:"p",params:{nolog:!0,id:i,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"}),success:function(n){try{var o=t.shareServices[e].parse(n);null!==s&&s(null,i,o)}catch(t){null!==s&&s(t)}},error:function(t){null!==s&&s(t)}});else if("linkedin"==n){for(var o="linkedinjsonpcallback",r=0;r<6;r++)o+=String.fromCharCode(Math.floor(26*Math.random())+97);t.ajax({type:"GET",url:t.shareServices[e].fetch.replace("{URL}",encodeURIComponent(i)),contentType:"application/json",dataType:"jsonp",jsonpCallback:o,cache:!1,success:function(n){try{var o=t.shareServices[e].parse(n);null!==s&&s(null,i,o)}catch(t){null!==s&&s(t)}},error:function(t){null!==s&&s(t)}})}}}catch(t){null!==s&&s(t)}else null!==s&&s(new Error("Invalid service"))}}),sumo.define("insQ",[],function(){return function(){"use strict";function t(t,e){var s,n="insQ_"+r++,o=function(t){t.animationName!==n&&t[l]!==n||i(t.target)||e(t.target)};s=document.createElement("style"),s.innerHTML="@"+c+"keyframes "+n+" {  from {  outline: 1px solid transparent  } to {  outline: 0px solid transparent }  }\n"+t+" { animation-duration: 0.001s; animation-name: "+n+"; "+c+"animation-duration: 0.001s; "+c+"animation-name: "+n+";  } ",document.head.appendChild(s);var a=setTimeout(function(){document.addEventListener("animationstart",o,!1),document.addEventListener("MSAnimationStart",o,!1),document.addEventListener("webkitAnimationStart",o,!1)},m.timeout);return{destroy:function(){clearTimeout(a),s&&(document.head.removeChild(s),s=null),document.removeEventListener("animationstart",o),document.removeEventListener("MSAnimationStart",o),document.removeEventListener("webkitAnimationStart",o)}}}function e(t){t.QinsQ=!0}function i(t){return m.strictlyNew&&!0===t.QinsQ}function s(t){var e=t.parentNode;return e?i(e)?t:s(e):t}function n(t){for(e(t),t=t.firstChild;t;t=t.nextSibling)void 0!==t&&1===t.nodeType&&n(t)}function o(o,r){var a=[],l=function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){a.forEach(n),r(a),a=[]},10)}}();return t(o,function(t){if(!i(t)){e(t);var n=s(t);a.indexOf(n)<0&&a.push(n),l()}})}var r=100,a=!1,l="animationName",c="",u="Webkit Moz O ms Khtml".split(" "),h="",d=document.createElement("div"),m={strictlyNew:!0,timeout:20};if(d.style.animationName&&(a=!0),!1===a)for(var p=0;p<u.length;p++)if(void 0!==d.style[u[p]+"AnimationName"]){h=u[p],l=h+"AnimationName",c="-"+h.toLowerCase()+"-",a=!0;break}var f=function(e){return!(!a||!e.match(/[^{}]/))&&(m.strictlyNew&&n(document.body),{every:function(i){return t(e,i)},summary:function(t){return o(e,t)}})};return f.config=function(t){for(var e in t)t.hasOwnProperty(e)&&(m[e]=t[e])},f}()}),sumo.define("debounce",["jquery"],function(t){"$:nomunge";var e;t.throttle=e=function(e,i,s,n){function o(){function t(){a=+new Date,s.apply(l,u)}function o(){r=void 0}var l=this,c=+new Date-a,u=arguments;n&&!r&&t(),r&&clearTimeout(r),void 0===n&&c>e?t():!0!==i&&(r=setTimeout(n?o:t,void 0===n?e-c:e))}var r,a=0;return"boolean"!=typeof i&&(n=s,s=i,i=void 0),t.guid&&(o.guid=s.guid=s.guid||t.guid++),o},t.debounce=function(t,i,s){return void 0===s?e(t,i,!1):e(t,s,!1!==i)}}),sumo.define("jquery.styleBuffer",["jquery","insQ","jquery.style","debounce"],function(t,e){t.expr[":"].notonpage=t.expr.createPseudo(function(e){return function(e){if("hidden"==t(e).css("visibility")||0==t(e).css("opacity")||"none"==t(e).css("display")||t(e).offset().top>=t(window).height()||t(e).offset().right<=0||t(e).offset().left>=t(window).width()||t(e).offset().left<=-t(e).width()||t(e).offset().bottom<=0)return!0;var i=t(e).parent();return!!i&&i.is(":notonpage")}}),t.fn.removeStyleBuffer=function(e,i){var s=this;return s.each(function(){var s=t(this).data(e+"-buffer-"+i),n=t(this).data(e+"-buffer-"+i+"-priority");t(this).style(e+"-"+i,void 0==s?"":s,void 0==n?"":n)}),t.each(t.fn.styleBuffer._groups,function(t,e){e.elements=e.elements.not(s)}),this},t.fn.styleBufferPage=function(e){var e=e||t("*"),i=t("[data-sumome-stylebuffer-page]"),s=i.length*t(window).height();return i.length>0?($fixed=e.not(i).not("body, html").filter(function(){if(t(this).is("[data-sumome-stylebuffer-page-fixed], #sumome-modal-mask, .sumome-control, .sumome-dialog-popup, .sumome-dialog-popup-overlay, .sumome-blockui, .sumome-block-overlay, .sumome-sp-container"))return!1;var e=t(this).css("position");if("fixed"===e)return!0;if("absolute"!==e)return!1;var i=t(this).parents().filter(function(e,i){return!t(i).is("body,html")&&["relative","fixed","absolute"].indexOf(t(i).css("position"))>=0});if(!i||!i.length)return!0;if(t(this).parents("[data-sumome-stylebuffer-page]").length>0)return!1;if(!t(this).parent().is("body,html"))return!1;var n=t(this).position().top;return n<=s&&n>-2e3}),$fixed.each(function(){t(this).attr("data-sumome-stylebuffer-page-fixed",!0);for(var e=["","-webkit","-ms","-moz","-o"],i=0;i<e.length;i++){var s=e[i];t(this).data("sumome-stylebuffer-original"+s+"-transform",t(this).style(s+(s?"-":"")+"transform")),t(this).data("sumome-stylebuffer-original"+s+"-transform-priority",t(this).style().getPropertyPriority(s+(s?"-":"")+"transform")),t(this).data("sumome-stylebuffer-original"+s+"-transition-duration",t(this).style(s+(s?"-":"")+"transition-duration")),t(this).data("sumome-stylebuffer-original"+s+"-transition-duration-priority",t(this).style().getPropertyPriority(s+(s?"-":"")+"transition-duration")),t(this).data("sumome-stylebuffer-original"+s+"-animation-fill-mode",t(this).style(s+(s?"-":"")+"animation-fill-mode")),t(this).data("sumome-stylebuffer-original"+s+"-animation-fill-mode-priority",t(this).style().getPropertyPriority(s+(s?"-":"")+"animation-fill-mode")),t(this).data("sumome-stylebuffer-original"+s+"-animation-duration",t(this).style(s+(s?"-":"")+"animation-duration")),t(this).data("sumome-stylebuffer-original"+s+"-animation-duration-priority",t(this).style().getPropertyPriority(s+(s?"-":"")+"animation-duration"))}for(var i=0;i<e.length;i++){var s=e[i];t(this).style(s+(s?"-":"")+"transition-duration","0s","important"),t(this).style(s+(s?"-":"")+"transform","scale(0,0)","important"),t(this).style(s+(s?"-":"")+"animation-fill-mode","none","important"),t(this).style(s+(s?"-":"")+"animation-duration","0s","important")}t(this).is("iframe")&&(t(this).data("sumome-stylebuffer-original-display",t(this).style("display")),t(this).data("sumome-stylebuffer-original-display-priority",t(this).style().getPropertyPriority("display")),t(this).style("display","none","important"))})):t("[data-sumome-stylebuffer-page-fixed]").each(function(){for(var e=["","-webkit","-ms","-moz","-o"],i=0;i<e.length;i++){var s=e[i];t(this).style(s+(s?"-":"")+"transform",t(this).data("sumome-stylebuffer-original"+s+"-transform"),t(this).data("sumome-stylebuffer-original"+s+"-transform-priority")),t(this).style(s+(s?"-":"")+"animation-fill-mode",t(this).data("sumome-stylebuffer-original"+s+"-animation-fill-mode"),t(this).data("sumome-stylebuffer-original"+s+"-animation-fill-mode-priority")),t(this).style(s+(s?"-":"")+"animation-duration",t(this).data("sumome-stylebuffer-original"+s+"-animation-duration"),t(this).data("sumome-stylebuffer-original"+s+"-animation-duration-priority")),setTimeout(t.proxy(function(){t(this).style(s+(s?"-":"")+"transition-duration",t(this).data("sumome-stylebuffer-original"+s+"-transition-duration"),t(this).data("sumome-stylebuffer-original"+s+"-transition-duration-priority"))},this),0)}t(this).is("iframe")&&t(this).style("display",t(this).data("sumome-stylebuffer-original-display"),t(this).data("sumome-stylebuffer-original-display-priority")),t(this).removeAttr("data-sumome-stylebuffer-page-fixed")}),i},t.fn.styleBufferTop=function(e){e?t.fn.styleBufferTop._debounceInit(e):t.fn.styleBufferTop._init(e)},t.fn.styleBufferTop._init=function(e){function i(){var e=document.getElementById("sumome-smartbar-popup");if(e){var i=e.getBoundingClientRect(),s=i.height;i.bottom>0&&(s=i.height-i.bottom),t.fn.styleBufferTop.stackedElements.each(function(e,i){t(i).css("marginTop",t(i).data("sumome-stylebuffertop-original-margin")-s)}),t.fn.styleBufferTop.oldTopElements.each(function(e,i){t(i).css("position",t(i).data("sumome-stylebuffertop-original-position")),t(i).css("top",t(i).data("sumome-stylebuffertop-original-top")-s)})}}var s=t.fn.styleBufferPage(),n=s.length*t(window).height();if(e)var o=t("[data-sumome-stylebuffer-top]");else var o=t("[data-sumome-stylebuffer-top],[data-sumome-stylebuffer-top-stash]");var r=0;o.sort(function(e,i){return e=t(e).data("sumome-stylebuffer-top"),i=t(i).data("sumome-stylebuffer-top"),e<i?-1:e>i?1:0}),t.fn.styleBufferTop._groups=[];var a=t("body"),l=t("#sumome-smartbar-popup[data-sumome-stylebuffer-top]"),c=0,u=!1;if(t.fn.styleBufferTop.stackedElements=t(o).not("#sumome-smartbar-popup"),l&&l.data("sumome-smartbar-config")&&(c=l.outerHeight(),u=l.data("sumome-smartbar-config").show_type),t(o).each(function(e,i){t.fn.styleBuffer._apply(t(i),"margin","top",r,!0),t.fn.styleBufferTop._groups.push({elements:t(i),prop:"margin",side:"top",px:r,force:!0}),void 0===t(i).data("sumome-stylebuffertop-original-margin")&&t(i).data("sumome-stylebuffertop-original-margin",r),r+=t(i).height()}),void 0===a.data("sumome-stylebuffertop-original-margintop")?(void 0===a.data("sumome-welcomemat-original-padding-top")?a.data("sumome-stylebuffertop-original-paddingtop",parseInt(a.css("paddingTop"))):a.data("sumome-stylebuffertop-original-paddingtop",parseInt(a.data("sumome-welcomemat-original-padding-top"))),a.data("sumome-stylebuffertop-original-margintop",parseInt(a.css("marginTop")))):(a.css("marginTop",a.data("sumome-stylebuffertop-original-margintop")),a.css("paddingTop",a.data("sumome-stylebuffertop-original-paddingtop")+"px !important")),t.fn.styleBufferTop.oldTopElements&&t.fn.styleBufferTop.oldTopElements.length&&t.fn.styleBufferTop.oldTopElements.each(function(e,i){if(t(i).data("sumome-stylebuffertop-original-offset")){var s=t(i).data("sumome-stylebuffertop-has-inline").top,n=t(i).data("sumome-stylebuffertop-has-inline").bottom,o=t(i).data("sumome-stylebuffertop-has-inline").left,r=t(i).data("sumome-stylebuffertop-has-inline").right,a=t(i).data("sumome-stylebuffertop-has-inline").position,l=t(i).style("right"),c=t(i).position().right,u=t(i).data("sumome-stylebuffertop-original-offset").right,h=t(i).style("left"),d=t(i).position().left,m=t(i).data("sumome-stylebuffertop-original-offset").left;t(i).style("top",t(i).data("sumome-stylebuffertop-original-offset").top),t(i).style("bottom",t(i).data("sumome-stylebuffertop-original-offset").bottom),l!==u&&c>0&&t(i).style("right",u),parseInt(m)>-2e3&&h!==m&&d<t(window).width()&&t(i).style("left",m),s||(t(i)[0].style.top=""),r||(t(i)[0].style.right=""),o||(t(i)[0].style.left=""),n||(t(i)[0].style.bottom=""),a||(t(i)[0].style.position="")}else t(i).style("top","0px")}),!e){!1===t.fn.styleBufferTop.classFixedElements&&(t.fn.styleBufferTop.classFixedElements=t(".fixed").not(o).length);var h=[".sumome-control",".sumome-dialog-popup",".sumome-dialog-popup-overlay",".sumome-image-sharer",".sumome-contactform-left-page-hidden",".sumome-contactform-right-page-hidden"];t.fn.styleBufferTop.oldTopElements=t("*").not(o).not(s).filter(function(e,i){var s=["absolute","fixed"].indexOf(t(i).css("position"))>=0&&t(i).position().top<r&&t(i).position().top>-2e3&&t(i).height()+t(i).position().top>0&&"sumome-modal-mask"!=t(i).attr("id")&&!t(i).is(h.join(","))&&!t(i).parent().is("#parallax-images");if(s&&void 0===t(i).data("sumome-stylebuffertop-original-position")){t(i).data("sumome-stylebuffertop-original-position",t(i).css("position"));var n={top:""!==t(i)[0].style.top,left:""!==t(i)[0].style.left,right:""!==t(i)[0].style.right,bottom:""!==t(i)[0].style.bottom,position:""!==t(i)[0].style.position},o={top:t(i).css("top"),left:t(i).css("left"),bottom:t(i).css("bottom"),right:t(i).css("right")};"auto"!=o.bottom&&parseFloat(o.bottom)>0&&(o.bottom=parseFloat(o.bottom)-r+"px"),t(i).data("sumome-stylebuffertop-original-offset",o),t(i).data("sumome-stylebuffertop-has-inline",n)}return s}),t.fn.styleBufferTop.oldTopElements=t.fn.styleBufferTop.oldTopElements.filter(function(e,i){if("fixed"==t(i).css("position"))return!0;var s=t(i).parents().filter(function(e,i){return!t(i).is("body,html")&&["relative","fixed","absolute"].indexOf(t(i).css("position"))>=0});return!(s&&s.length)}),t.fn.styleBufferTop.bumpDownElements=t.fn.styleBufferTop.oldTopElements.filter(function(e,i){var s=!1;return"fixed"==t(i).css("position")||(t(i).parents().each(function(e,i){if(!t(i).is("body,html")&&["relative","absolute"].indexOf(t(i).css("position"))>=0)return s=!0,!1}),!s)}),t.fn.styleBufferTop.changePositionElements=t.fn.styleBufferTop.bumpDownElements.filter(function(e,i){var s=!1;return"fixed"==t(i).css("position")&&(t(i).parents().each(function(e,i){if(!t(i).is("body,html")&&["relative","absolute","fixed"].indexOf(t(i).css("position"))>=0)return s=!0,!1}),s&&t(i).data("sumome-stylebuffertop-offset",{top:t(i).offset().top-t(window).scrollTop(),left:t(i).offset().left-t(window).scrollLeft()}),s)})}"smart"==u&&(t.fn.styleBufferTop.oldTopElements.addClass("sumome-smartbar-fixedTopSmart"),t(o).not("#sumome-smartbar-popup").style("transition","margin-top .2s ease-in-out"),a.style("transition","margin-top .2s ease-in-out")),"static"==u?(t.fn.styleBufferTop.bumpDownElements&&t.fn.styleBufferTop.bumpDownElements.length&&(t.fn.styleBufferTop.bumpDownElements.each(function(e,i){var s=!1;if(t.inArray(i,t.fn.styleBufferTop.changePositionElements)>=0){s=!0;var n=t(i).offset()}t(i).style("position","absolute"),s?(t(i).data("sumome-smartbar-new-offset",{top:c+n.top-t(i).offset().top,left:n.left-t(i).offset().left}),t(i).style("top",t(i).data("sumome-smartbar-new-offset").top+"px"),t(i).data("sumome-smartbar-new-offset").left!==parseInt(t(i).data("sumome-stylebuffertop-original-offset").left)&&parseInt(t(i).data("sumome-stylebuffertop-original-offset").left)>t(window).width()&&t(i).style("left",t(i).data("sumome-smartbar-new-offset").left+"px")):t(i).style("top",r+"px"),t(i).data("sumome-stylebuffertop-original-top",r)}),t.fn.styleBufferTop.oldTopElements.each(function(e,i){t(i).css("position",t(i).data("sumome-stylebuffertop-original-position"))})),t(window).scroll(i),i()):(t.fn.styleBufferTop.oldTopElements&&t.fn.styleBufferTop.oldTopElements.length&&t.fn.styleBufferTop.oldTopElements.each(function(e,i){t(i).data("sumome-stylebuffertop-original-offset")&&("auto"==t(i).data("sumome-stylebuffertop-original-offset").top||t(i).style("top",r+parseFloat(t(i).data("sumome-stylebuffertop-original-offset").top)+"px"))}),"fixed"==u&&t(window).scroll(function(){var e=60,i=t(window).scrollTop();t.fn.styleBufferTop.classFixedElements!==t.fn.styleBufferTop.classFixedElementsScroll&&(i>=60&&!1===t.fn.styleBufferTop.classFixedElementsScroll?t.fn.styleBufferTop.classFixedElementsScroll=t(".fixed").not(o).length:i>=60&&!t.fn.styleBufferTop.checkScrollDown?(t.fn.styleBufferTop.checkScrollDown=!0,t.fn.styleBufferTop.checkScrollUp=!1,t("body").styleBufferTop()):i<60&&!t.fn.styleBufferTop.checkScrollUp&&(t.fn.styleBufferTop.checkScrollDown=!1,t.fn.styleBufferTop.checkScrollUp=!0,t("body").styleBufferTop()))}));var l=t("#sumome-smartbar-popup");if(l&&l.data("sumome-smartbar-config")&&"smart"==l.data("sumome-smartbar-config").show_type&&(r=0,t("[data-sumome-stylebuffer-top],[data-sumome-stylebuffer-top-stash]").each(function(){r+=t(this).outerHeight()})),t.fn.styleBufferTop.totalOffset=r,r+=a.data("sumome-stylebuffertop-original-paddingtop")+a.data("sumome-stylebuffertop-original-margintop"),r+n!==0?(t.fn.styleBuffer._apply(a,"padding","top",r+n,!0,"important"),t.fn.styleBuffer._apply(a,"margin","top",0,!0,"important"),t.fn.styleBufferTop._groups.push({elements:a,prop:"padding",side:"top",px:r+n,force:!0,priority:"important"}),t.fn.styleBufferTop._groups.push({elements:a,prop:"margin",side:"top",px:0,force:!0,priority:"important"})):(a.removeStyleBuffer("padding","top"),a.removeStyleBuffer("margin","top")),
"bugfix"!=a.css("-webkit-animation-name")&&"androidbugfix"!=a.css("-webkit-animation-name")||(t("[data-sumome-stylebuffertop-bugfix]").length&&t("[data-sumome-stylebuffertop-bugfix]").remove(),a.append("<style data-sumome-stylebuffertop-bugfix>@-webkit-keyframes sumome-bugfix { from { fill: 0; } to { fill: 0; } }</style>"),a.css("-webkit-animation","sumome-bugfix infinite 1s")),void 0===a.data("sumome-stylebuffertop-original-bgposition")&&(a.data("sumome-stylebuffertop-original-bgposition",a.css("backgroundPosition")),a.data("sumome-stylebuffertop-original-bgpositiony",a.css("backgroundPositionY")),a.data("sumome-stylebuffertop-original-bgrepeat",a.css("backgroundRepeat"))),("50% 0%"==a.data("sumome-stylebuffertop-original-bgposition")&&"no-repeat"==a.data("sumome-stylebuffertop-original-bgrepeat")||"0% 0%"==a.data("sumome-stylebuffertop-original-bgposition")&&"repeat-x"==a.data("sumome-stylebuffertop-original-bgrepeat"))&&a.css("backgroundPositionY",r),/^50% [0-9]+px, 0% [0-9]+px$/.test(a.data("sumome-stylebuffertop-original-bgposition"))&&/^no-repeat/.test(a.data("sumome-stylebuffertop-original-bgrepeat"))){var d=a.data("sumome-stylebuffertop-original-bgpositiony").split(", ");a.css("backgroundPositionY",parseInt(d[0])+r+"px, "+(parseInt(d[1])+r)+"px")}return this},t.fn.styleBufferTop._debounceInit=t.debounce(150,!0,function(e){t.fn.styleBufferTop._init(e)}),t.fn.styleBufferBottom=function(e){e?t.fn.styleBufferBottom._debounceInit(e):t.fn.styleBufferBottom._init(e)},t.fn.styleBufferBottom._init=function(e){var i=t("[data-sumome-stylebuffer-page]");if(e)var s=t("[data-sumome-stylebuffer-bottom]");else var s=t("[data-sumome-stylebuffer-bottom],[data-sumome-stylebuffer-bottom-stash]");var n=0;s.sort(function(e,i){return e=t(e).data("sumome-stylebuffer-bottom"),i=t(i).data("sumome-stylebuffer-bottom"),e<i?-1:e>i?1:0}),t.fn.styleBufferBottom._groups=[];var o=t("body"),r=t("#sumome-smartbar-popup[data-sumome-stylebuffer-bottom]"),a=0,l=!1;if(t.fn.styleBufferBottom.stackedElements=t(s).not("#sumome-smartbar-popup"),r&&r.data("sumome-smartbar-config")&&(a=r.outerHeight(),l=r.data("sumome-smartbar-config").show_type),t(s).each(function(e,i){t(i).data("sumome-stylebufferbottom-offsety")&&(n+=t(i).data("sumome-stylebufferbottom-offsety")),t.fn.styleBuffer._apply(t(i),"top","top","auto",!0),t.fn.styleBuffer._apply(t(i),"bottom","bottom",n,!0),t.fn.styleBufferBottom._groups.push({elements:t(i),prop:"top",side:"top",px:"auto",force:!0}),t.fn.styleBufferBottom._groups.push({elements:t(i),prop:"bottom",side:"bottom",px:n,force:!0}),void 0===t(i).data("sumome-stylebufferbottom-original-bottom")&&t(i).data("sumome-stylebufferbottom-original-bottom",n),n+=t(i).height()}),void 0===o.data("sumome-stylebufferbottom-original-marginbottom")?(o.data("sumome-stylebufferbottom-original-marginbottom",parseInt(o.css("marginBottom"))),o.data("sumome-stylebufferbottom-original-paddingbottom",parseInt(o.css("paddingBottom")))):(o.css("marginBottom",o.data("sumome-stylebufferbottom-original-marginbottom")),o.css("paddingBottom",o.data("sumome-stylebufferbottom-original-paddingbottom"))),t.fn.styleBufferBottom.oldBottomElements&&t.fn.styleBufferBottom.oldBottomElements.length&&t.fn.styleBufferBottom.oldBottomElements.each(function(e,i){if(t(i).data("sumome-stylebufferbottom-original-offset")){var s=t(i).data("sumome-stylebufferbottom-has-inline").top,n=t(i).data("sumome-stylebufferbottom-has-inline").bottom,o=t(i).data("sumome-stylebufferbottom-has-inline").left,r=t(i).data("sumome-stylebufferbottom-has-inline").right,a=t(i).data("sumome-stylebufferbottom-has-inline").position;t(i).style("position",t(i).data("sumome-stylebufferbottom-original-position")),t(i).style("top",t(i).data("sumome-stylebufferbottom-original-offset").top),t(i).style("bottom",t(i).data("sumome-stylebufferbottom-original-offset").bottom),t(i).style("left",t(i).data("sumome-stylebufferbottom-original-offset").left),t(i).style("right",t(i).data("sumome-stylebufferbottom-original-offset").right),s||(t(i)[0].style.top=""),r||(t(i)[0].style.right=""),o||(t(i)[0].style.left=""),n||(t(i)[0].style.bottom=""),a||(t(i)[0].style.position="")}else t(i).style("bottom","0px")}),!e){var c=["#sumome-modal-mask",".sumome-control",".sumome-dialog-popup",".sumome-dialog-popup-overlay"],u=["sumome-react-form-tab-bottom-left","sumome-react-form-tab-bottom-center","sumome-react-form-tab-bottom-right"];t.fn.styleBufferBottom.oldBottomElements=t("*").not(s).not(i).filter(function(e,i){var s=["absolute","fixed"].indexOf(t(i).css("position"))>=0&&parseInt(t(i).css("bottom"))<n&&!t(i).is(c.join(","));return t(i).is(u.join(","))&&(s=!0),s&&void 0===t(i).data("sumome-stylebufferbottom-original-position")&&(t(i).data("sumome-stylebufferbottom-original-position",t(i).css("position")),t(i).data("sumome-stylebufferbottom-original-offset",{top:t(i).css("top"),left:t(i).css("left"),bottom:t(i).css("bottom"),right:t(i).css("right")}),t(i).data("sumome-stylebufferbottom-has-inline",{top:""!==t(i)[0].style.top,left:""!==t(i)[0].style.left,right:""!==t(i)[0].style.right,bottom:""!==t(i)[0].style.bottom,position:""!==t(i)[0].style.position})),s});var h=t(window).height();t.fn.styleBufferBottom.oldBottomElements=t.fn.styleBufferBottom.oldBottomElements.filter(function(e,i){if(t(i).is(u.join(",")))return!0;if(t(i).height()>=h)return!1;if("fixed"===t(i).css("position"))return!t(i).is(":notonpage");if("absolute"===t(i).css("position")&&t(i).is(":notonpage"))return!1;var s=t(i).parents().filter(function(e,i){return!t(i).is("body,html")&&["relative","fixed","absolute"].indexOf(t(i).css("position"))>=0});return!(s&&s.length)})}return"smart"==l&&t(s).not("#sumome-smartbar-popup").style("transition","bottom .2s ease-in-out"),t.fn.styleBufferBottom.oldBottomElements&&t.fn.styleBufferBottom.oldBottomElements.length&&t.fn.styleBufferBottom.oldBottomElements.each(function(e,i){t(i).style("bottom",n+parseFloat(t(i).data("sumome-stylebufferbottom-original-offset").bottom)+"px"),n+=0===n||"fixed"===t(i).style("position")?0:t(i).height()}),t.fn.styleBufferBottom.totalOffset=n,n+=o.data("sumome-stylebufferbottom-original-paddingbottom")+o.data("sumome-stylebufferbottom-original-marginbottom"),t(".sumome-stylebufferbottom-shim").length||t('<div class="sumome-stylebufferbottom-shim" />').appendTo(o),t(".sumome-stylebufferbottom-shim").height(n),this},t.fn.styleBufferBottom._debounceInit=t.debounce(150,!0,function(e){t.fn.styleBufferBottom._init(e)}),t.fn.styleBuffer=function(e,i,s){return this.length<1?this:(t.fn.styleBuffer._groups.push({elements:this,prop:e,side:i,px:s,force:!1}),t.fn.styleBuffer._apply(this,e,i,s,!1),this)},t.fn.styleBuffer._apply=function(e,i,n,o,r,a){return t(e).each(function(){var e=t(this);if(i==n)e.style(i,o+("auto"!=o?"px":""),void 0==a?"":a);else{var l=e.data(i+"-buffer-"+n),c=e.data(i+"-buffer-"+n+"-priority");if(void 0==l?(l=e.style(i+"-"+n),c=e.style().getPropertyPriority(i+"-"+n),e.data(i+"-buffer-"+n,void 0==l?"":l),e.data(i+"-buffer-"+n+"-priority",void 0==c?"":c)):t(this).style(i+"-"+n,l,void 0==c?"":c),r)e.style(i+"-"+n,o+"px",void 0==a?"":a);else{var u=s(e.css(i+"-"+n));e.style(i+"-"+n,Math.max(u,o)+"px",void 0==a?"":a)}}}),this},t.fn.styleBuffer.smartHide=function(e,i){if(!t.fn.styleBuffer.firedSmartHide){if(t.fn.styleBuffer.firedSmartHide=!0,t.fn.styleBuffer.firedSmartShow=!1,i)var s=t.fn.styleBufferTop,n=s.oldTopElements,o="sumome-stylebuffertop-original-margin",r="sumome-stylebuffertop-original-offset",a="sumome-stylebuffertop-original-position",l="top",c="marginTop";else{var s=t.fn.styleBufferBottom,n=s.oldBottomElements,o="sumome-stylebufferbottom-original-bottom",r="sumome-stylebufferbottom-original-offset",a="sumome-stylebufferbottom-original-position",l="bottom",c="bottom";t(".sumome-stylebufferbottom-shim").length&&t(".sumome-stylebufferbottom-shim").height("-="+e)}n&&n.length&&n.each(function(i,n){if(t(n).data(r)){if("fixed"==t(n).data(a))var o=s.totalOffset-e;else var o=e+parseFloat(t(n).data(r).top);t(n).style(l,o+"px")}else t(n).style(l,"0px")}),s.stackedElements&&s.stackedElements.length&&s.stackedElements.each(function(i,s){t(s).css(c,t(s).data(o)-e)})}},t.fn.styleBuffer.smartShow=function(e,i){if(!t.fn.styleBuffer.firedSmartShow){if(t.fn.styleBuffer.firedSmartHide=!1,t.fn.styleBuffer.firedSmartShow=!0,i)var s=t.fn.styleBufferTop,n=s.oldTopElements,o="sumome-stylebuffertop-original-margin",r="sumome-stylebuffertop-original-offset",a="top",l="marginTop";else{var s=t.fn.styleBufferBottom,n=s.oldBottomElements,o="sumome-stylebufferbottom-original-bottom",r="sumome-stylebufferbottom-original-offset",a="bottom",l="bottom";t(".sumome-stylebufferbottom-shim").length&&t(".sumome-stylebufferbottom-shim").height("+="+e)}n&&n.length&&n.each(function(i,n){t(n).data(r)?t(n).style(a,s.totalOffset+"px"):t(n).style(a,e+"px")}),s.stackedElements&&s.stackedElements.length&&s.stackedElements.each(function(e,i){t(i).css(l,t(i).data(o))})}},t.fn.styleBuffer._groups=[],t.fn.styleBuffer._throttle=80,t.fn.styleBuffer.firedSmartHide=!1,t.fn.styleBuffer.firedSmartShow=!1,t.fn.styleBufferTop._groups=[],t.fn.styleBufferTop.stackedElements=null,t.fn.styleBufferTop.oldTopElements=null,t.fn.styleBufferTop.bumpDownElements=null,t.fn.styleBufferTop.changePositionElements=null,t.fn.styleBufferTop.totalOffset=0,t.fn.styleBufferTop.checkedScrollDown=!1,t.fn.styleBufferTop.classFixedElements=!1,t.fn.styleBufferTop.classFixedElementsScroll=!1,t.fn.styleBufferTop.checkScrollDown=!1,t.fn.styleBufferTop.checkScrollUp=!0,t.fn.styleBufferBottom._groups=[],t.fn.styleBufferBottom.stackedElements=null,t.fn.styleBufferBottom.oldBottomElements=null,t.fn.styleBufferBottom.totalOffset=0;var i=-1;t.fn.styleBuffer._update=t.debounce(150,!0,function(e){if(e&&"resize"===e.type){var s=t(window).width();if(s===i)return;i=s}t.each(t.fn.styleBuffer._groups,function(){t.fn.styleBuffer._apply(this.elements,this.prop,this.side,this.px,this.force,this.priority)}),t.fn.styleBufferTop._groups.length&&(t("body").styleBufferTop(!0),t.each(t.fn.styleBufferTop._groups,function(){t.fn.styleBuffer._apply(this.elements,this.prop,this.side,this.px,this.force,this.priority)})),t.fn.styleBufferBottom._groups.length&&(t("body").styleBufferBottom(!0),t.each(t.fn.styleBufferBottom._groups,function(){t.fn.styleBuffer._apply(this.elements,this.prop,this.side,this.px,this.force,this.priority)})),t(window).trigger("resize.sumome-welcomemat")}),t(window).bind("load resize orientationchange",function(e){e&&"resize"==e.type&&e.target!=window||t.fn.styleBuffer._update(e)}),e.config({strictlyNew:!1}),e("#menufication-top").every(t.proxy(function(e){t("body").styleBufferTop()},this));var s=function(t){return parseFloat(t)||0}}),sumo.define("es6!services/share/index",["jquery","URI","color","underscore","vex","plugins/text!share/templates/share.html","jquery.article","jquery.share","jquery.style","jquery.styleBuffer","jquery.displayrules"],function(t,e,i,s,n,o){function r(t,e){var e=e||1;e=Math.pow(10,e);for(var i=["k","m","b","t"],s=i.length-1;s>=0;s--){var n=Math.pow(10,3*(s+1));if(n<=t){t=Math.round(t*e/n)/e,1e3==t&&s<i.length-1&&(t=1,s++),t+=i[s];break}}return t}var a=function i(){var s=t('meta[property="og:url"]').eq(0).attr("content")||t('link[rel="canonical"]').eq(0).attr("href")||window.location.href.split("#")[0]||null;if(s){var n=e(s);return n.is("absolute")?n.toString():n.absoluteTo(window.location.href.split("#")[0]).toString()}return s};t.fn.unstatic=function(){return t(this).addClass("sumome-article"),"static"==t(this).css("position")&&t(this).css("position","relative"),"content-box"==t(this).css("box-sizing")&&t(this).css("box-sizing","border-box"),this};var l={settings:{},positionSettings:{},customPositions:{},lastScrollTop:0,lastScrollUp:0,initialize:function e(){this.api.on("9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/service/reload",t.proxy(function(){this.load()},this)),this.load()},load:function e(){this.settings={articles:t.articles()},this.settings.articles.length>1&&(this.settings.articles=t([]));var i=[];this.settings.articles.each(function(){this._url&&i.push(this._url)}),t.ajax({type:"POST",dataType:"json",url:this.api.properties.sumoUrl+"/apps/share/load",data:{site_id:this.api.properties.siteId,href:a(),urls:i,geoLocation:this.api.properties.geoLocation,pageViews:this.api.properties.views,userAgent:navigator.userAgent},xhrFields:{withCredentials:!1},crossDomain:!0}).done(t.proxy(function(e){if(e&&"success"in e&&e.success){t.extend(this.settings,e);var i=Math.min(window.screen.availWidth||t(window).width(),t(window).width());if(this.settings.use_mobile_services&&i<=this.settings.mobile_width)var s=this.settings.mobile_services;else var s=this.settings.services;var n={button_padding:this.settings.button_padding,button_style:this.settings.button_style,color:this.settings.color,services:s,services_displayed:this.settings.services_displayed,shares_background:this.settings.shares_background,shares_displayed:this.settings.shares_displayed,size:this.settings.size,offset_x:0,offset_y:0,total_shares_displayed:this.settings.total_shares_displayed};"positions"in this.settings&&this.settings.positions.length&&this.settings.positions.forEach(t.proxy(function(e){switch(e in this.settings.position_settings?this.positionSettings[e]=t.extend({},n,this.settings.position_settings[e]):this.positionSettings[e]=t.extend({},n),this.positionSettings[e].size){case"small":this.positionSettings[e].sizePx=30;break;case"large":this.positionSettings[e].sizePx=70;break;default:this.positionSettings[e].sizePx=50}!this.settings.noSumoBranding&&this.positionSettings[e].services.indexOf("sumome")<0&&this.positionSettings[e].services.push("sumome")},this)),"custom_position_settings"in this.settings&&t(this.settings.custom_position_settings).length&&this.settings.custom_position_settings.forEach(t.proxy(function(e){switch(e.use_settings||t.extend(e,n),e.size){case"small":e.sizePx=30;break;case"large":e.sizePx=70;break;default:e.sizePx=50}this.customPositions[e.position_id]=e},this)),this.settings.ctry=!(!this.api.properties.geoLocation||!this.api.properties.geoLocation.ctry)&&this.api.properties.geoLocation.ctry,this.settings.views=this.api.properties.views?this.api.properties.views:1,this.settings.reflink="https://sumo.com/?src=sm-sh-"+this.api.properties.siteId+"&utm_source=sumo-powered-by&utm_medium=share&utm_campaign="+this.api.properties.siteId,t.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views)||(this.settings.positions=[]),this.install(),this.fetch()}},l))},position:function e(){var i=this;t(".sumome-share-client-wrapper-left-page, .sumome-share-client-wrapper-right-page").each(function(){var e=t(window).height(),s=t(this).outerHeight(),n=Math.max(Math.floor(e-s)/2,0),o=t(this).hasClass("sumome-share-client-wrapper-left-page")?"lp":"rp";o in i.settings.position_settings&&("offset_x"in i.settings.position_settings[o]&&0!=i.settings.position_settings[o].offset_x&&("lp"==o?t(this).css("left",i.settings.position_settings[o].offset_x+"px"):t(this).css("right",0-i.settings.position_settings[o].offset_x+"px")),"offset_y"in i.settings.position_settings[o]&&0!=i.settings.position_settings[o].offset_y&&(n+=i.settings.position_settings[o].offset_y)),t(this).css("top",n+"px")}),t(".sumome-share-client-desktop-bottom-bar, .sumome-share-client-mobile-top-bar, .sumome-share-client-mobile-bottom-bar").each(function(){var e=t(this).data("sumome-share-pos"),s=i.positionSettings[e].sizePx,n=t(this).children();n.show();for(var o=document.documentElement.clientWidth||document.body.clientWidth||t(window).width(),r=Math.max(s,o/n.length),a=Math.floor(o/r),l=n.length-a,c=0,u=0;c<l&&u<n.length;){"sumome"!=n.eq(n.length-1-u).data("sumome-share")&&(n.eq(n.length-1-u).hide(),c++),u++}var h=n.length-c,d=!1,m=0,e=t(this).data("sumome-share-pos");e in i.settings.position_settings&&"button_padding"in i.settings.position_settings[e]?("button_style"in i.settings.position_settings[e]&&"circle"==i.settings.position_settings[e].button_style&&(d=!0),m=i.settings.position_settings[e].button_padding):"button_padding"in i.settings&&("button_style"in i.settings&&"circle"==i.settings.button_style&&(d=!0),m=i.settings.button_padding),d?(r=s,n.css({marginRight:(o-r*h)/(h-1)+"px"})):(m&&(o-=(h-1)*m),r=o/h),n.css({width:r+"px"}),n.eq(h-1).css("marginRight",0)}),t.each(t(".sumome-share-client-custom"),t.proxy(function e(i,s){var n=t(s),o=null,r=!1,a=0,l=this.positionSettings[t(s).data("sumome-share-pos")];if(n.hasClass("sumome-share-client-horizontal")&&l.button_padding>0){var c=n.children();if(t.each(c,t.proxy(function e(i,s){o!==t(s).offset().top&&(a=i,r||(r=!0)),o=t(s).offset().top},this)),r){t(c).css("verticalAlign","top");for(var u=0;u<a;u++)t(c[u]).css("marginBottom",l.button_padding)}}},this))},updateTotals:function e(i){this.settings.share+=i;var s=this.settings.share,n=t(".sumome-share-client-share[data-sumome-share=share]");s>=this.settings.shares_minimum?n.html("<span><strong>"+r(s)+"</strong><br>"+this.settings.shares_label+"</span>"):n.html("<span>"+this.settings.shares_label+"</span>");var o=t(".sumome-share-client-open-mobile");o.find("span").remove(),s>=this.settings.shares_minimum&&o.append("<span>"+r(s)+"</span>"),s>=this.settings.shares_minimum?t("[data-sumome-share-count=share]").text(r(s)):t("[data-sumome-share-count=share]").text(""),this.alignShareLabels()},fetch:function e(i){var i=i||null,s=null!==i;if(null===i){i=[];for(var n in t.shareServices)"background"in t.shareServices[n]&&"name"in t.shareServices[n]&&"fetch"in t.shareServices[n]&&i.push(n)}i.forEach(t.proxy(function(e){if(e in t.shareServices){var i="stumbleupon"===e,n="yummly"===e;if((s||!(e in this.settings)&&(!i||i&&this.settings.fetch_stumbleupon)&&(!n||n&&this.settings.fetch_yummly)||this.settings.fetch.indexOf(e)>=0)&&"fetch"in t.shareServices[e]&&"parse"in t.shareServices[e])if(["facebook","facebooklike"].indexOf(e)>-1&&this.settings.has_facebook_token)try{t.ajax({type:"POST",dataType:"json",xhrFields:{withCredentials:!1},crossDomain:!0,url:this.api.properties.sumoUrl+"/apps/share/facebook/queue",data:{site_id:this.api.properties.siteId,url:a()},success:t.proxy(function(t){var i=this.updateCount(e,this.settings[e]+1);this.updateTotals(i)},this)})}catch(t){}else t.shareFetch(e,a(),t.proxy(function(i,s,n){if(!i){var o=this.updateCount(e,n);this.updateTotals(o);try{t.ajax({type:"POST",dataType:"json",xhrFields:{withCredentials:!1},crossDomain:!0,url:this.api.properties.sumoUrl+"/api/jsonpcallback",data:{site_id:this.api.properties.siteId,href:s,service:e,count:n},success:function t(e){}})}catch(t){}}},this))}},this))},updateCount:function e(i,s){var n=(s||0)-(this.settings[i]||0);return this.settings[i]=s,t(".sumome-share-client-share[data-sumome-share="+i+"]").each(t.proxy(function(e,i){this.positionSettings[t(i).parent().data("sumome-share-pos")].shares_displayed&&s>=0&&s>=this.settings.shares_minimum?(t(i).addClass("sumome-share-client-count"),t(i).find("span").remove(),t(i).append("<span>"+r(s)+"</span>")):(t(i).find("span").remove(),t(i).removeClass("sumome-share-client-count"))},this)),s>=0&&s>=this.settings.shares_minimum?t("[data-sumome-share-count="+i+"]").text(r(s)):t("[data-sumome-share-count="+i+"]").text(""),n},install:function e(){t(window).on("resize.sumome-share",s.debounce(function(t){l.render()},300)),this.render(),setInterval(t.proxy(function(){this.bindCustomShares()},this),500)},remove:function e(){t(".sumome-share-client-wrapper, .sumome-share-client-open-mobile").remove()},popupMobile:function e(i,s){t(".sumome-share-client-close-mobile").trigger("click");var n=t('<div class="sumome-share-mobile-popup" />').appendTo(document.body),o=t('<div class="sumome-share-mobile-close-popup"><img src="'+this.api.properties.baseUrl+'images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/close-white-60.png" alt="Close Share"></div>'),r=t("<ul />").appendTo(n);r.data("sumome-share-target-url",i),r.data("sumome-share-target-text",s),o.appendTo(n),o.click(function(){t(document.body).removeClass("sumome-share-mobile-popup-open"),n.remove()}),t(document.body).addClass("sumome-share-mobile-popup-open"),this.renderPopupServices(r,!1)},popup:function e(i,s){this.$modal=n.open({content:"<h5>Share</h5><ul />",className:"sumome-sharer-popup sumome-sharer-popup-small",overlayClassName:"sumome-sharer-popup-overlay",contentClassName:"sumome-sharer-popup-content",closeClassName:"sumome-sharer-popup-close",overlayClosesOnClick:!0}),this.$modal.find("ul").data("sumome-share-target-url",i),this.$modal.find("ul").data("sumome-share-target-text",s),this.$modal.on("vexResize",t.proxy(function(e,i){var s=Math.max((t(window).height()-i.$vexContent.outerHeight())/2,0);i.$vex.css({"padding-top":s+"px"})},this)),this.$modal.on("vexOpen",t.proxy(function(e,i){this.renderPopupServices(this.$modal.find("ul"),!0),this.$modal.resize(),this.settings.noSumoBranding||t(".sumome-sharer-popup-overlay").append('<a class="sumome-sharer-popup-link" href="'+this.settings.reflink+'" target="_blank">Powered by Sumo</a>')},this))},renderPopupServices:function s(n,o){var r=t('<input type="text" />').attr("placeholder","Find a service");r.insertBefore(n),this.settings.noSumoBranding||n.after('<a class="sumome-sharer-popup-link" href="'+this.settings.reflink+'" target="_blank">Powered by Sumo</a>'),t.shareSortedKeys.map(t.proxy(function(e){var s=t.shareServices[e];if("background"in s&&"name"in s&&"sumome"!=e){var o=t('<li data-service="'+e+'"><img src="'+this.api.properties.baseUrl+"images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/"+e+"-"+(this.settings.color?i.whiteOrBlack(this.settings.color):"white")+'-60.png" alt="'+s.name+'">'+s.name+"</li>").data("sumome-share",e);n.append(o),o.find("img").css("background",this.settings.color?this.settings.color:"background"in s?s.background:"#ccc")}},this)),n.on("click","li",t.proxy(function(i){var s=t(i.currentTarget).data("service"),n=t(i.delegateTarget).data("sumome-share-target-url")||a(),o=t(i.delegateTarget).data("sumome-share-target-text");if("share"!=s){this.api.emit("event",{appId:"9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1",event:s+"-click",href:n}),"twitter"===s&&(t('meta[name="twitter:title"]').length&&void 0===t(i.currentTarget).data("sumome-share-text")&&(o=t('meta[name="twitter:title"]').eq(0).attr("content")),t('meta[name="twitter:url"]').length&&void 0===t(i.currentTarget).data("sumome-share-url")&&(n=t('meta[name="twitter:url"]').eq(0).attr("content")));var r={url:n,text:o,siteId:this.api.properties.siteId,sumoUrl:this.api.properties.sumoUrl,shortenUrl:this.settings.use_shortener,shortener:this.settings.shortener+this.settings.short_domain,noSumoBranding:this.settings.noSumoBranding};if("services_settings"in this.settings&&this.settings.services_settings&&s in this.settings.services_settings&&t.extend(r,this.settings.services_settings[s]),this.settings.noSumoBranding&&"url"in r&&r.url&&"utm"in this.settings&&this.settings.utm){var l=e(r.url);"utm_source"in this.settings&&this.settings.utm_source&&(l.removeQuery("utm_source"),l.addQuery("utm_source",this.settings.utm_source.replace("{service}",s))),"utm_medium"in this.settings&&this.settings.utm_medium&&(l.removeQuery("utm_medium"),l.addQuery("utm_medium",this.settings.utm_medium.replace("{service}",s))),"utm_name"in this.settings&&this.settings.utm_name&&(l.removeQuery("utm_campaign"),l.addQuery("utm_campaign",this.settings.utm_name.replace("{service}",s))),"utm_custom_key"in this.settings&&this.settings.utm_custom_key&&"utm_custom_val"in this.settings&&this.settings.utm_custom_val&&(l.removeQuery(this.settings.utm_custom_key),l.addQuery(this.settings.utm_custom_key.replace("{service}",s),this.settings.utm_custom_val.replace("{service}",s))),r.url=l.toString()}t.share(s,r,t.proxy(function(t){this.fetch([t])},this))}["fancy","kaboodle","printerfriendly","slashdot"].indexOf(s)>-1&&t(".sumome-vex-close",this.$modal).trigger("click")},this)),r.on("keyup",function(){var e=(t(this).val()+"").trim().toLowerCase(),i=t(this).next("ul");for(var s in t.shareServices){var n=t.shareServices[s];if("background"in n&&"name"in n){var o=n.name.toLowerCase(),r=""==e||o.indexOf(e)>=0;i.find('li[data-service="'+s+'"]').toggle(r)}}}),o&&r.focus()},render:function e(){var n=this.settings.articles,o=Math.min(window.screen.availWidth||t(window).width(),t(window).width()),a=o<=this.settings.mobile_width?"mobile":"desktop";if("current_mode"in this.settings&&a==this.settings.current_mode)return void this.position();if(this.remove(),0!=this.positionSettings.length){this.settings.current_mode=a;var c=50;if("large"==this.settings.size?c=70:"small"==this.settings.size&&(c=30),"mobile"==a){if("positions"in this.settings&&this.settings.positions.indexOf("mbt")>=0&&(t("body").append('<div data-sumome-stylebuffer-top="90" data-sumome-stylebuffertop-offsety="'+this.positionSettings.mbt.offset_y+'" class="sumome-share-client-wrapper sumome-share-client-wrapper-mobile-top-bar'+(this.positionSettings.mbt.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbt.size+'"><div data-sumome-share-pos="mbt" class="sumome-share-client sumome-share-client-mobile-top-bar'+(this.positionSettings.mbt.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbt.size+'"></div></div>'),t("body").styleBufferTop()),"positions"in this.settings&&this.settings.positions.indexOf("mbb")>=0&&(t("body").append('<div data-sumome-stylebuffer-bottom="90" data-sumome-stylebufferbottom-offsety="'+(0-this.positionSettings.mbb.offset_y)+'" class="sumome-share-client-wrapper sumome-share-client-wrapper-mobile-bottom-bar'+(this.positionSettings.mbb.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbb.size+'"><div data-sumome-share-pos="mbb" class="sumome-share-client sumome-share-client-mobile-bottom-bar'+(this.positionSettings.mbb.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbb.size+'"></div></div>'),t("body").styleBufferBottom(),this.settings.scroll_view&&(this.$mobileBottomBar=t(".sumome-share-client-wrapper-mobile-bottom-bar"),this.$mobileBottomBar.css("bottom",-1*this.$mobileBottomBar.height()),this.$mobileBottomBar.addClass("sumome-share-client-wrapper-mobile-bottom-bar-scroll"),this.$mobileBottomBar.addClass("sumome-share-client-wrapper-mobile-bottom-bar-hidden"),this.lastScrollTop=t(window).scrollTop(),t(window).on("scroll",s.debounce(function(){l.scroll()},1)))),"positions"in this.settings&&this.settings.positions.indexOf("mbl")>=0){var u=t('<div class="sumome-share-client-open-mobile sumome-share-client-open-mobile-left'+(this.positionSettings.mbl.total_shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbl.size+'"><img src="'+this.api.properties.baseUrl+'images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/share-black-60.png" alt="Open Share"></div>'),h=t('<div class="sumome-share-client-close-mobile sumome-share-client-close-mobile-left'+(this.positionSettings.mbl.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbl.size+'"><img src="'+this.api.properties.baseUrl+'images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/close-white-60.png" alt="Close Share"></div>'),d=t('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-mobile sumome-share-client-wrapper-mobile-left'+(this.positionSettings.mbl.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbl.size+'"></div>'),m=t('<div class="sumome-share-client-mobile sumome-share-client-mobile-left'+(this.settings.list_view?" sumome-share-client-mobile-list":"")+(this.positionSettings.mbl.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbl.size+'"></div>');if(t("body").append(u),d.append(m),m.append(h),t("body").append(d),this.positionSettings.mbl.total_shares_displayed&&"share"in this.settings&&parseInt(this.settings.share)>=this.settings.shares_minimum&&u.append("<span>"+("share"in this.settings?r(this.settings.share):"0")+"</span>"),this.positionSettings.mbl.total_shares_displayed&&(this.settings.shares_label||this.settings.shares_minimum<=0||!("share"in this.settings)||parseInt(this.settings.share)>=this.settings.shares_minimum)){var p=t('<div class="sumome-share-client-animated sumome-share-client-share sumome-share-client-share-share sumome-share-client-count" data-sumome-share="share"></div>');this.positionSettings.mbl.total_shares_displayed&&"share"in this.settings&&parseInt(this.settings.share)>=this.settings.shares_minimum?p.append("<span><strong>"+("share"in this.settings?r(this.settings.share):"0")+"</strong><br>"+this.settings.shares_label+"</span>"):p.append("<span>"+this.settings.shares_label+"</span>"),p.css("background","transparent"),p.css("color","#fff");var f=t('<div class="sumome-row"></div>'),g=t('<div class="sumome-12 sumome-columns sumome-text-center"></div>');g.append(p),f.append(g),m.append(f)}var v=t('<div class="sumome-row sumome-share-services"></div>');m.append(v);var b=0;this.positionSettings.mbl.services.forEach(t.proxy(function(e){if(b<this.positionSettings.mbl.services_displayed||"sumome"===e){var s=t('<div class="sumome-share-client-animated sumome-share-client-share"'+(this.settings.list_view?"":' data-sumome-share="'+e+'"')+'"><img src="'+this.api.properties.baseUrl+"images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/"+(this.settings.noSumoBranding&&"sumome"===e?"sumomepro":e)+"-"+(this.positionSettings.mbl.color?i.whiteOrBlack(this.positionSettings.mbl.color):"white")+'-60.png" alt="'+("sumome"===e?"More":t.shareServices[e].name)+'"></div>');this.positionSettings.mbl.shares_displayed&&e in this.settings&&parseInt(this.settings[e])>=this.settings.shares_minimum&&(s.addClass("sumome-share-client-count"),s.append("<span>"+(e in this.settings?r(this.settings[e]):"0")+"</span>")),s.css("background",this.positionSettings.mbl.color?this.positionSettings.mbl.color:"background"in t.shareServices[e]?t.shareServices[e].background:"#ccc"),s.css("color",this.positionSettings.mbl.color?i.whiteOrBlack(this.positionSettings.mbl.color):"color"in t.shareServices[e]?t.shareServices[e].color:"#fff");var n=t('<div class="sumome-4 sumome-columns'+(this.settings.list_view?'" data-sumome-share="'+e+'"':' sumome-text-center"')+"></div>");if(n.append(s),this.settings.list_view){var o="name"in t.shareServices[e]?t.shareServices[e].name:e;"SumoMe"==o&&(o="More"),n.append(o)}v.append(n),"sumome"!=e&&b++}},this)),v.find(".sumome-columns").last().addClass("sumome-end"),t(".sumome-share-client-open-mobile-left").on("click",t.proxy(function(e){t(".sumome-share-client-open-mobile-left").hide(),t(".sumome-share-client-wrapper-mobile-left").show(),t(document.body).addClass("sumome-share-mobile-popup-open")},this)),t(".sumome-share-client-close-mobile-left").on("click",t.proxy(function(e){t(".sumome-share-client-wrapper-mobile-left").hide(),t(".sumome-share-client-open-mobile-left").show(),t(document.body).removeClass("sumome-share-mobile-popup-open")},this))}if("positions"in this.settings&&this.settings.positions.indexOf("mbr")>=0){
var u=t('<div class="sumome-share-client-open-mobile sumome-share-client-open-mobile-right'+(this.positionSettings.mbr.total_shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbr.size+'"><img src="'+this.api.properties.baseUrl+'images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/share-black-60.png" alt="Open Share"></div>'),h=t('<div class="sumome-share-client-close-mobile sumome-share-client-close-mobile-right'+(this.positionSettings.mbr.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbr.size+'"><img src="'+this.api.properties.baseUrl+'images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/close-white-60.png" alt="Close Share"></div>'),d=t('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-mobile sumome-share-client-wrapper-mobile-right'+(this.positionSettings.mbr.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbr.size+'"></div>'),m=t('<div class="sumome-share-client-mobile sumome-share-client-mobile-right'+(this.positionSettings.mbr.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.mbr.size+'"></div>');if(t("body").append(u),d.append(m),m.append(h),t("body").append(d),this.positionSettings.mbr.total_shares_displayed&&"share"in this.settings&&parseInt(this.settings.share)>=this.settings.shares_minimum&&u.append("<span>"+("share"in this.settings?r(this.settings.share):"0")+"</span>"),this.positionSettings.mbr.total_shares_displayed&&(this.settings.shares_label||this.settings.shares_minimum<=0||!("share"in this.settings)||parseInt(this.settings.share)>=this.settings.shares_minimum)){var p=t('<div class="sumome-share-client-animated sumome-share-client-share sumome-share-client-share-share sumome-share-client-count" data-sumome-share="share"></div>');this.positionSettings.mbr.total_shares_displayed&&"share"in this.settings&&parseInt(this.settings.share)>=this.settings.shares_minimum?p.append("<span><strong>"+("share"in this.settings?r(this.settings.share):"0")+"</strong><br>"+this.settings.shares_label+"</span>"):p.append("<span>"+this.settings.shares_label+"</span>"),p.css("background","transparent"),p.css("color","#fff");var f=t('<div class="sumome-row"></div>'),g=t('<div class="sumome-12 sumome-columns sumome-text-center"></div>');g.append(p),f.append(g),m.append(f)}var v=t('<div class="sumome-row"></div>');m.append(v);var b=0;this.positionSettings.mbr.services.forEach(t.proxy(function(e){if(b<this.positionSettings.mbr.services_displayed||"sumome"===e){var s=t('<div class="sumome-share-client-animated sumome-share-client-share" data-sumome-share="'+e+'"><img src="'+this.api.properties.baseUrl+"images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/"+(this.settings.noSumoBranding&&"sumome"===e?"sumomepro":e)+"-"+(this.positionSettings.mbr.color?i.whiteOrBlack(this.positionSettings.mbr.color):"white")+'-60.png" alt="'+(this.settings.noSumoBranding&&"sumome"===e?"More":t.shareServices[e].name)+'"></div>');this.positionSettings.mbr.shares_displayed&&e in this.settings&&parseInt(this.settings[e])>=this.settings.shares_minimum&&(s.addClass("sumome-share-client-count"),s.append("<span>"+(e in this.settings?r(this.settings[e]):"0")+"</span>")),s.css("background",this.positionSettings.mbr.color?this.positionSettings.mbr.color:"background"in t.shareServices[e]?t.shareServices[e].background:"#ccc"),s.css("color",this.positionSettings.mbr.color?i.whiteOrBlack(this.positionSettings.mbr.color):"color"in t.shareServices[e]?t.shareServices[e].color:"#fff");var n=t('<div class="sumome-4 sumome-columns sumome-text-center"></div>');n.append(s),v.append(n),"sumome"!=e&&b++}},this)),v.find(".sumome-columns").last().addClass("sumome-end"),t(".sumome-share-client-open-mobile-right").on("click",t.proxy(function(e){t(".sumome-share-client-open-mobile-right").hide(),t(".sumome-share-client-wrapper-mobile-right").show(),t(document.body).addClass("sumome-share-mobile-popup-open")},this)),t(".sumome-share-client-close-mobile-right").on("click",t.proxy(function(e){t(".sumome-share-client-wrapper-mobile-right").hide(),t(".sumome-share-client-open-mobile-right").show(),t(document.body).removeClass("sumome-share-mobile-popup-open")},this))}}else{if(t.fn.styleBuffer._update(),"positions"in this.settings&&this.settings.positions.indexOf("la"),"positions"in this.settings&&this.settings.positions.indexOf("ra"),"positions"in this.settings&&this.settings.positions.indexOf("ra")>=0){n.unstatic(),n.styleBuffer("padding","right",20+this.positionSettings.ra.sizePx);var y=this;n.each(function(){var e=parseInt(t(this).css("padding-right").replace("px",""))-(c+10),i=t('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-right-sidebar'+(y.positionSettings.ra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.ra.size+'"></div>'),s=t('<div data-sumome-share-pos="ra" class="sumome-share-client sumome-share-client-right-sidebar-article'+(y.positionSettings.ra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.ra.size+'"></div>');if(i.append(s),this._header){var n=this._header.position().top,o=this._header.outerHeight();i.css("top",n+o+"px")}i.css("right",e+"px"),t(this).prepend(i)})}if("positions"in this.settings&&this.settings.positions.indexOf("la")>=0){n.unstatic(),n.styleBuffer("padding","left",2+this.positionSettings.la.sizePx);var y=this;n.each(function(){var e=parseInt(t(this).css("padding-left").replace("px",""))-(10+c),i=t('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-left-sidebar'+(y.positionSettings.la.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.la.size+'"></div>'),s=t('<div data-sumome-share-pos="la" class="sumome-share-client sumome-share-client-left-sidebar-article'+(y.positionSettings.la.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.la.size+'"></div>');if(i.append(s),this._header){var n=this._header.position().top,o=this._header.outerHeight();i.css("top",n+o+"px")}i.css("left",e+"px"),t(this).prepend(i)})}if("positions"in this.settings&&this.settings.positions.indexOf("hra")>=0){n.unstatic();var y=this;n.each(function(){var e=t('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-right'+(y.positionSettings.hra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.hra.size+'"></div>'),i=t('<div data-sumome-share-pos="hra" class="sumome-share-client sumome-share-client-header-right-article'+(y.positionSettings.hra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.hra.size+'"></div>');e.append(i),this._header?this._header.after(e):t(this).prepend(e)})}if("positions"in this.settings&&this.settings.positions.indexOf("hca")>=0){n.unstatic();var y=this;n.each(function(){var e=t('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-center'+(y.positionSettings.hca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.hca.size+'"></div>'),i=t('<div data-sumome-share-pos="hca" class="sumome-share-client sumome-share-client-header-center-article'+(y.positionSettings.hca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.hca.size+'"></div>');e.append(i),this._header?this._header.after(e):t(this).prepend(e)})}if("positions"in this.settings&&this.settings.positions.indexOf("hla")>=0){n.unstatic();var y=this;n.each(function(){var e=t('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-left'+(y.positionSettings.hla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.hla.size+'"></div>'),i=t('<div data-sumome-share-pos="hla" class="sumome-share-client sumome-share-client-header-left-article'+(y.positionSettings.hla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.hla.size+'"></div>');e.append(i),this._header?this._header.after(e):t(this).prepend(e)})}if("positions"in this.settings&&this.settings.positions.indexOf("tra")>=0){n.unstatic();var y=this;n.each(function(){var e=t('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-right'+(y.positionSettings.tra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.tra.size+'"></div>'),i=t('<div data-sumome-share-pos="tra" class="sumome-share-client sumome-share-client-top-right-article'+(y.positionSettings.tra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.tra.size+'"></div>');e.append(i),t(this).prepend(e)})}if("positions"in this.settings&&this.settings.positions.indexOf("tca")>=0){n.unstatic();var y=this;n.each(function(){var e=t('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-center'+(y.positionSettings.tca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.tca.size+'"></div>'),i=t('<div data-sumome-share-pos="tca" class="sumome-share-client sumome-share-client-top-center-article'+(y.positionSettings.tca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.tca.size+'"></div>');e.append(i),t(this).prepend(e)})}if("positions"in this.settings&&this.settings.positions.indexOf("tla")>=0){n.unstatic();var y=this;n.each(function(){var e=t('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-left'+(y.positionSettings.tla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.tla.size+'"></div>'),i=t('<div data-sumome-share-pos="tla" class="sumome-share-client sumome-share-client-top-left-article'+(y.positionSettings.tla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+y.settings.theme+" sumome-share-client-"+y.positionSettings.tla.size+'"></div>');e.append(i),t(this).prepend(e)})}if("positions"in this.settings&&this.settings.positions.indexOf("bra")>=0&&n.unstatic().append('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-right'+(this.positionSettings.bra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bra.size+'"><div data-sumome-share-pos="bra" class="sumome-share-client sumome-share-client-bottom-right-article'+(this.positionSettings.bra.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bra.size+'"></div></div>'),"positions"in this.settings&&this.settings.positions.indexOf("bca")>=0&&n.unstatic().append('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-center'+(this.positionSettings.bca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bca.size+'"><div data-sumome-share-pos="bca" class="sumome-share-client sumome-share-client-bottom-center-article'+(this.positionSettings.bca.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bca.size+'"></div></div>'),"positions"in this.settings&&this.settings.positions.indexOf("bla")>=0&&n.unstatic().append('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-left'+(this.positionSettings.bla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bla.size+'"><div data-sumome-share-pos="bla" class="sumome-share-client sumome-share-client-bottom-left-article'+(this.positionSettings.bla.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.bla.size+'"></div></div>'),"positions"in this.settings&&this.settings.positions.indexOf("lp")>=0&&t("body").append('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-left-page'+(this.positionSettings.lp.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.lp.size+'"><div data-sumome-share-pos="lp" class="sumome-share-client sumome-share-client-left-page'+(this.positionSettings.lp.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.lp.size+'"></div></div>'),"positions"in this.settings&&this.settings.positions.indexOf("rp")>=0&&t("body").append('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-right-page'+(this.positionSettings.rp.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.rp.size+'"><div data-sumome-share-pos="rp" class="sumome-share-client sumome-share-client-right-page'+(this.positionSettings.rp.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.rp.size+'"></div></div>'),"positions"in this.settings&&this.settings.positions.indexOf("dbb")>=0&&(t("body").append('<div data-sumome-stylebuffer-bottom="90" data-sumome-stylebufferbottom-offsety="'+(0-this.positionSettings.dbb.offset_y)+'" class="sumome-share-client-wrapper sumome-share-client-wrapper-desktop-bottom-bar'+(this.positionSettings.dbb.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.dbb.size+'"><div data-sumome-share-pos="dbb" class="sumome-share-client sumome-share-client-desktop-bottom-bar'+(this.positionSettings.dbb.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+this.positionSettings.dbb.size+'"></div></div>'),t("body").styleBufferBottom()),"positions"in this.settings&&(this.settings.positions.indexOf("lp")>=0||this.settings.positions.indexOf("rp")>=0)){var w=t('<div class="sumome-share-client-show"><span /></div>');t(".sumome-share-client-wrapper-left-page, .sumome-share-client-wrapper-right-page").prepend(w);var x=t('<div class="sumome-share-client-hide"><span /></div>');t(".sumome-share-client-wrapper-left-page, .sumome-share-client-wrapper-right-page").append(x),t(".sumome-share-client-wrapper-left-page, .sumome-share-client-wrapper-right-page").hover(function(){t(this).hasClass("sumome-share-client-hidden")||t(this).find(".sumome-share-client-hide").fadeIn("fast")},function(){t(this).find(".sumome-share-client-hide").fadeOut("fast")}),t(".sumome-share-client-hide").click(function(){var e=t(this).closest(".sumome-share-client-wrapper"),i=e.hasClass("sumome-share-client-wrapper-left-page");e.data("sumome-share-original-position",e.css(i?"left":"right")),e.animate(i?{left:"-"+c+"px"}:{right:"-"+c+"px"},"fast",function(){t(this).addClass("sumome-share-client-hidden"),t(this).find(".sumome-share-client-hide").hide(),t(this).animate(i?{left:"0px"}:{right:"0px"},"fast")})}),t(".sumome-share-client-show").click(function(){var e=t(this).closest(".sumome-share-client-wrapper"),i=e.hasClass("sumome-share-client-wrapper-left-page"),s=e.data("sumome-share-original-position");e.animate(i?{left:"-"+c+"px"}:{right:"-"+c+"px"},"fast",function(){t(this).removeClass("sumome-share-client-hidden"),t(this).find(".sumome-share-client-hide").show(),t(this).animate(i?{left:s}:{right:s},"fast")})})}}this.addButtons(t(".sumome-share-client"),a),this.applyPositionSettings(),this.position(),this.alignShareLabels(),this.updateCustomCounts(),t(".sumome-share-client-share",t(".sumome-share-client-mobile-right,.sumome-share-client-mobile-left")).on("click",t.proxy(function(t){this.click(t)},this)),this.api.emit("9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/service/rendered")}},addButtons:function e(s,n){s.each(t.proxy(function(e,s){var o=this.positionSettings[t(s).data("sumome-share-pos")],a="share"in this.settings?r(this.settings.share):"0";if(o.total_shares_displayed&&(this.settings.shares_label||this.settings.shares_minimum<=0||!("share"in this.settings)||parseInt(this.settings.share)>=this.settings.shares_minimum)){var l=t('<div class="sumome-share-client-animated sumome-share-client-share sumome-share-client-share-share sumome-share-client-count" data-sumome-share="share"></div>');o.total_shares_displayed&&"share"in this.settings&&parseInt(this.settings.share)>=this.settings.shares_minimum?l.append("<span><strong>"+a+"</strong><br>"+this.settings.shares_label+"</span>"):l.append("<span>"+this.settings.shares_label+"</span>"),"mobile"===n?(l.css("background",o.color?o.color:"transparent"),l.css("color",o.color?i.whiteOrBlack(o.color):"black")):(l.css("background","transparent"),l.css("color","#000")),t(s).append(l)}var c=0,u="";t(s).data("sumome-share-url")&&(u+=' data-sumome-share-url="'+t(s).data("sumome-share-url")+'"'),t(s).data("sumome-share-text")&&(u+=' data-sumome-share-text="'+t(s).data("sumome-share-text")+'"'),o.services.forEach(t.proxy(function(e){if((c<o.services_displayed||"sumome"===e)&&"share"!=e){var n=t("<a"+u+' title="'+(this.settings.noSumoBranding&&"sumome"==e?"More":t.shareServices[e].name)+'" class="sumome-share-client-animated sumome-share-client-share" data-sumome-share="'+e+'" href="javascript:void(0);"><img src="'+this.api.properties.baseUrl+"images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/"+(this.settings.noSumoBranding&&"sumome"==e?"sumomepro":e)+"-"+(o.color?i.whiteOrBlack(o.color):"white")+'-60.png" alt="'+(this.settings.noSumoBranding&&"sumome"===e?"More":t.shareServices[e].name)+'"></a>');o.shares_displayed&&e in this.settings&&parseInt(this.settings[e])>=this.settings.shares_minimum&&(n.addClass("sumome-share-client-count"),n.append("<span>"+(e in this.settings?r(this.settings[e]):"0")+"</span>")),n.css("background",o.color?o.color:"background"in t.shareServices[e]?t.shareServices[e].background:"#ccc"),n.css("color",o.color?i.whiteOrBlack(o.color):"color"in t.shareServices[e]?t.shareServices[e].color:"#fff"),t(s).append(n),"sumome"!=e&&c++}},this)),t(".sumome-share-client-share",t('[data-sumome-share-pos="'+t(s).data("sumome-share-pos")+'"]')).hover(t.proxy(function(){var e=t(this).data("sumome-share");if(e&&e in t.shareServices){var s=i.shadeColor(o.color?o.color:"background"in t.shareServices[e]?t.shareServices[e].background:"#ccc",-10);t(this).css("background",s)}}),t.proxy(function(){var e=t(this).data("sumome-share");e&&e in t.shareServices&&t(this).css("background",o.color?o.color:"background"in t.shareServices[e]?t.shareServices[e].background:"#ccc")})),t(".sumome-share-client-share",s).on("click",t.proxy(function(t){this.click(t)},this))},this))},bindCustomShares:function e(){var i=t("[data-sumome-share]:not(.sumome-share-client-share, [data-sumome-custom])");i.on("click",t.proxy(function(t){this.click(t)},this)).attr("data-sumome-custom",!0),i.length>0&&this.updateCustomCounts();var s=t("[data-sumome-share-id]:empty");if(s.length>0){var n=Math.min(window.screen.availWidth||t(window).width(),t(window).width()),o=n<=this.settings.mobile_width?"mobile":"desktop";t.each(s,t.proxy(function(e,i){var s=t(i).data("sumome-share-id");if(s in this.customPositions){var n=this.customPositions[s];if("mobile"!=o||n.show_mobile){var r=t(i),a="";r.data("sumome-share-url")&&(a+=' data-sumome-share-url="'+r.data("sumome-share-url")+'"'),r.data("sumome-share-text")&&(a+=' data-sumome-share-text="'+r.data("sumome-share-text")+'"'),r.html('<div class="sumome-share-client-wrapper sumome-share-client-wrapper-custom'+(n.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+(n.float?" sumome-share-client-float-"+n.float:"")+" sumome-share-client-"+n.size+'"><div data-sumome-share-pos="'+n.position_id+'" class="sumome-share-client sumome-share-client-custom'+(n.shares_displayed?" sumome-share-client-counts":"")+" sumome-share-client-"+this.settings.theme+" sumome-share-client-"+n.size+" sumome-share-client-"+n.orientation+'"'+a+"></div></div>"),this.positionSettings[n.position_id]=n}}},this)),this.addButtons(t(".sumome-share-client",s),o),this.applyPositionSettings(),this.position(),this.alignShareLabels(),this.updateCustomCounts()}},updateCustomCounts:function e(){t("[data-sumome-share-count]").each(t.proxy(function(e,i){var s=t(i).data("sumome-share-count");s in this.settings&&parseInt(this.settings[s])>=this.settings.shares_minimum?t(i).text(s in this.settings?r(this.settings[s]):"0"):t(i).text("")},this))},click:function i(s){var n=t(s.currentTarget).data("sumome-share"),o=t(s.currentTarget).data("sumome-share-url")||t(s.currentTarget).closest(".sumome-share-client").data("sumome-share-target-url")||a(),r=t(s.currentTarget).data("sumome-share-text")||t(s.currentTarget).closest(".sumome-share-client").data("sumome-share-target-text");if("sumome"==n)this.api.emit("event",{appId:"9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1",event:n+"-click",href:o}),"mobile"===this.settings.current_mode?this.popupMobile(o,r):this.popup(o,r);else if("share"!=n){this.api.emit("event",{appId:"9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1",event:n+"-click",href:o}),"twitter"===n&&(t('meta[name="twitter:title"]').length&&void 0===t(s.currentTarget).data("sumome-share-text")&&(r=t('meta[name="twitter:title"]').eq(0).attr("content")),t('meta[name="twitter:url"]').length&&void 0===t(s.currentTarget).data("sumome-share-url")&&(o=t('meta[name="twitter:url"]').eq(0).attr("content")));var l={url:o,text:r,siteId:this.api.properties.siteId,sumoUrl:this.api.properties.sumoUrl,shortenUrl:this.settings.use_shortener,shortener:this.settings.shortener+this.settings.short_domain,noSumoBranding:this.settings.noSumoBranding};if("services_settings"in this.settings&&this.settings.services_settings&&n in this.settings.services_settings&&t.extend(l,this.settings.services_settings[n]),this.settings.noSumoBranding&&"url"in l&&l.url&&"utm"in this.settings&&this.settings.utm){var c=e(l.url);"utm_source"in this.settings&&this.settings.utm_source&&(c.removeQuery("utm_source"),c.addQuery("utm_source",this.settings.utm_source.replace("{service}",n))),"utm_medium"in this.settings&&this.settings.utm_medium&&(c.removeQuery("utm_medium"),c.addQuery("utm_medium",this.settings.utm_medium.replace("{service}",n))),"utm_name"in this.settings&&this.settings.utm_name&&(c.removeQuery("utm_campaign"),c.addQuery("utm_campaign",this.settings.utm_name.replace("{service}",n))),"utm_custom_key"in this.settings&&this.settings.utm_custom_key&&"utm_custom_val"in this.settings&&this.settings.utm_custom_val&&(c.removeQuery(this.settings.utm_custom_key),c.addQuery(this.settings.utm_custom_key,this.settings.utm_custom_val.replace("{service}",n))),l.url=c.toString()}t.share(n,l,t.proxy(function(t){this.fetch([t])},this))}},applyPositionSettings:function e(){var s=this.settings;if("object"==typeof s&&(Array.isArray(s.positions)&&0!==s.positions.length||"object"==typeof this.customPositions)&&"object"==typeof s.position_settings){var n={lp:{suffix:"left-page",layout:"vertical"},rp:{suffix:"right-page",layout:"vertical"},la:{suffix:"left-sidebar-article",layout:"vertical"},ra:{suffix:"right-sidebar-article",layout:"vertical"},hla:{suffix:"header-left-article",layout:"horizontal"},hca:{suffix:"header-center-article",layout:"horizontal"},hra:{suffix:"header-right-article",layout:"horizontal"},tla:{suffix:"top-left-article",layout:"horizontal"},tca:{suffix:"top-center-article",layout:"horizontal"},tra:{suffix:"top-right-article",layout:"horizontal"},bla:{suffix:"bottom-left-article",layout:"horizontal"},bca:{suffix:"bottom-center-article",layout:"horizontal"},bra:{suffix:"bottom-right-article",layout:"horizontal"},dbb:{suffix:"wrapper-desktop-bottom-bar",layout:"horizontal"},mbt:{suffix:"wrapper-mobile-top-bar",layout:"horizontal"},mbb:{suffix:"wrapper-mobile-bottom-bar",layout:"horizontal"},mbl:{suffix:"open-mobile-left",layout:"horizontal"},mbr:{suffix:"open-mobile-right",layout:"horizontal"}};t(this.customPositions).length&&t.each(this.customPositions,t.proxy(function t(e,i){s.positions.push(i.position_id),n[i.position_id]={suffix:!1,layout:i.orientation}},this)),s.positions.forEach(t.proxy(function e(s){if(n.hasOwnProperty(s)){var o=this.positionSettings[s],r=n[s],a;if(r.suffix)a=t(".sumome-share-client-"+r.suffix);else{if(void 0===o)return;a=t('[data-sumome-share-id="'+o.position_id+'"]')}if(a.removeClass("sumome-share-client-circle").removeClass("sumome-share-client-rounded"),o.button_style&&"square"!==o.button_style&&a.addClass("sumome-share-client-"+o.button_style),o.button_padding&&o.button_padding>0&&t(".sumome-share-client-share",a).css("margin"+("vertical"==r.layout?"Bottom":"Right"),o.button_padding+"px"),o.shares_background)if(["mbl","mbr"].indexOf(s)>-1){var l=i.whiteOrBlack(o.shares_background);a.css({backgroundColor:i.hexToRGBA(o.shares_background,.8)}).find("span").css({color:l}),"white"===l&&a.find("img").attr("src",this.api.properties.baseUrl+"images/apps/9e8a4d2a-6f8c-415e-851b-bdfe4c01d5c1/share-white-60.png")}else{if(o.shares_background)var c={backgroundColor:o.shares_background,color:i.whiteOrBlack(o.shares_background)};else var c={backgroundColor:"transparent",color:"#000"};t(".sumome-share-client-share-share",a).css(c)}if(["la","ra"].indexOf(s)>-1&&(a=a.closest(".sumome-share-client-wrapper")),!(["lp","rp"].indexOf(s)<0))if(["mbt","mbb","mbl","mbr"].indexOf(s)>-1){if(o.offset_x&&0!==o.offset_x){var u="left",h=o.offset_x;"mbr"==s&&(u="right",h=0-h),a.css(u,h+"px")}["mbt","mbb"].indexOf(s)<0&&o.offset_y&&0!==o.offset_y&&a.css("bottom",0-o.offset_y+"px")}else{var d="marginTop",u="marginLeft",h=0;o.position_id&&(a=t(".sumome-share-client-wrapper-custom",a)),o.offset_x&&0!==o.offset_x&&("la"===s?u="left":"ra"===s?u="right":["tra","hra","bra"].indexOf(s)>-1&&(u="marginRight"),h=["ra","tra","hra","bra"].indexOf(s)>-1?0-o.offset_x:o.offset_x,a.css(u,h+"px")),o.offset_y&&0!==o.offset_y&&(["la","ra"].indexOf(s)>-1&&(d="top"),a.css(d,o.offset_y+"px"))}}},this))}},alignShareLabels:function e(){t.each(t(".sumome-share-client-share-share"),function(){var e=t(this).outerHeight(),i=t(this).find("span").css("bottom","auto"),s=t(i).outerHeight();t(i).css("top",(e-s)/2+"px")})},scroll:function e(){if(null!=this.$mobileBottomBar){var i=t(window).scrollTop(),s="sumome-share-client-wrapper-mobile-bottom-bar-hidden",n=!this.$mobileBottomBar.hasClass(s),o=this.$mobileBottomBar.height()||16;i>this.lastScrollTop?(this.lastScrollUp=0,n||(this.$mobileBottomBar.css("bottom",""),this.$mobileBottomBar.removeClass(s))):i<this.lastScrollTop&&(this.lastScrollUp+=this.lastScrollTop-i,(n&&this.lastScrollUp>=o/2||0==i)&&(this.$mobileBottomBar.css("bottom",-1*o),this.$mobileBottomBar.addClass(s))),this.lastScrollTop=i}}};return l}),sumo.define("lib/sumome/sumolist/formsync",["jquery","underscore","postscribe"],function(t,e,i){function s(s,n){this.config=s,this.$syncEl=null;var o={};e.isArray(n)?n.forEach(function(t){t.form_sync_field&&(o[t.field_variable]=t.form_sync_field)}):e.isObject(n)&&(o=e.clone(n)),s.email_field&&(o.email=s.email_field),this.fieldMap=o,this.install=function(e){this.fields=e,this.$syncEl=t('<div class="sumo-formsync" />'),this.$syncEl.hide(),this.$syncEl.appendTo(document.body),i.postscribe(this.$syncEl.get(0),this.config.snippet)},this.remove=function(){this.$syncEl&&(this.$syncEl.remove(),this.$syncEl=null)},this.submit=function(t){if(this.$syncEl){var e=this.$syncEl.find("form");if(e.length){e.prop("novalidate",!0),e.replaceWith(e.clone(!1)),e=this.$syncEl.find("form");var i=this;e.on("submit",function(){window.setTimeout(function(){i.remove()},1e4)}),this.$fieldsEl=this.$syncEl.find("input, select");for(var s in this.fields)s in this.fieldMap&&this.setFieldValue(this.fieldMap[s],this.fields[s].value);var n=e.find('input[type="submit"]');n.length||(n=e.find('button[type="submit"]')),n.get(0)?n.trigger("click"):e.trigger("submit")}else if(void 0===t||t<20){var i=this;window.setTimeout(function(){i.submit((t||0)+1)},500)}}},this.setFieldValue=function(e,i){var s=this.$fieldsEl.filter(function(){return t(this).attr("name")===e});if(s.is("input")){switch((s.attr("type")||"").toLowerCase()){case"email":case"password":case"text":case"hidden":s.val(i);break;case"checkbox":case"radio":s.filter(function(){return t(this).val().toLowerCase()===i.toLowerCase()}).prop("checked",!0)}}else s.is("select")&&s.val(i)}}return s}),sumo.define("JSON",[],function(){var t=null;try{var e=document.createElement("iframe");e.style.display="none",document.body.appendChild(e),t=e.contentWindow.JSON}catch(t){}return t||JSON}),sumo.define("pixel-helpers",[],function(){return{injectVars:function(t,e){for(var i in e)if(e.hasOwnProperty(i)){var s=new RegExp("\\{\\s*sumome-"+i+"\\s*\\}","g");t=t.replace(s,e[i])}return t}}}),sumo.define("plugins/text!scrollbox/templates/email_popup.html",[],function(){return'<div class="sumome-scrollbox-form">\n  <h2 class="sumome-scrollbox-heading"></h2>\n  <div class="sumome-scrollbox-text"></div>\n  <div class="sumome-scrollbox-error"></div>\n  <input class="sumome-scrollbox-input" type="text" value="" name="scrollbox_email_address" id="scrollbox_email_address" placeholder="Enter your email address" />\n  <button class="sumome-scrollbox-button sumome-scrollbox-button-bg sumome-scrollbox-button-text" type="submit">Subscribe Me</button>\n  <button class="sumome-scrollbox-continue sumome-scrollbox-continue-bg sumome-scrollbox-continue-text" type="submit" style="display:none;">Continue</button>\n</div>\n<div class="sumome-scrollbox-close"></div>'});var n={email:"Email",name:"Name",first_name:"First Name",last_name:"Last Name",company:"Company",zip:"Zip Code",website:"Website URL",phone:"Phone"};"undefined"!=typeof sumo&&"function"==typeof sumo.define?sumo.define("scrollbox/fields",[],function(){return n}):void 0!==e&&e.exports&&(e.exports=n),sumo.define("countdown",[],function(){var t;return function(t){"use strict";function e(t,e){var i=t.getTime();return t.setMonth(t.getMonth()+e),Math.round((t.getTime()-i)/O)}function i(t){var e=t.getTime(),i=new Date(e);return i.setMonth(t.getMonth()+1),Math.round((i.getTime()-e)/O)}function s(t){var e=t.getTime(),i=new Date(e);return i.setFullYear(t.getFullYear()+1),Math.round((i.getTime()-e)/O)}function n(t,e){if(e=e instanceof Date||null!==e&&isFinite(e)?new Date(+e):new Date,!t)return e;var i=+t.value||0;return i?(e.setTime(e.getTime()+i),e):(i=+t.milliseconds||0,i&&e.setMilliseconds(e.getMilliseconds()+i),i=+t.seconds||0,i&&e.setSeconds(e.getSeconds()+i),i=+t.minutes||0,i&&e.setMinutes(e.getMinutes()+i),i=+t.hours||0,i&&e.setHours(e.getHours()+i),i=+t.weeks||0,i&&(i*=A),i+=+t.days||0,i&&e.setDate(e.getDate()+i),i=+t.months||0,i&&e.setMonth(e.getMonth()+i),i=+t.millennia||0,i&&(i*=N),i+=+t.centuries||0,i&&(i*=D),i+=+t.decades||0,i&&(i*=B),i+=+t.years||0,i&&e.setFullYear(e.getFullYear()+i),e)}function o(t,e){return it(t)+(1===t?Y[e]:K[e])}function r(){}function a(t,e){switch(e){case"seconds":if(t.seconds!==$||isNaN(t.minutes))return;t.minutes++,t.seconds=0;case"minutes":
if(t.minutes!==I||isNaN(t.hours))return;t.hours++,t.minutes=0;case"hours":if(t.hours!==P||isNaN(t.days))return;t.days++,t.hours=0;case"days":if(t.days!==A||isNaN(t.weeks))return;t.weeks++,t.days=0;case"weeks":if(t.weeks!==i(t.refMonth)/A||isNaN(t.months))return;t.months++,t.weeks=0;case"months":if(t.months!==L||isNaN(t.years))return;t.years++,t.months=0;case"years":if(t.years!==B||isNaN(t.decades))return;t.decades++,t.years=0;case"decades":if(t.decades!==D||isNaN(t.centuries))return;t.centuries++,t.decades=0;case"centuries":if(t.centuries!==N||isNaN(t.millennia))return;t.millennia++,t.centuries=0}}function l(t,e,i,s,n,o){return t[i]>=0&&(e+=t[i],delete t[i]),e/=n,e+1<=1?0:t[s]>=0?(t[s]=+(t[s]+e).toFixed(o),a(t,s),0):e}function c(t,e){var n=l(t,0,"milliseconds","seconds",E,e);if(n&&(n=l(t,n,"seconds","minutes",$,e))&&(n=l(t,n,"minutes","hours",I,e))&&(n=l(t,n,"hours","days",P,e))&&(n=l(t,n,"days","weeks",A,e))&&(n=l(t,n,"weeks","months",i(t.refMonth)/A,e))&&(n=l(t,n,"months","years",s(t.refMonth)/i(t.refMonth),e))&&(n=l(t,n,"years","decades",B,e))&&(n=l(t,n,"decades","centuries",D,e))&&(n=l(t,n,"centuries","millennia",N,e)))throw new Error("Fractional unit overflow")}function u(t){var i;for(t.milliseconds<0?(i=M(-t.milliseconds/E),t.seconds-=i,t.milliseconds+=i*E):t.milliseconds>=E&&(t.seconds+=R(t.milliseconds/E),t.milliseconds%=E),t.seconds<0?(i=M(-t.seconds/$),t.minutes-=i,t.seconds+=i*$):t.seconds>=$&&(t.minutes+=R(t.seconds/$),t.seconds%=$),t.minutes<0?(i=M(-t.minutes/I),t.hours-=i,t.minutes+=i*I):t.minutes>=I&&(t.hours+=R(t.minutes/I),t.minutes%=I),t.hours<0?(i=M(-t.hours/P),t.days-=i,t.hours+=i*P):t.hours>=P&&(t.days+=R(t.hours/P),t.hours%=P);t.days<0;)t.months--,t.days+=e(t.refMonth,1);t.days>=A&&(t.weeks+=R(t.days/A),t.days%=A),t.months<0?(i=M(-t.months/L),t.years-=i,t.months+=i*L):t.months>=L&&(t.years+=R(t.months/L),t.months%=L),t.years>=B&&(t.decades+=R(t.years/B),t.years%=B,t.decades>=D&&(t.centuries+=R(t.decades/D),t.decades%=D,t.centuries>=N&&(t.millennia+=R(t.centuries/N),t.centuries%=N)))}function h(t,i,s,n){var o=0;!(i&S)||o>=s?(t.centuries+=t.millennia*N,delete t.millennia):t.millennia&&o++,!(i&C)||o>=s?(t.decades+=t.centuries*D,delete t.centuries):t.centuries&&o++,!(i&k)||o>=s?(t.years+=t.decades*B,delete t.decades):t.decades&&o++,!(i&_)||o>=s?(t.months+=t.years*L,delete t.years):t.years&&o++,!(i&x)||o>=s?(t.months&&(t.days+=e(t.refMonth,t.months)),delete t.months,t.days>=A&&(t.weeks+=R(t.days/A),t.days%=A)):t.months&&o++,!(i&w)||o>=s?(t.days+=t.weeks*A,delete t.weeks):t.weeks&&o++,!(i&y)||o>=s?(t.hours+=t.days*P,delete t.days):t.days&&o++,!(i&b)||o>=s?(t.minutes+=t.hours*I,delete t.hours):t.hours&&o++,!(i&v)||o>=s?(t.seconds+=t.minutes*$,delete t.minutes):t.minutes&&o++,!(i&g)||o>=s?(t.milliseconds+=t.seconds*E,delete t.seconds):t.seconds&&o++,i&f&&!(o>=s)||c(t,n)}function d(t,e,i,s,n,o){var r=new Date;if(t.start=e=e||r,t.end=i=i||r,t.units=s,t.value=i.getTime()-e.getTime(),t.value<0){var a=i;i=e,e=a}t.refMonth=new Date(e.getFullYear(),e.getMonth(),15,12,0,0);try{t.millennia=0,t.centuries=0,t.decades=0,t.years=i.getFullYear()-e.getFullYear(),t.months=i.getMonth()-e.getMonth(),t.weeks=0,t.days=i.getDate()-e.getDate(),t.hours=i.getHours()-e.getHours(),t.minutes=i.getMinutes()-e.getMinutes(),t.seconds=i.getSeconds()-e.getSeconds(),t.milliseconds=i.getMilliseconds()-e.getMilliseconds(),u(t),h(t,s,n,o)}finally{delete t.refMonth}return t}function m(t){return t&f?E/30:t&g?E:t&v?E*$:t&b?E*$*I:t&y?E*$*I*P:E*$*I*P*A}function p(t,e,i,s,o){var a;i=+i||T,s=s>0?s:NaN,o=o>0?o<20?Math.round(o):20:0;var l=null;"function"==typeof t?(a=t,t=null):t instanceof Date||(null!==t&&isFinite(t)?t=new Date(+t):("object"==typeof l&&(l=t),t=null));var c=null;if("function"==typeof e?(a=e,e=null):e instanceof Date||(null!==e&&isFinite(e)?e=new Date(+e):("object"==typeof e&&(c=e),e=null)),l&&(t=n(l,e)),c&&(e=n(c,t)),!t&&!e)return new r;if(!a)return d(new r,t,e,i,s,o);var u=m(i),h,p=function(){a(d(new r,t,e,i,s,o),h)};return p(),h=setInterval(p,u)}var f=1,g=2,v=4,b=8,y=16,w=32,x=64,_=128,k=256,C=512,S=1024,T=_|x|y|b|v|g,E=1e3,$=60,I=60,P=24,O=P*I*$*E,A=7,L=12,B=10,D=10,N=10,M=Math.ceil,R=Math.floor,z=0,U=1,j=2,F=3,H=4,q=5,W=6,V=7,X=8,G=9,Q=10,Y,K,J,Z,tt,et,it,st;r.prototype.toString=function(t){var e=st(this),i=e.length;if(!i)return t?""+t:tt;if(1===i)return e[0];var s=J+e.pop();return e.join(Z)+s},r.prototype.toHTML=function(t,e){t=t||"span";var i=st(this),s=i.length;if(!s)return e=e||tt,e?"<"+t+">"+e+"</"+t+">":e;for(var n=0;n<s;n++)i[n]="<"+t+">"+i[n]+"</"+t+">";if(1===s)return i[0];var o=J+i.pop();return i.join(Z)+o},r.prototype.addTo=function(t){return n(this,t)},st=function(t){var e=[],i=t.millennia;return i&&e.push(et(i,10)),i=t.centuries,i&&e.push(et(i,9)),i=t.decades,i&&e.push(et(i,8)),i=t.years,i&&e.push(et(i,7)),i=t.months,i&&e.push(et(i,6)),i=t.weeks,i&&e.push(et(i,5)),i=t.days,i&&e.push(et(i,4)),i=t.hours,i&&e.push(et(i,3)),i=t.minutes,i&&e.push(et(i,2)),i=t.seconds,i&&e.push(et(i,1)),i=t.milliseconds,i&&e.push(et(i,0)),e},p.MILLISECONDS=f,p.SECONDS=g,p.MINUTES=v,p.HOURS=b,p.DAYS=y,p.WEEKS=w,p.MONTHS=x,p.YEARS=_,p.DECADES=k,p.CENTURIES=C,p.MILLENNIA=S,p.DEFAULTS=T,p.ALL=S|C|k|_|x|w|y|b|v|g|f;var nt=p.setFormat=function(t){if(t){if("singular"in t||"plural"in t){var e=t.singular||[];e.split&&(e=e.split("|"));var i=t.plural||[];i.split&&(i=i.split("|"));for(var s=0;s<=10;s++)Y[s]=e[s]||Y[s],K[s]=i[s]||K[s]}"string"==typeof t.last&&(J=t.last),"string"==typeof t.delim&&(Z=t.delim),"string"==typeof t.empty&&(tt=t.empty),"function"==typeof t.formatNumber&&(it=t.formatNumber),"function"==typeof t.formatter&&(et=t.formatter)}},ot=p.resetFormat=function(){Y=" millisecond| second| minute| hour| day| week| month| year| decade| century| millennium".split("|"),K=" milliseconds| seconds| minutes| hours| days| weeks| months| years| decades| centuries| millennia".split("|"),J=" and ",Z=", ",tt="",it=function(t){return t},et=o};return p.setLabels=function(t,e,i,s,n,o,r){nt({singular:t,plural:e,last:i,delim:s,empty:n,formatNumber:o,formatter:r})},p.resetLabels=ot,ot(),t&&t.exports?t.exports=p:"function"==typeof window.define&&void 0!==window.define.amd&&window.define("countdown",[],function(){return p}),p}(void 0)}),sumo.define("sumocountdown",["jquery","countdown"],function(t,e){function i(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function s(e,i,s,r){var l=e.html()||"",c=new Date(i).toString(),u=r?r.data("interval"):null;u?clearInterval(b[u]):u=a(),s||(s=g);var r=t('<span class="sumome-countdown-timer" data-end="'+i+'" data-interval="'+u+'" data-format="'+s+'"></span>');return l=l.split(f),1==l.length&&l[0].length>0&&(l[0]=l[0]+"&nbsp;"),l.splice(1,0,r[0].outerHTML),l=l.join(""),e.empty(),e.html(l),r=e.find(".sumome-countdown-timer").length?e.find(".sumome-countdown-timer"):r,r.bind("destroyed",function(){n(r)}),o(r),r}function n(t){var e=t.data("interval");clearInterval(b[e]),delete b[e]}function o(t,e){if(t){var i=t.data("interval"),s=t.data("end"),n=t.data("format");e&&(i=a(),t.data("interval",i)),clearInterval(b[i]);var o=function e(){var o=l(s);t.html(u(o,n)),o.value<=0&&clearInterval(b[i])};o(),b[i]=setInterval(o,1e3)}}function r(t){var e=t.data("interval");clearInterval(b[e])}function a(){return Math.random().toString().replace(".","")}function l(t){var i=new Date,s=new Date(t);return e(i,s)}function c(t,e){return 1!=e&&(t+="s"),t}function u(t,e){if(t.value<=0)for(var i in t)t[i]=0;var s=e;if(s=s.replace("yy",d(t.years)),s=s.replace("MM",d(t.months)),s=s.replace("dd",d(t.days)),s=s.replace("HH",p(t)),s=s.replace("hh",d(t.hours)),s=s.replace("mm",d(t.minutes)),s=s.replace("ss",d(t.seconds)),m(e.toLowerCase(),"uu")&&m(e.toLowerCase(),"nn")&&!m(e,"HH")){for(var n=e.toLowerCase().indexOf("uu"),o=e.toLowerCase().indexOf("nn"),r=n<o?n:o,a=n>o?n+2:o+2,l=e.substring(r,a),c="",u=0;a+u<e.length;u++){var f=e.substring(a+u+0,a+u+1),g=e.substring(a+u+1,a+u+2);if(v[f+g])break;c+=f}l+=c;var b="";m(e,"ss")||(b=(t.value>59e3?"and ":"")+h(t.seconds,v.ss,l)+b),t.minutes&&!m(e,"mm")&&(b=h(t.minutes,v.mm,l)+b),t.hours&&!m(e,"hh")&&(b=h(t.hours,v.hh,l)+b),t.days&&!m(e,"dd")&&(b=h(t.days,v.dd,l)+b),t.months&&!m(e,"MM")&&(b=h(t.months,v.MM,l)+b),t.years&&!m(e,"yy")&&(b=h(t.years,v.yy,l)+b),m(e,"ss")||m(e,"mm")||m(e,"hh")||(b=b.slice(0,-1*c.length)),s=s.replace(l,b)}return s}function h(t,e,i){return i=i.replace("UU",t).replace("uu",t).replace("NN",c(e,t)).replace("nn",e.substring(0,1).toLowerCase()).replace("Nn",e.substring(0,1).toUpperCase())}function d(t){return("0"+t).slice(-2)}function m(t,e){return t.indexOf(e)>-1}function p(t){var e=Math.floor(t.value/36e5);return e<10&&(e=d(e)),i(e)}var f="{timer}",g="UU NN, hh:mm:ss",v={yy:"year",MM:"month",dd:"day",hh:"hour",mm:"minute",ss:"second"},b={};return t.event.special.destroyed={remove:function t(e){e.handler&&e.handler()}},{create:s,destroy:n,start:o,stop:r,replace:f}}),sumo.define("twitter-widgets",["jquery"],function(t){return{load:function(e){this.isLoaded()?e():t.getScript("//platform.twitter.com/widgets.js",e)},isLoaded:function(){return"undefined"!=typeof twttr&&void 0!==twttr.widgets},followButton:function(t,e,i){this.load(function(){twttr.widgets.createFollowButton(t,e,{showScreenName:!0,showCount:!0}).then(i&&"function"==typeof i?i:Function.prototype)})}}}),sumo.define("jquery.iframe-tracker",["jquery"],function(t){t.fn.iframeTracker=function(e){t.iframeTracker.handlersList.push(e),t(this).bind("mouseover",{handler:e},function(t){t.data.handler.over=!0;try{t.data.handler.overCallback(this)}catch(t){}}).bind("mouseout",{handler:e},function(e){e.data.handler.over=!1,t.iframeTracker.focusRetriever.focus();try{e.data.handler.outCallback(this)}catch(t){}})},t.iframeTracker={focusRetriever:null,focusRetrieved:!1,handlersList:[],isIE8AndOlder:!1,init:function(){try{1==t.browser.msie&&t.browser.version<9&&(this.isIE8AndOlder=!0)}catch(t){try{var e=navigator.userAgent.match(/(msie) ([\w.]+)/i);e[2]<9&&(this.isIE8AndOlder=!0)}catch(t){}}t(window).focus(),t(window).blur(function(e){t.iframeTracker.windowLoseFocus(e)}),t("body").append('<div style="position:fixed;top:0;left:0;overflow:hidden;"><label for="focus_retriever" style="position:absolute;left:-1000px;">Focus Retriever</label><input style="position:absolute;left:-1000px;" type="text" name="focus_retriever" value="" id="focus_retriever" readonly="true" /></div>'),this.focusRetriever=t("#focus_retriever"),this.focusRetrieved=!1;var i=this;if(t(document).mousemove(function(e){i.handlersList.some(function(e){return t(e.target).is(t(document.activeElement))})&&document.activeElement&&"IFRAME"==document.activeElement.tagName&&(t.iframeTracker.focusRetriever.focus(),t.iframeTracker.focusRetrieved=!0)}),this.isIE8AndOlder){this.focusRetriever.blur(function(e){e.stopPropagation(),e.preventDefault(),t.iframeTracker.windowLoseFocus(e)}),t("body").click(function(e){t(window).focus()}),t("form").click(function(t){t.stopPropagation()});try{t("body").on("click","form",function(t){t.stopPropagation()})}catch(t){}}},windowLoseFocus:function(t){for(var e in this.handlersList)if(1==this.handlersList[e].over)try{this.handlersList[e].blurCallback()}catch(t){}}},t(document).ready(function(){t.iframeTracker.init()})});var r={domainThreshold:2,secondLevelThreshold:2,topLevelThreshold:2,defaultDomains:["msn.com","bellsouth.net","telus.net","comcast.net","optusnet.com.au","earthlink.net","qq.com","sky.com","icloud.com","mac.com","sympatico.ca","googlemail.com","att.net","xtra.co.nz","web.de","cox.net","gmail.com","ymail.com","aim.com","rogers.com","verizon.net","rocketmail.com","google.com","optonline.net","sbcglobal.net","aol.com","me.com","btinternet.com","charter.net","shaw.ca"],defaultSecondLevelDomains:["yahoo","hotmail","mail","live","outlook","gmx"],defaultTopLevelDomains:["com","com.au","com.tw","co","ca","co.nz","co.uk","de","fr","fi","io","it","ru","net","org","edu","gov","jp","nl","kr","se","eu","ie","co.il","us","at","be","dk","hk","es","gr","ch","no","cz","in","net","net.au","info","biz","mil","co.jp","sg","hu","uk"],run:function t(e){e.domains=e.domains||r.defaultDomains,e.secondLevelDomains=e.secondLevelDomains||r.defaultSecondLevelDomains,e.topLevelDomains=e.topLevelDomains||r.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||r.sift3Distance;var i=function t(e){return e},s=e.suggested||i,n=e.empty||i,o=r.suggest(r.encodeEmail(e.email),e.domains,e.secondLevelDomains,e.topLevelDomains,e.distanceFunction);return o?s(o):n()},suggest:function t(e,i,s,n,o){e=e.toLowerCase();var r=this.splitEmail(e);if(s&&n&&-1!==s.indexOf(r.secondLevelDomain)&&-1!==n.indexOf(r.topLevelDomain))return!1;var a=this.findClosestDomain(r.domain,i,o,this.domainThreshold);if(a)return a!=r.domain&&{address:r.address,domain:a,full:r.address+"@"+a};var l=this.findClosestDomain(r.secondLevelDomain,s,o,this.secondLevelThreshold),c=this.findClosestDomain(r.topLevelDomain,n,o,this.topLevelThreshold);if(r.domain){var a=r.domain,u=!1;if(l&&l!=r.secondLevelDomain&&(a=a.replace(r.secondLevelDomain,l),u=!0),c&&c!=r.topLevelDomain&&(a=a.replace(new RegExp(r.topLevelDomain+"$"),c),u=!0),1==u)return{address:r.address,domain:a,full:r.address+"@"+a}}return!1},findClosestDomain:function t(e,i,s,n){n=n||this.topLevelThreshold;var o,r=1/0,a=null;if(!e||!i)return!1;s||(s=this.sift3Distance);for(var l=0;l<i.length;l++){if(e===i[l])return e;var c="com"===a&&"c"===e||"net"===a&&"n"===e;o=s(e,i[l]),o<r&&!c&&(r=o,a=i[l])}return r<=n&&null!==a&&a},sift3Distance:function t(e,i){if(null==e||0===e.length)return null==i||0===i.length?0:i.length;if(null==i||0===i.length)return e.length;for(var s=0,n=0,o=0,r=0,a=5;s+n<e.length&&s+o<i.length;){if(e.charAt(s+n)==i.charAt(s+o))r++;else{n=0,o=0;for(var l=0;l<5;l++){if(s+l<e.length&&e.charAt(s+l)==i.charAt(s)){n=l;break}if(s+l<i.length&&e.charAt(s)==i.charAt(s+l)){o=l;break}}}s++}return(e.length+i.length)/2-r},splitEmail:function t(e){var i=e.trim().split("@");if(i.length<2)return!1;for(var s=0;s<i.length;s++)if(""===i[s])return!1;var n=i.pop(),o=n.split("."),r="",a="";if(0==o.length)return!1;if(1==o.length)a=o[0];else{r=o[0];for(var s=1;s<o.length;s++)a+=o[s]+".";a=a.substring(0,a.length-1)}return{topLevelDomain:a,secondLevelDomain:r,domain:n,address:i.join("@")}},encodeEmail:function t(e){var i=encodeURI(e);return i=i.replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}")}};void 0!==e&&e.exports&&(e.exports=r),"function"==typeof sumo.define&&sumo.define.amd&&sumo.define("mailcheck",[],function(){return r}),"undefined"!=typeof window&&window.jQuery&&function(t){t.fn.mailcheck=function(t){var e=this;if(t.suggested){var i=t.suggested;t.suggested=function(t){i(e,t)}}if(t.empty){var s=t.empty;t.empty=function(){s.call(null,e)}}t.email=this.val(),r.run(t)}}(jQuery);var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(e){"function"==typeof sumo.define&&sumo.define.amd?sumo.define("jquery.email-autocomplete",["jquery","mailcheck"],e):"object"===(void 0===t?"undefined":i(t))?e(require("jquery","mailcheck")):e(jQuery,r)}(function(t,e){function i(e,i){this.$field=t(e),"domains"in i&&Array.isArray(i.domains)&&(i.domains=i.domains.concat(n.domains)),this.options=t.extend(!0,{},n,i),this._defaults=n,this._domains=this.options.domains,this._emails=this.options.emails,this.init()}var s="emailautocomplete",n={suggClass:"sumome-eac-sugg",suggsClass:"sumome-eac-suggs",renderDrop:!0,domains:["gmail.com","hotmail.com","yahoo.com","outlook.com","aol.com","live.com","me.com","icloud.com","mail.ru","hotmail.co.uk","yahoo.co.uk","facebook.com","ymail.com","yandex.ru","msn.com","comcast.net","mail.com","mac.com","hotmail.fr","googlemail.com","yahoo.fr","gmx.de","qq.com","web.de","yahoo.es","live.co.uk","yahoo.com.br","att.net","sbcglobal.net","yahoo.ca","rocketmail.com","abv.bg","btinternet.com","verizon.net","hotmail.it","gmx.com","hotmail.es","cox.net","seznam.cz","live.fr","yandex.com","yahoo.co.in","yahoo.co.id","mailinator.com","bigpond.com","yahoo.com.au","yahoo.it","libero.it","yopmail.com","yahoo.de","yahoo.in","wp.pl","163.com","shaw.ca","ntlworld.com","rediffmail.com","bk.ru","naver.com","bellsouth.net","gmx.net","live.nl","live.ca","outlook.fr","free.fr","o2.pl","kw.com","ukr.net","ya.ru","outlook.es","orange.fr","earthlink.net","rogers.com","hotmail.de","live.com.au","charter.net","rambler.ru","yahoo.co.jp","yahoo.gr","hotmail.ca"],emails:[]};i.prototype={init:function i(){Array.prototype.indexOf||this.doIndexOf();var s=this.getDefaultStyle(this.$field[0],"width"),n=this.$field[0].style.height||this.$field.outerHeight(),o=this.$field.css("backgroundColor"),r=this.isBgColorDark(o),a=t("<div class='sumome-eac-input-wrap' />").css({display:"block",position:"relative",fontSize:this.$field.css("fontSize"),fontStyle:this.$field.css("fontStyle"),float:this.$field.css("float"),width:s,maxWidth:"100%",minWidth:this.$field.css("min-width"),margin:this.$field.css("margin"),marginTop:this.$field.css("margin-top"),marginRight:this.$field.css("margin-right"),marginBottom:this.$field.css("margin-bottom"),marginLeft:this.$field.css("margin-left"),opacity:"1 !important",background:this.$field.css("background"),backgroundImage:this.$field.css("background-image"),backgroundColor:o,borderRadius:this.$field.css("border-radius")||this.$field.css("border-top-left-radius"),textAlign:this.$field.css("text-align"),borderColor:"transparent"}).addClass(this.$field.attr("class"));this.$field.wrap(a),this.$wrap=this.$field.parent(),this.removeStyle(this.$field,"margin"),this.removeStyle(this.$field,"background"),this.removeStyle(this.$field,"background-color"),this.removeStyle(this.$field,"background-image"),this.$field[0].style.margin="",this.$field[0].style.marginTop="",this.$field[0].style.marginRight="",this.$field[0].style.marginBottom="",this.$field[0].style.marginLeft="",this.$field[0].style.background="",this.$field[0].style.backgroundColor="",this.$field[0].style.backgroundImage="",this.$field.css({position:"relative",top:0,left:0,width:"100%",minWidth:"100%",margin:0,background:"transparent",backgroundColor:"transparent",backgroundImage:"",lineHeight:"initial"}),this.isTextAlignCenter="center"===this.$field.css("textAlign"),this.updateFieldLeftOffset(),this.$cval=t("<span class='sumome-eac-cval' />").css({visibility:"hidden",position:"absolute",top:0,left:0,display:"inline-block",fontFamily:this.$field.css("fontFamily"),fontWeight:this.$field.css("fontWeight"),fontSize:this.$field.css("fontSize"),fontStyle:this.$field.css("fontStyle"),letterSpacing:this.$field.css("letterSpacing"),height:"100%",zIndex:"-1"}).insertBefore(this.$field);var l=(this.$field.outerHeight(!0)-this.$field.height())/2;this.$suggUnderlay=t("<input class='"+this.options.suggClass+"' disabled/>").css({display:"inline-block","box-sizing":"border-box",fontFamily:this.$field.css("fontFamily"),fontWeight:this.$field.css("fontWeight"),fontSize:this.$field.css("fontSize"),fontStyle:this.$field.css("fontStyle"),letterSpacing:this.$field.css("letterSpacing"),position:"absolute",left:0,height:"100%",width:"100%",padding:this.$field.css("padding"),paddingTop:this.$field.css("padding-top"),paddingRight:this.$field.css("padding-right"),paddingBottom:this.$field.css("padding-bottom"),paddingLeft:this.$field.css("padding-left"),border:this.$field.css("border"),borderTopWidth:this.$field.css("border-top-width"),borderRightWidth:this.$field.css("border-right-width"),borderBottomWidth:this.$field.css("border-bottom-width"),borderLeftWidth:this.$field.css("border-left-width"),borderRadius:this.$field.css("border-radius")||this.$field.css("border-top-left-radius"),background:"transparent",borderColor:"transparent",color:r?"rgba(0, 0, 0, 0.25)":"rgba(255, 255, 255, 0.25)",opacity:1,lineHeight:"initial"}).insertBefore(this.$field),this.$suggOverlay=t("<span class='sumome-eac-overlay-hitbox' />").css({display:"inline-block","box-sizing":"border-box",fontFamily:this.$field.css("fontFamily"),fontWeight:this.$field.css("fontWeight"),fontSize:this.$field.css("fontSize"),fontStyle:this.$field.css("fontStyle"),letterSpacing:this.$field.css("letterSpacing"),transform:"translateY(-50%)",position:"absolute",top:"50%",opacity:0,left:0,cursor:"pointer"}).insertAfter(this.$field),this.$spellErrorEl=t("<span class='sumome-eac-sugg-spell-error' />").css({fontFamily:this.$field.css("fontFamily"),fontWeight:this.$field.css("fontWeight"),fontSize:this.$field.css("fontSize"),fontStyle:this.$field.css("fontStyle"),letterSpacing:this.$field.css("letterSpacing"),background:"transparent",transform:"translateY(-50%)",display:"inline-block",position:"absolute",top:"50%"}).insertBefore(this.$field),this.$spellErrorUsrEl=t("<span class='sumome-eac-sugg-spell-error-usernm' />").css({marginLeft:this.fieldLeftOffset}).appendTo(this.$spellErrorEl),this.$spellErrorDomEl=t("<span class='sumome-eac-sugg-spell-error-domain' />").appendTo(this.$spellErrorEl),!1===this.options.renderDrop?this.$suggsListEl=t("."+this.options.suggsClass):(this.$suggsListEl=t("<span class='"+this.options.suggsClass+"' />").css("visibility","hidden").insertAfter(this.$field),this.$field.on("blur",t.proxy(function(t){this.$wrap.removeClass("sumome-eac-input-wrap-focus"),this.hideSuggsDropDown()},this)),this.$field.on("focus",t.proxy(function(t){if(this.$wrap.addClass("sumome-eac-input-wrap-focus"),void 0===this.suggestion||this.suggestion.length<1)return!1;this.showSuggsDropDown()},this)),this.$suggsListEl.on("mousemove",t.proxy(function(e){"target"in e&&t(e.target).hasClass("sumome-eac-bubble")&&!t(e.target).hasClass("active")&&this.tabSuggs(0,t(e.target))},this))),this.$field.on("blur",t.proxy(function(t){this.$suggOverlay.hide(),this.$suggUnderlay.fadeOut(200)},this)),this.$field.on("focus",t.proxy(function(t){this.$suggOverlay.show(),this.$suggUnderlay.fadeIn(200)},this)),this.$field.on("input",t.proxy(this.displaySuggestion,this)),this.$field.on("keydown",t.proxy(function(t){13===t.which&&this.suggestion.length>0&&t.preventDefault(),13!==t.which&&9!==t.which||this.autocomplete(),39===t.which&&!0!==t.shiftKey&&this.suggestion.length>0&&this.autocomplete(),38!==t.which&&40!==t.which||(t.preventDefault(),38===t.which&&this.tabSuggs(-1),40===t.which&&this.tabSuggs(1))},this)),this.$suggOverlay.on("mousedown.eac touchstart.eac",t.proxy(this.autocomplete,this)),this._emails.length>0&&this.$field.attr("placeholder",""),e&&this.$field.attr("spellcheck","false"),this.$field.attr("autocomplete","email"),this.$field.attr("autocapitalize","off"),this.$field.attr("autocorrect","off"),this.$field.attr("type","email"),this.updateFontSizeMatchin(),setTimeout(t.proxy(function(){this.updateFontSizeMatchin()},this),1e3)},suggest:function t(e,i){var s=e.split("@");if(!(s.length>1))return"";if(e=s.pop(),!e.length)return"";var n=this._domains.filter(function(t){return 0===t.indexOf(e)});return i&&n&&-1===e.indexOf(n)?n:(n=n.shift()||"",n.replace(e,""))},suggests:function e(i,s){this.domainSpellCheck(i,t.proxy(function(t){var e=t||[];e.length>0&&-1===e[0].indexOf(i)?(this.$spellErrorUsrEl.css({marginLeft:this.fieldLeftOffset}),this.$spellErrorUsrEl.text(i.split("@")[0]+"@"),this.$spellErrorDomEl.text(i.split("@")[1]).css({visibility:"visible"})):this.$spellErrorDomEl.css("visibility","hidden");var n=this.suggest(this.val,!0)||[],o=this._emails.filter(function(t){return 0===t.indexOf(i)&&t!==i}),r=this._emails.filter(function(t){return 0===t.indexOf(i)&&t===i});if(r.length){var a=this._emails.slice(0),l=a.indexOf(r[0]);a.splice(l,1),a.unshift(r[0]),o=a}else 0===i.length&&(o=this._emails.slice(0));if(i.split("@").length>1&&i.split("@")[1].length<1){n=this._domains.slice(0,7)}e=e.concat(o.concat(n)),s(e)},this))},autocomplete:function e(){if(void 0===this.suggestion||this.suggestion.length<1)return!1;if(t(".sumome-eac-bubble.active").length>0){var i=t(".sumome-eac-bubble.active").eq(0).text();this.$field.val(i),this.$field.trigger("change")}this.clear()},clear:function t(){this.$suggUnderlay.val(""),this.$suggOverlay.text("").css("left",""),this.$suggsListEl.html("").css("visibility","hidden"),this.$spellErrorDomEl.css("visibility","hidden"),this.$cval.text(""),this.suggestion=""},displaySuggestion:function e(i){var s=this,n={},o=0;this.val=this.$field.val(),this.updateFieldLeftOffset(),this.suggests(this.val,t.proxy(function(t){this.suggestions=t,this.suggestions.length?i&&i.preventDefault():(this.$suggUnderlay.val(""),this.$suggsListEl.html("")),this.setUnderlaySuggestion(this.suggestions[0]),this.$suggsListEl.html("");for(var e=0;e<this.suggestions.length;e++){var s=this.suggestions[e];-1==s.indexOf("@")&&(s=this.val.split("@")[0]+"@"+s),n[s]||(n[s]=s,this.addSuggBubble(s),o++)}this.suggestions.length<=0?(this.$field.attr("autocomplete","email"),this.hideSuggsDropDown(!0)):(this.$field.attr("autocomplete","off"),this.showSuggsDropDown()),this.$cval.text(this.val);var r=this.$cval.width();this.$field.outerWidth()>r?(this.isTextAlignCenter?(this.$spellErrorEl.css("left",this.$field.outerWidth()/2+r/2-this.$spellErrorEl.width()+"px"),this.$suggOverlay.css("left",this.$field.outerWidth()/2+r/2+"px"),this.$suggUnderlay.css("paddingLeft",+this.$field.outerWidth()/2-r/2+"px")):this.$suggOverlay.css("left",this.fieldLeftOffset+r+"px"),this.$suggUnderlay.css("opacity",1)):this.$suggUnderlay.css("opacity",0)},this))},doIndexOf:function t(){Array.prototype.indexOf=function(t,e){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var i=this.length>>>0;for(e=+e||0,Math.abs(e)===1/0&&(e=0),e<0&&(e+=i)<0&&(e=0);e<i;e++)if(this[e]===t)return e;return-1}},tabSuggs:function t(e,i){var s=this.$suggsListEl.find(".sumome-eac-bubble:visible"),n=i||this.$suggsListEl.find(".sumome-eac-bubble.active"),o=-1;if(0===n.length)e>0?(s.first().addClass("active"),n=s.first()):(s.last().addClass("active"),n=s.last());else{o=n.index();var r=o+e;s.removeClass("active"),n=null,r>=0&&r<s.length&&(n=s.eq(r),n.addClass("active"))}var a=n?n.text():"";this.setUnderlaySuggestion(a)},setUnderlaySuggestion:function t(e){this.val=this.$field.val();var i=!1,s=e&&-1==e.indexOf("@")?this.val.split("@")[0]+"@"+e:e;s&&-1===s.indexOf(this.val)&&(i=!0);var n=e;if(n&&n.indexOf(this.val)>-1)this.suggestion=n.replace(this.val,"");else if(n){var o=this.val.split("@")[1];this.suggestion=n.replace(o,"")}else this.suggestion="";this.$suggOverlay.text(i?"":this.suggestion),this.$suggUnderlay.val(i?"":s)},addSuggBubble:function e(i){var s=t("<span class='sumome-eac-bubble' />");if(s.text(i),s.on("mousedown touchend",t.proxy(function(e){if(!e.altKey){var i=t(e.currentTarget).text();this.$field.val(i),this.$field.trigger("change"),this.clear(),this.hideSuggsDropDown(!0)}},this)),i!=this.$field.val()){0===this.$suggsListEl.find(".sumome-eac-bubble:visible").length&&this.suggestion.length>0&&this.suggestion.length>0&&"hidden"===this.$spellErrorDomEl.css("visibility")&&s.addClass("active"),s.appendTo(this.$suggsListEl),s.position().top>125&&s.remove()}},domainSpellCheck:function t(i,s){e&&this.hasPotential(i)?e.run({email:i,domains:this._domains,suggested:function t(e){s("full"in e?[e.full]:[])},empty:function t(){s([])}}):s([])},hasPotential:function t(e){e||(e="");var i=!1;return e.indexOf("@")>0&&2===e.split("@").length&&e.split("@")[1].indexOf(".")>0&&e.indexOf(".")!==e.length-1&&(i=!0),i},updateFieldLeftOffset:function t(){var e=parseInt(this.$field.css("borderLeftWidth"),10),i=parseInt(this.$field.css("paddingLeft"),10);this.fieldLeftOffset=e+i},updateFontSizeMatchin:function t(){var e=this.$field.css("fontSize");this.$cval.css("fontSize",e),this.$suggUnderlay.css("fontSize",e),this.$suggOverlay.css("fontSize",e),this.$spellErrorEl.css("fontSize",e)},removeStyle:function t(e,i){var s=new RegExp(i+"[^;]+;?","g");return e.attr("style",function(t,e){e&&e.replace(s,"")})},setDropDownDirection:function e(){t(window).height()-(this.$field.offset().top-t(window).scrollTop()+this.$field.outerHeight())<=this.$suggsListEl.outerHeight()?this.$suggsListEl.css({top:"initial",bottom:"100%"}):this.$suggsListEl.css({top:"100%",bottom:"initial"})},showSuggsDropDown:function t(){window.clearInterval(this.hideDropTimer),this.setDropDownDirection(),this.$suggsListEl.css("visibility","")},hideSuggsDropDown:function e(i){window.clearInterval(this.hideDropTimer),this.hideDropTimer=setTimeout(t.proxy(function(){this.$suggsListEl.css("visibility","hidden")},this),i?0:250)},isBgColorDark:function t(e){var i=!0,s=null,n=null;if(-1!==e.indexOf("rgb(")||-1!==e.indexOf("rgba(")){e=e.replace("rgb(","").replace("rgba(","").replace(")",""),s=e.split(","),s.forEach(function(t,e,i){i[e]=parseFloat(t)}),n={r:s[0],g:s[1],b:s[2],a:s[3]};i=!((n.r+n.g+n.b)/765<.5),0===n.a&&void 0!==n.a&&(i=!0)}return i},getDefaultStyle:function t(e,i){var s=e.parentNode,n=getComputedStyle(e),o;return s.style.display="none",o=n.getPropertyValue(i),s.style.removeProperty("display"),o}},t.fn[s]=function(e){return this.each(function(){t.data(this,"yz_"+s)||t.data(this,"yz_"+s,new i(this,e))})}}),sumo.define("es6!services/scrollbox/index",["jquery","lib/sumome/sumolist/formsync","JSON","postscribe","pixel-helpers","jquery.cookie","countries","plugins/text!scrollbox/templates/email_popup.html","scrollbox/fields","sumocountdown","twitter-widgets","articles","jquery.style","jquery.displayrules","jquery.iframe-tracker","jquery.email-autocomplete"],function(t,e,i,s,n,o,r,a,l,c,u,h){var d="13359558-e447-43f3-a3cd-aa61c0b91c02",m=function e(i,s,n){var o=s.settings;if(n=n||0,"post"===o.subscribe_redirect_method){var r=t("<form />").attr("method","post").attr("action",o.subscribe_redirect_url);if(o.subscribe_redirect_variable){var a=t("<input />").attr("type","text").attr("name",o.subscribe_redirect_variable).val(i);r.append(a)}t(document.body).append(r),setTimeout(function(){r.trigger("submit")},n)}else if("get"===o.subscribe_redirect_method){var l=o.subscribe_redirect_url;if(o.subscribe_redirect_variable&&i){var c={};l.indexOf("?")>0?l+="&":l+="?",c[o.subscribe_redirect_variable]=i,l+=t.param(c)}setTimeout(function(){window.location=l,s.continueContent(i)},n)}else setTimeout(function(){window.location=o.subscribe_redirect_url,s.continueContent(i)},n)},p=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;return{hasShown:!1,settings:{},cookieName:"__smScrollBoxShown",subCookieName:"__smSubscribed",ctaCookieName:"__smClicked",optOutCookieName:"__smScrollBoxOptOut",$scrollbox:null,transparentPng_id:"0000000000000000000000000000000000000000000000000000000000000000",transparentPng:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=",iosKeyboardOpen:!1,lastScrollPos:null,getSumoBadge:function t(e,i){var s="";switch(i){case"top":s="bottom: -40px";break;case"bottom":s="top: -40px";break;default:s="bottom: -40px"}
return'<div><a class="powered-by-sumo" style="'+s+'" href="'+e+'" target="_blank"><p>POWERED BY</p><div class="sumo-logo"><?xml version="1.0" encoding="utf-8 "?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 515.7 93.8" style="enable-background:new 0 0 515.7 93.8;" xml:space="preserve"><style type="text/css">.st0{fill:#0F74B5;}.st1{opacity:0.2;fill:#041D2D;}.st2{fill:#000000;}</style><g><g><g><g><path class="st0" d="M19.1,89.7h124.2l18.7-70c0.7-2.5-2.2-4.5-4.3-2.9l-39.5,29.6L83.3,1c-1.1-1.4-3.3-1.3-4.3,0.1L45,46.5L4.4,16.7c-2.1-1.5-5,0.4-4.3,2.9L19.1,89.7z"/></g></g><path class="st1" d="M161.4,21.7c-12.9,46.4-62.6,68-142.4,68l0,0h70h54.2L161.4,21.7L161.4,21.7z"/></g><g><path class="st2" d="M199.1,27.2c0-5.9,4.8-10.6,13.4-10.6c9.5,0,13.9,5.9,16.1,10.1l12.7-5.1C238.9,15.6,231,4,212.7,4c-17.8,0-28.9,9.9-28.9,23.4c0,27.8,43.4,23.7,43.4,42c0,7.3-5.8,11.6-14.5,11.6s-14-4.1-17.1-8.9c-0.8-1.5-1.3-3-1.7-4.5c-0.4-1.8-0.6-3.6-0.6-5.3l-14,0.1c0,6,0.7,9.5,1.5,11.9l0,0c0,0.1,0,0.1,0.1,0.2c0.2,0.6,0.5,1.1,0.7,1.6c0.6,1.4,1.4,2.8,2.4,4.3c0.1,0.2,0.2,0.3,0.3,0.5c1.3,1.9,3,3.8,5.1,5.5l0.1,0.1l0,0c5,4.1,12.2,7.4,22.4,7.4c19,0,30.7-10.9,30.7-25.3C242.8,41.2,199.1,44.2,199.1,27.2z"/><polygon class="st2" points="333.5,4 333.5,92.1 347.2,92.1 345.9,40.9 376.9,79 408,40.9 406.6,92.1 420.4,92.1 420.4,4 376.9,59.1"/><path class="st2" d="M473,4c-24.8,0-42.8,19.5-42.8,44.9c0,25.6,17.9,44.9,42.7,44.9c24.9,0,42.8-19.4,42.8-44.9C515.7,23.6,497.8,4,473,4zM473,80.8c-16.7,0-29.1-13.5-29.1-32c0-18.3,12.3-32,29.1-32c16.6,0,29.1,13.7,29.1,32C502.1,67.4,489.6,80.8,473,80.8z"/><path class="st2" d="M251.4,60.9V7h14.3v53.8c0,12.5,7.2,19.9,20.6,19.9c13.3,0,20.6-7.5,20.6-20.1V7h14.2v53.8c0,19.3-12.9,33-34.8,33C263.8,93.8,251.4,80.6,251.4,60.9z"/></g></g></svg></div><div class="clear"></div></a></div>'},load:function e(){var i=window.location.toString().toLowerCase(),s=Math.min(window.screen.availWidth||t(window).width(),t(window).width()),n=h.findAll(),o=Object.keys(t.cookie());t.ajax({type:"POST",dataType:"json",url:this.api.properties.sumoUrl+"/apps/scrollbox/load",data:{site_id:this.api.properties.siteId,geoLocation:this.api.properties.geoLocation,pageViews:this.api.properties.views,location:i,width:s,articles:n.length,cookie_names:o,referrer:document.referrer,userAgent:navigator.userAgent},xhrFields:{withCredentials:!1},crossDomain:!0}).done(t.proxy(function(e){if(e&&"success"in e&&e.success){var i=!0;if(this.settings.reflink="https://sumo.com/?src=sm-sb-"+this.api.properties.siteId+"&utm_source=sumo-powered-by&utm_medium=scroll-box&utm_campaign="+this.api.properties.siteId,this.settings.ctry=!(!this.api.properties.geoLocation||!this.api.properties.geoLocation.ctry)&&this.api.properties.geoLocation.ctry,this.settings.views=this.api.properties.views?this.api.properties.views:1,e.possiblePopups&&!0!==e.possiblePopups&&e.possiblePopups.length){var s=[];if(e.possiblePopups.forEach(t.proxy(function(e){e.displayRules&&!t.isCurrentUrlAllowed(e.displayRules,null,this.settings.ctry,this.settings.views)||s.push(e)},this)),e.displayRules&&!t.isCurrentUrlAllowed(e.displayRules,null,this.settings.ctry,this.settings.views)||s.push(e),s&&s.length){var n=function t(e,i){return Math.floor(Math.random()*(i-e)+e)},o=n(0,s.length);t.extend(e,s[o])}else i=!1}else e.possiblePopups&&e.displayRules&&!t.isCurrentUrlAllowed(e.displayRules,null,this.settings.ctry,this.settings.views)&&(i=!1);t.extend(this.settings,e);var r=!1;this.settings.ignore_cookie?r=t.cookie(this.cookieName)&&"true"===t.cookie(this.cookieName):"always"==this.settings.cookie_lifetime_interval?"email"==this.settings.box_mode?r=t.cookie(this.subCookieName)&&"true"===t.cookie(this.subCookieName):"cta"==this.settings.box_mode&&(r=t.cookie(this.ctaCookieName)&&"true"===t.cookie(this.ctaCookieName)):r="email"==this.settings.box_mode?t.cookie(this.subCookieName)&&"true"===t.cookie(this.subCookieName)||t.cookie(this.cookieName)&&"true"===t.cookie(this.cookieName):"cta"==this.settings.box_mode?t.cookie(this.ctaCookieName)&&"true"===t.cookie(this.ctaCookieName)||t.cookie(this.cookieName)&&"true"===t.cookie(this.cookieName):t.cookie(this.cookieName)&&"true"===t.cookie(this.cookieName),this.settings.optout_cookie&&t.cookie(this.optOutCookieName)&&"true"===t.cookie(this.optOutCookieName)&&(r=!0),i&&!r&&this.install()}},this))},install:function e(){t(window).bind("scroll.scrollbox",t.proxy(function(e){var i=t(window).height(),s=t(document).height(),n=t(window).scrollTop(),o=s-i,r=n/o;r=Math.max(0,r),r=Math.min(1,r),r>=Math.min(100,Math.max(0,this.settings.trigger_percent/100))&&this.show()},this)),t(window).bind("resize.scrollbox",t.proxy(function(t){this.resize()},this))},resize:function t(){if(this.$scrollbox){var e=this.$scrollbox.find(".sumome-scrollbox-content").eq(0);if(e){var i="small",s=e.innerWidth();i=s>=1440?"xxlarge":s>=1080?"xlarge":s>=768?"large":s>=480?"medium":"small";var n="sumome-scrollbox-res-"+i;e.hasClass(n)||e.removeClass("sumome-scrollbox-res-small sumome-scrollbox-res-medium sumome-scrollbox-res-large sumome-scrollbox-res-xlarge sumome-scrollbox-res-xxlarge").addClass(n)}}},shadeColor:function t(e,i){e=e.toString();var s=parseInt(e.slice(1),16),n=Math.round(2.55*i),o=(s>>16)+n,r=(s>>8&255)+n,a=(255&s)+n;return"#"+(16777216+65536*(o<255?o<1?0:o:255)+256*(r<255?r<1?0:r:255)+(a<255?a<1?0:a:255)).toString(16).slice(1)},show:function e(o,c,u){var h=this,m=this;if(this.api||(this.api=u),(!(this.hasShown||this.settings.yield&&this.api.properties.yield)||c)&&(this.$scrollbox&&this.close(!0),"show_position"in(o=o||this.settings))){if(!c){var f=Math.min(window.screen.availWidth||t(window).width(),t(window).width());if(!t.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views))return}if(!c){if(this.hasShown=!0,-1!==o.cookie_lifetime){var g=new Date;switch(o.cookie_lifetime_interval){case"minute":g.setMinutes(g.getMinutes()+this.settings.cookie_lifetime);break;case"hour":g.setHours(g.getHours()+this.settings.cookie_lifetime);break;case"day":g.setDate(g.getDate()+this.settings.cookie_lifetime);break;case"month":g.setMonth(g.getMonth()+this.settings.cookie_lifetime);break;case"year":g.setFullYear(g.getFullYear()+this.settings.cookie_lifetime);break;case"always":g.setMinutes(g.getMinutes())}t.cookie(this.cookieName,"always"!==o.cookie_lifetime,{expires:g,path:"/"})}o.advanced_form?(this.api.emit("event",{appId:d,event:"popup-advanced"}),this.api.emit("event",{appId:d+"."+this.settings.id,event:"popup-advanced"}),this.api.emit("event",{appId:d+"."+this.settings.campaign_id,event:"popup-advanced"}),this.api.emit("event",{appId:d+"."+this.settings.id+"."+this.settings.campaign_id,event:"popup-advanced"})):(this.api.emit("event",{appId:d,event:"email"==this.settings.box_mode?"popup":this.settings.box_mode}),this.api.emit("event",{appId:d+"."+this.settings.id,event:"email"==this.settings.box_mode?"popup":this.settings.box_mode}),this.api.emit("event",{appId:d+"."+this.settings.campaign_id,event:"email"==this.settings.box_mode?"popup":this.settings.box_mode}),this.api.emit("event",{appId:d+"."+this.settings.id+"."+this.settings.campaign_id,event:"email"==this.settings.box_mode?"popup":this.settings.box_mode})),this.api.emit("setProperties",{yield:!0})}var v=o.show_position.split("-"),b=v[0],y=v[1];if(this.$scrollbox=t("<div />").addClass("sumome-scrollbox-popup").addClass("sumome-scrollbox-"+b).addClass("sumome-scrollbox-"+y).addClass("sumome-scrollbox-"+o.content_width).addClass("sumome-res-medium").data("sumome-scrollbox-config",o),this.$scrollbox.hide(),this.$scrollbox.css({left:"-10000px",top:"-10000px"}),o.advanced_form)this.$scrollbox.style("background-color",o.modal_color,"important"),t("<div />").addClass("sumome-scrollbox-content").html(o.advanced_form).appendTo(this.$scrollbox).css({padding:"1em"}),t('<a href="javascript:void(0);" />').addClass("sumome-scrollbox-close").appendTo(this.$scrollbox);else{var w,x,_,k,C,S,T,o,E,$,I,P,O,A,L,B,D,N,M,R,z,U;!function(){var e=function t(e){return e.replace(/\W+/g,"_").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()};o.scrollBoxTemplate?h.$scrollbox.style("background-color","transparent","important"):(o.scrollBoxTemplate={slug:"default",html:a},h.$scrollbox.style("background-color",o.modal_color,"important")),w=o.scrollBoxTemplate.html.replace(/\/\/load.(dev.)?sumo(me)?.com\/client\//g,h.api.properties.baseUrl),x=w.match(/\{sm\:.*?\}/g),x&&(_=[],x.forEach(t.proxy(function(t){var i=t.replace(/([\{\}]|sm\:)/g,""),s=i.split("|");if(s.length>1){var n=s[1].split(":");w=w.replace(t,this.shadeColor(o[e(s[0])],parseInt(n[1])))}else if("backgroundImage"==i)w=o.media_id===this.transparentPng_id?w.replace(t,"background-image: url('"+this.transparentPng+"') !important;"):o.media_id?w.replace(t,"background-image: url('//media.sumo.com/"+o.media_id+"') !important;"):w.replace(t,"");else if("Font"==i.substr(-4)){var r=o[e(i)];if(r){var a=r.split(":"),l=a[0].split(","),c=l.shift(),u=a[1]?a[1]:400;l.unshift("'"+c+"'"),l.length&&(w=w.replace(new RegExp(t,"g"),"font-family: "+l.join(",")+" !important;"),_.push(c.replace(/ /g,"+")+":"+u))}else w=w.replace(t,"")}else w=w.replace(t,o[e(s[0])])},h)),_.length&&(_=t.unique(_),w='<link href="//fonts.googleapis.com/css?family='+_.join("|")+'" type="text/css" rel="stylesheet">'+w)),t("<div />").addClass("sumome-scrollbox-content sumome-scrollbox-template-"+o.scrollBoxTemplate.slug).html(w).appendTo(h.$scrollbox),h.$scrollbox.find(".sumome-scrollbox-modal-bg").style("background-color",o.modal_color,"important"),o.noSumoBranding||(k="https://sumo.com/?src=sm-sb-"+o.site_id+"&utm_source=sumo-powered-by&utm_medium=scroll-box&utm_campaign="+o.site_id,C=["56696fd2-9edf-473f-9aba-a952a5723fb7"],S=C[0],T="powered-by-click:"+d+":"+S,o=h.$scrollbox.data("sumome-scrollbox-config"),E=o.show_position.split("-")[0],$=t(h.getSumoBadge(k,E)),I=h.$scrollbox.find(".sumome-scrollbox-content"),setTimeout(t.proxy(function(){I.append($);var t=$.find("p"),e=I.outerWidth();t&&e<=395&&t.css("display","none")},h),1400),$.on("click",t.proxy(function(t){this.api.emit("event",{appId:"2d1fffc9-378f-4b61-ac79-2dc8a077b827",event:T})},h))),h.findAndStyleElements(o),h.$headingEl.html(o.heading_text),h.$textEl.html(o.blurb_text),h.setTimer(o),h.$buttonTextEl.text(o.button_text),h.$inputEl.attr("placeholder",o.placeholder_text),P=h.$scrollbox.find(".sumome-scrollbox-field-template"),0==P.length&&(P=null),h.$inputEl=h.$scrollbox.find(".sumome-scrollbox-input").filter(":last"),O={input:h.$scrollbox.find(".sumome-scrollbox-input").filter(":last"),checkbox:h.$scrollbox.find(".sumome-scrollbox-checkbox"),radio:h.$scrollbox.find(".sumome-scrollbox-radio"),radio_header:h.$scrollbox.find(".sumome-scrollbox-radio-header"),checkbox_header:h.$scrollbox.find(".sumome-scrollbox-checkbox-header"),select:h.$scrollbox.find(".sumome-scrollbox-select")},O.radio.length<1&&(O.radio=t('<label class="sumome-scrollbox-radio"><input type="radio" /> Click me</label>')),O.radio_header.length<1&&(O.radio_header=t('<label class="sumome-scrollbox-radio-header">Select one</label>')),O.checkbox_header.length<1&&(O.checkbox_header=t('<label class="sumome-scrollbox-checkbox-header">Select one</label>')),O.checkbox.length<1&&(O.checkbox=t('<label class="sumome-scrollbox-checkbox"><input type="checkbox" /> Click me</label>')),O.select.length<1&&(O.select=t('<select style="padding-top: 0 !important; padding-bottom: 0 !important;" class="sumome-scrollbox-select"><option value="" disabled selected>Select an option</option></select>')),"email"==o.box_mode&&(A=l,L=P||h.$inputEl,B=[],L.removeClass("sumome-scrollbox-field-template"),L.removeProp("id"),D=null,N=0,o.fields.forEach(t.proxy(function(e,s,n){var o=this.getVariableName(e.field_name,e.field_variable);switch(N++,e.field_type){case"select":case"country":if(M=O.select.clone(),"country"==e.field_type)r.forEach(function(e){M.append(t("<option />").val(e).text(e))});else try{var a=i.parse(e.field_data);t.isArray(a)&&a.forEach(function(e){e.hasOwnProperty("value")&&e.hasOwnProperty("name")&&M.append(t("<option />").prop("value",e.value).text(e.name))})}catch(t){}M.prop("name",o),M.data("sumome-field-name",e.field_name),M.data("sumome-field-type",e.field_type),M.find('option[value=""]').text(e.field_placeholder?e.field_placeholder:"Choose a "+e.field_name),e.required&&M.prop("required",!0),M.addClass("sumome-scrollbox-select-placeholder"),L.before(M),M.on("change",function(){t(this).val()?t(this).removeClass("sumome-scrollbox-select-placeholder"):t(this).addClass("sumome-scrollbox-select-placeholder")});break;case"checkbox":M=O.checkbox.clone(),M.find("input").prop("name",o),M.find("input").prop("value",e.field_data),M.find("input").data("sumome-field-name",e.field_name),M.find("input").data("sumome-field-type",e.field_type),M.contents().filter(function(){return 3===this.nodeType&&""!=t.trim(this.textContent)})[0].textContent=" "+(e.field_placeholder?e.field_placeholder:e.field_name),e.required&&M.find("input").prop("required",!0),L.before(M);break;case"radio":M=O.radio_header.clone(),M.text(e.field_placeholder?e.field_placeholder:"Choose a "+e.field_name),L.before(M);try{var a=i.parse(e.field_data);t.isArray(a)&&a.forEach(function(i){N++,M=O.radio.clone(),M.find("input").prop("name",o),M.find("input").prop("value",i.value),M.find("input").data("sumome-field-name",e.field_name),M.find("input").data("sumome-field-type",e.field_type),e.required&&M.find("input").prop("required",!0),M.contents().filter(function(){return 3===this.nodeType&&""!=t.trim(this.textContent)})[0].textContent=" "+i.name,L.before(M)})}catch(t){}break;case"checkbox_group":M=O.checkbox_header.clone(),M.text(e.field_placeholder?e.field_placeholder:"Choose a "+e.field_name),L.before(M);try{var a=i.parse(e.field_data);t.isArray(a)&&a.forEach(function(i){N++,M=O.checkbox.clone(),M.find("input").prop("name",o),M.find("input").prop("value",i.value),M.find("input").data("sumome-field-name",e.field_name),M.find("input").data("sumome-field-type",e.field_type),e.required&&M.find("input").prop("required",!0),M.contents().filter(function(){return 3===this.nodeType&&""!=t.trim(this.textContent)})[0].textContent=" "+i.name,L.before(M)})}catch(t){}break;case"hidden":return $hiddenEl=t('<input type="hidden" />'),L.before($hiddenEl),$hiddenEl.addClass("sumome-scrollbox-hidden"),$hiddenEl.prop("name",o),$hiddenEl.prop("value",e.field_data),$hiddenEl.data("sumome-field-name",e.field_name),$hiddenEl.data("sumome-field-type",e.field_type),void N--;default:M=L.clone(),L.before(M),M.prop("placeholder",e.field_placeholder?e.field_placeholder:"Enter your "+e.field_name),M.prop("name",o),M.data("sumome-field-name",e.field_name),M.data("sumome-field-type",e.field_type),e.required&&M.prop("required",!0),M.addClass("sumome-scrollbox-input").show()}D=e},h)),M&&D&&(M.addClass("sumome-scrollbox-last"),R=D.field_type,"country"==R?R="select":"checkbox_group"==R?R="checkbox":["radio","checkbox","select"].indexOf(R)<0&&(R="input"),h.$buttonEl.addClass("sumome-scrollbox-last-"+R)),N>1&&h.$buttonEl.addClass("sumome-scrollbox-multiple-fields")),P&&P.remove();for(z in O)O[z].remove();h.$inputEl.remove(),h.$inputEl=h.$scrollbox.find(".sumome-scrollbox-input, .sumome-scrollbox-hidden, .sumome-scrollbox-select, .sumome-scrollbox-checkbox input, .sumome-scrollbox-radio input"),o.disclaimer&&(h.$disclaimerLabelEl=t('<label class="sumome-scrollbox-checkbox"><input type="checkbox" /></label>'),h.$disclaimerLabelEl.addClass("sumome-scrollbox-disclaimer"),h.$disclaimerLabelEl.find("input").prop("name","DISCLAIMER"),h.$disclaimerLabelEl.append(" "+o.disclaimer_text),U=h.$scrollbox.find(".sumome-scrollbox-disclaimer-wrapper"),U.length>0?(U.css("display",""),t(U).append(h.$disclaimerLabelEl)):h.$buttonEl.before(h.$disclaimerLabelEl))}()}this.$scrollbox.find(".sumome-scrollbox-close").on("click",t.proxy(function(){this.setOptOutCookie(),this.close()},this)),this.$scrollbox.appendTo(t(document.body)),o.media_id===this.transparentPng_id?this.$scrollbox.find(".sumome-scrollbox-media").attr("src",this.transparentPng).show():o.media_id?this.$scrollbox.find(".sumome-scrollbox-media").attr("src","//media.sumo.com/"+o.media_id).show():this.$scrollbox.find(".sumome-scrollbox-media").each(function(){t(this).attr("src",t(this).data("preview-src")).show()}),this.resize(),this.findAndStyleElements(),c||o.advanced_form||("email"==o.box_mode?(this.$buttonEl.prop("disabled","disabled"),this.$inputEl.filter('[name="email"]').emailautocomplete({}),this.$inputEl.on("keyup change paste",t.proxy(function(e){var i=!1;this.$inputEl.filter("input[type=text], select").each(function(){var e=t(this).prop("required"),s=t.trim(t(this).val());if(e&&!s)return i=t(this),!1}),this.$inputEl.filter("[type=radio][required]").each(function(){var e=t(this).prop("name");if(!(t(this).closest(".sumome-scrollbox-form").find("[name="+e+"][type=radio][required]").filter(":checked").length>0))return i=t(this),!1}),i&&i.length?this.$buttonEl.prop("disabled","disabled"):this.$buttonEl.prop("disabled",!1)},this)),this.$inputEl.on("keydown",t.proxy(function(t){13===t.keyCode&&(this.$buttonEl.trigger("click"),t.preventDefault())},this)),p&&(this.$inputEl.on("focus",t.proxy(this.iosKeyboardOpenedEvent,this)),this.$inputEl.on("blur",t.proxy(this.iosKeyboardClosedEvent,this)),t(window).bind("scroll",t.proxy(this.iosKeyboardScrollEvent,this))),this.$buttonEl.on("click",t.proxy(function(){if(!this.$buttonEl.is(":disabled")){var e=/\S+@\S+\.\S/,i=!1,s=this.$inputEl.filter('[name="email"]').val().trim(),n={},o=this.$scrollbox.find(".sumome-scrollbox-input, .sumome-scrollbox-hidden, .sumome-scrollbox-select, .sumome-scrollbox-checkbox input, .sumome-scrollbox-radio input");if(o.each(t.proxy(function(e,s){var r=t(s).prop("name"),a=t(s).data("sumome-field-name"),l=t(s).data("sumome-field-type"),c=t(s).prop("required"),u=t.trim(t(s).val());if(r&&a)if(t(s).is("[type=radio]")||t(s).is("[type=checkbox]")){if(t(s).is(":checked"))n[r]={name:a,type:l,value:u};else if(t(s).attr("required")){var h=o.filter('[name="'+r+'"]:checked');h&&h.length||(i=t(s))}}else if(n[r]={name:a,type:l,value:u},c&&!u)return i=t(s),!1},this)),o.filter("[type=radio][required]").each(function(){var e=t(this).prop("name");if(!n.hasOwnProperty(e))return i=t(this),!1}),!i&&this.$disclaimerLabelEl){var r=this.$disclaimerLabelEl.find("input[type=checkbox]").eq(0);r&&!r.prop("checked")&&(i=this.$disclaimerLabelEl)}i?i.focus():(p&&this.iosKeyboardOpen&&this.iosKeyboardClosedEvent(),this.logEmail(n))}},this))):"cta"==o.box_mode?m.$buttonEl.on("click",function(){function e(){if(!o.cta_url)return void m.close();"new"===o.cta_target?(window.open(o.cta_url,"_blank"),m.close()):setTimeout(function(){window.location=o.cta_url},1e3)}m.api.emit("event",{appId:d,event:"click"}),m.api.emit("event",{appId:d+"."+o.id,event:"click"}),m.api.emit("event",{appId:d+"."+o.campaign_id,event:"click"}),m.api.emit("event",{appId:d+"."+o.id+"."+o.campaign_id,event:"click"});var i=new Date;if(i.setFullYear(i.getFullYear()+10),t.cookie(m.ctaCookieName,!0,{expires:i,path:"/"}),o.hasTrackingPixels&&o.pixels_conversion){var r=t('<div style="position:absolute !important;width:0 !important;height:0 !important;top:0px !important;left:0px !important;margin:0 !important;padding:0 !important;font-size:0 !important;background:transparent !important;"></div>'),a=n.injectVars(o.pixels_conversion,{"subscriber-email":""});t("body").append(r),s.postscribe(r.get(0),a,{done:e})}else e()}):"facebook-like"===o.box_mode?(m.$socialEl=m.$scrollbox.find(".sumome-scrollbox-social"),m.$socialEl.iframeTracker({blurCallback:function t(){m.$socialEl.data("sumome-disabled")||(m.$socialEl.data("sumome-disabled",!0),m.api.emit("event",{appId:d,event:"click"}),m.api.emit("event",{appId:d+"."+o.id,event:"click"}),m.api.emit("event",{appId:d+"."+o.campaign_id,event:"click"}),m.api.emit("event",{appId:d+"."+o.id+"."+o.campaign_id,event:"click"}))}})):"pinterest-follow"===o.box_mode&&m.$scrollbox.on("click.pinterest",'span[data-pin-log="button_follow"]',function(){var e=t(this);e.data("sumome-disabled")||(e.data("sumome-disabled",!0),m.api.emit("event",{appId:d,event:"click"}),m.api.emit("event",{appId:d+"."+o.id,event:"click"}),m.api.emit("event",{appId:d+"."+o.campaign_id,event:"click"}),m.api.emit("event",{appId:d+"."+o.id+"."+o.campaign_id,event:"click"}))}));var j=this.$scrollbox.outerHeight(),f=this.$scrollbox.outerWidth(),F={},H={};switch(b){case"top":F.top="in"==o.slide_direction?"0px":"-"+j+"px",H.top="0px";break;case"bottom":F.bottom="in"==o.slide_direction?"0px":"-"+j+"px",H.bottom="0px"}switch(y){case"left":F.left="up"==o.slide_direction?"0px":"-"+f+"px",H.left="0px";break;case"right":F.right="up"==o.slide_direction?"0px":"-"+f+"px",H.right="0px"}if(this.$scrollbox.css({top:"",left:""}),this.$scrollbox.css(F),this.$scrollbox.show(),this.$scrollbox.animate(H),this.resize(),this.$inputEl&&this.$inputEl.eq(0).focus(),o.hasTrackingPixels&&o.pixels_shown){var q=t('<div style="position:absolute !important;width:0 !important;height:0 !important;top:0px !important;left:0px !important;margin:0 !important;padding:0 !important;font-size:0 !important;background:transparent !important;"></div>');t("body").append(q),s.postscribe(q.get(0),o.pixels_shown)}}},logEmail:function o(r){"string"==typeof r&&(r={email:r});var a="string"==typeof r.email?r.email:r.email.value,l=null;this.settings.form_sync&&(l=new e(this.settings.form_sync,this.settings.fields),l.install(r)),this.$buttonEl.prop("disabled","disabled"),t.ajax({type:"POST",dataType:"json",url:this.api.properties.sumoUrl+"/list/subscribe",data:{site_id:this.api.properties.siteId,visitor_id:this.api.properties.visitorId,app_id:d,popup_id:this.settings.id,object_id:this.settings.id+","+this.settings.campaign_id,sumolist_id:this.settings.campaign_id,href:window.location.href,ref:document.referrer||null,fields:i.stringify(r)},xhrFields:{withCredentials:!1},crossDomain:!0}).done(t.proxy(function(e){if(e&&"success"in e&&e.success){this.api.emit("event",{appId:d,event:"subscribe"}),this.api.emit("event",{appId:d+"."+this.settings.id,event:"subscribe"}),this.api.emit("event",{appId:d+"."+this.settings.campaign_id,event:"subscribe"}),this.api.emit("event",{appId:d+"."+this.settings.id+"."+this.settings.campaign_id,event:"subscribe"});var i=new Date;i.setFullYear(i.getFullYear()+10),t.cookie(this.subCookieName,!0,{expires:i,path:"/"});var o=t.proxy(function(){l&&l.submit(),this.settings.subscribe_redirect_url&&this.settings.skip_success_popup?m(a,this,1e3):this.continueContent(a)},this);if(this.settings.hasTrackingPixels&&this.settings.pixels_conversion){var r=t('<div style="position:absolute !important;width:0 !important;height:0 !important;top:0px !important;left:0px !important;margin:0 !important;padding:0 !important;font-size:0 !important;background:transparent !important;"></div>'),c=n.injectVars(this.settings.pixels_conversion,{"subscriber-email":a});t("body").append(r),s.postscribe(r.get(0),c,{done:o})}else o()}else e&&"error"in e?(this.$errorEl.text(e.error).show(),setTimeout(t.proxy(function(){this.$buttonEl.prop("disabled",!1)},this),1e3)):this.close()},this))},continueContent:function e(i){this.continueMode=!0,this.$scrollbox.find(".sumome-scrollbox-select, .sumome-scrollbox-input, .sumome-scrollbox-radio, .sumome-scrollbox-checkbox, .sumome-scrollbox-radio-header, .sumome-scrollbox-checkbox-header").remove(),this.$buttonEl.remove(),this.$continueButtonTextEl.text(this.settings.continue_button_text),this.$continueButtonEl.show(),this.findAndStyleElements(),this.$headingEl.text(this.settings.continue_heading_text),this.$textEl.html(this.settings.continue_blurb_text),this.$continueButtonEl.on("click",t.proxy(function(){this.settings.subscribe_redirect_url&&!this.settings.skip_success_popup?m(i,this,0):this.close()},this)),setTimeout(t.proxy(function(){this.settings.subscribe_redirect_url&&!this.settings.skip_success_popup?m(i,this,0):this.$continueButtonEl.trigger("click")},this),1e4)},getVariableName:function t(e,i){return i||(i=e.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"")),i},findAndStyleElements:function e(i){var i=i||this.settings;if(!t.isEmptyObject(i)){this.$headingEl=this.$scrollbox.find(".sumome-scrollbox-heading"),this.$headingEl.style("color",i.heading_color,"important"),this.$textEl=this.$scrollbox.find(".sumome-scrollbox-text"),this.$textEl.style("color",i.text_color,"important"),this.$inputEl=this.$scrollbox.find(".sumome-scrollbox-input"),this.$selectEl=this.$scrollbox.find(".sumome-scrollbox-select"),this.$buttonEl=this.$scrollbox.find(".sumome-scrollbox-button"),this.$buttonBgEl=this.$scrollbox.find(".sumome-scrollbox-button-bg"),this.$buttonTextEl=this.$scrollbox.find(".sumome-scrollbox-button-text"),this.$continueButtonEl=this.$scrollbox.find(".sumome-scrollbox-continue"),this.$continueButtonBgEl=this.$scrollbox.find(".sumome-scrollbox-continue-bg"),this.$continueButtonTextEl=this.$scrollbox.find(".sumome-scrollbox-continue-text"),this.$linkEl=this.$scrollbox.find(".sumome-scrollbox-link"),this.$linkEl.style("color",i.text_color,"important"),this.$errorEl=this.$scrollbox.find(".sumome-scrollbox-form div.sumome-scrollbox-error").hide(),this.$buttonBgEl.style("background-color",i.button_back_color,"important"),this.$buttonBgEl.style("border-bottom-color",this.shadeColor(i.button_back_color,-10),"important"),this.$buttonTextEl.style("color",i.button_fore_color,"important"),this.$continueButtonBgEl.style("background-color",i.button_back_color,"important"),this.$continueButtonBgEl.style("border-bottom-color",this.shadeColor(i.button_back_color,-10),"important"),this.$continueButtonTextEl.style("color",i.button_fore_color,"important"),this.$scrollbox.find(".sumome-scrollbox-close").style("color",i.text_color,"important"),this.$selectEl.each(function(e,i){t(i).css("line-height",t(i).css("height"))});var s=t('<div class="sumome-scrollbox-social-wrapper"></div>');if(this.$scrollbox.find(".sumome-scrollbox-social-wrapper").remove(),"twitter-follow"===i.box_mode)this.$buttonEl.hide(),this.$buttonEl.parent().append(s),u.followButton(i.twitter_username?i.twitter_username:"SumoMe",s[0],t.proxy(function(e){this.$socialEl=t(e),this.$socialEl.iframeTracker({blurCallback:t.proxy(function t(){this.$socialEl.data("sumome-disabled")||(this.$socialEl.data("sumome-disabled",!0),this.api.emit("event",{appId:d,event:"click"}),this.api.emit("event",{appId:d+"."+i.id,event:"click"}),this.api.emit("event",{appId:d+"."+i.campaign_id,event:"click"}),this.api.emit("event",{appId:d+"."+i.id+"."+i.campaign_id,event:"click"}))},this)})},this));else if("facebook-like"===i.box_mode)s.append('<iframe class="sumome-scrollbox-social" src="//www.facebook.com/plugins/like.php?href='+encodeURIComponent(i.facebook_like_url?i.facebook_like_url:"https://www.facebook.com/sumo")+'&width=300&layout=button_count&action=like&show_faces=false&share=false&height=20&appId=859406404089021" sumome-facebook-social" scrolling="no" frameborder="0" width="80" height="20" style="border:none;overflow:hidden;" allowTransparency="true"></iframe>'),this.$buttonEl.hide().after(s);else if("pinterest-follow"===i.box_mode){s.append('<a style="visibility: hidden;" class="sumome-scrollbox-pinterest-follow-button sumome-scrollbox-social" data-pin-do="buttonFollow" href="https://www.pinterest.com/'+(i.pinterest_username?i.pinterest_username:"Pinterest")+'">'+(i.pinterest_username?i.pinterest_username:"Pinterest")+"</a>"),this.$buttonEl.hide().after(s);var n={load:function e(i){this.get()?i():t.getScript("//assets.pinterest.com/js/pinit.js",i)},get:function t(){for(var e in window)if(0==e.indexOf("PIN_")&&"object"==typeof window[e])return window[e]},isLoaded:function t(){return!!this.get()},render:function t(e){this.isLoaded()&&this.get().f.seek.buttonFollow(e)}};n.load(function(){n.render(s.find(".sumome-scrollbox-pinterest-follow-button")[0])})}this.$templateTimerWrapEl=this.$scrollbox.find(".sumome-scrollbox-countdown-wrapper"),this.$templateTimerWrapEl[0]||(this.$templateTimerWrapEl=null)}},close:function e(i){var s=this.$scrollbox.data("sumome-scrollbox-config"),n=s.show_position.split("-"),o=n[0],r=n[1],a=this.$scrollbox.outerHeight(),l=this.$scrollbox.outerWidth(),c={},u=document.querySelector(".powered-by-sumo");if(u&&(a+=parseFloat(window.getComputedStyle(u).height.match(/\d+/))+10),i)this.$scrollbox.remove(),this.$scrollbox=null,"closeCallback"in s&&s.closeCallback.call(this);else{switch(o){case"top":c.top="in"==s.slide_direction?"0px":"-"+a+"px";break;case"bottom":c.bottom="in"==s.slide_direction?"0px":"-"+a+"px"}switch(r){case"left":c.left="up"==s.slide_direction?"0px":"-"+l+"px";break;case"right":c.right="up"==s.slide_direction?"0px":"-"+l+"px"}this.$scrollbox.off("click.pinterest"),this.$scrollbox.animate(c,t.proxy(function(){this.$scrollbox.remove(),this.$scrollbox=null,"closeCallback"in s&&s.closeCallback.call(this)},this))}},setTimer:function t(e){if(this.$templateTimerWrapEl&&this.$templateTimerWrapEl.css("display","none").html(""),e.hasCountdown&&e.countdown_end){var i=this.$textEl;"heading_text"==e.countdown_pos?(this.$headingEl.show(),i=this.$headingEl):"blurb_text"==e.countdown_pos?i=this.$textEl:"template_default"==e.countdown_pos&&this.$templateTimerWrapEl?(i=this.$templateTimerWrapEl,i.css("display","")):i=this.$textEl,c.create(i,e.countdown_end,e.countdown_format,this.$timerEl)}},setOptOutCookie:function e(){var i=new Date;i.setFullYear(i.getFullYear()+10),t.cookie(this.optOutCookieName,!0,{expires:i,path:"/"})},iosKeyboardOpenedEvent:function t(){var e=this.settings.show_position.split("-"),i=e[0];this.iosKeyboardOpen=!0,this.lastScrollPos=document.body.scrollTop;var s="bottom"==i?document.body.scrollHeight:0;document.body.scrollTop=s,setTimeout(function(){document.body.scrollTop=s},500)},iosKeyboardClosedEvent:function t(){var e=this.settings.show_position.split("-"),i=e[0];this.iosKeyboardOpen=!1,this.lastScrollPos&&(document.body.scrollTop=this.lastScrollPos,this.lastScrollPos=null),"bottom"==i?this.$scrollbox.css({position:"",top:"",bottom:"0px"}):this.$scrollbox.css({position:"",top:"0px",bottom:""})},iosKeyboardScrollEvent:function t(e){if(this.iosKeyboardOpen){var i=this.$scrollbox.offset().top,s=this.$inputEl.offset().top-i,n=document.body.scrollTop,o=n-s,r=n;i<o?(n-=s,n<0&&(n=0),this.$scrollbox.css({position:"absolute",top:n,bottom:""})):i>r&&(n<0&&(n=0),this.$scrollbox.css({position:"absolute",top:n,bottom:""})),1!=this.$inputEl.is(":focus")&&this.iosKeyboardClosedEvent()}}}}),sumo.define("services/services",["jquery","es6!launcher/util/constants","es6!services/highlighter/index","es6!services/contact-form/index","es6!services/content-analytics/index","googleanalytics/trackingcode","es6!services/heatmaps/index","es6!services/image-sharer/index","es6!services/share/index","es6!services/scrollbox/index"],function(t,e,i,s,n,o,r,a,l,c){return function(t){var u=t.properties.services||[];return{init:function h(d,m){if("admin"===t.properties.mode||"manage"===t.properties.mode)return m();if(-1!==u.indexOf(e.HIGHLIGHTER_APP_UUID)&&sumo.require(["plugins/css!../css/highlighter-popup.css"],function(){i.api=t,i.sumoProperties=t.properties,i.initialize()}),-1!==u.indexOf(e.CONTACT_FORM_APP_UUID)&&sumo.require(["plugins/css!../css/sme-contactform-popup.css"],function(){s.api=t,s.sumoProperties=t.properties,s.load()}),-1!==u.indexOf(e.CONTENT_ANALYTICS_APP_UUID)){new n(t).init({},function(){})}if(-1!==u.indexOf(e.GOOGLE_ANALYTICS_APP_ID)&&(o.api=t,o.sumoProperties=t.properties,o.initialize()),-1!==u.indexOf(e.HEAT_MAPS_APP_UUID)){new r(t).init({},function(){})}-1!==u.indexOf(e.IMAGE_SHARER_APP_UUID)&&sumo.require(["plugins/css!../css/sumome-image-sharer.css"],function(){a.api=t,a.sumoProperties=t.properties,a.init()}),-1!==u.indexOf(e.SHARE_APP_UUID)&&sumo.require(["plugins/css!../css/sumome-share-client.css"],function(){l.api=t,l.initialize()}),
-1!==u.indexOf(e.SCROLL_BOX_APP_UUID)&&sumo.require(["plugins/css!../css/sumome-scrollbox-popup.css"],function(){c.api=t,c.load()}),m()},destroy:function t(e){e()}}}}),sumo.define("services/services",function(){})}(void 0,void 0);